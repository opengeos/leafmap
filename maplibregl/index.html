
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python package for interactive mapping and geospatial analysis with minimal coding in a Jupyter environment">
      
      
        <meta name="author" content="Qiusheng Wu">
      
      
        <link rel="canonical" href="https://leafmap.org/maplibregl/">
      
      
        <link rel="prev" href="../kepler/">
      
      
        <link rel="next" href="../leafmap/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>maplibregl module - leafmap</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-B1C88N45QG"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-B1C88N45QG",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-B1C88N45QG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#maplibregl-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="leafmap" class="md-header__button md-logo" aria-label="leafmap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            leafmap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              maplibregl module
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/opengeos/leafmap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="leafmap" class="md-nav__button md-logo" aria-label="leafmap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    leafmap
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opengeos/leafmap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://book.leafmap.org" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Book
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_key_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://huggingface.co/spaces/giswqs/solara-geospatial" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web App
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://youtube.com/@giswqs" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YouTube Channel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/opengeos/leafmap/issues" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Report Issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" checked>
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basemaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    basemaps module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bokehmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bokehmap module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../colormaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    colormaps module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    common module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deck module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deckgl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deckgl module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    download module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    examples module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../foliumap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    foliumap module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kepler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kepler module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    maplibregl module
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    maplibregl module
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl" class="md-nav__link">
    <span class="md-ellipsis">
      maplibregl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.add_to_map_container" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_map_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.add_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.create_map" class="md-nav__link">
    <span class="md-ellipsis">
      create_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.remove_from_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.set_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.set_sidebar_width" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.toggle_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.update_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      update_sidebar_content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget" class="md-nav__link">
    <span class="md-ellipsis">
      CustomWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CustomWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.expanded" class="md-nav__link">
    <span class="md-ellipsis">
      expanded
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.add_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.remove_widget" class="md-nav__link">
    <span class="md-ellipsis">
      remove_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.set_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      set_widgets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.DateFilterWidget" class="md-nav__link">
    <span class="md-ellipsis">
      DateFilterWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DateFilterWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.DateFilterWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget" class="md-nav__link">
    <span class="md-ellipsis">
      LayerManagerWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LayerManagerWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.build_layer_controls" class="md-nav__link">
    <span class="md-ellipsis">
      build_layer_controls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.refresh" class="md-nav__link">
    <span class="md-ellipsis">
      refresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_layer_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_layer_visibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.toggle_all_layers" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_all_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.toggle_group_layers" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_group_layers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerStyleWidget" class="md-nav__link">
    <span class="md-ellipsis">
      LayerStyleWidget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.bounds" class="md-nav__link">
    <span class="md-ellipsis">
      bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.first_symbol_layer_id" class="md-nav__link">
    <span class="md-ellipsis">
      first_symbol_layer_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.sidebar_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      sidebar_widgets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.source_names" class="md-nav__link">
    <span class="md-ellipsis">
      source_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_roi" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_rois" class="md-nav__link">
    <span class="md-ellipsis">
      user_rois
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_3d_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_alphaearth_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_alphaearth_gui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_annotation_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_annotation_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_arc_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arrow" class="md-nav__link">
    <span class="md-ellipsis">
      add_arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_date_filter_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_date_filter_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      add_deck_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_floating_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_floating_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_globe_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_globe_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      add_gps_trace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_html_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_image_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_labels" class="md-nav__link">
    <span class="md-ellipsis">
      add_labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      add_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nlcd" class="md-nav__link">
    <span class="md-ellipsis">
      add_nlcd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nwi_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_nwi_basemap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_3d_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_pmtiles" class="md-nav__link">
    <span class="md-ellipsis">
      add_pmtiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_search_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_search_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_select_data_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_select_data_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_similarity_search" class="md-nav__link">
    <span class="md-ellipsis">
      add_similarity_search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_source" class="md-nav__link">
    <span class="md-ellipsis">
      add_source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_gui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      add_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_text_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_time_slider" class="md-nav__link">
    <span class="md-ellipsis">
      add_time_slider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_to_map_container" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_map_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector_editor" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector_editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector_tile" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector_tile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video" class="md-nav__link">
    <span class="md-ellipsis">
      add_video
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_video_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.create_container" class="md-nav__link">
    <span class="md-ellipsis">
      create_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.create_mapillary_widget" class="md-nav__link">
    <span class="md-ellipsis">
      create_mapillary_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_first_symbol_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_style_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_style_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fit_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      fit_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fly_to" class="md-nav__link">
    <span class="md-ellipsis">
      fly_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_deck_layer" class="md-nav__link">
    <span class="md-ellipsis">
      get_deck_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      get_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_style
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style_layers" class="md-nav__link">
    <span class="md-ellipsis">
      get_style_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.jump_to" class="md-nav__link">
    <span class="md-ellipsis">
      jump_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      layer_interact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.observe_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      observe_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.open_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      open_geojson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.pan_to" class="md-nav__link">
    <span class="md-ellipsis">
      pan_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      remove_deck_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_from_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_source" class="md-nav__link">
    <span class="md-ellipsis">
      remove_source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_terrain" class="md-nav__link">
    <span class="md-ellipsis">
      remove_terrain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.rotate_to" class="md-nav__link">
    <span class="md-ellipsis">
      rotate_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.save_draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      save_draw_features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_color" class="md-nav__link">
    <span class="md-ellipsis">
      set_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_data" class="md-nav__link">
    <span class="md-ellipsis">
      set_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_properties" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_layout_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_layout_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_paint_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_paint_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_pitch" class="md-nav__link">
    <span class="md-ellipsis">
      set_pitch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_sidebar_width" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_terrain" class="md-nav__link">
    <span class="md-ellipsis">
      set_terrain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_visibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_zoom" class="md-nav__link">
    <span class="md-ellipsis">
      set_zoom
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.show" class="md-nav__link">
    <span class="md-ellipsis">
      show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.style_layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      style_layer_interact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_solara" class="md-nav__link">
    <span class="md-ellipsis">
      to_solara
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.unobserve_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      unobserve_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_roi_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.zoom_to" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.SelectDataWidget" class="md-nav__link">
    <span class="md-ellipsis">
      SelectDataWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SelectDataWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.SelectDataWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.TimeSliderWidget" class="md-nav__link">
    <span class="md-ellipsis">
      TimeSliderWidget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_amazon_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_amazon_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_maptiler_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_maptiler_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.create_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      create_arc_layer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.create_vector_data" class="md-nav__link">
    <span class="md-ellipsis">
      create_vector_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      edit_gps_trace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_vector_data" class="md-nav__link">
    <span class="md-ellipsis">
      edit_vector_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.maptiler_3d_style" class="md-nav__link">
    <span class="md-ellipsis">
      maptiler_3d_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.open_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      open_gps_trace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.open_gps_traces" class="md-nav__link">
    <span class="md-ellipsis">
      open_gps_traces
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../leafmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    leafmap module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../legends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    legends module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../map_widgets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    map_widgets module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../osm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    osm module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pc module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    plot module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plotlymap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    plotlymap module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deck module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    stac module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    toolbar module
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Workshops
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Workshops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/FOSS4G_2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FOSS4G 2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SIGSPATIAL_2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SIGSPATIAL 2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/YouthMappers_2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YouthMappers 2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/ICRW_2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICRW 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/EarthCube_2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EarthCube 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Taiwan_2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Taiwan 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/HGAC_2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HGAC 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/CVPR_2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CVPR 2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MapLibre
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            MapLibre
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_buildings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d buildings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_choropleth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d choropleth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_indoor_mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d indoor mapping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_pmtiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d pmtiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d style
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/3d_terrain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3d terrain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_3d_buildings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add 3d buildings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_a_marker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add a marker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_colorbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add colorbar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_deckgl_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add deckgl layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_gif/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add gif
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_html/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add html
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_icon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add icon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_image_generated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add image generated
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_legend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add legend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_logo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add logo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/add_text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/AlphaEarth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AlphaEarth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_a_line/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animate a line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_camera_around_point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animate camera around point
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animate images
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_point_along_line/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animate point along line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/animate_point_along_route/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animate point along route
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/arc_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arc layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/attribution_position/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attribution position
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/basemaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basemaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/center_on_symbol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Center on symbol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/change_building_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change building color
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/change_case_of_labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change case of labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/choropleth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Choropleth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/cloud_optimized_geotiff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud optimized geotiff
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/color_switcher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Color switcher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/countries_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Countries filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/create_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/custom_marker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom marker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/data_driven_lines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data driven lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/disable_scroll_zoom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disable scroll zoom
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/display_rich_text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Display rich text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/drag_a_marker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Drag a marker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/draw_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Draw features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/edit_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Edit vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fallback_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fallback image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fields_of_the_world/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fields of the world
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fit_bounds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fit bounds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fill_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fill pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/floating_sidebar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Floating sidebar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fly_to/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fly to
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fly_to_options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fly to options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/fullscreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fullscreen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_layer_in_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geojson layer in stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_line/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geojson line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geojson points
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geojson_polygon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geojson polygon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/geopandas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geopandas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/globe_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Globe control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/google_earth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google earth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/google_earth_engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google earth engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/gps_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gps trace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/heatmap_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Heatmap layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/housing_prices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Housing prices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/interactive_false/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interactive false
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/jump_to/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jump to
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/language_switch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Language switch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/layer_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layer control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/layer_groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layer groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/layer_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layer manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/layer_styling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Layer styling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/line_gradient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Line gradient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/live_geojson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live geojson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/live_update_feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live update feature
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/local_geojson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local geojson
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/local_raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local raster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/locate_user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Locate user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/map_tiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Map tiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/mapillary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapillary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/maptiler_styles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maptiler styles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/MGRS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MGRS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/mouse_position/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mouse position
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/multiple_geometries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple geometries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/nasa_opera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nasa opera
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/navigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/ocean_bathymetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ocean bathymetry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/openfreemap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openfreemap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/openstreetmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openstreetmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/overture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/pmtiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pmtiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/restrict_bounds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Restrict bounds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/satellite_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Satellite map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/search_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/set_pitch_bearing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set pitch bearing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/set_terrain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set terrain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/sidebar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sidebar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/similarity_search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Similarity search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/stac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stac
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/time_slider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time slider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/to_html/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    To html
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/variable_label_placement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variable label placement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/variable_offset_label_placement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variable offset label placement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/vector_tile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vector tile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/video_on_a_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Video on a map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/visualize_population_density/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualize population density
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/wms_source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wms source
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibre/zoom_to_linestring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zoom to linestring
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_key_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/01_leafmap_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01 leafmap intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/02_using_basemaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02 using basemaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/03_cog_stac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    03 cog stac
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/04_cog_mosaic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    04 cog mosaic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/05_load_raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    05 load raster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/06_legend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    06 legend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/07_colorbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    07 colorbar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/08_whitebox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    08 whitebox
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/09_csv_to_points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    09 csv to points
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/10_add_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 add vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/11_linked_maps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 linked maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/12_split_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 split map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/13_geopandas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 geopandas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/14_postgis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14 postgis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/15_openstreetmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15 openstreetmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/16_heremap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16 heremap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/17_vector_tile_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17 vector tile layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/18_point_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18 point layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/19_map_to_html/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19 map to html
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/20_planet_imagery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20 planet imagery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/21_ts_inspector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21 ts inspector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/22_time_slider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    22 time slider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/23_colormaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    23 colormaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/24_heatmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    24 heatmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/25_map_title/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    25 map title
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/26_kepler_gl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    26 kepler gl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/27_basemap_gallery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    27 basemap gallery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/28_publish_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    28 publish map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/29_pydeck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    29 pydeck
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/30_census_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    30 census data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/31_search_basemaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    31 search basemaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/32_local_tile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    32 local tile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/33_image_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    33 image overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/34_add_points_from_xy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    34 add points from xy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/35_circle_markers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    35 circle markers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/36_add_labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    36 add labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/37_planetary_computer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    37 planetary computer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/38_plotly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    38 plotly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/39_inspector_tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    39 inspector tool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/40_plotly_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    40 plotly gui
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/41_raster_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    41 raster gui
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/42_create_cog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    42 create cog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/43_search_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    43 search control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/44_attribute_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    44 attribute table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/45_create_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    45 create vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/46_edit_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    46 edit vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/47_numpy_to_cog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    47 numpy to cog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/48_lidar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    48 lidar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/49_split_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    49 split control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/50_marker_cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    50 marker cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/51_clip_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    51 clip image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/52_netcdf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    52 netcdf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/53_choropleth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    53 choropleth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/54_plot_raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    54 plot raster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/55_lidar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    55 lidar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/56_download_ned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    56 download ned
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/57_national_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    57 national map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/58_bokeh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    58 bokeh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/59_create_legend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    59 create legend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/60_add_widget/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    60 add widget
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/61_vector_to_gif/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    61 vector to gif
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/62_folium_colorbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    62 folium colorbar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/63_arcgis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    63 arcgis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/64_stac_search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    64 stac search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/65_sagemaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    65 sagemaker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/66_gradio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    66 gradio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/67_maxar_open_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    67 maxar open data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/68_openaerialmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    68 openaerialmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/69_turkey_earthquake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    69 turkey earthquake
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/70_zonal_stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    70 zonal stats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/71_aws_s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    71 aws s3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/72_timelapse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    72 timelapse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/73_custom_stac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    73 custom stac
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/74_map_tiles_to_geotiff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    74 map tiles to geotiff
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/75_segment_anything/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    75 segment anything
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/76_image_comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    76 image comparison
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/77_split_raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    77 split raster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/78_read_raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    78 read raster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/79_timeseries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    79 timeseries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/80_solar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    80 solar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/81_buildings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    81 buildings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/82_pmtiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    82 pmtiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/83_vector_viz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    83 vector viz
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/84_read_parquet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    84 read parquet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/85_gedi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    85 gedi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/86_add_markers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    86 add markers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/87_actinia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    87 actinia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/88_nasa_earth_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    88 nasa earth data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/89_image_array_viz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    89 image array viz
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/90_pixel_inspector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    90 pixel inspector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/91_raster_viz_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    91 raster viz gui
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/92_maplibre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    92 maplibre
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/93_maplibre_pmtiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    93 maplibre pmtiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/94_mapbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    94 mapbox
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/95_edit_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    95 edit vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/96_batch_edit_vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    96 batch edit vector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/97_overture_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    97 overture data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/98_watershed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    98 watershed
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/99_wetlands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    99 wetlands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/100_nlcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    100 nlcd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/101_nasa_opera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    101 nasa opera
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/102_fused/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    102 fused
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/103_raster_colormap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    103 raster colormap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/104_point_style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    104 point style
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/105_vector_time_slider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    105 vector time slider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/106_aws_s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    106 aws s3
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl" class="md-nav__link">
    <span class="md-ellipsis">
      maplibregl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.add_to_map_container" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_map_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.add_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.create_map" class="md-nav__link">
    <span class="md-ellipsis">
      create_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.remove_from_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.set_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.set_sidebar_width" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.toggle_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Container.update_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      update_sidebar_content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget" class="md-nav__link">
    <span class="md-ellipsis">
      CustomWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CustomWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.expanded" class="md-nav__link">
    <span class="md-ellipsis">
      expanded
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.add_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.remove_widget" class="md-nav__link">
    <span class="md-ellipsis">
      remove_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.CustomWidget.set_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      set_widgets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.DateFilterWidget" class="md-nav__link">
    <span class="md-ellipsis">
      DateFilterWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DateFilterWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.DateFilterWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget" class="md-nav__link">
    <span class="md-ellipsis">
      LayerManagerWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LayerManagerWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.build_layer_controls" class="md-nav__link">
    <span class="md-ellipsis">
      build_layer_controls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.refresh" class="md-nav__link">
    <span class="md-ellipsis">
      refresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_layer_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_layer_visibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.toggle_all_layers" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_all_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerManagerWidget.toggle_group_layers" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_group_layers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.LayerStyleWidget" class="md-nav__link">
    <span class="md-ellipsis">
      LayerStyleWidget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.bounds" class="md-nav__link">
    <span class="md-ellipsis">
      bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.first_symbol_layer_id" class="md-nav__link">
    <span class="md-ellipsis">
      first_symbol_layer_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.sidebar_widgets" class="md-nav__link">
    <span class="md-ellipsis">
      sidebar_widgets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.source_names" class="md-nav__link">
    <span class="md-ellipsis">
      source_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_roi" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_rois" class="md-nav__link">
    <span class="md-ellipsis">
      user_rois
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_3d_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_alphaearth_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_alphaearth_gui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_annotation_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_annotation_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_arc_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_arrow" class="md-nav__link">
    <span class="md-ellipsis">
      add_arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_colorbar_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_date_filter_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_date_filter_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      add_deck_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_floating_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_floating_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_globe_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_globe_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      add_gps_trace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_html_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_html_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_image_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_image_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_labels" class="md-nav__link">
    <span class="md-ellipsis">
      add_labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_legend_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      add_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nlcd" class="md-nav__link">
    <span class="md-ellipsis">
      add_nlcd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_nwi_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_nwi_basemap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_3d_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_buildings" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_buildings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_overture_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_overture_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_pmtiles" class="md-nav__link">
    <span class="md-ellipsis">
      add_pmtiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_search_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_search_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_select_data_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_select_data_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_similarity_search" class="md-nav__link">
    <span class="md-ellipsis">
      add_similarity_search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_source" class="md-nav__link">
    <span class="md-ellipsis">
      add_source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_gui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      add_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_text_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_text_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_time_slider" class="md-nav__link">
    <span class="md-ellipsis">
      add_time_slider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_to_map_container" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_map_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector_editor" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector_editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_vector_tile" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector_tile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video" class="md-nav__link">
    <span class="md-ellipsis">
      add_video
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_video_to_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      add_video_to_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.create_container" class="md-nav__link">
    <span class="md-ellipsis">
      create_container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.create_mapillary_widget" class="md-nav__link">
    <span class="md-ellipsis">
      create_mapillary_widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_first_symbol_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.find_style_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_style_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fit_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      fit_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.fly_to" class="md-nav__link">
    <span class="md-ellipsis">
      fly_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_deck_layer" class="md-nav__link">
    <span class="md-ellipsis">
      get_deck_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      get_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_style
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.get_style_layers" class="md-nav__link">
    <span class="md-ellipsis">
      get_style_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.jump_to" class="md-nav__link">
    <span class="md-ellipsis">
      jump_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      layer_interact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.observe_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      observe_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.open_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      open_geojson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.pan_to" class="md-nav__link">
    <span class="md-ellipsis">
      pan_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_deck_layers" class="md-nav__link">
    <span class="md-ellipsis">
      remove_deck_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_from_sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_from_sidebar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_source" class="md-nav__link">
    <span class="md-ellipsis">
      remove_source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.remove_terrain" class="md-nav__link">
    <span class="md-ellipsis">
      remove_terrain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.rotate_to" class="md-nav__link">
    <span class="md-ellipsis">
      rotate_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.save_draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      save_draw_features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_color" class="md-nav__link">
    <span class="md-ellipsis">
      set_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_data" class="md-nav__link">
    <span class="md-ellipsis">
      set_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_properties" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_deck_layer_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_deck_layer_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_layout_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_layout_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      set_opacity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_paint_property" class="md-nav__link">
    <span class="md-ellipsis">
      set_paint_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_pitch" class="md-nav__link">
    <span class="md-ellipsis">
      set_pitch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_sidebar_content" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_sidebar_width" class="md-nav__link">
    <span class="md-ellipsis">
      set_sidebar_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_terrain" class="md-nav__link">
    <span class="md-ellipsis">
      set_terrain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_visibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.set_zoom" class="md-nav__link">
    <span class="md-ellipsis">
      set_zoom
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.show" class="md-nav__link">
    <span class="md-ellipsis">
      show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.style_layer_interact" class="md-nav__link">
    <span class="md-ellipsis">
      style_layer_interact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_solara" class="md-nav__link">
    <span class="md-ellipsis">
      to_solara
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.unobserve_mapillary" class="md-nav__link">
    <span class="md-ellipsis">
      unobserve_mapillary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.user_roi_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi_bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.Map.zoom_to" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.SelectDataWidget" class="md-nav__link">
    <span class="md-ellipsis">
      SelectDataWidget
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SelectDataWidget">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leafmap.maplibregl.SelectDataWidget.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.TimeSliderWidget" class="md-nav__link">
    <span class="md-ellipsis">
      TimeSliderWidget
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_amazon_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_amazon_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.construct_maptiler_style" class="md-nav__link">
    <span class="md-ellipsis">
      construct_maptiler_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.create_arc_layer" class="md-nav__link">
    <span class="md-ellipsis">
      create_arc_layer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.create_vector_data" class="md-nav__link">
    <span class="md-ellipsis">
      create_vector_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      edit_gps_trace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.edit_vector_data" class="md-nav__link">
    <span class="md-ellipsis">
      edit_vector_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.maptiler_3d_style" class="md-nav__link">
    <span class="md-ellipsis">
      maptiler_3d_style
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.open_gps_trace" class="md-nav__link">
    <span class="md-ellipsis">
      open_gps_trace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leafmap.maplibregl.open_gps_traces" class="md-nav__link">
    <span class="md-ellipsis">
      open_gps_traces
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  


  
  


<h1 id="maplibregl-module">maplibregl module<a class="headerlink" href="#maplibregl-module" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="leafmap.maplibregl"></a>
    <div class="doc doc-contents first">

        <p>The maplibregl module provides the Map class for creating interactive maps using the maplibre.ipywidget module.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.Container" class="doc doc-heading">
            <code>Container</code>


<a href="#leafmap.maplibregl.Container" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipyvuetify.Container">Container</span></code></p>


        <p>A container widget for displaying a map with an optional sidebar.</p>
<p>This class creates a layout with a map on the left and a sidebar on the right.
The sidebar can be toggled on or off and can display additional content.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.sidebar_visible">sidebar_visible</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar is visible.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.min_width">min_width</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum width of the sidebar in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.max_width">max_width</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum width of the sidebar in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.map_container">map_container</span></code></td>
            <td>
                  <code><span title="ipyvuetify.Col">Col</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The container for the map.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.sidebar_content_box">sidebar_content_box</span></code></td>
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The container for the sidebar content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.toggle_icon">toggle_icon</span></code></td>
            <td>
                  <code><span title="ipyvuetify.Icon">Icon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the toggle button.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.toggle_btn">toggle_btn</span></code></td>
            <td>
                  <code><span title="ipyvuetify.Btn">Btn</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The button to toggle the sidebar.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.sidebar">sidebar</span></code></td>
            <td>
                  <code><span title="ipyvuetify.Col">Col</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The container for the sidebar.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.Container.row">row</span></code></td>
            <td>
                  <code><span title="ipyvuetify.Row">Row</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The main layout row containing the map and sidebar.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7073</span>
<span class="normal">7074</span>
<span class="normal">7075</span>
<span class="normal">7076</span>
<span class="normal">7077</span>
<span class="normal">7078</span>
<span class="normal">7079</span>
<span class="normal">7080</span>
<span class="normal">7081</span>
<span class="normal">7082</span>
<span class="normal">7083</span>
<span class="normal">7084</span>
<span class="normal">7085</span>
<span class="normal">7086</span>
<span class="normal">7087</span>
<span class="normal">7088</span>
<span class="normal">7089</span>
<span class="normal">7090</span>
<span class="normal">7091</span>
<span class="normal">7092</span>
<span class="normal">7093</span>
<span class="normal">7094</span>
<span class="normal">7095</span>
<span class="normal">7096</span>
<span class="normal">7097</span>
<span class="normal">7098</span>
<span class="normal">7099</span>
<span class="normal">7100</span>
<span class="normal">7101</span>
<span class="normal">7102</span>
<span class="normal">7103</span>
<span class="normal">7104</span>
<span class="normal">7105</span>
<span class="normal">7106</span>
<span class="normal">7107</span>
<span class="normal">7108</span>
<span class="normal">7109</span>
<span class="normal">7110</span>
<span class="normal">7111</span>
<span class="normal">7112</span>
<span class="normal">7113</span>
<span class="normal">7114</span>
<span class="normal">7115</span>
<span class="normal">7116</span>
<span class="normal">7117</span>
<span class="normal">7118</span>
<span class="normal">7119</span>
<span class="normal">7120</span>
<span class="normal">7121</span>
<span class="normal">7122</span>
<span class="normal">7123</span>
<span class="normal">7124</span>
<span class="normal">7125</span>
<span class="normal">7126</span>
<span class="normal">7127</span>
<span class="normal">7128</span>
<span class="normal">7129</span>
<span class="normal">7130</span>
<span class="normal">7131</span>
<span class="normal">7132</span>
<span class="normal">7133</span>
<span class="normal">7134</span>
<span class="normal">7135</span>
<span class="normal">7136</span>
<span class="normal">7137</span>
<span class="normal">7138</span>
<span class="normal">7139</span>
<span class="normal">7140</span>
<span class="normal">7141</span>
<span class="normal">7142</span>
<span class="normal">7143</span>
<span class="normal">7144</span>
<span class="normal">7145</span>
<span class="normal">7146</span>
<span class="normal">7147</span>
<span class="normal">7148</span>
<span class="normal">7149</span>
<span class="normal">7150</span>
<span class="normal">7151</span>
<span class="normal">7152</span>
<span class="normal">7153</span>
<span class="normal">7154</span>
<span class="normal">7155</span>
<span class="normal">7156</span>
<span class="normal">7157</span>
<span class="normal">7158</span>
<span class="normal">7159</span>
<span class="normal">7160</span>
<span class="normal">7161</span>
<span class="normal">7162</span>
<span class="normal">7163</span>
<span class="normal">7164</span>
<span class="normal">7165</span>
<span class="normal">7166</span>
<span class="normal">7167</span>
<span class="normal">7168</span>
<span class="normal">7169</span>
<span class="normal">7170</span>
<span class="normal">7171</span>
<span class="normal">7172</span>
<span class="normal">7173</span>
<span class="normal">7174</span>
<span class="normal">7175</span>
<span class="normal">7176</span>
<span class="normal">7177</span>
<span class="normal">7178</span>
<span class="normal">7179</span>
<span class="normal">7180</span>
<span class="normal">7181</span>
<span class="normal">7182</span>
<span class="normal">7183</span>
<span class="normal">7184</span>
<span class="normal">7185</span>
<span class="normal">7186</span>
<span class="normal">7187</span>
<span class="normal">7188</span>
<span class="normal">7189</span>
<span class="normal">7190</span>
<span class="normal">7191</span>
<span class="normal">7192</span>
<span class="normal">7193</span>
<span class="normal">7194</span>
<span class="normal">7195</span>
<span class="normal">7196</span>
<span class="normal">7197</span>
<span class="normal">7198</span>
<span class="normal">7199</span>
<span class="normal">7200</span>
<span class="normal">7201</span>
<span class="normal">7202</span>
<span class="normal">7203</span>
<span class="normal">7204</span>
<span class="normal">7205</span>
<span class="normal">7206</span>
<span class="normal">7207</span>
<span class="normal">7208</span>
<span class="normal">7209</span>
<span class="normal">7210</span>
<span class="normal">7211</span>
<span class="normal">7212</span>
<span class="normal">7213</span>
<span class="normal">7214</span>
<span class="normal">7215</span>
<span class="normal">7216</span>
<span class="normal">7217</span>
<span class="normal">7218</span>
<span class="normal">7219</span>
<span class="normal">7220</span>
<span class="normal">7221</span>
<span class="normal">7222</span>
<span class="normal">7223</span>
<span class="normal">7224</span>
<span class="normal">7225</span>
<span class="normal">7226</span>
<span class="normal">7227</span>
<span class="normal">7228</span>
<span class="normal">7229</span>
<span class="normal">7230</span>
<span class="normal">7231</span>
<span class="normal">7232</span>
<span class="normal">7233</span>
<span class="normal">7234</span>
<span class="normal">7235</span>
<span class="normal">7236</span>
<span class="normal">7237</span>
<span class="normal">7238</span>
<span class="normal">7239</span>
<span class="normal">7240</span>
<span class="normal">7241</span>
<span class="normal">7242</span>
<span class="normal">7243</span>
<span class="normal">7244</span>
<span class="normal">7245</span>
<span class="normal">7246</span>
<span class="normal">7247</span>
<span class="normal">7248</span>
<span class="normal">7249</span>
<span class="normal">7250</span>
<span class="normal">7251</span>
<span class="normal">7252</span>
<span class="normal">7253</span>
<span class="normal">7254</span>
<span class="normal">7255</span>
<span class="normal">7256</span>
<span class="normal">7257</span>
<span class="normal">7258</span>
<span class="normal">7259</span>
<span class="normal">7260</span>
<span class="normal">7261</span>
<span class="normal">7262</span>
<span class="normal">7263</span>
<span class="normal">7264</span>
<span class="normal">7265</span>
<span class="normal">7266</span>
<span class="normal">7267</span>
<span class="normal">7268</span>
<span class="normal">7269</span>
<span class="normal">7270</span>
<span class="normal">7271</span>
<span class="normal">7272</span>
<span class="normal">7273</span>
<span class="normal">7274</span>
<span class="normal">7275</span>
<span class="normal">7276</span>
<span class="normal">7277</span>
<span class="normal">7278</span>
<span class="normal">7279</span>
<span class="normal">7280</span>
<span class="normal">7281</span>
<span class="normal">7282</span>
<span class="normal">7283</span>
<span class="normal">7284</span>
<span class="normal">7285</span>
<span class="normal">7286</span>
<span class="normal">7287</span>
<span class="normal">7288</span>
<span class="normal">7289</span>
<span class="normal">7290</span>
<span class="normal">7291</span>
<span class="normal">7292</span>
<span class="normal">7293</span>
<span class="normal">7294</span>
<span class="normal">7295</span>
<span class="normal">7296</span>
<span class="normal">7297</span>
<span class="normal">7298</span>
<span class="normal">7299</span>
<span class="normal">7300</span>
<span class="normal">7301</span>
<span class="normal">7302</span>
<span class="normal">7303</span>
<span class="normal">7304</span>
<span class="normal">7305</span>
<span class="normal">7306</span>
<span class="normal">7307</span>
<span class="normal">7308</span>
<span class="normal">7309</span>
<span class="normal">7310</span>
<span class="normal">7311</span>
<span class="normal">7312</span>
<span class="normal">7313</span>
<span class="normal">7314</span>
<span class="normal">7315</span>
<span class="normal">7316</span>
<span class="normal">7317</span>
<span class="normal">7318</span>
<span class="normal">7319</span>
<span class="normal">7320</span>
<span class="normal">7321</span>
<span class="normal">7322</span>
<span class="normal">7323</span>
<span class="normal">7324</span>
<span class="normal">7325</span>
<span class="normal">7326</span>
<span class="normal">7327</span>
<span class="normal">7328</span>
<span class="normal">7329</span>
<span class="normal">7330</span>
<span class="normal">7331</span>
<span class="normal">7332</span>
<span class="normal">7333</span>
<span class="normal">7334</span>
<span class="normal">7335</span>
<span class="normal">7336</span>
<span class="normal">7337</span>
<span class="normal">7338</span>
<span class="normal">7339</span>
<span class="normal">7340</span>
<span class="normal">7341</span>
<span class="normal">7342</span>
<span class="normal">7343</span>
<span class="normal">7344</span>
<span class="normal">7345</span>
<span class="normal">7346</span>
<span class="normal">7347</span>
<span class="normal">7348</span>
<span class="normal">7349</span>
<span class="normal">7350</span>
<span class="normal">7351</span>
<span class="normal">7352</span>
<span class="normal">7353</span>
<span class="normal">7354</span>
<span class="normal">7355</span>
<span class="normal">7356</span>
<span class="normal">7357</span>
<span class="normal">7358</span>
<span class="normal">7359</span>
<span class="normal">7360</span>
<span class="normal">7361</span>
<span class="normal">7362</span>
<span class="normal">7363</span>
<span class="normal">7364</span>
<span class="normal">7365</span>
<span class="normal">7366</span>
<span class="normal">7367</span>
<span class="normal">7368</span>
<span class="normal">7369</span>
<span class="normal">7370</span>
<span class="normal">7371</span>
<span class="normal">7372</span>
<span class="normal">7373</span>
<span class="normal">7374</span>
<span class="normal">7375</span>
<span class="normal">7376</span>
<span class="normal">7377</span>
<span class="normal">7378</span>
<span class="normal">7379</span>
<span class="normal">7380</span>
<span class="normal">7381</span>
<span class="normal">7382</span>
<span class="normal">7383</span>
<span class="normal">7384</span>
<span class="normal">7385</span>
<span class="normal">7386</span>
<span class="normal">7387</span>
<span class="normal">7388</span>
<span class="normal">7389</span>
<span class="normal">7390</span>
<span class="normal">7391</span>
<span class="normal">7392</span>
<span class="normal">7393</span>
<span class="normal">7394</span>
<span class="normal">7395</span>
<span class="normal">7396</span>
<span class="normal">7397</span>
<span class="normal">7398</span>
<span class="normal">7399</span>
<span class="normal">7400</span>
<span class="normal">7401</span>
<span class="normal">7402</span>
<span class="normal">7403</span>
<span class="normal">7404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A container widget for displaying a map with an optional sidebar.</span>

<span class="sd">    This class creates a layout with a map on the left and a sidebar on the right.</span>
<span class="sd">    The sidebar can be toggled on or off and can display additional content.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        sidebar_visible (bool): Whether the sidebar is visible.</span>
<span class="sd">        min_width (int): Minimum width of the sidebar in pixels.</span>
<span class="sd">        max_width (int): Maximum width of the sidebar in pixels.</span>
<span class="sd">        map_container (v.Col): The container for the map.</span>
<span class="sd">        sidebar_content_box (widgets.VBox): The container for the sidebar content.</span>
<span class="sd">        toggle_icon (v.Icon): The icon for the toggle button.</span>
<span class="sd">        toggle_btn (v.Btn): The button to toggle the sidebar.</span>
<span class="sd">        sidebar (v.Col): The container for the sidebar.</span>
<span class="sd">        row (v.Row): The main layout row containing the map and sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the Container widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            host_map (Optional[Any]): The map object to display in the container. Defaults to None.</span>
<span class="sd">            sidebar_visible (bool): Whether the sidebar is visible. Defaults to True.</span>
<span class="sd">            min_width (int): Minimum width of the sidebar in pixels. Defaults to 250.</span>
<span class="sd">            max_width (int): Maximum width of the sidebar in pixels. Defaults to 300.</span>
<span class="sd">            sidebar_content (Optional[Union[widgets.VBox, List[widgets.Widget]]]):</span>
<span class="sd">                The content to display in the sidebar. Defaults to None.</span>
<span class="sd">            *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="n">min_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">max_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span> <span class="o">=</span> <span class="n">host_map</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Map column (left)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_container</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;flex-grow: 1; flex-shrink: 1; flex-basis: 0;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># --- NEW: a vertical stack inside the map column ---</span>
        <span class="c1"># Everything under the map (including the map itself) goes here.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0 d-flex flex-column&quot;</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;overflow-x: auto; max-width: 100%;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="p">]</span>

        <span class="c1"># Ensure the map exists and is visible</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">host_map</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_map</span><span class="p">()</span>

        <span class="c1"># Put the map as the first child of the stack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="p">]</span>

        <span class="c1"># Sidebar content container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sidebar_content</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">sidebar_content</span><span class="p">)</span>

        <span class="c1"># Toggle button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-chevron-right&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;mdi-chevron-left&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">],</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 48px; height: 48px; min-width: 48px;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_sidebar</span><span class="p">)</span>

        <span class="c1"># Settings icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-wrench&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_icon</span><span class="p">],</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 36px; height: 36px;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_width_slider</span><span class="p">)</span>

        <span class="c1"># Sidebar controls row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_controls</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Sidebar width slider</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_width</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Width:&quot;</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_width_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">settings_widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-cog&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sidebar Settings&quot;</span><span class="p">,</span>
            <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host_map</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Sidebar (right column)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span> <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;overflow-y: hidden;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>

        <span class="c1"># Main layout row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-nowrap&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fluid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># --- NEW: method to add widgets beneath the map dynamically ---</span>
    <span class="k">def</span> <span class="nf">add_to_map_container</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append one or more widgets beneath the map (in insertion order).&quot;&quot;&quot;</span>
        <span class="n">new_items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">new_items</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">it</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_items</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Apply width constraints to prevent widgets from exceeding container width</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">new_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;layout&quot;</span><span class="p">):</span>
                <span class="c1"># Ensure widgets don&#39;t exceed the available width</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="s2">&quot;max_width&quot;</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="p">):</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
                <span class="c1"># Enable overflow handling for wide content</span>
                <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">overflow</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>

        <span class="c1"># IMPORTANT: reassign, don&#39;t mutate in place</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="o">*</span><span class="n">new_items</span><span class="p">]</span>

        <span class="c1"># Ensure sidebar remains visible after adding items to map container</span>
        <span class="c1"># Force a refresh of the sidebar content to prevent it from disappearing</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sidebar&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sidebar_visible&quot;</span><span class="p">):</span>
            <span class="c1"># Trigger a refresh of the sidebar content</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>
            <span class="c1"># Ensure the main row layout is properly maintained</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;row&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;map_container&quot;</span><span class="p">):</span>
                <span class="c1"># Reassign children to force layout refresh</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">create_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a default map object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: A default map object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toggle_sidebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the visibility of the sidebar.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args (Any): Additional positional arguments.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;mdi-chevron-right&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="k">else</span> <span class="s2">&quot;mdi-chevron-left&quot;</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_sidebar_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the content of the sidebar based on its visibility.</span>
<span class="sd">        If the sidebar is visible, it displays the toggle button and the sidebar content.</span>
<span class="sd">        If the sidebar is hidden, it only displays the toggle button.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span><span class="p">:</span>
            <span class="c1"># Header row: toggle on the left, settings on the right</span>
            <span class="n">header_row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0&quot;</span><span class="p">,</span>
                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;space-between&quot;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="p">],</span>
            <span class="p">)</span>

            <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">header_row</span><span class="p">]</span>

            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">children</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;min-width: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">min_width</span><span class="si">}</span><span class="s2">px; max-width: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_width</span><span class="si">}</span><span class="s2">px;&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="s2">&quot;width: 48px; min-width: 48px; max-width: 48px;&quot;</span>

    <span class="k">def</span> <span class="nf">set_sidebar_content</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replaces all content in the sidebar (except the toggle button).</span>

<span class="sd">        Args:</span>
<span class="sd">            content (Union[widgets.VBox, List[widgets.Widget]]): The new content for the sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">content</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends a widget to the sidebar content.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
                <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                <span class="n">host_map</span><span class="o">=</span><span class="n">host_map</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>

    <span class="k">def</span> <span class="nf">remove_from_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a widget from the sidebar content.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (widgets.Widget): The widget to remove from the sidebar.</span>
<span class="sd">            name (str): The name of the widget to remove from the sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">widget</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="n">child</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">widget</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sidebar_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically updates the sidebar&#39;s minimum and maximum width.</span>

<span class="sd">        Args:</span>
<span class="sd">            min_width (int, optional): New minimum width in pixels. If None, keep current.</span>
<span class="sd">            max_width (int, optional): New maximum width in pixels. If None, keep current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">min_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">min_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">min_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="n">min_width</span>
        <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">max_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">max_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">toggle_width_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_widget</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_widget</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_width_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_width</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="n">new_width</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="n">new_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_width</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">host_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sidebar_visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">sidebar_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the Container widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>host_map</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map object to display in the container. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar is visible. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum width of the sidebar in pixels. Defaults to 250.</p>
              </div>
            </td>
            <td>
                  <code>250</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum width of the sidebar in pixels. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>300</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_content</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="ipywidgets.VBox">VBox</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The content to display in the sidebar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional positional arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7092</span>
<span class="normal">7093</span>
<span class="normal">7094</span>
<span class="normal">7095</span>
<span class="normal">7096</span>
<span class="normal">7097</span>
<span class="normal">7098</span>
<span class="normal">7099</span>
<span class="normal">7100</span>
<span class="normal">7101</span>
<span class="normal">7102</span>
<span class="normal">7103</span>
<span class="normal">7104</span>
<span class="normal">7105</span>
<span class="normal">7106</span>
<span class="normal">7107</span>
<span class="normal">7108</span>
<span class="normal">7109</span>
<span class="normal">7110</span>
<span class="normal">7111</span>
<span class="normal">7112</span>
<span class="normal">7113</span>
<span class="normal">7114</span>
<span class="normal">7115</span>
<span class="normal">7116</span>
<span class="normal">7117</span>
<span class="normal">7118</span>
<span class="normal">7119</span>
<span class="normal">7120</span>
<span class="normal">7121</span>
<span class="normal">7122</span>
<span class="normal">7123</span>
<span class="normal">7124</span>
<span class="normal">7125</span>
<span class="normal">7126</span>
<span class="normal">7127</span>
<span class="normal">7128</span>
<span class="normal">7129</span>
<span class="normal">7130</span>
<span class="normal">7131</span>
<span class="normal">7132</span>
<span class="normal">7133</span>
<span class="normal">7134</span>
<span class="normal">7135</span>
<span class="normal">7136</span>
<span class="normal">7137</span>
<span class="normal">7138</span>
<span class="normal">7139</span>
<span class="normal">7140</span>
<span class="normal">7141</span>
<span class="normal">7142</span>
<span class="normal">7143</span>
<span class="normal">7144</span>
<span class="normal">7145</span>
<span class="normal">7146</span>
<span class="normal">7147</span>
<span class="normal">7148</span>
<span class="normal">7149</span>
<span class="normal">7150</span>
<span class="normal">7151</span>
<span class="normal">7152</span>
<span class="normal">7153</span>
<span class="normal">7154</span>
<span class="normal">7155</span>
<span class="normal">7156</span>
<span class="normal">7157</span>
<span class="normal">7158</span>
<span class="normal">7159</span>
<span class="normal">7160</span>
<span class="normal">7161</span>
<span class="normal">7162</span>
<span class="normal">7163</span>
<span class="normal">7164</span>
<span class="normal">7165</span>
<span class="normal">7166</span>
<span class="normal">7167</span>
<span class="normal">7168</span>
<span class="normal">7169</span>
<span class="normal">7170</span>
<span class="normal">7171</span>
<span class="normal">7172</span>
<span class="normal">7173</span>
<span class="normal">7174</span>
<span class="normal">7175</span>
<span class="normal">7176</span>
<span class="normal">7177</span>
<span class="normal">7178</span>
<span class="normal">7179</span>
<span class="normal">7180</span>
<span class="normal">7181</span>
<span class="normal">7182</span>
<span class="normal">7183</span>
<span class="normal">7184</span>
<span class="normal">7185</span>
<span class="normal">7186</span>
<span class="normal">7187</span>
<span class="normal">7188</span>
<span class="normal">7189</span>
<span class="normal">7190</span>
<span class="normal">7191</span>
<span class="normal">7192</span>
<span class="normal">7193</span>
<span class="normal">7194</span>
<span class="normal">7195</span>
<span class="normal">7196</span>
<span class="normal">7197</span>
<span class="normal">7198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the Container widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        host_map (Optional[Any]): The map object to display in the container. Defaults to None.</span>
<span class="sd">        sidebar_visible (bool): Whether the sidebar is visible. Defaults to True.</span>
<span class="sd">        min_width (int): Minimum width of the sidebar in pixels. Defaults to 250.</span>
<span class="sd">        max_width (int): Maximum width of the sidebar in pixels. Defaults to 300.</span>
<span class="sd">        sidebar_content (Optional[Union[widgets.VBox, List[widgets.Widget]]]):</span>
<span class="sd">            The content to display in the sidebar. Defaults to None.</span>
<span class="sd">        *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">max_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span> <span class="o">=</span> <span class="n">host_map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Map column (left)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_container</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;flex-grow: 1; flex-shrink: 1; flex-basis: 0;&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># --- NEW: a vertical stack inside the map column ---</span>
    <span class="c1"># Everything under the map (including the map itself) goes here.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0 d-flex flex-column&quot;</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;overflow-x: auto; max-width: 100%;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="p">]</span>

    <span class="c1"># Ensure the map exists and is visible</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">host_map</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_map</span><span class="p">()</span>

    <span class="c1"># Put the map as the first child of the stack</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="p">]</span>

    <span class="c1"># Sidebar content container</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sidebar_content</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">sidebar_content</span><span class="p">)</span>

    <span class="c1"># Toggle button</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-chevron-right&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;mdi-chevron-left&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">],</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 48px; height: 48px; min-width: 48px;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_sidebar</span><span class="p">)</span>

    <span class="c1"># Settings icon</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">settings_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-wrench&quot;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_icon</span><span class="p">],</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 36px; height: 36px;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggle_width_slider</span><span class="p">)</span>

    <span class="c1"># Sidebar controls row</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_controls</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Sidebar width slider</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_width</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Width:&quot;</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_width_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">settings_widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width_slider</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-cog&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sidebar Settings&quot;</span><span class="p">,</span>
        <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host_map</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Sidebar (right column)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span> <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;overflow-y: hidden;&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>

    <span class="c1"># Main layout row</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-nowrap&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fluid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.add_to_map_container" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_to_map_container</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.add_to_map_container" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Append one or more widgets beneath the map (in insertion order).</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7201</span>
<span class="normal">7202</span>
<span class="normal">7203</span>
<span class="normal">7204</span>
<span class="normal">7205</span>
<span class="normal">7206</span>
<span class="normal">7207</span>
<span class="normal">7208</span>
<span class="normal">7209</span>
<span class="normal">7210</span>
<span class="normal">7211</span>
<span class="normal">7212</span>
<span class="normal">7213</span>
<span class="normal">7214</span>
<span class="normal">7215</span>
<span class="normal">7216</span>
<span class="normal">7217</span>
<span class="normal">7218</span>
<span class="normal">7219</span>
<span class="normal">7220</span>
<span class="normal">7221</span>
<span class="normal">7222</span>
<span class="normal">7223</span>
<span class="normal">7224</span>
<span class="normal">7225</span>
<span class="normal">7226</span>
<span class="normal">7227</span>
<span class="normal">7228</span>
<span class="normal">7229</span>
<span class="normal">7230</span>
<span class="normal">7231</span>
<span class="normal">7232</span>
<span class="normal">7233</span>
<span class="normal">7234</span>
<span class="normal">7235</span>
<span class="normal">7236</span>
<span class="normal">7237</span>
<span class="normal">7238</span>
<span class="normal">7239</span>
<span class="normal">7240</span>
<span class="normal">7241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_map_container</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append one or more widgets beneath the map (in insertion order).&quot;&quot;&quot;</span>
    <span class="n">new_items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">new_items</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">it</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">new_items</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Apply width constraints to prevent widgets from exceeding container width</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">new_items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;layout&quot;</span><span class="p">):</span>
            <span class="c1"># Ensure widgets don&#39;t exceed the available width</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="s2">&quot;max_width&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
            <span class="c1"># Enable overflow handling for wide content</span>
            <span class="n">item</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">overflow</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>

    <span class="c1"># IMPORTANT: reassign, don&#39;t mutate in place</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">map_stack</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="o">*</span><span class="n">new_items</span><span class="p">]</span>

    <span class="c1"># Ensure sidebar remains visible after adding items to map container</span>
    <span class="c1"># Force a refresh of the sidebar content to prevent it from disappearing</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sidebar&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;sidebar_visible&quot;</span><span class="p">):</span>
        <span class="c1"># Trigger a refresh of the sidebar content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>
        <span class="c1"># Ensure the main row layout is properly maintained</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;row&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;map_container&quot;</span><span class="p">):</span>
            <span class="c1"># Reassign children to force layout refresh</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">map_container</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.add_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-tools&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;My Tools&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">host_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.add_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Appends a widget to the sidebar content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="ipywidgets.Widget">Widget</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial widget(s) to display in the content box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;My Tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional positional arguments for the parent class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7307</span>
<span class="normal">7308</span>
<span class="normal">7309</span>
<span class="normal">7310</span>
<span class="normal">7311</span>
<span class="normal">7312</span>
<span class="normal">7313</span>
<span class="normal">7314</span>
<span class="normal">7315</span>
<span class="normal">7316</span>
<span class="normal">7317</span>
<span class="normal">7318</span>
<span class="normal">7319</span>
<span class="normal">7320</span>
<span class="normal">7321</span>
<span class="normal">7322</span>
<span class="normal">7323</span>
<span class="normal">7324</span>
<span class="normal">7325</span>
<span class="normal">7326</span>
<span class="normal">7327</span>
<span class="normal">7328</span>
<span class="normal">7329</span>
<span class="normal">7330</span>
<span class="normal">7331</span>
<span class="normal">7332</span>
<span class="normal">7333</span>
<span class="normal">7334</span>
<span class="normal">7335</span>
<span class="normal">7336</span>
<span class="normal">7337</span>
<span class="normal">7338</span>
<span class="normal">7339</span>
<span class="normal">7340</span>
<span class="normal">7341</span>
<span class="normal">7342</span>
<span class="normal">7343</span>
<span class="normal">7344</span>
<span class="normal">7345</span>
<span class="normal">7346</span>
<span class="normal">7347</span>
<span class="normal">7348</span>
<span class="normal">7349</span>
<span class="normal">7350</span>
<span class="normal">7351</span>
<span class="normal">7352</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends a widget to the sidebar content.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="n">host_map</span><span class="o">=</span><span class="n">host_map</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.create_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_map</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Container.create_map" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates a default map object.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A default map object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7243</span>
<span class="normal">7244</span>
<span class="normal">7245</span>
<span class="normal">7246</span>
<span class="normal">7247</span>
<span class="normal">7248</span>
<span class="normal">7249</span>
<span class="normal">7250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a default map object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: A default map object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.remove_from_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.remove_from_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes a widget from the sidebar content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The widget to remove from the sidebar.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the widget to remove from the sidebar.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7354</span>
<span class="normal">7355</span>
<span class="normal">7356</span>
<span class="normal">7357</span>
<span class="normal">7358</span>
<span class="normal">7359</span>
<span class="normal">7360</span>
<span class="normal">7361</span>
<span class="normal">7362</span>
<span class="normal">7363</span>
<span class="normal">7364</span>
<span class="normal">7365</span>
<span class="normal">7366</span>
<span class="normal">7367</span>
<span class="normal">7368</span>
<span class="normal">7369</span>
<span class="normal">7370</span>
<span class="normal">7371</span>
<span class="normal">7372</span>
<span class="normal">7373</span>
<span class="normal">7374</span>
<span class="normal">7375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_from_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a widget from the sidebar content.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (widgets.Widget): The widget to remove from the sidebar.</span>
<span class="sd">        name (str): The name of the widget to remove from the sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">widget</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">break</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
        <span class="n">child</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">widget</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.set_sidebar_content" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.set_sidebar_content" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Replaces all content in the sidebar (except the toggle button).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="ipywidgets.VBox">VBox</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the sidebar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7293</span>
<span class="normal">7294</span>
<span class="normal">7295</span>
<span class="normal">7296</span>
<span class="normal">7297</span>
<span class="normal">7298</span>
<span class="normal">7299</span>
<span class="normal">7300</span>
<span class="normal">7301</span>
<span class="normal">7302</span>
<span class="normal">7303</span>
<span class="normal">7304</span>
<span class="normal">7305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_sidebar_content</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces all content in the sidebar (except the toggle button).</span>

<span class="sd">    Args:</span>
<span class="sd">        content (Union[widgets.VBox, List[widgets.Widget]]): The new content for the sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">content</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">content</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.set_sidebar_width" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.set_sidebar_width" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Dynamically updates the sidebar's minimum and maximum width.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>min_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New minimum width in pixels. If None, keep current.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New maximum width in pixels. If None, keep current.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7377</span>
<span class="normal">7378</span>
<span class="normal">7379</span>
<span class="normal">7380</span>
<span class="normal">7381</span>
<span class="normal">7382</span>
<span class="normal">7383</span>
<span class="normal">7384</span>
<span class="normal">7385</span>
<span class="normal">7386</span>
<span class="normal">7387</span>
<span class="normal">7388</span>
<span class="normal">7389</span>
<span class="normal">7390</span>
<span class="normal">7391</span>
<span class="normal">7392</span>
<span class="normal">7393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_sidebar_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically updates the sidebar&#39;s minimum and maximum width.</span>

<span class="sd">    Args:</span>
<span class="sd">        min_width (int, optional): New minimum width in pixels. If None, keep current.</span>
<span class="sd">        max_width (int, optional): New maximum width in pixels. If None, keep current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">min_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">min_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">min_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">max_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.toggle_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_sidebar</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Container.toggle_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Toggles the visibility of the sidebar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional positional arguments.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7252</span>
<span class="normal">7253</span>
<span class="normal">7254</span>
<span class="normal">7255</span>
<span class="normal">7256</span>
<span class="normal">7257</span>
<span class="normal">7258</span>
<span class="normal">7259</span>
<span class="normal">7260</span>
<span class="normal">7261</span>
<span class="normal">7262</span>
<span class="normal">7263</span>
<span class="normal">7264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toggle_sidebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the visibility of the sidebar.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args (Any): Additional positional arguments.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;mdi-chevron-right&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span> <span class="k">else</span> <span class="s2">&quot;mdi-chevron-left&quot;</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_sidebar_content</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Container.update_sidebar_content" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_sidebar_content</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Container.update_sidebar_content" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Updates the content of the sidebar based on its visibility.
If the sidebar is visible, it displays the toggle button and the sidebar content.
If the sidebar is hidden, it only displays the toggle button.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7266</span>
<span class="normal">7267</span>
<span class="normal">7268</span>
<span class="normal">7269</span>
<span class="normal">7270</span>
<span class="normal">7271</span>
<span class="normal">7272</span>
<span class="normal">7273</span>
<span class="normal">7274</span>
<span class="normal">7275</span>
<span class="normal">7276</span>
<span class="normal">7277</span>
<span class="normal">7278</span>
<span class="normal">7279</span>
<span class="normal">7280</span>
<span class="normal">7281</span>
<span class="normal">7282</span>
<span class="normal">7283</span>
<span class="normal">7284</span>
<span class="normal">7285</span>
<span class="normal">7286</span>
<span class="normal">7287</span>
<span class="normal">7288</span>
<span class="normal">7289</span>
<span class="normal">7290</span>
<span class="normal">7291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_sidebar_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the content of the sidebar based on its visibility.</span>
<span class="sd">    If the sidebar is visible, it displays the toggle button and the sidebar content.</span>
<span class="sd">    If the sidebar is hidden, it only displays the toggle button.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_visible</span><span class="p">:</span>
        <span class="c1"># Header row: toggle on the left, settings on the right</span>
        <span class="n">header_row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0&quot;</span><span class="p">,</span>
            <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;space-between&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_btn</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">header_row</span><span class="p">]</span>

        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_content_box</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">children</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;min-width: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">min_width</span><span class="si">}</span><span class="s2">px; max-width: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_width</span><span class="si">}</span><span class="s2">px;&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_btn</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="s2">&quot;width: 48px; min-width: 48px; max-width: 48px;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.CustomWidget" class="doc doc-heading">
            <code>CustomWidget</code>


<a href="#leafmap.maplibregl.CustomWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipyvuetify.ExpansionPanels">ExpansionPanels</span></code></p>


        <p>A custom expansion panel widget with dynamic widget management.</p>
<p>This widget allows for the creation of an expandable panel with a customizable header
and dynamic content. Widgets can be added, removed, or replaced in the content box.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.CustomWidget.content_box">content_box</span></code></td>
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A container for holding the widgets displayed in the panel.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.CustomWidget.panel">panel</span></code></td>
            <td>
                  <code><span title="ipyvuetify.ExpansionPanel">ExpansionPanel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The main expansion panel containing the header and content.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9528</span>
<span class="normal">9529</span>
<span class="normal">9530</span>
<span class="normal">9531</span>
<span class="normal">9532</span>
<span class="normal">9533</span>
<span class="normal">9534</span>
<span class="normal">9535</span>
<span class="normal">9536</span>
<span class="normal">9537</span>
<span class="normal">9538</span>
<span class="normal">9539</span>
<span class="normal">9540</span>
<span class="normal">9541</span>
<span class="normal">9542</span>
<span class="normal">9543</span>
<span class="normal">9544</span>
<span class="normal">9545</span>
<span class="normal">9546</span>
<span class="normal">9547</span>
<span class="normal">9548</span>
<span class="normal">9549</span>
<span class="normal">9550</span>
<span class="normal">9551</span>
<span class="normal">9552</span>
<span class="normal">9553</span>
<span class="normal">9554</span>
<span class="normal">9555</span>
<span class="normal">9556</span>
<span class="normal">9557</span>
<span class="normal">9558</span>
<span class="normal">9559</span>
<span class="normal">9560</span>
<span class="normal">9561</span>
<span class="normal">9562</span>
<span class="normal">9563</span>
<span class="normal">9564</span>
<span class="normal">9565</span>
<span class="normal">9566</span>
<span class="normal">9567</span>
<span class="normal">9568</span>
<span class="normal">9569</span>
<span class="normal">9570</span>
<span class="normal">9571</span>
<span class="normal">9572</span>
<span class="normal">9573</span>
<span class="normal">9574</span>
<span class="normal">9575</span>
<span class="normal">9576</span>
<span class="normal">9577</span>
<span class="normal">9578</span>
<span class="normal">9579</span>
<span class="normal">9580</span>
<span class="normal">9581</span>
<span class="normal">9582</span>
<span class="normal">9583</span>
<span class="normal">9584</span>
<span class="normal">9585</span>
<span class="normal">9586</span>
<span class="normal">9587</span>
<span class="normal">9588</span>
<span class="normal">9589</span>
<span class="normal">9590</span>
<span class="normal">9591</span>
<span class="normal">9592</span>
<span class="normal">9593</span>
<span class="normal">9594</span>
<span class="normal">9595</span>
<span class="normal">9596</span>
<span class="normal">9597</span>
<span class="normal">9598</span>
<span class="normal">9599</span>
<span class="normal">9600</span>
<span class="normal">9601</span>
<span class="normal">9602</span>
<span class="normal">9603</span>
<span class="normal">9604</span>
<span class="normal">9605</span>
<span class="normal">9606</span>
<span class="normal">9607</span>
<span class="normal">9608</span>
<span class="normal">9609</span>
<span class="normal">9610</span>
<span class="normal">9611</span>
<span class="normal">9612</span>
<span class="normal">9613</span>
<span class="normal">9614</span>
<span class="normal">9615</span>
<span class="normal">9616</span>
<span class="normal">9617</span>
<span class="normal">9618</span>
<span class="normal">9619</span>
<span class="normal">9620</span>
<span class="normal">9621</span>
<span class="normal">9622</span>
<span class="normal">9623</span>
<span class="normal">9624</span>
<span class="normal">9625</span>
<span class="normal">9626</span>
<span class="normal">9627</span>
<span class="normal">9628</span>
<span class="normal">9629</span>
<span class="normal">9630</span>
<span class="normal">9631</span>
<span class="normal">9632</span>
<span class="normal">9633</span>
<span class="normal">9634</span>
<span class="normal">9635</span>
<span class="normal">9636</span>
<span class="normal">9637</span>
<span class="normal">9638</span>
<span class="normal">9639</span>
<span class="normal">9640</span>
<span class="normal">9641</span>
<span class="normal">9642</span>
<span class="normal">9643</span>
<span class="normal">9644</span>
<span class="normal">9645</span>
<span class="normal">9646</span>
<span class="normal">9647</span>
<span class="normal">9648</span>
<span class="normal">9649</span>
<span class="normal">9650</span>
<span class="normal">9651</span>
<span class="normal">9652</span>
<span class="normal">9653</span>
<span class="normal">9654</span>
<span class="normal">9655</span>
<span class="normal">9656</span>
<span class="normal">9657</span>
<span class="normal">9658</span>
<span class="normal">9659</span>
<span class="normal">9660</span>
<span class="normal">9661</span>
<span class="normal">9662</span>
<span class="normal">9663</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CustomWidget</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom expansion panel widget with dynamic widget management.</span>

<span class="sd">    This widget allows for the creation of an expandable panel with a customizable header</span>
<span class="sd">    and dynamic content. Widgets can be added, removed, or replaced in the content box.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        content_box (widgets.VBox): A container for holding the widgets displayed in the panel.</span>
<span class="sd">        panel (v.ExpansionPanel): The main expansion panel containing the header and content.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">widget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the CustomWidget.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Wrap content in a mutable VBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span> <span class="o">=</span> <span class="n">host_map</span>
        <span class="k">if</span> <span class="n">widget</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">widget</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widget</span><span class="p">]</span>

        <span class="c1"># Close icon button</span>
        <span class="n">close_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;min-width: 24px; width: 24px;&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">close_icon</span><span class="p">])],</span>
        <span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_close</span><span class="p">)</span>

        <span class="n">header</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelHeader</span><span class="p">(</span>
            <span class="n">style_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; min-height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">background_color</span><span class="si">}</span><span class="s2">;&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                    <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                    <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-grow-1 align-center&quot;</span><span class="p">,</span>
                    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget_icon</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ml-1&quot;</span><span class="p">),</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push title to center</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">label</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text-subtitle-2&quot;</span><span class="p">),</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push close to right</span>
                        <span class="n">close_btn</span><span class="p">,</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>
                    <span class="p">],</span>
                <span class="p">)</span>
            <span class="p">],</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanel</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">header</span><span class="p">,</span>
                <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelContent</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="p">]),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="p">],</span>
            <span class="n">v_model</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">expanded</span> <span class="k">else</span> <span class="p">[],</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_handle_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls the on_close callback if provided.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># self.close()</span>

    <span class="k">def</span> <span class="nf">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a widget to the content box.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (widgets.Widget): The widget to add to the content box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">remove_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a widget from the content box.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (widgets.Widget): The widget to remove from the content box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">w</span> <span class="o">!=</span> <span class="n">widget</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widgets_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replaces all widgets in the content box.</span>

<span class="sd">        Args:</span>
<span class="sd">            widgets_list (List[widgets.Widget]): A list of widgets to set as the content of the content box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">widgets_list</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">expanded</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns whether the panel is expanded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v_model</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.CustomWidget.expanded" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expanded</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.CustomWidget.expanded" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns whether the panel is expanded.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.CustomWidget.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-tools&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;My Tools&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">host_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.CustomWidget.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the CustomWidget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="ipywidgets.Widget">Widget</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial widget(s) to display in the content box.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;My Tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional positional arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9540</span>
<span class="normal">9541</span>
<span class="normal">9542</span>
<span class="normal">9543</span>
<span class="normal">9544</span>
<span class="normal">9545</span>
<span class="normal">9546</span>
<span class="normal">9547</span>
<span class="normal">9548</span>
<span class="normal">9549</span>
<span class="normal">9550</span>
<span class="normal">9551</span>
<span class="normal">9552</span>
<span class="normal">9553</span>
<span class="normal">9554</span>
<span class="normal">9555</span>
<span class="normal">9556</span>
<span class="normal">9557</span>
<span class="normal">9558</span>
<span class="normal">9559</span>
<span class="normal">9560</span>
<span class="normal">9561</span>
<span class="normal">9562</span>
<span class="normal">9563</span>
<span class="normal">9564</span>
<span class="normal">9565</span>
<span class="normal">9566</span>
<span class="normal">9567</span>
<span class="normal">9568</span>
<span class="normal">9569</span>
<span class="normal">9570</span>
<span class="normal">9571</span>
<span class="normal">9572</span>
<span class="normal">9573</span>
<span class="normal">9574</span>
<span class="normal">9575</span>
<span class="normal">9576</span>
<span class="normal">9577</span>
<span class="normal">9578</span>
<span class="normal">9579</span>
<span class="normal">9580</span>
<span class="normal">9581</span>
<span class="normal">9582</span>
<span class="normal">9583</span>
<span class="normal">9584</span>
<span class="normal">9585</span>
<span class="normal">9586</span>
<span class="normal">9587</span>
<span class="normal">9588</span>
<span class="normal">9589</span>
<span class="normal">9590</span>
<span class="normal">9591</span>
<span class="normal">9592</span>
<span class="normal">9593</span>
<span class="normal">9594</span>
<span class="normal">9595</span>
<span class="normal">9596</span>
<span class="normal">9597</span>
<span class="normal">9598</span>
<span class="normal">9599</span>
<span class="normal">9600</span>
<span class="normal">9601</span>
<span class="normal">9602</span>
<span class="normal">9603</span>
<span class="normal">9604</span>
<span class="normal">9605</span>
<span class="normal">9606</span>
<span class="normal">9607</span>
<span class="normal">9608</span>
<span class="normal">9609</span>
<span class="normal">9610</span>
<span class="normal">9611</span>
<span class="normal">9612</span>
<span class="normal">9613</span>
<span class="normal">9614</span>
<span class="normal">9615</span>
<span class="normal">9616</span>
<span class="normal">9617</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">widget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">host_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the CustomWidget.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Wrap content in a mutable VBox</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host_map</span> <span class="o">=</span> <span class="n">host_map</span>
    <span class="k">if</span> <span class="n">widget</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widget</span><span class="p">]</span>

    <span class="c1"># Close icon button</span>
    <span class="n">close_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;min-width: 24px; width: 24px;&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">close_icon</span><span class="p">])],</span>
    <span class="p">)</span>
    <span class="n">close_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_close</span><span class="p">)</span>

    <span class="n">header</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelHeader</span><span class="p">(</span>
        <span class="n">style_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; min-height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">background_color</span><span class="si">}</span><span class="s2">;&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-grow-1 align-center&quot;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget_icon</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ml-1&quot;</span><span class="p">),</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push title to center</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">label</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text-subtitle-2&quot;</span><span class="p">),</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push close to right</span>
                    <span class="n">close_btn</span><span class="p">,</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>
                <span class="p">],</span>
            <span class="p">)</span>
        <span class="p">],</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanel</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">header</span><span class="p">,</span>
            <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelContent</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="p">]),</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="p">],</span>
        <span class="n">v_model</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">expanded</span> <span class="k">else</span> <span class="p">[],</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.CustomWidget.add_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.CustomWidget.add_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a widget to the content box.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The widget to add to the content box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9626</span>
<span class="normal">9627</span>
<span class="normal">9628</span>
<span class="normal">9629</span>
<span class="normal">9630</span>
<span class="normal">9631</span>
<span class="normal">9632</span>
<span class="normal">9633</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a widget to the content box.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (widgets.Widget): The widget to add to the content box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.CustomWidget.remove_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.CustomWidget.remove_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes a widget from the content box.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The widget to remove from the content box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9635</span>
<span class="normal">9636</span>
<span class="normal">9637</span>
<span class="normal">9638</span>
<span class="normal">9639</span>
<span class="normal">9640</span>
<span class="normal">9641</span>
<span class="normal">9642</span>
<span class="normal">9643</span>
<span class="normal">9644</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a widget from the content box.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (widgets.Widget): The widget to remove from the content box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
        <span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">w</span> <span class="o">!=</span> <span class="n">widget</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.CustomWidget.set_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_widgets</span><span class="p">(</span><span class="n">widgets_list</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.CustomWidget.set_widgets" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Replaces all widgets in the content box.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widgets_list</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of widgets to set as the content of the content box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9646</span>
<span class="normal">9647</span>
<span class="normal">9648</span>
<span class="normal">9649</span>
<span class="normal">9650</span>
<span class="normal">9651</span>
<span class="normal">9652</span>
<span class="normal">9653</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widgets_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces all widgets in the content box.</span>

<span class="sd">    Args:</span>
<span class="sd">        widgets_list (List[widgets.Widget]): A list of widgets to set as the content of the content box.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">widgets_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.DateFilterWidget" class="doc doc-heading">
            <code>DateFilterWidget</code>


<a href="#leafmap.maplibregl.DateFilterWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipywidgets.VBox">VBox</span></code></p>


        <p>A widget for filtering data based on time range.</p>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9930</span>
<span class="normal"> 9931</span>
<span class="normal"> 9932</span>
<span class="normal"> 9933</span>
<span class="normal"> 9934</span>
<span class="normal"> 9935</span>
<span class="normal"> 9936</span>
<span class="normal"> 9937</span>
<span class="normal"> 9938</span>
<span class="normal"> 9939</span>
<span class="normal"> 9940</span>
<span class="normal"> 9941</span>
<span class="normal"> 9942</span>
<span class="normal"> 9943</span>
<span class="normal"> 9944</span>
<span class="normal"> 9945</span>
<span class="normal"> 9946</span>
<span class="normal"> 9947</span>
<span class="normal"> 9948</span>
<span class="normal"> 9949</span>
<span class="normal"> 9950</span>
<span class="normal"> 9951</span>
<span class="normal"> 9952</span>
<span class="normal"> 9953</span>
<span class="normal"> 9954</span>
<span class="normal"> 9955</span>
<span class="normal"> 9956</span>
<span class="normal"> 9957</span>
<span class="normal"> 9958</span>
<span class="normal"> 9959</span>
<span class="normal"> 9960</span>
<span class="normal"> 9961</span>
<span class="normal"> 9962</span>
<span class="normal"> 9963</span>
<span class="normal"> 9964</span>
<span class="normal"> 9965</span>
<span class="normal"> 9966</span>
<span class="normal"> 9967</span>
<span class="normal"> 9968</span>
<span class="normal"> 9969</span>
<span class="normal"> 9970</span>
<span class="normal"> 9971</span>
<span class="normal"> 9972</span>
<span class="normal"> 9973</span>
<span class="normal"> 9974</span>
<span class="normal"> 9975</span>
<span class="normal"> 9976</span>
<span class="normal"> 9977</span>
<span class="normal"> 9978</span>
<span class="normal"> 9979</span>
<span class="normal"> 9980</span>
<span class="normal"> 9981</span>
<span class="normal"> 9982</span>
<span class="normal"> 9983</span>
<span class="normal"> 9984</span>
<span class="normal"> 9985</span>
<span class="normal"> 9986</span>
<span class="normal"> 9987</span>
<span class="normal"> 9988</span>
<span class="normal"> 9989</span>
<span class="normal"> 9990</span>
<span class="normal"> 9991</span>
<span class="normal"> 9992</span>
<span class="normal"> 9993</span>
<span class="normal"> 9994</span>
<span class="normal"> 9995</span>
<span class="normal"> 9996</span>
<span class="normal"> 9997</span>
<span class="normal"> 9998</span>
<span class="normal"> 9999</span>
<span class="normal">10000</span>
<span class="normal">10001</span>
<span class="normal">10002</span>
<span class="normal">10003</span>
<span class="normal">10004</span>
<span class="normal">10005</span>
<span class="normal">10006</span>
<span class="normal">10007</span>
<span class="normal">10008</span>
<span class="normal">10009</span>
<span class="normal">10010</span>
<span class="normal">10011</span>
<span class="normal">10012</span>
<span class="normal">10013</span>
<span class="normal">10014</span>
<span class="normal">10015</span>
<span class="normal">10016</span>
<span class="normal">10017</span>
<span class="normal">10018</span>
<span class="normal">10019</span>
<span class="normal">10020</span>
<span class="normal">10021</span>
<span class="normal">10022</span>
<span class="normal">10023</span>
<span class="normal">10024</span>
<span class="normal">10025</span>
<span class="normal">10026</span>
<span class="normal">10027</span>
<span class="normal">10028</span>
<span class="normal">10029</span>
<span class="normal">10030</span>
<span class="normal">10031</span>
<span class="normal">10032</span>
<span class="normal">10033</span>
<span class="normal">10034</span>
<span class="normal">10035</span>
<span class="normal">10036</span>
<span class="normal">10037</span>
<span class="normal">10038</span>
<span class="normal">10039</span>
<span class="normal">10040</span>
<span class="normal">10041</span>
<span class="normal">10042</span>
<span class="normal">10043</span>
<span class="normal">10044</span>
<span class="normal">10045</span>
<span class="normal">10046</span>
<span class="normal">10047</span>
<span class="normal">10048</span>
<span class="normal">10049</span>
<span class="normal">10050</span>
<span class="normal">10051</span>
<span class="normal">10052</span>
<span class="normal">10053</span>
<span class="normal">10054</span>
<span class="normal">10055</span>
<span class="normal">10056</span>
<span class="normal">10057</span>
<span class="normal">10058</span>
<span class="normal">10059</span>
<span class="normal">10060</span>
<span class="normal">10061</span>
<span class="normal">10062</span>
<span class="normal">10063</span>
<span class="normal">10064</span>
<span class="normal">10065</span>
<span class="normal">10066</span>
<span class="normal">10067</span>
<span class="normal">10068</span>
<span class="normal">10069</span>
<span class="normal">10070</span>
<span class="normal">10071</span>
<span class="normal">10072</span>
<span class="normal">10073</span>
<span class="normal">10074</span>
<span class="normal">10075</span>
<span class="normal">10076</span>
<span class="normal">10077</span>
<span class="normal">10078</span>
<span class="normal">10079</span>
<span class="normal">10080</span>
<span class="normal">10081</span>
<span class="normal">10082</span>
<span class="normal">10083</span>
<span class="normal">10084</span>
<span class="normal">10085</span>
<span class="normal">10086</span>
<span class="normal">10087</span>
<span class="normal">10088</span>
<span class="normal">10089</span>
<span class="normal">10090</span>
<span class="normal">10091</span>
<span class="normal">10092</span>
<span class="normal">10093</span>
<span class="normal">10094</span>
<span class="normal">10095</span>
<span class="normal">10096</span>
<span class="normal">10097</span>
<span class="normal">10098</span>
<span class="normal">10099</span>
<span class="normal">10100</span>
<span class="normal">10101</span>
<span class="normal">10102</span>
<span class="normal">10103</span>
<span class="normal">10104</span>
<span class="normal">10105</span>
<span class="normal">10106</span>
<span class="normal">10107</span>
<span class="normal">10108</span>
<span class="normal">10109</span>
<span class="normal">10110</span>
<span class="normal">10111</span>
<span class="normal">10112</span>
<span class="normal">10113</span>
<span class="normal">10114</span>
<span class="normal">10115</span>
<span class="normal">10116</span>
<span class="normal">10117</span>
<span class="normal">10118</span>
<span class="normal">10119</span>
<span class="normal">10120</span>
<span class="normal">10121</span>
<span class="normal">10122</span>
<span class="normal">10123</span>
<span class="normal">10124</span>
<span class="normal">10125</span>
<span class="normal">10126</span>
<span class="normal">10127</span>
<span class="normal">10128</span>
<span class="normal">10129</span>
<span class="normal">10130</span>
<span class="normal">10131</span>
<span class="normal">10132</span>
<span class="normal">10133</span>
<span class="normal">10134</span>
<span class="normal">10135</span>
<span class="normal">10136</span>
<span class="normal">10137</span>
<span class="normal">10138</span>
<span class="normal">10139</span>
<span class="normal">10140</span>
<span class="normal">10141</span>
<span class="normal">10142</span>
<span class="normal">10143</span>
<span class="normal">10144</span>
<span class="normal">10145</span>
<span class="normal">10146</span>
<span class="normal">10147</span>
<span class="normal">10148</span>
<span class="normal">10149</span>
<span class="normal">10150</span>
<span class="normal">10151</span>
<span class="normal">10152</span>
<span class="normal">10153</span>
<span class="normal">10154</span>
<span class="normal">10155</span>
<span class="normal">10156</span>
<span class="normal">10157</span>
<span class="normal">10158</span>
<span class="normal">10159</span>
<span class="normal">10160</span>
<span class="normal">10161</span>
<span class="normal">10162</span>
<span class="normal">10163</span>
<span class="normal">10164</span>
<span class="normal">10165</span>
<span class="normal">10166</span>
<span class="normal">10167</span>
<span class="normal">10168</span>
<span class="normal">10169</span>
<span class="normal">10170</span>
<span class="normal">10171</span>
<span class="normal">10172</span>
<span class="normal">10173</span>
<span class="normal">10174</span>
<span class="normal">10175</span>
<span class="normal">10176</span>
<span class="normal">10177</span>
<span class="normal">10178</span>
<span class="normal">10179</span>
<span class="normal">10180</span>
<span class="normal">10181</span>
<span class="normal">10182</span>
<span class="normal">10183</span>
<span class="normal">10184</span>
<span class="normal">10185</span>
<span class="normal">10186</span>
<span class="normal">10187</span>
<span class="normal">10188</span>
<span class="normal">10189</span>
<span class="normal">10190</span>
<span class="normal">10191</span>
<span class="normal">10192</span>
<span class="normal">10193</span>
<span class="normal">10194</span>
<span class="normal">10195</span>
<span class="normal">10196</span>
<span class="normal">10197</span>
<span class="normal">10198</span>
<span class="normal">10199</span>
<span class="normal">10200</span>
<span class="normal">10201</span>
<span class="normal">10202</span>
<span class="normal">10203</span>
<span class="normal">10204</span>
<span class="normal">10205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DateFilterWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A widget for filtering data based on time range.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">styles</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;startDatetime&quot;</span><span class="p">,</span>
        <span class="n">end_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;endDatetime&quot;</span><span class="p">,</span>
        <span class="n">date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">min_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span>
        <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
        <span class="n">interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">map_widget</span><span class="p">:</span> <span class="n">Map</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the DateFilterWidget.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[Dict[str, Any]]): List of data sources.</span>
<span class="sd">            names (List[str], optional): List of names for the data sources. Defaults to None.</span>
<span class="sd">            styles (Dict[str, Any], optional): Dictionary of styles for the data sources. Defaults to None.</span>
<span class="sd">            start_date_col (str, optional): Name of the column containing the start date. Defaults to &quot;startDatetime&quot;.</span>
<span class="sd">            end_date_col (str, optional): Name of the column containing the end date. Defaults to &quot;endDatetime&quot;.</span>
<span class="sd">            date_col (str, optional): Name of the column containing the date. Defaults to None.</span>
<span class="sd">            date_format (str, optional): Format of the date. Defaults to &quot;%Y-%m-%d&quot;.</span>
<span class="sd">            min_date (str, optional): Minimum date. Defaults to None.</span>
<span class="sd">            max_date (str, optional): Maximum date. Defaults to None.</span>
<span class="sd">            file_index (int, optional): Index of the main file. Defaults to 0.</span>
<span class="sd">            group_col (str, optional): Name of the column containing the group. Defaults to None.</span>
<span class="sd">            match (str, optional): Match type. Can be &quot;partial&quot; or &quot;exact&quot;. Defaults to &quot;partial&quot;.</span>
<span class="sd">            freq (str, optional): Frequency of the date range. Defaults to &quot;D&quot;.</span>
<span class="sd">            interval (int, optional): Interval of the date range. Defaults to 1.</span>
<span class="sd">            map_widget (Map, optional): Map widget. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;layer_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sources</span><span class="p">))]</span>

        <span class="n">gdfs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sources</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">file_index</span><span class="p">:</span>
                    <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">gdfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                <span class="n">gdfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

                <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layer_type&quot;</span><span class="p">]</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span>
                <span class="n">map_widget</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
                    <span class="n">gdf</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="n">index</span><span class="p">],</span>
                    <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
                    <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
                    <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
                    <span class="n">fit_bounds_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
                <span class="p">)</span>

            <span class="n">map_widget</span><span class="o">.</span><span class="n">add_arrow</span><span class="p">(</span>
                <span class="n">names</span><span class="p">[</span><span class="n">file_index</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;arrow&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdfs</span><span class="p">[</span><span class="n">file_index</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">min_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">min_date</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;startDatetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">min_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">date_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;min_date must be a string, pd.Timestamp, or None&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_date</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;endDatetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">max_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="n">date_format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_date must be a string, pd.Timestamp, or None&quot;</span><span class="p">)</span>

        <span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">date_range</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)</span>

        <span class="n">group_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">group_col</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()),</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;250px&quot;</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">dropdown_reset_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;eraser&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Clear selection&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_dropdown_reset_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">dropdown_reset_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_dropdown_reset_btn_click</span><span class="p">)</span>

        <span class="n">dropdown_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">group_dropdown</span><span class="p">,</span> <span class="n">dropdown_reset_btn</span><span class="p">])</span>

        <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">SelectionRangeSlider</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">date_range</span><span class="p">),</span>
            <span class="n">index</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">date_range</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Date range:&quot;</span><span class="p">,</span>
            <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;95%&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">range_label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span>

        <span class="n">date_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">DatePicker</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">min_date</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;130px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># Buttons with valid FontAwesome icons</span>
        <span class="n">start_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast-backward&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Go to start date&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">end_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast-forward&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Go to end date&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">forward_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;forward&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Forward one day&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">backward_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;backward&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Back one day&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">nav_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">backward_btn</span><span class="p">,</span> <span class="n">start_btn</span><span class="p">,</span> <span class="n">date_picker</span><span class="p">,</span> <span class="n">end_btn</span><span class="p">,</span> <span class="n">forward_btn</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Ensure the end is at least one day after the start.&quot;&quot;&quot;</span>
            <span class="n">next_day</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">interval</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">next_day</span> <span class="k">if</span> <span class="n">next_day</span> <span class="o">&lt;=</span> <span class="n">max_date</span> <span class="k">else</span> <span class="n">max_date</span>

        <span class="k">def</span> <span class="nf">update_date_picker</span><span class="p">():</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
            <span class="n">date_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">on_date_picker_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;change&quot;</span><span class="p">:</span>
                <span class="n">new_start</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
                <span class="c1"># Do not clamp unless end &lt;= new_start</span>
                <span class="k">if</span> <span class="n">new_start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="n">new_start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_start_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">min_date</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_end_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">max_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">min_date</span><span class="p">:</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">min_date</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_forward_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
            <span class="n">next_start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">next_start</span> <span class="o">&lt;=</span> <span class="n">max_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_start</span><span class="p">,</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">next_start</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">on_backward_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
            <span class="n">prev_start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">prev_start</span> <span class="o">&gt;=</span> <span class="n">min_date</span><span class="p">:</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev_start</span><span class="p">,</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">prev_start</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">on_slider_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
                <span class="n">range_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Selected range: </span><span class="si">{</span><span class="n">start</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">filtered_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span>
                    <span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;startDatetime&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;endDatetime&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">filtered_gdf</span> <span class="o">=</span> <span class="n">filtered_gdf</span><span class="p">[</span>
                        <span class="n">filtered_gdf</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span> <span class="o">==</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span>
                    <span class="p">]</span>
                <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">file_index</span><span class="p">],</span> <span class="n">filtered_gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;arrow&quot;</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
                    <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;arrow&quot;</span><span class="p">,</span> <span class="n">filtered_gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point_gdf</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gdfs</span><span class="p">[</span><span class="n">file_index</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]):</span>
                    <span class="k">if</span> <span class="n">point_gdf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">date_col</span> <span class="ow">in</span> <span class="n">point_gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="o">=</span> <span class="n">point_gdf</span><span class="p">[</span>
                            <span class="p">(</span><span class="n">point_gdf</span><span class="p">[</span><span class="n">date_col</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">point_gdf</span><span class="p">[</span><span class="n">date_col</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
                        <span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="o">=</span> <span class="n">point_gdf</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                        <span class="ow">and</span> <span class="n">group_col</span> <span class="ow">in</span> <span class="n">point_gdf</span><span class="o">.</span><span class="n">columns</span>
                    <span class="p">):</span>
                        <span class="k">if</span> <span class="n">match</span> <span class="o">==</span> <span class="s2">&quot;exact&quot;</span><span class="p">:</span>
                            <span class="n">filtered</span> <span class="o">=</span> <span class="n">filtered</span><span class="p">[</span>
                                <span class="n">filtered</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span> <span class="o">==</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span>
                            <span class="p">]</span>
                        <span class="k">elif</span> <span class="n">match</span> <span class="o">==</span> <span class="s2">&quot;partial&quot;</span><span class="p">:</span>
                            <span class="n">filtered</span> <span class="o">=</span> <span class="n">filtered</span><span class="p">[</span>
                                <span class="n">filtered</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                            <span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid match type: </span><span class="si">{</span><span class="n">match</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span>
                        <span class="n">names</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="n">file_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">filtered</span><span class="o">.</span><span class="n">__geo_interface__</span>
                    <span class="p">)</span>
                <span class="n">update_date_picker</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">on_group_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;change&quot;</span><span class="p">:</span>
                <span class="n">on_slider_change</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="n">group_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_group_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_slider_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">date_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_date_picker_change</span><span class="p">)</span>
        <span class="n">start_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_start_btn_click</span><span class="p">)</span>
        <span class="n">end_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_end_btn_click</span><span class="p">)</span>
        <span class="n">forward_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_forward_btn_click</span><span class="p">)</span>
        <span class="n">backward_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_backward_btn_click</span><span class="p">)</span>

        <span class="c1"># Initial trigger</span>
        <span class="n">on_slider_change</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">dropdown_box</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">range_label</span><span class="p">,</span> <span class="n">nav_box</span><span class="p">,</span> <span class="n">output</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.DateFilterWidget.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date_col</span><span class="o">=</span><span class="s1">&#39;startDatetime&#39;</span><span class="p">,</span> <span class="n">end_date_col</span><span class="o">=</span><span class="s1">&#39;endDatetime&#39;</span><span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">min_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">group_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;partial&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">map_widget</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.DateFilterWidget.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the DateFilterWidget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of data sources.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of names for the data sources. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>styles</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of styles for the data sources. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the start date. Defaults to "startDatetime".</p>
              </div>
            </td>
            <td>
                  <code>&#39;startDatetime&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the end date. Defaults to "endDatetime".</p>
              </div>
            </td>
            <td>
                  <code>&#39;endDatetime&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format of the date. Defaults to "%Y-%m-%d".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y-%m-%d&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the main file. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>group_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the group. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>match</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match type. Can be "partial" or "exact". Defaults to "partial".</p>
              </div>
            </td>
            <td>
                  <code>&#39;partial&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>freq</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frequency of the date range. Defaults to "D".</p>
              </div>
            </td>
            <td>
                  <code>&#39;D&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>interval</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Interval of the date range. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_widget</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Map widget. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9935</span>
<span class="normal"> 9936</span>
<span class="normal"> 9937</span>
<span class="normal"> 9938</span>
<span class="normal"> 9939</span>
<span class="normal"> 9940</span>
<span class="normal"> 9941</span>
<span class="normal"> 9942</span>
<span class="normal"> 9943</span>
<span class="normal"> 9944</span>
<span class="normal"> 9945</span>
<span class="normal"> 9946</span>
<span class="normal"> 9947</span>
<span class="normal"> 9948</span>
<span class="normal"> 9949</span>
<span class="normal"> 9950</span>
<span class="normal"> 9951</span>
<span class="normal"> 9952</span>
<span class="normal"> 9953</span>
<span class="normal"> 9954</span>
<span class="normal"> 9955</span>
<span class="normal"> 9956</span>
<span class="normal"> 9957</span>
<span class="normal"> 9958</span>
<span class="normal"> 9959</span>
<span class="normal"> 9960</span>
<span class="normal"> 9961</span>
<span class="normal"> 9962</span>
<span class="normal"> 9963</span>
<span class="normal"> 9964</span>
<span class="normal"> 9965</span>
<span class="normal"> 9966</span>
<span class="normal"> 9967</span>
<span class="normal"> 9968</span>
<span class="normal"> 9969</span>
<span class="normal"> 9970</span>
<span class="normal"> 9971</span>
<span class="normal"> 9972</span>
<span class="normal"> 9973</span>
<span class="normal"> 9974</span>
<span class="normal"> 9975</span>
<span class="normal"> 9976</span>
<span class="normal"> 9977</span>
<span class="normal"> 9978</span>
<span class="normal"> 9979</span>
<span class="normal"> 9980</span>
<span class="normal"> 9981</span>
<span class="normal"> 9982</span>
<span class="normal"> 9983</span>
<span class="normal"> 9984</span>
<span class="normal"> 9985</span>
<span class="normal"> 9986</span>
<span class="normal"> 9987</span>
<span class="normal"> 9988</span>
<span class="normal"> 9989</span>
<span class="normal"> 9990</span>
<span class="normal"> 9991</span>
<span class="normal"> 9992</span>
<span class="normal"> 9993</span>
<span class="normal"> 9994</span>
<span class="normal"> 9995</span>
<span class="normal"> 9996</span>
<span class="normal"> 9997</span>
<span class="normal"> 9998</span>
<span class="normal"> 9999</span>
<span class="normal">10000</span>
<span class="normal">10001</span>
<span class="normal">10002</span>
<span class="normal">10003</span>
<span class="normal">10004</span>
<span class="normal">10005</span>
<span class="normal">10006</span>
<span class="normal">10007</span>
<span class="normal">10008</span>
<span class="normal">10009</span>
<span class="normal">10010</span>
<span class="normal">10011</span>
<span class="normal">10012</span>
<span class="normal">10013</span>
<span class="normal">10014</span>
<span class="normal">10015</span>
<span class="normal">10016</span>
<span class="normal">10017</span>
<span class="normal">10018</span>
<span class="normal">10019</span>
<span class="normal">10020</span>
<span class="normal">10021</span>
<span class="normal">10022</span>
<span class="normal">10023</span>
<span class="normal">10024</span>
<span class="normal">10025</span>
<span class="normal">10026</span>
<span class="normal">10027</span>
<span class="normal">10028</span>
<span class="normal">10029</span>
<span class="normal">10030</span>
<span class="normal">10031</span>
<span class="normal">10032</span>
<span class="normal">10033</span>
<span class="normal">10034</span>
<span class="normal">10035</span>
<span class="normal">10036</span>
<span class="normal">10037</span>
<span class="normal">10038</span>
<span class="normal">10039</span>
<span class="normal">10040</span>
<span class="normal">10041</span>
<span class="normal">10042</span>
<span class="normal">10043</span>
<span class="normal">10044</span>
<span class="normal">10045</span>
<span class="normal">10046</span>
<span class="normal">10047</span>
<span class="normal">10048</span>
<span class="normal">10049</span>
<span class="normal">10050</span>
<span class="normal">10051</span>
<span class="normal">10052</span>
<span class="normal">10053</span>
<span class="normal">10054</span>
<span class="normal">10055</span>
<span class="normal">10056</span>
<span class="normal">10057</span>
<span class="normal">10058</span>
<span class="normal">10059</span>
<span class="normal">10060</span>
<span class="normal">10061</span>
<span class="normal">10062</span>
<span class="normal">10063</span>
<span class="normal">10064</span>
<span class="normal">10065</span>
<span class="normal">10066</span>
<span class="normal">10067</span>
<span class="normal">10068</span>
<span class="normal">10069</span>
<span class="normal">10070</span>
<span class="normal">10071</span>
<span class="normal">10072</span>
<span class="normal">10073</span>
<span class="normal">10074</span>
<span class="normal">10075</span>
<span class="normal">10076</span>
<span class="normal">10077</span>
<span class="normal">10078</span>
<span class="normal">10079</span>
<span class="normal">10080</span>
<span class="normal">10081</span>
<span class="normal">10082</span>
<span class="normal">10083</span>
<span class="normal">10084</span>
<span class="normal">10085</span>
<span class="normal">10086</span>
<span class="normal">10087</span>
<span class="normal">10088</span>
<span class="normal">10089</span>
<span class="normal">10090</span>
<span class="normal">10091</span>
<span class="normal">10092</span>
<span class="normal">10093</span>
<span class="normal">10094</span>
<span class="normal">10095</span>
<span class="normal">10096</span>
<span class="normal">10097</span>
<span class="normal">10098</span>
<span class="normal">10099</span>
<span class="normal">10100</span>
<span class="normal">10101</span>
<span class="normal">10102</span>
<span class="normal">10103</span>
<span class="normal">10104</span>
<span class="normal">10105</span>
<span class="normal">10106</span>
<span class="normal">10107</span>
<span class="normal">10108</span>
<span class="normal">10109</span>
<span class="normal">10110</span>
<span class="normal">10111</span>
<span class="normal">10112</span>
<span class="normal">10113</span>
<span class="normal">10114</span>
<span class="normal">10115</span>
<span class="normal">10116</span>
<span class="normal">10117</span>
<span class="normal">10118</span>
<span class="normal">10119</span>
<span class="normal">10120</span>
<span class="normal">10121</span>
<span class="normal">10122</span>
<span class="normal">10123</span>
<span class="normal">10124</span>
<span class="normal">10125</span>
<span class="normal">10126</span>
<span class="normal">10127</span>
<span class="normal">10128</span>
<span class="normal">10129</span>
<span class="normal">10130</span>
<span class="normal">10131</span>
<span class="normal">10132</span>
<span class="normal">10133</span>
<span class="normal">10134</span>
<span class="normal">10135</span>
<span class="normal">10136</span>
<span class="normal">10137</span>
<span class="normal">10138</span>
<span class="normal">10139</span>
<span class="normal">10140</span>
<span class="normal">10141</span>
<span class="normal">10142</span>
<span class="normal">10143</span>
<span class="normal">10144</span>
<span class="normal">10145</span>
<span class="normal">10146</span>
<span class="normal">10147</span>
<span class="normal">10148</span>
<span class="normal">10149</span>
<span class="normal">10150</span>
<span class="normal">10151</span>
<span class="normal">10152</span>
<span class="normal">10153</span>
<span class="normal">10154</span>
<span class="normal">10155</span>
<span class="normal">10156</span>
<span class="normal">10157</span>
<span class="normal">10158</span>
<span class="normal">10159</span>
<span class="normal">10160</span>
<span class="normal">10161</span>
<span class="normal">10162</span>
<span class="normal">10163</span>
<span class="normal">10164</span>
<span class="normal">10165</span>
<span class="normal">10166</span>
<span class="normal">10167</span>
<span class="normal">10168</span>
<span class="normal">10169</span>
<span class="normal">10170</span>
<span class="normal">10171</span>
<span class="normal">10172</span>
<span class="normal">10173</span>
<span class="normal">10174</span>
<span class="normal">10175</span>
<span class="normal">10176</span>
<span class="normal">10177</span>
<span class="normal">10178</span>
<span class="normal">10179</span>
<span class="normal">10180</span>
<span class="normal">10181</span>
<span class="normal">10182</span>
<span class="normal">10183</span>
<span class="normal">10184</span>
<span class="normal">10185</span>
<span class="normal">10186</span>
<span class="normal">10187</span>
<span class="normal">10188</span>
<span class="normal">10189</span>
<span class="normal">10190</span>
<span class="normal">10191</span>
<span class="normal">10192</span>
<span class="normal">10193</span>
<span class="normal">10194</span>
<span class="normal">10195</span>
<span class="normal">10196</span>
<span class="normal">10197</span>
<span class="normal">10198</span>
<span class="normal">10199</span>
<span class="normal">10200</span>
<span class="normal">10201</span>
<span class="normal">10202</span>
<span class="normal">10203</span>
<span class="normal">10204</span>
<span class="normal">10205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">styles</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">start_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;startDatetime&quot;</span><span class="p">,</span>
    <span class="n">end_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;endDatetime&quot;</span><span class="p">,</span>
    <span class="n">date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">min_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">file_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">match</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span>
    <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="n">interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">map_widget</span><span class="p">:</span> <span class="n">Map</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the DateFilterWidget.</span>

<span class="sd">    Args:</span>
<span class="sd">        sources (List[Dict[str, Any]]): List of data sources.</span>
<span class="sd">        names (List[str], optional): List of names for the data sources. Defaults to None.</span>
<span class="sd">        styles (Dict[str, Any], optional): Dictionary of styles for the data sources. Defaults to None.</span>
<span class="sd">        start_date_col (str, optional): Name of the column containing the start date. Defaults to &quot;startDatetime&quot;.</span>
<span class="sd">        end_date_col (str, optional): Name of the column containing the end date. Defaults to &quot;endDatetime&quot;.</span>
<span class="sd">        date_col (str, optional): Name of the column containing the date. Defaults to None.</span>
<span class="sd">        date_format (str, optional): Format of the date. Defaults to &quot;%Y-%m-%d&quot;.</span>
<span class="sd">        min_date (str, optional): Minimum date. Defaults to None.</span>
<span class="sd">        max_date (str, optional): Maximum date. Defaults to None.</span>
<span class="sd">        file_index (int, optional): Index of the main file. Defaults to 0.</span>
<span class="sd">        group_col (str, optional): Name of the column containing the group. Defaults to None.</span>
<span class="sd">        match (str, optional): Match type. Can be &quot;partial&quot; or &quot;exact&quot;. Defaults to &quot;partial&quot;.</span>
<span class="sd">        freq (str, optional): Frequency of the date range. Defaults to &quot;D&quot;.</span>
<span class="sd">        interval (int, optional): Interval of the date range. Defaults to 1.</span>
<span class="sd">        map_widget (Map, optional): Map widget. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;layer_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sources</span><span class="p">))]</span>

    <span class="n">gdfs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sources</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">file_index</span><span class="p">:</span>
                <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">gdfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="n">gdfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

            <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layer_type&quot;</span><span class="p">]</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span>
            <span class="n">map_widget</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
                <span class="n">gdf</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="n">index</span><span class="p">],</span>
                <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
                <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
                <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
                <span class="n">fit_bounds_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
            <span class="p">)</span>

        <span class="n">map_widget</span><span class="o">.</span><span class="n">add_arrow</span><span class="p">(</span>
            <span class="n">names</span><span class="p">[</span><span class="n">file_index</span><span class="p">],</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;arrow&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdfs</span><span class="p">[</span><span class="n">file_index</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">min_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">min_date</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;startDatetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">min_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">date_format</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;min_date must be a string, pd.Timestamp, or None&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">max_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_date</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;endDatetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">max_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="n">date_format</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_date</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_date must be a string, pd.Timestamp, or None&quot;</span><span class="p">)</span>

    <span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">date_range</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">date_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">min_date</span><span class="p">,</span> <span class="n">max_date</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)</span>

    <span class="n">group_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="n">group_col</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()),</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;250px&quot;</span><span class="p">),</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="n">dropdown_reset_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;eraser&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Clear selection&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_dropdown_reset_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">dropdown_reset_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_dropdown_reset_btn_click</span><span class="p">)</span>

    <span class="n">dropdown_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">group_dropdown</span><span class="p">,</span> <span class="n">dropdown_reset_btn</span><span class="p">])</span>

    <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">SelectionRangeSlider</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">date_range</span><span class="p">),</span>
        <span class="n">index</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">date_range</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Date range:&quot;</span><span class="p">,</span>
        <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;95%&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">range_label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span>

    <span class="n">date_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">DatePicker</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">min_date</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;130px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Buttons with valid FontAwesome icons</span>
    <span class="n">start_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast-backward&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Go to start date&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">end_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast-forward&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Go to end date&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">forward_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;forward&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Forward one day&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">backward_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;backward&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Back one day&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">nav_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">backward_btn</span><span class="p">,</span> <span class="n">start_btn</span><span class="p">,</span> <span class="n">date_picker</span><span class="p">,</span> <span class="n">end_btn</span><span class="p">,</span> <span class="n">forward_btn</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the end is at least one day after the start.&quot;&quot;&quot;</span>
        <span class="n">next_day</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">interval</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">next_day</span> <span class="k">if</span> <span class="n">next_day</span> <span class="o">&lt;=</span> <span class="n">max_date</span> <span class="k">else</span> <span class="n">max_date</span>

    <span class="k">def</span> <span class="nf">update_date_picker</span><span class="p">():</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
        <span class="n">date_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_date_picker_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;change&quot;</span><span class="p">:</span>
            <span class="n">new_start</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
            <span class="c1"># Do not clamp unless end &lt;= new_start</span>
            <span class="k">if</span> <span class="n">new_start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="n">new_start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_start_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">min_date</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_end_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">max_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">min_date</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">min_date</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_forward_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
        <span class="n">next_start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_start</span> <span class="o">&lt;=</span> <span class="n">max_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_start</span><span class="p">,</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">next_start</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_backward_btn_click</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
        <span class="n">prev_start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prev_start</span> <span class="o">&gt;=</span> <span class="n">min_date</span><span class="p">:</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev_start</span><span class="p">,</span> <span class="n">clamp_end</span><span class="p">(</span><span class="n">prev_start</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_slider_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span>
            <span class="n">range_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Selected range: </span><span class="si">{</span><span class="n">start</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">filtered_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span>
                <span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;startDatetime&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;endDatetime&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">filtered_gdf</span> <span class="o">=</span> <span class="n">filtered_gdf</span><span class="p">[</span>
                    <span class="n">filtered_gdf</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span> <span class="o">==</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span>
                <span class="p">]</span>
            <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">file_index</span><span class="p">],</span> <span class="n">filtered_gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;arrow&quot;</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
                <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;arrow&quot;</span><span class="p">,</span> <span class="n">filtered_gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point_gdf</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gdfs</span><span class="p">[</span><span class="n">file_index</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]):</span>
                <span class="k">if</span> <span class="n">point_gdf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">date_col</span> <span class="ow">in</span> <span class="n">point_gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="n">filtered</span> <span class="o">=</span> <span class="n">point_gdf</span><span class="p">[</span>
                        <span class="p">(</span><span class="n">point_gdf</span><span class="p">[</span><span class="n">date_col</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span>
                        <span class="o">&amp;</span> <span class="p">(</span><span class="n">point_gdf</span><span class="p">[</span><span class="n">date_col</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
                    <span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">filtered</span> <span class="o">=</span> <span class="n">point_gdf</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="n">group_col</span> <span class="ow">in</span> <span class="n">point_gdf</span><span class="o">.</span><span class="n">columns</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="n">match</span> <span class="o">==</span> <span class="s2">&quot;exact&quot;</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="o">=</span> <span class="n">filtered</span><span class="p">[</span>
                            <span class="n">filtered</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span> <span class="o">==</span> <span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span>
                        <span class="p">]</span>
                    <span class="k">elif</span> <span class="n">match</span> <span class="o">==</span> <span class="s2">&quot;partial&quot;</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="o">=</span> <span class="n">filtered</span><span class="p">[</span>
                            <span class="n">filtered</span><span class="p">[</span><span class="n">group_col</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">group_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                        <span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid match type: </span><span class="si">{</span><span class="n">match</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">map_widget</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span>
                    <span class="n">names</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="n">file_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">filtered</span><span class="o">.</span><span class="n">__geo_interface__</span>
                <span class="p">)</span>
            <span class="n">update_date_picker</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_group_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;change&quot;</span><span class="p">:</span>
            <span class="n">on_slider_change</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="n">group_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_group_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_slider_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">date_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_date_picker_change</span><span class="p">)</span>
    <span class="n">start_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_start_btn_click</span><span class="p">)</span>
    <span class="n">end_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_end_btn_click</span><span class="p">)</span>
    <span class="n">forward_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_forward_btn_click</span><span class="p">)</span>
    <span class="n">backward_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_backward_btn_click</span><span class="p">)</span>

    <span class="c1"># Initial trigger</span>
    <span class="n">on_slider_change</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">dropdown_box</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">range_label</span><span class="p">,</span> <span class="n">nav_box</span><span class="p">,</span> <span class="n">output</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.LayerManagerWidget" class="doc doc-heading">
            <code>LayerManagerWidget</code>


<a href="#leafmap.maplibregl.LayerManagerWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipyvuetify.ExpansionPanels">ExpansionPanels</span></code></p>


        <p>A widget for managing map layers.</p>
<p>This widget provides controls for toggling the visibility, adjusting the opacity,
and removing layers from a map. It also includes a master toggle to turn all layers
on or off.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.LayerManagerWidget.m">m</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map object to manage layers for.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.LayerManagerWidget.layer_items">layer_items</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="ipywidgets.Widget">Widget</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary mapping layer names
to their corresponding control widgets (checkbox and slider).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.LayerManagerWidget._building">_building</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A flag indicating whether the widget is currently being built.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.LayerManagerWidget.master_toggle">master_toggle</span></code></td>
            <td>
                  <code><span title="ipywidgets.Checkbox">Checkbox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A checkbox to toggle all layers on or off.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="leafmap.maplibregl.LayerManagerWidget.layers_box">layers_box</span></code></td>
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A container for individual layer controls.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9228</span>
<span class="normal">9229</span>
<span class="normal">9230</span>
<span class="normal">9231</span>
<span class="normal">9232</span>
<span class="normal">9233</span>
<span class="normal">9234</span>
<span class="normal">9235</span>
<span class="normal">9236</span>
<span class="normal">9237</span>
<span class="normal">9238</span>
<span class="normal">9239</span>
<span class="normal">9240</span>
<span class="normal">9241</span>
<span class="normal">9242</span>
<span class="normal">9243</span>
<span class="normal">9244</span>
<span class="normal">9245</span>
<span class="normal">9246</span>
<span class="normal">9247</span>
<span class="normal">9248</span>
<span class="normal">9249</span>
<span class="normal">9250</span>
<span class="normal">9251</span>
<span class="normal">9252</span>
<span class="normal">9253</span>
<span class="normal">9254</span>
<span class="normal">9255</span>
<span class="normal">9256</span>
<span class="normal">9257</span>
<span class="normal">9258</span>
<span class="normal">9259</span>
<span class="normal">9260</span>
<span class="normal">9261</span>
<span class="normal">9262</span>
<span class="normal">9263</span>
<span class="normal">9264</span>
<span class="normal">9265</span>
<span class="normal">9266</span>
<span class="normal">9267</span>
<span class="normal">9268</span>
<span class="normal">9269</span>
<span class="normal">9270</span>
<span class="normal">9271</span>
<span class="normal">9272</span>
<span class="normal">9273</span>
<span class="normal">9274</span>
<span class="normal">9275</span>
<span class="normal">9276</span>
<span class="normal">9277</span>
<span class="normal">9278</span>
<span class="normal">9279</span>
<span class="normal">9280</span>
<span class="normal">9281</span>
<span class="normal">9282</span>
<span class="normal">9283</span>
<span class="normal">9284</span>
<span class="normal">9285</span>
<span class="normal">9286</span>
<span class="normal">9287</span>
<span class="normal">9288</span>
<span class="normal">9289</span>
<span class="normal">9290</span>
<span class="normal">9291</span>
<span class="normal">9292</span>
<span class="normal">9293</span>
<span class="normal">9294</span>
<span class="normal">9295</span>
<span class="normal">9296</span>
<span class="normal">9297</span>
<span class="normal">9298</span>
<span class="normal">9299</span>
<span class="normal">9300</span>
<span class="normal">9301</span>
<span class="normal">9302</span>
<span class="normal">9303</span>
<span class="normal">9304</span>
<span class="normal">9305</span>
<span class="normal">9306</span>
<span class="normal">9307</span>
<span class="normal">9308</span>
<span class="normal">9309</span>
<span class="normal">9310</span>
<span class="normal">9311</span>
<span class="normal">9312</span>
<span class="normal">9313</span>
<span class="normal">9314</span>
<span class="normal">9315</span>
<span class="normal">9316</span>
<span class="normal">9317</span>
<span class="normal">9318</span>
<span class="normal">9319</span>
<span class="normal">9320</span>
<span class="normal">9321</span>
<span class="normal">9322</span>
<span class="normal">9323</span>
<span class="normal">9324</span>
<span class="normal">9325</span>
<span class="normal">9326</span>
<span class="normal">9327</span>
<span class="normal">9328</span>
<span class="normal">9329</span>
<span class="normal">9330</span>
<span class="normal">9331</span>
<span class="normal">9332</span>
<span class="normal">9333</span>
<span class="normal">9334</span>
<span class="normal">9335</span>
<span class="normal">9336</span>
<span class="normal">9337</span>
<span class="normal">9338</span>
<span class="normal">9339</span>
<span class="normal">9340</span>
<span class="normal">9341</span>
<span class="normal">9342</span>
<span class="normal">9343</span>
<span class="normal">9344</span>
<span class="normal">9345</span>
<span class="normal">9346</span>
<span class="normal">9347</span>
<span class="normal">9348</span>
<span class="normal">9349</span>
<span class="normal">9350</span>
<span class="normal">9351</span>
<span class="normal">9352</span>
<span class="normal">9353</span>
<span class="normal">9354</span>
<span class="normal">9355</span>
<span class="normal">9356</span>
<span class="normal">9357</span>
<span class="normal">9358</span>
<span class="normal">9359</span>
<span class="normal">9360</span>
<span class="normal">9361</span>
<span class="normal">9362</span>
<span class="normal">9363</span>
<span class="normal">9364</span>
<span class="normal">9365</span>
<span class="normal">9366</span>
<span class="normal">9367</span>
<span class="normal">9368</span>
<span class="normal">9369</span>
<span class="normal">9370</span>
<span class="normal">9371</span>
<span class="normal">9372</span>
<span class="normal">9373</span>
<span class="normal">9374</span>
<span class="normal">9375</span>
<span class="normal">9376</span>
<span class="normal">9377</span>
<span class="normal">9378</span>
<span class="normal">9379</span>
<span class="normal">9380</span>
<span class="normal">9381</span>
<span class="normal">9382</span>
<span class="normal">9383</span>
<span class="normal">9384</span>
<span class="normal">9385</span>
<span class="normal">9386</span>
<span class="normal">9387</span>
<span class="normal">9388</span>
<span class="normal">9389</span>
<span class="normal">9390</span>
<span class="normal">9391</span>
<span class="normal">9392</span>
<span class="normal">9393</span>
<span class="normal">9394</span>
<span class="normal">9395</span>
<span class="normal">9396</span>
<span class="normal">9397</span>
<span class="normal">9398</span>
<span class="normal">9399</span>
<span class="normal">9400</span>
<span class="normal">9401</span>
<span class="normal">9402</span>
<span class="normal">9403</span>
<span class="normal">9404</span>
<span class="normal">9405</span>
<span class="normal">9406</span>
<span class="normal">9407</span>
<span class="normal">9408</span>
<span class="normal">9409</span>
<span class="normal">9410</span>
<span class="normal">9411</span>
<span class="normal">9412</span>
<span class="normal">9413</span>
<span class="normal">9414</span>
<span class="normal">9415</span>
<span class="normal">9416</span>
<span class="normal">9417</span>
<span class="normal">9418</span>
<span class="normal">9419</span>
<span class="normal">9420</span>
<span class="normal">9421</span>
<span class="normal">9422</span>
<span class="normal">9423</span>
<span class="normal">9424</span>
<span class="normal">9425</span>
<span class="normal">9426</span>
<span class="normal">9427</span>
<span class="normal">9428</span>
<span class="normal">9429</span>
<span class="normal">9430</span>
<span class="normal">9431</span>
<span class="normal">9432</span>
<span class="normal">9433</span>
<span class="normal">9434</span>
<span class="normal">9435</span>
<span class="normal">9436</span>
<span class="normal">9437</span>
<span class="normal">9438</span>
<span class="normal">9439</span>
<span class="normal">9440</span>
<span class="normal">9441</span>
<span class="normal">9442</span>
<span class="normal">9443</span>
<span class="normal">9444</span>
<span class="normal">9445</span>
<span class="normal">9446</span>
<span class="normal">9447</span>
<span class="normal">9448</span>
<span class="normal">9449</span>
<span class="normal">9450</span>
<span class="normal">9451</span>
<span class="normal">9452</span>
<span class="normal">9453</span>
<span class="normal">9454</span>
<span class="normal">9455</span>
<span class="normal">9456</span>
<span class="normal">9457</span>
<span class="normal">9458</span>
<span class="normal">9459</span>
<span class="normal">9460</span>
<span class="normal">9461</span>
<span class="normal">9462</span>
<span class="normal">9463</span>
<span class="normal">9464</span>
<span class="normal">9465</span>
<span class="normal">9466</span>
<span class="normal">9467</span>
<span class="normal">9468</span>
<span class="normal">9469</span>
<span class="normal">9470</span>
<span class="normal">9471</span>
<span class="normal">9472</span>
<span class="normal">9473</span>
<span class="normal">9474</span>
<span class="normal">9475</span>
<span class="normal">9476</span>
<span class="normal">9477</span>
<span class="normal">9478</span>
<span class="normal">9479</span>
<span class="normal">9480</span>
<span class="normal">9481</span>
<span class="normal">9482</span>
<span class="normal">9483</span>
<span class="normal">9484</span>
<span class="normal">9485</span>
<span class="normal">9486</span>
<span class="normal">9487</span>
<span class="normal">9488</span>
<span class="normal">9489</span>
<span class="normal">9490</span>
<span class="normal">9491</span>
<span class="normal">9492</span>
<span class="normal">9493</span>
<span class="normal">9494</span>
<span class="normal">9495</span>
<span class="normal">9496</span>
<span class="normal">9497</span>
<span class="normal">9498</span>
<span class="normal">9499</span>
<span class="normal">9500</span>
<span class="normal">9501</span>
<span class="normal">9502</span>
<span class="normal">9503</span>
<span class="normal">9504</span>
<span class="normal">9505</span>
<span class="normal">9506</span>
<span class="normal">9507</span>
<span class="normal">9508</span>
<span class="normal">9509</span>
<span class="normal">9510</span>
<span class="normal">9511</span>
<span class="normal">9512</span>
<span class="normal">9513</span>
<span class="normal">9514</span>
<span class="normal">9515</span>
<span class="normal">9516</span>
<span class="normal">9517</span>
<span class="normal">9518</span>
<span class="normal">9519</span>
<span class="normal">9520</span>
<span class="normal">9521</span>
<span class="normal">9522</span>
<span class="normal">9523</span>
<span class="normal">9524</span>
<span class="normal">9525</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LayerManagerWidget</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A widget for managing map layers.</span>

<span class="sd">    This widget provides controls for toggling the visibility, adjusting the opacity,</span>
<span class="sd">    and removing layers from a map. It also includes a master toggle to turn all layers</span>
<span class="sd">    on or off.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        m (Map): The map object to manage layers for.</span>
<span class="sd">        layer_items (Dict[str, Dict[str, widgets.Widget]]): A dictionary mapping layer names</span>
<span class="sd">            to their corresponding control widgets (checkbox and slider).</span>
<span class="sd">        _building (bool): A flag indicating whether the widget is currently being built.</span>
<span class="sd">        master_toggle (widgets.Checkbox): A checkbox to toggle all layers on or off.</span>
<span class="sd">        layers_box (widgets.VBox): A container for individual layer controls.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">m</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">layer_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-layers&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Layers&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">groups</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the LayerManagerWidget.</span>

<span class="sd">        Args:</span>
<span class="sd">            m (Any): The map object to manage layers for.</span>
<span class="sd">            expanded (bool): Whether the expansion panel should be expanded by default. Defaults to True.</span>
<span class="sd">            height (str): The height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            layer_icon (str): The icon for the layer manager. Defaults to &quot;mdi-layers&quot;.</span>
<span class="sd">            close_icon (str): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str): The label for the layer manager. Defaults to &quot;Layers&quot;.</span>
<span class="sd">            background_color (str): The background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            groups (dict): A dictionary of layer groups, such as {&quot;Group 1&quot;: [&quot;layer1&quot;, &quot;layer2&quot;],</span>
<span class="sd">                &quot;Group 2&quot;: [&quot;layer3&quot;, &quot;layer4&quot;]}. A group layer toggle will be created for each group.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">groups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Master toggle</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;All layers on/off&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_all_layers</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">group_layers</span> <span class="ow">in</span> <span class="n">groups</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">group_toggle</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">group_name</span><span class="si">}</span><span class="s2"> group layers on/off&quot;</span><span class="p">,</span>
                    <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">group_toggle</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_group_layers</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">group_toggle</span><span class="p">,)</span>

        <span class="c1"># Build individual layer rows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_layer_controls</span><span class="p">()</span>

        <span class="c1"># Close icon button</span>
        <span class="n">close_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;min-width: 24px; width: 24px;&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">close_icon</span><span class="p">])],</span>
        <span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_close</span><span class="p">)</span>

        <span class="n">header</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelHeader</span><span class="p">(</span>
            <span class="n">style_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; min-height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">background_color</span><span class="si">}</span><span class="s2">;&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                    <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                    <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-grow-1 align-center&quot;</span><span class="p">,</span>
                    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">layer_icon</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ml-1&quot;</span><span class="p">),</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push title to center</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">label</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text-subtitle-2&quot;</span><span class="p">),</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push close to right</span>
                        <span class="n">close_btn</span><span class="p">,</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>
                    <span class="p">],</span>
                <span class="p">)</span>
            <span class="p">],</span>
        <span class="p">)</span>

        <span class="n">panel</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanel</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">header</span><span class="p">,</span>
                <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelContent</span><span class="p">(</span>
                    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
                            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="p">]</span>
                        <span class="p">)</span>
                    <span class="p">]</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">expanded</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">panel</span><span class="p">],</span> <span class="n">v_model</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">panel</span><span class="p">],</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_handle_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls the on_close callback if provided.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># self.close()</span>

    <span class="k">def</span> <span class="nf">build_layer_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds the controls for individual layers.</span>

<span class="sd">        This method creates checkboxes for toggling visibility, sliders for adjusting opacity,</span>
<span class="sd">        and buttons for removing layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">padding</span> <span class="o">=</span> <span class="s2">&quot;0px 5px 0px 5px&quot;</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="c1"># if name == &quot;background&quot;:</span>
            <span class="c1">#     continue</span>

            <span class="n">visible</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">opacity</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

            <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
            <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">flex</span> <span class="o">=</span> <span class="s2">&quot;1 1 auto&quot;</span>
            <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;200px&quot;</span>
            <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s2">&quot;120px&quot;</span>

            <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Change layer opacity&quot;</span><span class="p">,</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                    <span class="n">flex</span><span class="o">=</span><span class="s2">&quot;1 1 auto&quot;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span>
                <span class="p">),</span>
            <span class="p">)</span>

            <span class="n">settings</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;gear&quot;</span><span class="p">,</span>
                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Change layer style&quot;</span><span class="p">,</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;25px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="n">remove</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Remove layer&quot;</span><span class="p">,</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;25px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="k">def</span> <span class="nf">on_visibility_change</span><span class="p">(</span><span class="n">change</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>

            <span class="k">def</span> <span class="nf">on_opacity_change</span><span class="p">(</span><span class="n">change</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_opacity</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>

            <span class="k">def</span> <span class="nf">on_remove_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">row_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">layer_name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">row_ref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                        <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="n">row_ref</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="c1"># Check if style widget exists in either floating sidebar or regular sidebar</span>
                <span class="n">style_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Style </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;_floating_sidebar_widgets&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">style_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">style_label</span><span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;sidebar_widgets&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">style_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">sidebar_widgets</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">style_label</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">on_settings_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="c1"># if isinstance(self.m.layer_dict[layer_name][&quot;layer&quot;], dict):</span>
                <span class="c1">#     return</span>
                <span class="n">style_widget</span> <span class="o">=</span> <span class="n">LayerStyleWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                    <span class="n">style_widget</span><span class="p">,</span>
                    <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-palette&quot;</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Style </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_visibility_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_opacity_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

            <span class="n">row</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
                <span class="p">[</span><span class="n">checkbox</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">remove</span><span class="p">],</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="s2">&quot;flex&quot;</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="n">remove</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">btn</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">name</span><span class="p">:</span> <span class="n">on_remove_clicked</span><span class="p">(</span>
                    <span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">row_ref</span><span class="o">=</span><span class="n">r</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="n">settings</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">btn</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">name</span><span class="p">:</span> <span class="n">on_settings_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;checkbox&quot;</span><span class="p">:</span> <span class="n">checkbox</span><span class="p">,</span> <span class="s2">&quot;slider&quot;</span><span class="p">:</span> <span class="n">slider</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">rows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">toggle_all_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the visibility of all layers.</span>

<span class="sd">        Args:</span>
<span class="sd">            change (Dict[str, Any]): The change event from the master toggle checkbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_building</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">controls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">controls</span><span class="p">[</span><span class="s2">&quot;checkbox&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">toggle_group_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles the visibility of a group of layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_building</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">group_name</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">group_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">group_name</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="n">group_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_layer_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the visibility of a specific layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            visible (bool): Whether the layer should be visible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the opacity of a specific layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            opacity (float): The opacity value (0 to 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rebuilds the UI to reflect the current layers in the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rebuild the UI to reflect current layers in the map.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_layer_controls</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">layer_icon</span><span class="o">=</span><span class="s1">&#39;mdi-layers&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Layers&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the LayerManagerWidget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>m</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map object to manage layers for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the expansion panel should be expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the layer manager. Defaults to "mdi-layers".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-layers&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the close button. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label for the layer manager. Defaults to "Layers".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Layers&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>groups</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of layer groups, such as {"Group 1": ["layer1", "layer2"],
"Group 2": ["layer3", "layer4"]}. A group layer toggle will be created for each group.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional positional arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9245</span>
<span class="normal">9246</span>
<span class="normal">9247</span>
<span class="normal">9248</span>
<span class="normal">9249</span>
<span class="normal">9250</span>
<span class="normal">9251</span>
<span class="normal">9252</span>
<span class="normal">9253</span>
<span class="normal">9254</span>
<span class="normal">9255</span>
<span class="normal">9256</span>
<span class="normal">9257</span>
<span class="normal">9258</span>
<span class="normal">9259</span>
<span class="normal">9260</span>
<span class="normal">9261</span>
<span class="normal">9262</span>
<span class="normal">9263</span>
<span class="normal">9264</span>
<span class="normal">9265</span>
<span class="normal">9266</span>
<span class="normal">9267</span>
<span class="normal">9268</span>
<span class="normal">9269</span>
<span class="normal">9270</span>
<span class="normal">9271</span>
<span class="normal">9272</span>
<span class="normal">9273</span>
<span class="normal">9274</span>
<span class="normal">9275</span>
<span class="normal">9276</span>
<span class="normal">9277</span>
<span class="normal">9278</span>
<span class="normal">9279</span>
<span class="normal">9280</span>
<span class="normal">9281</span>
<span class="normal">9282</span>
<span class="normal">9283</span>
<span class="normal">9284</span>
<span class="normal">9285</span>
<span class="normal">9286</span>
<span class="normal">9287</span>
<span class="normal">9288</span>
<span class="normal">9289</span>
<span class="normal">9290</span>
<span class="normal">9291</span>
<span class="normal">9292</span>
<span class="normal">9293</span>
<span class="normal">9294</span>
<span class="normal">9295</span>
<span class="normal">9296</span>
<span class="normal">9297</span>
<span class="normal">9298</span>
<span class="normal">9299</span>
<span class="normal">9300</span>
<span class="normal">9301</span>
<span class="normal">9302</span>
<span class="normal">9303</span>
<span class="normal">9304</span>
<span class="normal">9305</span>
<span class="normal">9306</span>
<span class="normal">9307</span>
<span class="normal">9308</span>
<span class="normal">9309</span>
<span class="normal">9310</span>
<span class="normal">9311</span>
<span class="normal">9312</span>
<span class="normal">9313</span>
<span class="normal">9314</span>
<span class="normal">9315</span>
<span class="normal">9316</span>
<span class="normal">9317</span>
<span class="normal">9318</span>
<span class="normal">9319</span>
<span class="normal">9320</span>
<span class="normal">9321</span>
<span class="normal">9322</span>
<span class="normal">9323</span>
<span class="normal">9324</span>
<span class="normal">9325</span>
<span class="normal">9326</span>
<span class="normal">9327</span>
<span class="normal">9328</span>
<span class="normal">9329</span>
<span class="normal">9330</span>
<span class="normal">9331</span>
<span class="normal">9332</span>
<span class="normal">9333</span>
<span class="normal">9334</span>
<span class="normal">9335</span>
<span class="normal">9336</span>
<span class="normal">9337</span>
<span class="normal">9338</span>
<span class="normal">9339</span>
<span class="normal">9340</span>
<span class="normal">9341</span>
<span class="normal">9342</span>
<span class="normal">9343</span>
<span class="normal">9344</span>
<span class="normal">9345</span>
<span class="normal">9346</span>
<span class="normal">9347</span>
<span class="normal">9348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">m</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">layer_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-layers&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Layers&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">groups</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the LayerManagerWidget.</span>

<span class="sd">    Args:</span>
<span class="sd">        m (Any): The map object to manage layers for.</span>
<span class="sd">        expanded (bool): Whether the expansion panel should be expanded by default. Defaults to True.</span>
<span class="sd">        height (str): The height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        layer_icon (str): The icon for the layer manager. Defaults to &quot;mdi-layers&quot;.</span>
<span class="sd">        close_icon (str): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str): The label for the layer manager. Defaults to &quot;Layers&quot;.</span>
<span class="sd">        background_color (str): The background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        groups (dict): A dictionary of layer groups, such as {&quot;Group 1&quot;: [&quot;layer1&quot;, &quot;layer2&quot;],</span>
<span class="sd">            &quot;Group 2&quot;: [&quot;layer3&quot;, &quot;layer4&quot;]}. A group layer toggle will be created for each group.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        *args (Any): Additional positional arguments for the parent class.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">groups</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Master toggle</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;All layers on/off&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_all_layers</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">group_layers</span> <span class="ow">in</span> <span class="n">groups</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">group_toggle</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">group_name</span><span class="si">}</span><span class="s2"> group layers on/off&quot;</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">group_toggle</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_group_layers</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">group_toggle</span><span class="p">,)</span>

    <span class="c1"># Build individual layer rows</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_layer_controls</span><span class="p">()</span>

    <span class="c1"># Close icon button</span>
    <span class="n">close_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;min-width: 24px; width: 24px;&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">close_icon</span><span class="p">])],</span>
    <span class="p">)</span>
    <span class="n">close_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_close</span><span class="p">)</span>

    <span class="n">header</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelHeader</span><span class="p">(</span>
        <span class="n">style_</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; min-height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">background_color</span><span class="si">}</span><span class="s2">;&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-grow-1 align-center&quot;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">layer_icon</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ml-1&quot;</span><span class="p">),</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push title to center</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">label</span><span class="p">],</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text-subtitle-2&quot;</span><span class="p">),</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>  <span class="c1"># push close to right</span>
                    <span class="n">close_btn</span><span class="p">,</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(),</span>
                <span class="p">],</span>
            <span class="p">)</span>
        <span class="p">],</span>
    <span class="p">)</span>

    <span class="n">panel</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanel</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">header</span><span class="p">,</span>
            <span class="n">v</span><span class="o">.</span><span class="n">ExpansionPanelContent</span><span class="p">(</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
                        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">master_toggle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">]</span>
            <span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">expanded</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">panel</span><span class="p">],</span> <span class="n">v_model</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">panel</span><span class="p">],</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.build_layer_controls" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build_layer_controls</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.build_layer_controls" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Builds the controls for individual layers.</p>
<p>This method creates checkboxes for toggling visibility, sliders for adjusting opacity,
and buttons for removing layers.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9356</span>
<span class="normal">9357</span>
<span class="normal">9358</span>
<span class="normal">9359</span>
<span class="normal">9360</span>
<span class="normal">9361</span>
<span class="normal">9362</span>
<span class="normal">9363</span>
<span class="normal">9364</span>
<span class="normal">9365</span>
<span class="normal">9366</span>
<span class="normal">9367</span>
<span class="normal">9368</span>
<span class="normal">9369</span>
<span class="normal">9370</span>
<span class="normal">9371</span>
<span class="normal">9372</span>
<span class="normal">9373</span>
<span class="normal">9374</span>
<span class="normal">9375</span>
<span class="normal">9376</span>
<span class="normal">9377</span>
<span class="normal">9378</span>
<span class="normal">9379</span>
<span class="normal">9380</span>
<span class="normal">9381</span>
<span class="normal">9382</span>
<span class="normal">9383</span>
<span class="normal">9384</span>
<span class="normal">9385</span>
<span class="normal">9386</span>
<span class="normal">9387</span>
<span class="normal">9388</span>
<span class="normal">9389</span>
<span class="normal">9390</span>
<span class="normal">9391</span>
<span class="normal">9392</span>
<span class="normal">9393</span>
<span class="normal">9394</span>
<span class="normal">9395</span>
<span class="normal">9396</span>
<span class="normal">9397</span>
<span class="normal">9398</span>
<span class="normal">9399</span>
<span class="normal">9400</span>
<span class="normal">9401</span>
<span class="normal">9402</span>
<span class="normal">9403</span>
<span class="normal">9404</span>
<span class="normal">9405</span>
<span class="normal">9406</span>
<span class="normal">9407</span>
<span class="normal">9408</span>
<span class="normal">9409</span>
<span class="normal">9410</span>
<span class="normal">9411</span>
<span class="normal">9412</span>
<span class="normal">9413</span>
<span class="normal">9414</span>
<span class="normal">9415</span>
<span class="normal">9416</span>
<span class="normal">9417</span>
<span class="normal">9418</span>
<span class="normal">9419</span>
<span class="normal">9420</span>
<span class="normal">9421</span>
<span class="normal">9422</span>
<span class="normal">9423</span>
<span class="normal">9424</span>
<span class="normal">9425</span>
<span class="normal">9426</span>
<span class="normal">9427</span>
<span class="normal">9428</span>
<span class="normal">9429</span>
<span class="normal">9430</span>
<span class="normal">9431</span>
<span class="normal">9432</span>
<span class="normal">9433</span>
<span class="normal">9434</span>
<span class="normal">9435</span>
<span class="normal">9436</span>
<span class="normal">9437</span>
<span class="normal">9438</span>
<span class="normal">9439</span>
<span class="normal">9440</span>
<span class="normal">9441</span>
<span class="normal">9442</span>
<span class="normal">9443</span>
<span class="normal">9444</span>
<span class="normal">9445</span>
<span class="normal">9446</span>
<span class="normal">9447</span>
<span class="normal">9448</span>
<span class="normal">9449</span>
<span class="normal">9450</span>
<span class="normal">9451</span>
<span class="normal">9452</span>
<span class="normal">9453</span>
<span class="normal">9454</span>
<span class="normal">9455</span>
<span class="normal">9456</span>
<span class="normal">9457</span>
<span class="normal">9458</span>
<span class="normal">9459</span>
<span class="normal">9460</span>
<span class="normal">9461</span>
<span class="normal">9462</span>
<span class="normal">9463</span>
<span class="normal">9464</span>
<span class="normal">9465</span>
<span class="normal">9466</span>
<span class="normal">9467</span>
<span class="normal">9468</span>
<span class="normal">9469</span>
<span class="normal">9470</span>
<span class="normal">9471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">build_layer_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds the controls for individual layers.</span>

<span class="sd">    This method creates checkboxes for toggling visibility, sliders for adjusting opacity,</span>
<span class="sd">    and buttons for removing layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">padding</span> <span class="o">=</span> <span class="s2">&quot;0px 5px 0px 5px&quot;</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="c1"># if name == &quot;background&quot;:</span>
        <span class="c1">#     continue</span>

        <span class="n">visible</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">opacity</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">opacity</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
        <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">flex</span> <span class="o">=</span> <span class="s2">&quot;1 1 auto&quot;</span>
        <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;200px&quot;</span>
        <span class="n">checkbox</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s2">&quot;120px&quot;</span>

        <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Change layer opacity&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">flex</span><span class="o">=</span><span class="s2">&quot;1 1 auto&quot;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;gear&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Change layer style&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;25px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">remove</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Remove layer&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;38px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;25px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_visibility_change</span><span class="p">(</span><span class="n">change</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">on_opacity_change</span><span class="p">(</span><span class="n">change</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_opacity</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">on_remove_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">row_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">layer_name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">row_ref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                    <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="n">row_ref</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="c1"># Check if style widget exists in either floating sidebar or regular sidebar</span>
            <span class="n">style_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Style </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;_floating_sidebar_widgets&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">style_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">style_label</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;sidebar_widgets&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">style_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">sidebar_widgets</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">style_label</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_settings_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
            <span class="c1"># if isinstance(self.m.layer_dict[layer_name][&quot;layer&quot;], dict):</span>
            <span class="c1">#     return</span>
            <span class="n">style_widget</span> <span class="o">=</span> <span class="n">LayerStyleWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                <span class="n">style_widget</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-palette&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Style </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_visibility_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_opacity_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">checkbox</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">remove</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="s2">&quot;flex&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">remove</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">btn</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">name</span><span class="p">:</span> <span class="n">on_remove_clicked</span><span class="p">(</span>
                <span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">row_ref</span><span class="o">=</span><span class="n">r</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">settings</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">btn</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">name</span><span class="p">:</span> <span class="n">on_settings_clicked</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;checkbox&quot;</span><span class="p">:</span> <span class="n">checkbox</span><span class="p">,</span> <span class="s2">&quot;slider&quot;</span><span class="p">:</span> <span class="n">slider</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layers_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">rows</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_building</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.refresh" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">refresh</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.refresh" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Rebuilds the UI to reflect the current layers in the map.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9520</span>
<span class="normal">9521</span>
<span class="normal">9522</span>
<span class="normal">9523</span>
<span class="normal">9524</span>
<span class="normal">9525</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rebuilds the UI to reflect the current layers in the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rebuild the UI to reflect current layers in the map.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_layer_controls</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.set_layer_opacity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_layer_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_opacity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the opacity of a specific layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity value (0 to 1).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9510</span>
<span class="normal">9511</span>
<span class="normal">9512</span>
<span class="normal">9513</span>
<span class="normal">9514</span>
<span class="normal">9515</span>
<span class="normal">9516</span>
<span class="normal">9517</span>
<span class="normal">9518</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the opacity of a specific layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        opacity (float): The opacity value (0 to 1).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.set_layer_visibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_layer_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.set_layer_visibility" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the visibility of a specific layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9500</span>
<span class="normal">9501</span>
<span class="normal">9502</span>
<span class="normal">9503</span>
<span class="normal">9504</span>
<span class="normal">9505</span>
<span class="normal">9506</span>
<span class="normal">9507</span>
<span class="normal">9508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_layer_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the visibility of a specific layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        visible (bool): Whether the layer should be visible.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.toggle_all_layers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_all_layers</span><span class="p">(</span><span class="n">change</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.toggle_all_layers" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Toggles the visibility of all layers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>change</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The change event from the master toggle checkbox.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9473</span>
<span class="normal">9474</span>
<span class="normal">9475</span>
<span class="normal">9476</span>
<span class="normal">9477</span>
<span class="normal">9478</span>
<span class="normal">9479</span>
<span class="normal">9480</span>
<span class="normal">9481</span>
<span class="normal">9482</span>
<span class="normal">9483</span>
<span class="normal">9484</span>
<span class="normal">9485</span>
<span class="normal">9486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toggle_all_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the visibility of all layers.</span>

<span class="sd">    Args:</span>
<span class="sd">        change (Dict[str, Any]): The change event from the master toggle checkbox.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_building</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">controls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">controls</span><span class="p">[</span><span class="s2">&quot;checkbox&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_toggles</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.LayerManagerWidget.toggle_group_layers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_group_layers</span><span class="p">(</span><span class="n">change</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.LayerManagerWidget.toggle_group_layers" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Toggles the visibility of a group of layers.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9488</span>
<span class="normal">9489</span>
<span class="normal">9490</span>
<span class="normal">9491</span>
<span class="normal">9492</span>
<span class="normal">9493</span>
<span class="normal">9494</span>
<span class="normal">9495</span>
<span class="normal">9496</span>
<span class="normal">9497</span>
<span class="normal">9498</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toggle_group_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Toggles the visibility of a group of layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_building</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">group_name</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">group_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">group_name</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="n">group_layers</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layer_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.LayerStyleWidget" class="doc doc-heading">
            <code>LayerStyleWidget</code>


<a href="#leafmap.maplibregl.LayerStyleWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipywidgets.VBox">VBox</span></code></p>


        <p>A widget for styling map layers interactively.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer to style.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_widget</code>
            </td>
            <td>
                  <code><span title="leafmap.leafmap.ipyleaflet.Map">Map</span> or <span title="leafmap.leafmap.folium.Map">Map</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map widget to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the widget. Defaults to "270px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;270px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the label. Defaults to "130px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;130px&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">9666</span>
<span class="normal">9667</span>
<span class="normal">9668</span>
<span class="normal">9669</span>
<span class="normal">9670</span>
<span class="normal">9671</span>
<span class="normal">9672</span>
<span class="normal">9673</span>
<span class="normal">9674</span>
<span class="normal">9675</span>
<span class="normal">9676</span>
<span class="normal">9677</span>
<span class="normal">9678</span>
<span class="normal">9679</span>
<span class="normal">9680</span>
<span class="normal">9681</span>
<span class="normal">9682</span>
<span class="normal">9683</span>
<span class="normal">9684</span>
<span class="normal">9685</span>
<span class="normal">9686</span>
<span class="normal">9687</span>
<span class="normal">9688</span>
<span class="normal">9689</span>
<span class="normal">9690</span>
<span class="normal">9691</span>
<span class="normal">9692</span>
<span class="normal">9693</span>
<span class="normal">9694</span>
<span class="normal">9695</span>
<span class="normal">9696</span>
<span class="normal">9697</span>
<span class="normal">9698</span>
<span class="normal">9699</span>
<span class="normal">9700</span>
<span class="normal">9701</span>
<span class="normal">9702</span>
<span class="normal">9703</span>
<span class="normal">9704</span>
<span class="normal">9705</span>
<span class="normal">9706</span>
<span class="normal">9707</span>
<span class="normal">9708</span>
<span class="normal">9709</span>
<span class="normal">9710</span>
<span class="normal">9711</span>
<span class="normal">9712</span>
<span class="normal">9713</span>
<span class="normal">9714</span>
<span class="normal">9715</span>
<span class="normal">9716</span>
<span class="normal">9717</span>
<span class="normal">9718</span>
<span class="normal">9719</span>
<span class="normal">9720</span>
<span class="normal">9721</span>
<span class="normal">9722</span>
<span class="normal">9723</span>
<span class="normal">9724</span>
<span class="normal">9725</span>
<span class="normal">9726</span>
<span class="normal">9727</span>
<span class="normal">9728</span>
<span class="normal">9729</span>
<span class="normal">9730</span>
<span class="normal">9731</span>
<span class="normal">9732</span>
<span class="normal">9733</span>
<span class="normal">9734</span>
<span class="normal">9735</span>
<span class="normal">9736</span>
<span class="normal">9737</span>
<span class="normal">9738</span>
<span class="normal">9739</span>
<span class="normal">9740</span>
<span class="normal">9741</span>
<span class="normal">9742</span>
<span class="normal">9743</span>
<span class="normal">9744</span>
<span class="normal">9745</span>
<span class="normal">9746</span>
<span class="normal">9747</span>
<span class="normal">9748</span>
<span class="normal">9749</span>
<span class="normal">9750</span>
<span class="normal">9751</span>
<span class="normal">9752</span>
<span class="normal">9753</span>
<span class="normal">9754</span>
<span class="normal">9755</span>
<span class="normal">9756</span>
<span class="normal">9757</span>
<span class="normal">9758</span>
<span class="normal">9759</span>
<span class="normal">9760</span>
<span class="normal">9761</span>
<span class="normal">9762</span>
<span class="normal">9763</span>
<span class="normal">9764</span>
<span class="normal">9765</span>
<span class="normal">9766</span>
<span class="normal">9767</span>
<span class="normal">9768</span>
<span class="normal">9769</span>
<span class="normal">9770</span>
<span class="normal">9771</span>
<span class="normal">9772</span>
<span class="normal">9773</span>
<span class="normal">9774</span>
<span class="normal">9775</span>
<span class="normal">9776</span>
<span class="normal">9777</span>
<span class="normal">9778</span>
<span class="normal">9779</span>
<span class="normal">9780</span>
<span class="normal">9781</span>
<span class="normal">9782</span>
<span class="normal">9783</span>
<span class="normal">9784</span>
<span class="normal">9785</span>
<span class="normal">9786</span>
<span class="normal">9787</span>
<span class="normal">9788</span>
<span class="normal">9789</span>
<span class="normal">9790</span>
<span class="normal">9791</span>
<span class="normal">9792</span>
<span class="normal">9793</span>
<span class="normal">9794</span>
<span class="normal">9795</span>
<span class="normal">9796</span>
<span class="normal">9797</span>
<span class="normal">9798</span>
<span class="normal">9799</span>
<span class="normal">9800</span>
<span class="normal">9801</span>
<span class="normal">9802</span>
<span class="normal">9803</span>
<span class="normal">9804</span>
<span class="normal">9805</span>
<span class="normal">9806</span>
<span class="normal">9807</span>
<span class="normal">9808</span>
<span class="normal">9809</span>
<span class="normal">9810</span>
<span class="normal">9811</span>
<span class="normal">9812</span>
<span class="normal">9813</span>
<span class="normal">9814</span>
<span class="normal">9815</span>
<span class="normal">9816</span>
<span class="normal">9817</span>
<span class="normal">9818</span>
<span class="normal">9819</span>
<span class="normal">9820</span>
<span class="normal">9821</span>
<span class="normal">9822</span>
<span class="normal">9823</span>
<span class="normal">9824</span>
<span class="normal">9825</span>
<span class="normal">9826</span>
<span class="normal">9827</span>
<span class="normal">9828</span>
<span class="normal">9829</span>
<span class="normal">9830</span>
<span class="normal">9831</span>
<span class="normal">9832</span>
<span class="normal">9833</span>
<span class="normal">9834</span>
<span class="normal">9835</span>
<span class="normal">9836</span>
<span class="normal">9837</span>
<span class="normal">9838</span>
<span class="normal">9839</span>
<span class="normal">9840</span>
<span class="normal">9841</span>
<span class="normal">9842</span>
<span class="normal">9843</span>
<span class="normal">9844</span>
<span class="normal">9845</span>
<span class="normal">9846</span>
<span class="normal">9847</span>
<span class="normal">9848</span>
<span class="normal">9849</span>
<span class="normal">9850</span>
<span class="normal">9851</span>
<span class="normal">9852</span>
<span class="normal">9853</span>
<span class="normal">9854</span>
<span class="normal">9855</span>
<span class="normal">9856</span>
<span class="normal">9857</span>
<span class="normal">9858</span>
<span class="normal">9859</span>
<span class="normal">9860</span>
<span class="normal">9861</span>
<span class="normal">9862</span>
<span class="normal">9863</span>
<span class="normal">9864</span>
<span class="normal">9865</span>
<span class="normal">9866</span>
<span class="normal">9867</span>
<span class="normal">9868</span>
<span class="normal">9869</span>
<span class="normal">9870</span>
<span class="normal">9871</span>
<span class="normal">9872</span>
<span class="normal">9873</span>
<span class="normal">9874</span>
<span class="normal">9875</span>
<span class="normal">9876</span>
<span class="normal">9877</span>
<span class="normal">9878</span>
<span class="normal">9879</span>
<span class="normal">9880</span>
<span class="normal">9881</span>
<span class="normal">9882</span>
<span class="normal">9883</span>
<span class="normal">9884</span>
<span class="normal">9885</span>
<span class="normal">9886</span>
<span class="normal">9887</span>
<span class="normal">9888</span>
<span class="normal">9889</span>
<span class="normal">9890</span>
<span class="normal">9891</span>
<span class="normal">9892</span>
<span class="normal">9893</span>
<span class="normal">9894</span>
<span class="normal">9895</span>
<span class="normal">9896</span>
<span class="normal">9897</span>
<span class="normal">9898</span>
<span class="normal">9899</span>
<span class="normal">9900</span>
<span class="normal">9901</span>
<span class="normal">9902</span>
<span class="normal">9903</span>
<span class="normal">9904</span>
<span class="normal">9905</span>
<span class="normal">9906</span>
<span class="normal">9907</span>
<span class="normal">9908</span>
<span class="normal">9909</span>
<span class="normal">9910</span>
<span class="normal">9911</span>
<span class="normal">9912</span>
<span class="normal">9913</span>
<span class="normal">9914</span>
<span class="normal">9915</span>
<span class="normal">9916</span>
<span class="normal">9917</span>
<span class="normal">9918</span>
<span class="normal">9919</span>
<span class="normal">9920</span>
<span class="normal">9921</span>
<span class="normal">9922</span>
<span class="normal">9923</span>
<span class="normal">9924</span>
<span class="normal">9925</span>
<span class="normal">9926</span>
<span class="normal">9927</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LayerStyleWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A widget for styling map layers interactively.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer (dict): The layer to style.</span>
<span class="sd">        map_widget (ipyleaflet.Map or folium.Map): The map widget to update.</span>
<span class="sd">        widget_width (str, optional): The width of the widget. Defaults to &quot;270px&quot;.</span>
<span class="sd">        label_width (str, optional): The width of the label. Defaults to &quot;130px&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">map_widget</span><span class="p">:</span> <span class="n">Map</span><span class="p">,</span>
        <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;270px&quot;</span><span class="p">,</span>
        <span class="n">label_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;130px&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer</span> <span class="o">=</span> <span class="n">layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">map_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_layer_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_id</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_paint</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">][</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_paint</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_id</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_paint</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">paint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_current_style</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget_width</span> <span class="o">=</span> <span class="n">widget_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_width</span> <span class="o">=</span> <span class="n">label_width</span>

        <span class="c1"># Create the styling widgets based on layer type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_widgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_style_widgets</span><span class="p">()</span>

        <span class="c1"># Create buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Apply&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Apply style changes&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reset_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Reset to original style&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the widget&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

        <span class="c1"># Button container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">apply_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset_btn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_btn</span><span class="p">])</span>

        <span class="c1"># Add button callbacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_apply_style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reset_style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_close_widget</span><span class="p">)</span>

        <span class="c1"># Layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;10px&quot;</span><span class="p">)</span>

        <span class="c1"># Combine all widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">style_widgets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_widget</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_layer_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the layer type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_current_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current layer style.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_paint</span>

    <span class="k">def</span> <span class="nf">_create_style_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create style widgets based on layer type.&quot;&quot;&quot;</span>
        <span class="n">widgets_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_color_picker</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Color&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-color&quot;</span><span class="p">,</span> <span class="s2">&quot;#3388ff&quot;</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Radius&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-radius&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Opacity&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-opacity&quot;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Blur&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-blur&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_color_picker</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Stroke Color&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">,</span> <span class="s2">&quot;#3388ff&quot;</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Stroke Width&quot;</span><span class="p">,</span> <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Circle Stroke Opacity&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-opacity&quot;</span><span class="p">,</span>
                        <span class="mf">1.0</span><span class="p">,</span>
                        <span class="mi">0</span><span class="p">,</span>
                        <span class="mi">1</span><span class="p">,</span>
                        <span class="mf">0.05</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_color_picker</span><span class="p">(</span><span class="s2">&quot;Line Color&quot;</span><span class="p">,</span> <span class="s2">&quot;line-color&quot;</span><span class="p">,</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span><span class="s2">&quot;Line Width&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Line Opacity&quot;</span><span class="p">,</span> <span class="s2">&quot;line-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span><span class="s2">&quot;Line Blur&quot;</span><span class="p">,</span> <span class="s2">&quot;line-blur&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_dropdown</span><span class="p">(</span>
                        <span class="s2">&quot;Line Style&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;line-dasharray&quot;</span><span class="p">,</span>
                        <span class="p">[</span>
                            <span class="p">(</span><span class="s2">&quot;Solid&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                            <span class="p">(</span><span class="s2">&quot;Dashed&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span>
                            <span class="p">(</span><span class="s2">&quot;Dotted&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span>
                            <span class="p">(</span><span class="s2">&quot;Dash-dot&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span>
                        <span class="p">],</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_color_picker</span><span class="p">(</span><span class="s2">&quot;Fill Color&quot;</span><span class="p">,</span> <span class="s2">&quot;fill-color&quot;</span><span class="p">,</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_number_slider</span><span class="p">(</span>
                        <span class="s2">&quot;Fill Opacity&quot;</span><span class="p">,</span> <span class="s2">&quot;fill-opacity&quot;</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span>
                    <span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_create_color_picker</span><span class="p">(</span>
                        <span class="s2">&quot;Fill Outline Color&quot;</span><span class="p">,</span> <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">,</span> <span class="s2">&quot;#3388ff&quot;</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">widgets_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Layer type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_type</span><span class="si">}</span><span class="s2"> is not supported.&quot;</span><span class="p">)]</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">widgets_list</span>

    <span class="k">def</span> <span class="nf">_create_color_picker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default_color</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a color picker widget.&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_style</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="n">default_color</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">widget_width</span><span class="p">,</span> <span class="n">description_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_width</span>
            <span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_number_slider</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">default_value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">min_val</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">max_val</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a number slider widget.&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_style</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="n">default_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">widget_width</span><span class="p">,</span> <span class="n">description_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_width</span>
            <span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_dropdown</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a dropdown widget.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">original_style</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">widget_width</span><span class="p">,</span> <span class="n">description_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_width</span>
            <span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_apply_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the style changes to the layer.&quot;&quot;&quot;</span>
        <span class="n">new_style</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_widgets</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">):</span>
                <span class="n">property_name</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
                <span class="n">new_style</span><span class="p">[</span><span class="n">property_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">):</span>
                <span class="n">property_name</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
                <span class="n">new_style</span><span class="p">[</span><span class="n">property_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">):</span>
                <span class="n">property_name</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
                <span class="n">new_style</span><span class="p">[</span><span class="n">property_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">value</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_widget</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_style</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;line-style&quot;</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;line-dasharray&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_reset_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset to original style.&quot;&quot;&quot;</span>

        <span class="c1"># Update widgets to reflect original style</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_widgets</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span> <span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">property_name</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">property_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_style</span><span class="p">:</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_style</span><span class="p">[</span><span class="n">property_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_close_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the widget.&quot;&quot;&quot;</span>
        <span class="c1"># self.close()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Style </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.Map" class="doc doc-heading">
            <code>Map</code>


<a href="#leafmap.maplibregl.Map" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="leafmap.maplibregl.MapWidget">MapWidget</span></code></p>


        <p>The Map class inherits from the MapWidget class of the maplibre.ipywidget module.</p>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span>
<span class="normal">2310</span>
<span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span>
<span class="normal">2360</span>
<span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span>
<span class="normal">2414</span>
<span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span>
<span class="normal">2418</span>
<span class="normal">2419</span>
<span class="normal">2420</span>
<span class="normal">2421</span>
<span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span>
<span class="normal">2425</span>
<span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span>
<span class="normal">2440</span>
<span class="normal">2441</span>
<span class="normal">2442</span>
<span class="normal">2443</span>
<span class="normal">2444</span>
<span class="normal">2445</span>
<span class="normal">2446</span>
<span class="normal">2447</span>
<span class="normal">2448</span>
<span class="normal">2449</span>
<span class="normal">2450</span>
<span class="normal">2451</span>
<span class="normal">2452</span>
<span class="normal">2453</span>
<span class="normal">2454</span>
<span class="normal">2455</span>
<span class="normal">2456</span>
<span class="normal">2457</span>
<span class="normal">2458</span>
<span class="normal">2459</span>
<span class="normal">2460</span>
<span class="normal">2461</span>
<span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span>
<span class="normal">2505</span>
<span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span>
<span class="normal">2528</span>
<span class="normal">2529</span>
<span class="normal">2530</span>
<span class="normal">2531</span>
<span class="normal">2532</span>
<span class="normal">2533</span>
<span class="normal">2534</span>
<span class="normal">2535</span>
<span class="normal">2536</span>
<span class="normal">2537</span>
<span class="normal">2538</span>
<span class="normal">2539</span>
<span class="normal">2540</span>
<span class="normal">2541</span>
<span class="normal">2542</span>
<span class="normal">2543</span>
<span class="normal">2544</span>
<span class="normal">2545</span>
<span class="normal">2546</span>
<span class="normal">2547</span>
<span class="normal">2548</span>
<span class="normal">2549</span>
<span class="normal">2550</span>
<span class="normal">2551</span>
<span class="normal">2552</span>
<span class="normal">2553</span>
<span class="normal">2554</span>
<span class="normal">2555</span>
<span class="normal">2556</span>
<span class="normal">2557</span>
<span class="normal">2558</span>
<span class="normal">2559</span>
<span class="normal">2560</span>
<span class="normal">2561</span>
<span class="normal">2562</span>
<span class="normal">2563</span>
<span class="normal">2564</span>
<span class="normal">2565</span>
<span class="normal">2566</span>
<span class="normal">2567</span>
<span class="normal">2568</span>
<span class="normal">2569</span>
<span class="normal">2570</span>
<span class="normal">2571</span>
<span class="normal">2572</span>
<span class="normal">2573</span>
<span class="normal">2574</span>
<span class="normal">2575</span>
<span class="normal">2576</span>
<span class="normal">2577</span>
<span class="normal">2578</span>
<span class="normal">2579</span>
<span class="normal">2580</span>
<span class="normal">2581</span>
<span class="normal">2582</span>
<span class="normal">2583</span>
<span class="normal">2584</span>
<span class="normal">2585</span>
<span class="normal">2586</span>
<span class="normal">2587</span>
<span class="normal">2588</span>
<span class="normal">2589</span>
<span class="normal">2590</span>
<span class="normal">2591</span>
<span class="normal">2592</span>
<span class="normal">2593</span>
<span class="normal">2594</span>
<span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span>
<span class="normal">2604</span>
<span class="normal">2605</span>
<span class="normal">2606</span>
<span class="normal">2607</span>
<span class="normal">2608</span>
<span class="normal">2609</span>
<span class="normal">2610</span>
<span class="normal">2611</span>
<span class="normal">2612</span>
<span class="normal">2613</span>
<span class="normal">2614</span>
<span class="normal">2615</span>
<span class="normal">2616</span>
<span class="normal">2617</span>
<span class="normal">2618</span>
<span class="normal">2619</span>
<span class="normal">2620</span>
<span class="normal">2621</span>
<span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span>
<span class="normal">2625</span>
<span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span>
<span class="normal">2641</span>
<span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span>
<span class="normal">2660</span>
<span class="normal">2661</span>
<span class="normal">2662</span>
<span class="normal">2663</span>
<span class="normal">2664</span>
<span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span>
<span class="normal">2673</span>
<span class="normal">2674</span>
<span class="normal">2675</span>
<span class="normal">2676</span>
<span class="normal">2677</span>
<span class="normal">2678</span>
<span class="normal">2679</span>
<span class="normal">2680</span>
<span class="normal">2681</span>
<span class="normal">2682</span>
<span class="normal">2683</span>
<span class="normal">2684</span>
<span class="normal">2685</span>
<span class="normal">2686</span>
<span class="normal">2687</span>
<span class="normal">2688</span>
<span class="normal">2689</span>
<span class="normal">2690</span>
<span class="normal">2691</span>
<span class="normal">2692</span>
<span class="normal">2693</span>
<span class="normal">2694</span>
<span class="normal">2695</span>
<span class="normal">2696</span>
<span class="normal">2697</span>
<span class="normal">2698</span>
<span class="normal">2699</span>
<span class="normal">2700</span>
<span class="normal">2701</span>
<span class="normal">2702</span>
<span class="normal">2703</span>
<span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span>
<span class="normal">2709</span>
<span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span>
<span class="normal">2717</span>
<span class="normal">2718</span>
<span class="normal">2719</span>
<span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span>
<span class="normal">2725</span>
<span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span>
<span class="normal">2729</span>
<span class="normal">2730</span>
<span class="normal">2731</span>
<span class="normal">2732</span>
<span class="normal">2733</span>
<span class="normal">2734</span>
<span class="normal">2735</span>
<span class="normal">2736</span>
<span class="normal">2737</span>
<span class="normal">2738</span>
<span class="normal">2739</span>
<span class="normal">2740</span>
<span class="normal">2741</span>
<span class="normal">2742</span>
<span class="normal">2743</span>
<span class="normal">2744</span>
<span class="normal">2745</span>
<span class="normal">2746</span>
<span class="normal">2747</span>
<span class="normal">2748</span>
<span class="normal">2749</span>
<span class="normal">2750</span>
<span class="normal">2751</span>
<span class="normal">2752</span>
<span class="normal">2753</span>
<span class="normal">2754</span>
<span class="normal">2755</span>
<span class="normal">2756</span>
<span class="normal">2757</span>
<span class="normal">2758</span>
<span class="normal">2759</span>
<span class="normal">2760</span>
<span class="normal">2761</span>
<span class="normal">2762</span>
<span class="normal">2763</span>
<span class="normal">2764</span>
<span class="normal">2765</span>
<span class="normal">2766</span>
<span class="normal">2767</span>
<span class="normal">2768</span>
<span class="normal">2769</span>
<span class="normal">2770</span>
<span class="normal">2771</span>
<span class="normal">2772</span>
<span class="normal">2773</span>
<span class="normal">2774</span>
<span class="normal">2775</span>
<span class="normal">2776</span>
<span class="normal">2777</span>
<span class="normal">2778</span>
<span class="normal">2779</span>
<span class="normal">2780</span>
<span class="normal">2781</span>
<span class="normal">2782</span>
<span class="normal">2783</span>
<span class="normal">2784</span>
<span class="normal">2785</span>
<span class="normal">2786</span>
<span class="normal">2787</span>
<span class="normal">2788</span>
<span class="normal">2789</span>
<span class="normal">2790</span>
<span class="normal">2791</span>
<span class="normal">2792</span>
<span class="normal">2793</span>
<span class="normal">2794</span>
<span class="normal">2795</span>
<span class="normal">2796</span>
<span class="normal">2797</span>
<span class="normal">2798</span>
<span class="normal">2799</span>
<span class="normal">2800</span>
<span class="normal">2801</span>
<span class="normal">2802</span>
<span class="normal">2803</span>
<span class="normal">2804</span>
<span class="normal">2805</span>
<span class="normal">2806</span>
<span class="normal">2807</span>
<span class="normal">2808</span>
<span class="normal">2809</span>
<span class="normal">2810</span>
<span class="normal">2811</span>
<span class="normal">2812</span>
<span class="normal">2813</span>
<span class="normal">2814</span>
<span class="normal">2815</span>
<span class="normal">2816</span>
<span class="normal">2817</span>
<span class="normal">2818</span>
<span class="normal">2819</span>
<span class="normal">2820</span>
<span class="normal">2821</span>
<span class="normal">2822</span>
<span class="normal">2823</span>
<span class="normal">2824</span>
<span class="normal">2825</span>
<span class="normal">2826</span>
<span class="normal">2827</span>
<span class="normal">2828</span>
<span class="normal">2829</span>
<span class="normal">2830</span>
<span class="normal">2831</span>
<span class="normal">2832</span>
<span class="normal">2833</span>
<span class="normal">2834</span>
<span class="normal">2835</span>
<span class="normal">2836</span>
<span class="normal">2837</span>
<span class="normal">2838</span>
<span class="normal">2839</span>
<span class="normal">2840</span>
<span class="normal">2841</span>
<span class="normal">2842</span>
<span class="normal">2843</span>
<span class="normal">2844</span>
<span class="normal">2845</span>
<span class="normal">2846</span>
<span class="normal">2847</span>
<span class="normal">2848</span>
<span class="normal">2849</span>
<span class="normal">2850</span>
<span class="normal">2851</span>
<span class="normal">2852</span>
<span class="normal">2853</span>
<span class="normal">2854</span>
<span class="normal">2855</span>
<span class="normal">2856</span>
<span class="normal">2857</span>
<span class="normal">2858</span>
<span class="normal">2859</span>
<span class="normal">2860</span>
<span class="normal">2861</span>
<span class="normal">2862</span>
<span class="normal">2863</span>
<span class="normal">2864</span>
<span class="normal">2865</span>
<span class="normal">2866</span>
<span class="normal">2867</span>
<span class="normal">2868</span>
<span class="normal">2869</span>
<span class="normal">2870</span>
<span class="normal">2871</span>
<span class="normal">2872</span>
<span class="normal">2873</span>
<span class="normal">2874</span>
<span class="normal">2875</span>
<span class="normal">2876</span>
<span class="normal">2877</span>
<span class="normal">2878</span>
<span class="normal">2879</span>
<span class="normal">2880</span>
<span class="normal">2881</span>
<span class="normal">2882</span>
<span class="normal">2883</span>
<span class="normal">2884</span>
<span class="normal">2885</span>
<span class="normal">2886</span>
<span class="normal">2887</span>
<span class="normal">2888</span>
<span class="normal">2889</span>
<span class="normal">2890</span>
<span class="normal">2891</span>
<span class="normal">2892</span>
<span class="normal">2893</span>
<span class="normal">2894</span>
<span class="normal">2895</span>
<span class="normal">2896</span>
<span class="normal">2897</span>
<span class="normal">2898</span>
<span class="normal">2899</span>
<span class="normal">2900</span>
<span class="normal">2901</span>
<span class="normal">2902</span>
<span class="normal">2903</span>
<span class="normal">2904</span>
<span class="normal">2905</span>
<span class="normal">2906</span>
<span class="normal">2907</span>
<span class="normal">2908</span>
<span class="normal">2909</span>
<span class="normal">2910</span>
<span class="normal">2911</span>
<span class="normal">2912</span>
<span class="normal">2913</span>
<span class="normal">2914</span>
<span class="normal">2915</span>
<span class="normal">2916</span>
<span class="normal">2917</span>
<span class="normal">2918</span>
<span class="normal">2919</span>
<span class="normal">2920</span>
<span class="normal">2921</span>
<span class="normal">2922</span>
<span class="normal">2923</span>
<span class="normal">2924</span>
<span class="normal">2925</span>
<span class="normal">2926</span>
<span class="normal">2927</span>
<span class="normal">2928</span>
<span class="normal">2929</span>
<span class="normal">2930</span>
<span class="normal">2931</span>
<span class="normal">2932</span>
<span class="normal">2933</span>
<span class="normal">2934</span>
<span class="normal">2935</span>
<span class="normal">2936</span>
<span class="normal">2937</span>
<span class="normal">2938</span>
<span class="normal">2939</span>
<span class="normal">2940</span>
<span class="normal">2941</span>
<span class="normal">2942</span>
<span class="normal">2943</span>
<span class="normal">2944</span>
<span class="normal">2945</span>
<span class="normal">2946</span>
<span class="normal">2947</span>
<span class="normal">2948</span>
<span class="normal">2949</span>
<span class="normal">2950</span>
<span class="normal">2951</span>
<span class="normal">2952</span>
<span class="normal">2953</span>
<span class="normal">2954</span>
<span class="normal">2955</span>
<span class="normal">2956</span>
<span class="normal">2957</span>
<span class="normal">2958</span>
<span class="normal">2959</span>
<span class="normal">2960</span>
<span class="normal">2961</span>
<span class="normal">2962</span>
<span class="normal">2963</span>
<span class="normal">2964</span>
<span class="normal">2965</span>
<span class="normal">2966</span>
<span class="normal">2967</span>
<span class="normal">2968</span>
<span class="normal">2969</span>
<span class="normal">2970</span>
<span class="normal">2971</span>
<span class="normal">2972</span>
<span class="normal">2973</span>
<span class="normal">2974</span>
<span class="normal">2975</span>
<span class="normal">2976</span>
<span class="normal">2977</span>
<span class="normal">2978</span>
<span class="normal">2979</span>
<span class="normal">2980</span>
<span class="normal">2981</span>
<span class="normal">2982</span>
<span class="normal">2983</span>
<span class="normal">2984</span>
<span class="normal">2985</span>
<span class="normal">2986</span>
<span class="normal">2987</span>
<span class="normal">2988</span>
<span class="normal">2989</span>
<span class="normal">2990</span>
<span class="normal">2991</span>
<span class="normal">2992</span>
<span class="normal">2993</span>
<span class="normal">2994</span>
<span class="normal">2995</span>
<span class="normal">2996</span>
<span class="normal">2997</span>
<span class="normal">2998</span>
<span class="normal">2999</span>
<span class="normal">3000</span>
<span class="normal">3001</span>
<span class="normal">3002</span>
<span class="normal">3003</span>
<span class="normal">3004</span>
<span class="normal">3005</span>
<span class="normal">3006</span>
<span class="normal">3007</span>
<span class="normal">3008</span>
<span class="normal">3009</span>
<span class="normal">3010</span>
<span class="normal">3011</span>
<span class="normal">3012</span>
<span class="normal">3013</span>
<span class="normal">3014</span>
<span class="normal">3015</span>
<span class="normal">3016</span>
<span class="normal">3017</span>
<span class="normal">3018</span>
<span class="normal">3019</span>
<span class="normal">3020</span>
<span class="normal">3021</span>
<span class="normal">3022</span>
<span class="normal">3023</span>
<span class="normal">3024</span>
<span class="normal">3025</span>
<span class="normal">3026</span>
<span class="normal">3027</span>
<span class="normal">3028</span>
<span class="normal">3029</span>
<span class="normal">3030</span>
<span class="normal">3031</span>
<span class="normal">3032</span>
<span class="normal">3033</span>
<span class="normal">3034</span>
<span class="normal">3035</span>
<span class="normal">3036</span>
<span class="normal">3037</span>
<span class="normal">3038</span>
<span class="normal">3039</span>
<span class="normal">3040</span>
<span class="normal">3041</span>
<span class="normal">3042</span>
<span class="normal">3043</span>
<span class="normal">3044</span>
<span class="normal">3045</span>
<span class="normal">3046</span>
<span class="normal">3047</span>
<span class="normal">3048</span>
<span class="normal">3049</span>
<span class="normal">3050</span>
<span class="normal">3051</span>
<span class="normal">3052</span>
<span class="normal">3053</span>
<span class="normal">3054</span>
<span class="normal">3055</span>
<span class="normal">3056</span>
<span class="normal">3057</span>
<span class="normal">3058</span>
<span class="normal">3059</span>
<span class="normal">3060</span>
<span class="normal">3061</span>
<span class="normal">3062</span>
<span class="normal">3063</span>
<span class="normal">3064</span>
<span class="normal">3065</span>
<span class="normal">3066</span>
<span class="normal">3067</span>
<span class="normal">3068</span>
<span class="normal">3069</span>
<span class="normal">3070</span>
<span class="normal">3071</span>
<span class="normal">3072</span>
<span class="normal">3073</span>
<span class="normal">3074</span>
<span class="normal">3075</span>
<span class="normal">3076</span>
<span class="normal">3077</span>
<span class="normal">3078</span>
<span class="normal">3079</span>
<span class="normal">3080</span>
<span class="normal">3081</span>
<span class="normal">3082</span>
<span class="normal">3083</span>
<span class="normal">3084</span>
<span class="normal">3085</span>
<span class="normal">3086</span>
<span class="normal">3087</span>
<span class="normal">3088</span>
<span class="normal">3089</span>
<span class="normal">3090</span>
<span class="normal">3091</span>
<span class="normal">3092</span>
<span class="normal">3093</span>
<span class="normal">3094</span>
<span class="normal">3095</span>
<span class="normal">3096</span>
<span class="normal">3097</span>
<span class="normal">3098</span>
<span class="normal">3099</span>
<span class="normal">3100</span>
<span class="normal">3101</span>
<span class="normal">3102</span>
<span class="normal">3103</span>
<span class="normal">3104</span>
<span class="normal">3105</span>
<span class="normal">3106</span>
<span class="normal">3107</span>
<span class="normal">3108</span>
<span class="normal">3109</span>
<span class="normal">3110</span>
<span class="normal">3111</span>
<span class="normal">3112</span>
<span class="normal">3113</span>
<span class="normal">3114</span>
<span class="normal">3115</span>
<span class="normal">3116</span>
<span class="normal">3117</span>
<span class="normal">3118</span>
<span class="normal">3119</span>
<span class="normal">3120</span>
<span class="normal">3121</span>
<span class="normal">3122</span>
<span class="normal">3123</span>
<span class="normal">3124</span>
<span class="normal">3125</span>
<span class="normal">3126</span>
<span class="normal">3127</span>
<span class="normal">3128</span>
<span class="normal">3129</span>
<span class="normal">3130</span>
<span class="normal">3131</span>
<span class="normal">3132</span>
<span class="normal">3133</span>
<span class="normal">3134</span>
<span class="normal">3135</span>
<span class="normal">3136</span>
<span class="normal">3137</span>
<span class="normal">3138</span>
<span class="normal">3139</span>
<span class="normal">3140</span>
<span class="normal">3141</span>
<span class="normal">3142</span>
<span class="normal">3143</span>
<span class="normal">3144</span>
<span class="normal">3145</span>
<span class="normal">3146</span>
<span class="normal">3147</span>
<span class="normal">3148</span>
<span class="normal">3149</span>
<span class="normal">3150</span>
<span class="normal">3151</span>
<span class="normal">3152</span>
<span class="normal">3153</span>
<span class="normal">3154</span>
<span class="normal">3155</span>
<span class="normal">3156</span>
<span class="normal">3157</span>
<span class="normal">3158</span>
<span class="normal">3159</span>
<span class="normal">3160</span>
<span class="normal">3161</span>
<span class="normal">3162</span>
<span class="normal">3163</span>
<span class="normal">3164</span>
<span class="normal">3165</span>
<span class="normal">3166</span>
<span class="normal">3167</span>
<span class="normal">3168</span>
<span class="normal">3169</span>
<span class="normal">3170</span>
<span class="normal">3171</span>
<span class="normal">3172</span>
<span class="normal">3173</span>
<span class="normal">3174</span>
<span class="normal">3175</span>
<span class="normal">3176</span>
<span class="normal">3177</span>
<span class="normal">3178</span>
<span class="normal">3179</span>
<span class="normal">3180</span>
<span class="normal">3181</span>
<span class="normal">3182</span>
<span class="normal">3183</span>
<span class="normal">3184</span>
<span class="normal">3185</span>
<span class="normal">3186</span>
<span class="normal">3187</span>
<span class="normal">3188</span>
<span class="normal">3189</span>
<span class="normal">3190</span>
<span class="normal">3191</span>
<span class="normal">3192</span>
<span class="normal">3193</span>
<span class="normal">3194</span>
<span class="normal">3195</span>
<span class="normal">3196</span>
<span class="normal">3197</span>
<span class="normal">3198</span>
<span class="normal">3199</span>
<span class="normal">3200</span>
<span class="normal">3201</span>
<span class="normal">3202</span>
<span class="normal">3203</span>
<span class="normal">3204</span>
<span class="normal">3205</span>
<span class="normal">3206</span>
<span class="normal">3207</span>
<span class="normal">3208</span>
<span class="normal">3209</span>
<span class="normal">3210</span>
<span class="normal">3211</span>
<span class="normal">3212</span>
<span class="normal">3213</span>
<span class="normal">3214</span>
<span class="normal">3215</span>
<span class="normal">3216</span>
<span class="normal">3217</span>
<span class="normal">3218</span>
<span class="normal">3219</span>
<span class="normal">3220</span>
<span class="normal">3221</span>
<span class="normal">3222</span>
<span class="normal">3223</span>
<span class="normal">3224</span>
<span class="normal">3225</span>
<span class="normal">3226</span>
<span class="normal">3227</span>
<span class="normal">3228</span>
<span class="normal">3229</span>
<span class="normal">3230</span>
<span class="normal">3231</span>
<span class="normal">3232</span>
<span class="normal">3233</span>
<span class="normal">3234</span>
<span class="normal">3235</span>
<span class="normal">3236</span>
<span class="normal">3237</span>
<span class="normal">3238</span>
<span class="normal">3239</span>
<span class="normal">3240</span>
<span class="normal">3241</span>
<span class="normal">3242</span>
<span class="normal">3243</span>
<span class="normal">3244</span>
<span class="normal">3245</span>
<span class="normal">3246</span>
<span class="normal">3247</span>
<span class="normal">3248</span>
<span class="normal">3249</span>
<span class="normal">3250</span>
<span class="normal">3251</span>
<span class="normal">3252</span>
<span class="normal">3253</span>
<span class="normal">3254</span>
<span class="normal">3255</span>
<span class="normal">3256</span>
<span class="normal">3257</span>
<span class="normal">3258</span>
<span class="normal">3259</span>
<span class="normal">3260</span>
<span class="normal">3261</span>
<span class="normal">3262</span>
<span class="normal">3263</span>
<span class="normal">3264</span>
<span class="normal">3265</span>
<span class="normal">3266</span>
<span class="normal">3267</span>
<span class="normal">3268</span>
<span class="normal">3269</span>
<span class="normal">3270</span>
<span class="normal">3271</span>
<span class="normal">3272</span>
<span class="normal">3273</span>
<span class="normal">3274</span>
<span class="normal">3275</span>
<span class="normal">3276</span>
<span class="normal">3277</span>
<span class="normal">3278</span>
<span class="normal">3279</span>
<span class="normal">3280</span>
<span class="normal">3281</span>
<span class="normal">3282</span>
<span class="normal">3283</span>
<span class="normal">3284</span>
<span class="normal">3285</span>
<span class="normal">3286</span>
<span class="normal">3287</span>
<span class="normal">3288</span>
<span class="normal">3289</span>
<span class="normal">3290</span>
<span class="normal">3291</span>
<span class="normal">3292</span>
<span class="normal">3293</span>
<span class="normal">3294</span>
<span class="normal">3295</span>
<span class="normal">3296</span>
<span class="normal">3297</span>
<span class="normal">3298</span>
<span class="normal">3299</span>
<span class="normal">3300</span>
<span class="normal">3301</span>
<span class="normal">3302</span>
<span class="normal">3303</span>
<span class="normal">3304</span>
<span class="normal">3305</span>
<span class="normal">3306</span>
<span class="normal">3307</span>
<span class="normal">3308</span>
<span class="normal">3309</span>
<span class="normal">3310</span>
<span class="normal">3311</span>
<span class="normal">3312</span>
<span class="normal">3313</span>
<span class="normal">3314</span>
<span class="normal">3315</span>
<span class="normal">3316</span>
<span class="normal">3317</span>
<span class="normal">3318</span>
<span class="normal">3319</span>
<span class="normal">3320</span>
<span class="normal">3321</span>
<span class="normal">3322</span>
<span class="normal">3323</span>
<span class="normal">3324</span>
<span class="normal">3325</span>
<span class="normal">3326</span>
<span class="normal">3327</span>
<span class="normal">3328</span>
<span class="normal">3329</span>
<span class="normal">3330</span>
<span class="normal">3331</span>
<span class="normal">3332</span>
<span class="normal">3333</span>
<span class="normal">3334</span>
<span class="normal">3335</span>
<span class="normal">3336</span>
<span class="normal">3337</span>
<span class="normal">3338</span>
<span class="normal">3339</span>
<span class="normal">3340</span>
<span class="normal">3341</span>
<span class="normal">3342</span>
<span class="normal">3343</span>
<span class="normal">3344</span>
<span class="normal">3345</span>
<span class="normal">3346</span>
<span class="normal">3347</span>
<span class="normal">3348</span>
<span class="normal">3349</span>
<span class="normal">3350</span>
<span class="normal">3351</span>
<span class="normal">3352</span>
<span class="normal">3353</span>
<span class="normal">3354</span>
<span class="normal">3355</span>
<span class="normal">3356</span>
<span class="normal">3357</span>
<span class="normal">3358</span>
<span class="normal">3359</span>
<span class="normal">3360</span>
<span class="normal">3361</span>
<span class="normal">3362</span>
<span class="normal">3363</span>
<span class="normal">3364</span>
<span class="normal">3365</span>
<span class="normal">3366</span>
<span class="normal">3367</span>
<span class="normal">3368</span>
<span class="normal">3369</span>
<span class="normal">3370</span>
<span class="normal">3371</span>
<span class="normal">3372</span>
<span class="normal">3373</span>
<span class="normal">3374</span>
<span class="normal">3375</span>
<span class="normal">3376</span>
<span class="normal">3377</span>
<span class="normal">3378</span>
<span class="normal">3379</span>
<span class="normal">3380</span>
<span class="normal">3381</span>
<span class="normal">3382</span>
<span class="normal">3383</span>
<span class="normal">3384</span>
<span class="normal">3385</span>
<span class="normal">3386</span>
<span class="normal">3387</span>
<span class="normal">3388</span>
<span class="normal">3389</span>
<span class="normal">3390</span>
<span class="normal">3391</span>
<span class="normal">3392</span>
<span class="normal">3393</span>
<span class="normal">3394</span>
<span class="normal">3395</span>
<span class="normal">3396</span>
<span class="normal">3397</span>
<span class="normal">3398</span>
<span class="normal">3399</span>
<span class="normal">3400</span>
<span class="normal">3401</span>
<span class="normal">3402</span>
<span class="normal">3403</span>
<span class="normal">3404</span>
<span class="normal">3405</span>
<span class="normal">3406</span>
<span class="normal">3407</span>
<span class="normal">3408</span>
<span class="normal">3409</span>
<span class="normal">3410</span>
<span class="normal">3411</span>
<span class="normal">3412</span>
<span class="normal">3413</span>
<span class="normal">3414</span>
<span class="normal">3415</span>
<span class="normal">3416</span>
<span class="normal">3417</span>
<span class="normal">3418</span>
<span class="normal">3419</span>
<span class="normal">3420</span>
<span class="normal">3421</span>
<span class="normal">3422</span>
<span class="normal">3423</span>
<span class="normal">3424</span>
<span class="normal">3425</span>
<span class="normal">3426</span>
<span class="normal">3427</span>
<span class="normal">3428</span>
<span class="normal">3429</span>
<span class="normal">3430</span>
<span class="normal">3431</span>
<span class="normal">3432</span>
<span class="normal">3433</span>
<span class="normal">3434</span>
<span class="normal">3435</span>
<span class="normal">3436</span>
<span class="normal">3437</span>
<span class="normal">3438</span>
<span class="normal">3439</span>
<span class="normal">3440</span>
<span class="normal">3441</span>
<span class="normal">3442</span>
<span class="normal">3443</span>
<span class="normal">3444</span>
<span class="normal">3445</span>
<span class="normal">3446</span>
<span class="normal">3447</span>
<span class="normal">3448</span>
<span class="normal">3449</span>
<span class="normal">3450</span>
<span class="normal">3451</span>
<span class="normal">3452</span>
<span class="normal">3453</span>
<span class="normal">3454</span>
<span class="normal">3455</span>
<span class="normal">3456</span>
<span class="normal">3457</span>
<span class="normal">3458</span>
<span class="normal">3459</span>
<span class="normal">3460</span>
<span class="normal">3461</span>
<span class="normal">3462</span>
<span class="normal">3463</span>
<span class="normal">3464</span>
<span class="normal">3465</span>
<span class="normal">3466</span>
<span class="normal">3467</span>
<span class="normal">3468</span>
<span class="normal">3469</span>
<span class="normal">3470</span>
<span class="normal">3471</span>
<span class="normal">3472</span>
<span class="normal">3473</span>
<span class="normal">3474</span>
<span class="normal">3475</span>
<span class="normal">3476</span>
<span class="normal">3477</span>
<span class="normal">3478</span>
<span class="normal">3479</span>
<span class="normal">3480</span>
<span class="normal">3481</span>
<span class="normal">3482</span>
<span class="normal">3483</span>
<span class="normal">3484</span>
<span class="normal">3485</span>
<span class="normal">3486</span>
<span class="normal">3487</span>
<span class="normal">3488</span>
<span class="normal">3489</span>
<span class="normal">3490</span>
<span class="normal">3491</span>
<span class="normal">3492</span>
<span class="normal">3493</span>
<span class="normal">3494</span>
<span class="normal">3495</span>
<span class="normal">3496</span>
<span class="normal">3497</span>
<span class="normal">3498</span>
<span class="normal">3499</span>
<span class="normal">3500</span>
<span class="normal">3501</span>
<span class="normal">3502</span>
<span class="normal">3503</span>
<span class="normal">3504</span>
<span class="normal">3505</span>
<span class="normal">3506</span>
<span class="normal">3507</span>
<span class="normal">3508</span>
<span class="normal">3509</span>
<span class="normal">3510</span>
<span class="normal">3511</span>
<span class="normal">3512</span>
<span class="normal">3513</span>
<span class="normal">3514</span>
<span class="normal">3515</span>
<span class="normal">3516</span>
<span class="normal">3517</span>
<span class="normal">3518</span>
<span class="normal">3519</span>
<span class="normal">3520</span>
<span class="normal">3521</span>
<span class="normal">3522</span>
<span class="normal">3523</span>
<span class="normal">3524</span>
<span class="normal">3525</span>
<span class="normal">3526</span>
<span class="normal">3527</span>
<span class="normal">3528</span>
<span class="normal">3529</span>
<span class="normal">3530</span>
<span class="normal">3531</span>
<span class="normal">3532</span>
<span class="normal">3533</span>
<span class="normal">3534</span>
<span class="normal">3535</span>
<span class="normal">3536</span>
<span class="normal">3537</span>
<span class="normal">3538</span>
<span class="normal">3539</span>
<span class="normal">3540</span>
<span class="normal">3541</span>
<span class="normal">3542</span>
<span class="normal">3543</span>
<span class="normal">3544</span>
<span class="normal">3545</span>
<span class="normal">3546</span>
<span class="normal">3547</span>
<span class="normal">3548</span>
<span class="normal">3549</span>
<span class="normal">3550</span>
<span class="normal">3551</span>
<span class="normal">3552</span>
<span class="normal">3553</span>
<span class="normal">3554</span>
<span class="normal">3555</span>
<span class="normal">3556</span>
<span class="normal">3557</span>
<span class="normal">3558</span>
<span class="normal">3559</span>
<span class="normal">3560</span>
<span class="normal">3561</span>
<span class="normal">3562</span>
<span class="normal">3563</span>
<span class="normal">3564</span>
<span class="normal">3565</span>
<span class="normal">3566</span>
<span class="normal">3567</span>
<span class="normal">3568</span>
<span class="normal">3569</span>
<span class="normal">3570</span>
<span class="normal">3571</span>
<span class="normal">3572</span>
<span class="normal">3573</span>
<span class="normal">3574</span>
<span class="normal">3575</span>
<span class="normal">3576</span>
<span class="normal">3577</span>
<span class="normal">3578</span>
<span class="normal">3579</span>
<span class="normal">3580</span>
<span class="normal">3581</span>
<span class="normal">3582</span>
<span class="normal">3583</span>
<span class="normal">3584</span>
<span class="normal">3585</span>
<span class="normal">3586</span>
<span class="normal">3587</span>
<span class="normal">3588</span>
<span class="normal">3589</span>
<span class="normal">3590</span>
<span class="normal">3591</span>
<span class="normal">3592</span>
<span class="normal">3593</span>
<span class="normal">3594</span>
<span class="normal">3595</span>
<span class="normal">3596</span>
<span class="normal">3597</span>
<span class="normal">3598</span>
<span class="normal">3599</span>
<span class="normal">3600</span>
<span class="normal">3601</span>
<span class="normal">3602</span>
<span class="normal">3603</span>
<span class="normal">3604</span>
<span class="normal">3605</span>
<span class="normal">3606</span>
<span class="normal">3607</span>
<span class="normal">3608</span>
<span class="normal">3609</span>
<span class="normal">3610</span>
<span class="normal">3611</span>
<span class="normal">3612</span>
<span class="normal">3613</span>
<span class="normal">3614</span>
<span class="normal">3615</span>
<span class="normal">3616</span>
<span class="normal">3617</span>
<span class="normal">3618</span>
<span class="normal">3619</span>
<span class="normal">3620</span>
<span class="normal">3621</span>
<span class="normal">3622</span>
<span class="normal">3623</span>
<span class="normal">3624</span>
<span class="normal">3625</span>
<span class="normal">3626</span>
<span class="normal">3627</span>
<span class="normal">3628</span>
<span class="normal">3629</span>
<span class="normal">3630</span>
<span class="normal">3631</span>
<span class="normal">3632</span>
<span class="normal">3633</span>
<span class="normal">3634</span>
<span class="normal">3635</span>
<span class="normal">3636</span>
<span class="normal">3637</span>
<span class="normal">3638</span>
<span class="normal">3639</span>
<span class="normal">3640</span>
<span class="normal">3641</span>
<span class="normal">3642</span>
<span class="normal">3643</span>
<span class="normal">3644</span>
<span class="normal">3645</span>
<span class="normal">3646</span>
<span class="normal">3647</span>
<span class="normal">3648</span>
<span class="normal">3649</span>
<span class="normal">3650</span>
<span class="normal">3651</span>
<span class="normal">3652</span>
<span class="normal">3653</span>
<span class="normal">3654</span>
<span class="normal">3655</span>
<span class="normal">3656</span>
<span class="normal">3657</span>
<span class="normal">3658</span>
<span class="normal">3659</span>
<span class="normal">3660</span>
<span class="normal">3661</span>
<span class="normal">3662</span>
<span class="normal">3663</span>
<span class="normal">3664</span>
<span class="normal">3665</span>
<span class="normal">3666</span>
<span class="normal">3667</span>
<span class="normal">3668</span>
<span class="normal">3669</span>
<span class="normal">3670</span>
<span class="normal">3671</span>
<span class="normal">3672</span>
<span class="normal">3673</span>
<span class="normal">3674</span>
<span class="normal">3675</span>
<span class="normal">3676</span>
<span class="normal">3677</span>
<span class="normal">3678</span>
<span class="normal">3679</span>
<span class="normal">3680</span>
<span class="normal">3681</span>
<span class="normal">3682</span>
<span class="normal">3683</span>
<span class="normal">3684</span>
<span class="normal">3685</span>
<span class="normal">3686</span>
<span class="normal">3687</span>
<span class="normal">3688</span>
<span class="normal">3689</span>
<span class="normal">3690</span>
<span class="normal">3691</span>
<span class="normal">3692</span>
<span class="normal">3693</span>
<span class="normal">3694</span>
<span class="normal">3695</span>
<span class="normal">3696</span>
<span class="normal">3697</span>
<span class="normal">3698</span>
<span class="normal">3699</span>
<span class="normal">3700</span>
<span class="normal">3701</span>
<span class="normal">3702</span>
<span class="normal">3703</span>
<span class="normal">3704</span>
<span class="normal">3705</span>
<span class="normal">3706</span>
<span class="normal">3707</span>
<span class="normal">3708</span>
<span class="normal">3709</span>
<span class="normal">3710</span>
<span class="normal">3711</span>
<span class="normal">3712</span>
<span class="normal">3713</span>
<span class="normal">3714</span>
<span class="normal">3715</span>
<span class="normal">3716</span>
<span class="normal">3717</span>
<span class="normal">3718</span>
<span class="normal">3719</span>
<span class="normal">3720</span>
<span class="normal">3721</span>
<span class="normal">3722</span>
<span class="normal">3723</span>
<span class="normal">3724</span>
<span class="normal">3725</span>
<span class="normal">3726</span>
<span class="normal">3727</span>
<span class="normal">3728</span>
<span class="normal">3729</span>
<span class="normal">3730</span>
<span class="normal">3731</span>
<span class="normal">3732</span>
<span class="normal">3733</span>
<span class="normal">3734</span>
<span class="normal">3735</span>
<span class="normal">3736</span>
<span class="normal">3737</span>
<span class="normal">3738</span>
<span class="normal">3739</span>
<span class="normal">3740</span>
<span class="normal">3741</span>
<span class="normal">3742</span>
<span class="normal">3743</span>
<span class="normal">3744</span>
<span class="normal">3745</span>
<span class="normal">3746</span>
<span class="normal">3747</span>
<span class="normal">3748</span>
<span class="normal">3749</span>
<span class="normal">3750</span>
<span class="normal">3751</span>
<span class="normal">3752</span>
<span class="normal">3753</span>
<span class="normal">3754</span>
<span class="normal">3755</span>
<span class="normal">3756</span>
<span class="normal">3757</span>
<span class="normal">3758</span>
<span class="normal">3759</span>
<span class="normal">3760</span>
<span class="normal">3761</span>
<span class="normal">3762</span>
<span class="normal">3763</span>
<span class="normal">3764</span>
<span class="normal">3765</span>
<span class="normal">3766</span>
<span class="normal">3767</span>
<span class="normal">3768</span>
<span class="normal">3769</span>
<span class="normal">3770</span>
<span class="normal">3771</span>
<span class="normal">3772</span>
<span class="normal">3773</span>
<span class="normal">3774</span>
<span class="normal">3775</span>
<span class="normal">3776</span>
<span class="normal">3777</span>
<span class="normal">3778</span>
<span class="normal">3779</span>
<span class="normal">3780</span>
<span class="normal">3781</span>
<span class="normal">3782</span>
<span class="normal">3783</span>
<span class="normal">3784</span>
<span class="normal">3785</span>
<span class="normal">3786</span>
<span class="normal">3787</span>
<span class="normal">3788</span>
<span class="normal">3789</span>
<span class="normal">3790</span>
<span class="normal">3791</span>
<span class="normal">3792</span>
<span class="normal">3793</span>
<span class="normal">3794</span>
<span class="normal">3795</span>
<span class="normal">3796</span>
<span class="normal">3797</span>
<span class="normal">3798</span>
<span class="normal">3799</span>
<span class="normal">3800</span>
<span class="normal">3801</span>
<span class="normal">3802</span>
<span class="normal">3803</span>
<span class="normal">3804</span>
<span class="normal">3805</span>
<span class="normal">3806</span>
<span class="normal">3807</span>
<span class="normal">3808</span>
<span class="normal">3809</span>
<span class="normal">3810</span>
<span class="normal">3811</span>
<span class="normal">3812</span>
<span class="normal">3813</span>
<span class="normal">3814</span>
<span class="normal">3815</span>
<span class="normal">3816</span>
<span class="normal">3817</span>
<span class="normal">3818</span>
<span class="normal">3819</span>
<span class="normal">3820</span>
<span class="normal">3821</span>
<span class="normal">3822</span>
<span class="normal">3823</span>
<span class="normal">3824</span>
<span class="normal">3825</span>
<span class="normal">3826</span>
<span class="normal">3827</span>
<span class="normal">3828</span>
<span class="normal">3829</span>
<span class="normal">3830</span>
<span class="normal">3831</span>
<span class="normal">3832</span>
<span class="normal">3833</span>
<span class="normal">3834</span>
<span class="normal">3835</span>
<span class="normal">3836</span>
<span class="normal">3837</span>
<span class="normal">3838</span>
<span class="normal">3839</span>
<span class="normal">3840</span>
<span class="normal">3841</span>
<span class="normal">3842</span>
<span class="normal">3843</span>
<span class="normal">3844</span>
<span class="normal">3845</span>
<span class="normal">3846</span>
<span class="normal">3847</span>
<span class="normal">3848</span>
<span class="normal">3849</span>
<span class="normal">3850</span>
<span class="normal">3851</span>
<span class="normal">3852</span>
<span class="normal">3853</span>
<span class="normal">3854</span>
<span class="normal">3855</span>
<span class="normal">3856</span>
<span class="normal">3857</span>
<span class="normal">3858</span>
<span class="normal">3859</span>
<span class="normal">3860</span>
<span class="normal">3861</span>
<span class="normal">3862</span>
<span class="normal">3863</span>
<span class="normal">3864</span>
<span class="normal">3865</span>
<span class="normal">3866</span>
<span class="normal">3867</span>
<span class="normal">3868</span>
<span class="normal">3869</span>
<span class="normal">3870</span>
<span class="normal">3871</span>
<span class="normal">3872</span>
<span class="normal">3873</span>
<span class="normal">3874</span>
<span class="normal">3875</span>
<span class="normal">3876</span>
<span class="normal">3877</span>
<span class="normal">3878</span>
<span class="normal">3879</span>
<span class="normal">3880</span>
<span class="normal">3881</span>
<span class="normal">3882</span>
<span class="normal">3883</span>
<span class="normal">3884</span>
<span class="normal">3885</span>
<span class="normal">3886</span>
<span class="normal">3887</span>
<span class="normal">3888</span>
<span class="normal">3889</span>
<span class="normal">3890</span>
<span class="normal">3891</span>
<span class="normal">3892</span>
<span class="normal">3893</span>
<span class="normal">3894</span>
<span class="normal">3895</span>
<span class="normal">3896</span>
<span class="normal">3897</span>
<span class="normal">3898</span>
<span class="normal">3899</span>
<span class="normal">3900</span>
<span class="normal">3901</span>
<span class="normal">3902</span>
<span class="normal">3903</span>
<span class="normal">3904</span>
<span class="normal">3905</span>
<span class="normal">3906</span>
<span class="normal">3907</span>
<span class="normal">3908</span>
<span class="normal">3909</span>
<span class="normal">3910</span>
<span class="normal">3911</span>
<span class="normal">3912</span>
<span class="normal">3913</span>
<span class="normal">3914</span>
<span class="normal">3915</span>
<span class="normal">3916</span>
<span class="normal">3917</span>
<span class="normal">3918</span>
<span class="normal">3919</span>
<span class="normal">3920</span>
<span class="normal">3921</span>
<span class="normal">3922</span>
<span class="normal">3923</span>
<span class="normal">3924</span>
<span class="normal">3925</span>
<span class="normal">3926</span>
<span class="normal">3927</span>
<span class="normal">3928</span>
<span class="normal">3929</span>
<span class="normal">3930</span>
<span class="normal">3931</span>
<span class="normal">3932</span>
<span class="normal">3933</span>
<span class="normal">3934</span>
<span class="normal">3935</span>
<span class="normal">3936</span>
<span class="normal">3937</span>
<span class="normal">3938</span>
<span class="normal">3939</span>
<span class="normal">3940</span>
<span class="normal">3941</span>
<span class="normal">3942</span>
<span class="normal">3943</span>
<span class="normal">3944</span>
<span class="normal">3945</span>
<span class="normal">3946</span>
<span class="normal">3947</span>
<span class="normal">3948</span>
<span class="normal">3949</span>
<span class="normal">3950</span>
<span class="normal">3951</span>
<span class="normal">3952</span>
<span class="normal">3953</span>
<span class="normal">3954</span>
<span class="normal">3955</span>
<span class="normal">3956</span>
<span class="normal">3957</span>
<span class="normal">3958</span>
<span class="normal">3959</span>
<span class="normal">3960</span>
<span class="normal">3961</span>
<span class="normal">3962</span>
<span class="normal">3963</span>
<span class="normal">3964</span>
<span class="normal">3965</span>
<span class="normal">3966</span>
<span class="normal">3967</span>
<span class="normal">3968</span>
<span class="normal">3969</span>
<span class="normal">3970</span>
<span class="normal">3971</span>
<span class="normal">3972</span>
<span class="normal">3973</span>
<span class="normal">3974</span>
<span class="normal">3975</span>
<span class="normal">3976</span>
<span class="normal">3977</span>
<span class="normal">3978</span>
<span class="normal">3979</span>
<span class="normal">3980</span>
<span class="normal">3981</span>
<span class="normal">3982</span>
<span class="normal">3983</span>
<span class="normal">3984</span>
<span class="normal">3985</span>
<span class="normal">3986</span>
<span class="normal">3987</span>
<span class="normal">3988</span>
<span class="normal">3989</span>
<span class="normal">3990</span>
<span class="normal">3991</span>
<span class="normal">3992</span>
<span class="normal">3993</span>
<span class="normal">3994</span>
<span class="normal">3995</span>
<span class="normal">3996</span>
<span class="normal">3997</span>
<span class="normal">3998</span>
<span class="normal">3999</span>
<span class="normal">4000</span>
<span class="normal">4001</span>
<span class="normal">4002</span>
<span class="normal">4003</span>
<span class="normal">4004</span>
<span class="normal">4005</span>
<span class="normal">4006</span>
<span class="normal">4007</span>
<span class="normal">4008</span>
<span class="normal">4009</span>
<span class="normal">4010</span>
<span class="normal">4011</span>
<span class="normal">4012</span>
<span class="normal">4013</span>
<span class="normal">4014</span>
<span class="normal">4015</span>
<span class="normal">4016</span>
<span class="normal">4017</span>
<span class="normal">4018</span>
<span class="normal">4019</span>
<span class="normal">4020</span>
<span class="normal">4021</span>
<span class="normal">4022</span>
<span class="normal">4023</span>
<span class="normal">4024</span>
<span class="normal">4025</span>
<span class="normal">4026</span>
<span class="normal">4027</span>
<span class="normal">4028</span>
<span class="normal">4029</span>
<span class="normal">4030</span>
<span class="normal">4031</span>
<span class="normal">4032</span>
<span class="normal">4033</span>
<span class="normal">4034</span>
<span class="normal">4035</span>
<span class="normal">4036</span>
<span class="normal">4037</span>
<span class="normal">4038</span>
<span class="normal">4039</span>
<span class="normal">4040</span>
<span class="normal">4041</span>
<span class="normal">4042</span>
<span class="normal">4043</span>
<span class="normal">4044</span>
<span class="normal">4045</span>
<span class="normal">4046</span>
<span class="normal">4047</span>
<span class="normal">4048</span>
<span class="normal">4049</span>
<span class="normal">4050</span>
<span class="normal">4051</span>
<span class="normal">4052</span>
<span class="normal">4053</span>
<span class="normal">4054</span>
<span class="normal">4055</span>
<span class="normal">4056</span>
<span class="normal">4057</span>
<span class="normal">4058</span>
<span class="normal">4059</span>
<span class="normal">4060</span>
<span class="normal">4061</span>
<span class="normal">4062</span>
<span class="normal">4063</span>
<span class="normal">4064</span>
<span class="normal">4065</span>
<span class="normal">4066</span>
<span class="normal">4067</span>
<span class="normal">4068</span>
<span class="normal">4069</span>
<span class="normal">4070</span>
<span class="normal">4071</span>
<span class="normal">4072</span>
<span class="normal">4073</span>
<span class="normal">4074</span>
<span class="normal">4075</span>
<span class="normal">4076</span>
<span class="normal">4077</span>
<span class="normal">4078</span>
<span class="normal">4079</span>
<span class="normal">4080</span>
<span class="normal">4081</span>
<span class="normal">4082</span>
<span class="normal">4083</span>
<span class="normal">4084</span>
<span class="normal">4085</span>
<span class="normal">4086</span>
<span class="normal">4087</span>
<span class="normal">4088</span>
<span class="normal">4089</span>
<span class="normal">4090</span>
<span class="normal">4091</span>
<span class="normal">4092</span>
<span class="normal">4093</span>
<span class="normal">4094</span>
<span class="normal">4095</span>
<span class="normal">4096</span>
<span class="normal">4097</span>
<span class="normal">4098</span>
<span class="normal">4099</span>
<span class="normal">4100</span>
<span class="normal">4101</span>
<span class="normal">4102</span>
<span class="normal">4103</span>
<span class="normal">4104</span>
<span class="normal">4105</span>
<span class="normal">4106</span>
<span class="normal">4107</span>
<span class="normal">4108</span>
<span class="normal">4109</span>
<span class="normal">4110</span>
<span class="normal">4111</span>
<span class="normal">4112</span>
<span class="normal">4113</span>
<span class="normal">4114</span>
<span class="normal">4115</span>
<span class="normal">4116</span>
<span class="normal">4117</span>
<span class="normal">4118</span>
<span class="normal">4119</span>
<span class="normal">4120</span>
<span class="normal">4121</span>
<span class="normal">4122</span>
<span class="normal">4123</span>
<span class="normal">4124</span>
<span class="normal">4125</span>
<span class="normal">4126</span>
<span class="normal">4127</span>
<span class="normal">4128</span>
<span class="normal">4129</span>
<span class="normal">4130</span>
<span class="normal">4131</span>
<span class="normal">4132</span>
<span class="normal">4133</span>
<span class="normal">4134</span>
<span class="normal">4135</span>
<span class="normal">4136</span>
<span class="normal">4137</span>
<span class="normal">4138</span>
<span class="normal">4139</span>
<span class="normal">4140</span>
<span class="normal">4141</span>
<span class="normal">4142</span>
<span class="normal">4143</span>
<span class="normal">4144</span>
<span class="normal">4145</span>
<span class="normal">4146</span>
<span class="normal">4147</span>
<span class="normal">4148</span>
<span class="normal">4149</span>
<span class="normal">4150</span>
<span class="normal">4151</span>
<span class="normal">4152</span>
<span class="normal">4153</span>
<span class="normal">4154</span>
<span class="normal">4155</span>
<span class="normal">4156</span>
<span class="normal">4157</span>
<span class="normal">4158</span>
<span class="normal">4159</span>
<span class="normal">4160</span>
<span class="normal">4161</span>
<span class="normal">4162</span>
<span class="normal">4163</span>
<span class="normal">4164</span>
<span class="normal">4165</span>
<span class="normal">4166</span>
<span class="normal">4167</span>
<span class="normal">4168</span>
<span class="normal">4169</span>
<span class="normal">4170</span>
<span class="normal">4171</span>
<span class="normal">4172</span>
<span class="normal">4173</span>
<span class="normal">4174</span>
<span class="normal">4175</span>
<span class="normal">4176</span>
<span class="normal">4177</span>
<span class="normal">4178</span>
<span class="normal">4179</span>
<span class="normal">4180</span>
<span class="normal">4181</span>
<span class="normal">4182</span>
<span class="normal">4183</span>
<span class="normal">4184</span>
<span class="normal">4185</span>
<span class="normal">4186</span>
<span class="normal">4187</span>
<span class="normal">4188</span>
<span class="normal">4189</span>
<span class="normal">4190</span>
<span class="normal">4191</span>
<span class="normal">4192</span>
<span class="normal">4193</span>
<span class="normal">4194</span>
<span class="normal">4195</span>
<span class="normal">4196</span>
<span class="normal">4197</span>
<span class="normal">4198</span>
<span class="normal">4199</span>
<span class="normal">4200</span>
<span class="normal">4201</span>
<span class="normal">4202</span>
<span class="normal">4203</span>
<span class="normal">4204</span>
<span class="normal">4205</span>
<span class="normal">4206</span>
<span class="normal">4207</span>
<span class="normal">4208</span>
<span class="normal">4209</span>
<span class="normal">4210</span>
<span class="normal">4211</span>
<span class="normal">4212</span>
<span class="normal">4213</span>
<span class="normal">4214</span>
<span class="normal">4215</span>
<span class="normal">4216</span>
<span class="normal">4217</span>
<span class="normal">4218</span>
<span class="normal">4219</span>
<span class="normal">4220</span>
<span class="normal">4221</span>
<span class="normal">4222</span>
<span class="normal">4223</span>
<span class="normal">4224</span>
<span class="normal">4225</span>
<span class="normal">4226</span>
<span class="normal">4227</span>
<span class="normal">4228</span>
<span class="normal">4229</span>
<span class="normal">4230</span>
<span class="normal">4231</span>
<span class="normal">4232</span>
<span class="normal">4233</span>
<span class="normal">4234</span>
<span class="normal">4235</span>
<span class="normal">4236</span>
<span class="normal">4237</span>
<span class="normal">4238</span>
<span class="normal">4239</span>
<span class="normal">4240</span>
<span class="normal">4241</span>
<span class="normal">4242</span>
<span class="normal">4243</span>
<span class="normal">4244</span>
<span class="normal">4245</span>
<span class="normal">4246</span>
<span class="normal">4247</span>
<span class="normal">4248</span>
<span class="normal">4249</span>
<span class="normal">4250</span>
<span class="normal">4251</span>
<span class="normal">4252</span>
<span class="normal">4253</span>
<span class="normal">4254</span>
<span class="normal">4255</span>
<span class="normal">4256</span>
<span class="normal">4257</span>
<span class="normal">4258</span>
<span class="normal">4259</span>
<span class="normal">4260</span>
<span class="normal">4261</span>
<span class="normal">4262</span>
<span class="normal">4263</span>
<span class="normal">4264</span>
<span class="normal">4265</span>
<span class="normal">4266</span>
<span class="normal">4267</span>
<span class="normal">4268</span>
<span class="normal">4269</span>
<span class="normal">4270</span>
<span class="normal">4271</span>
<span class="normal">4272</span>
<span class="normal">4273</span>
<span class="normal">4274</span>
<span class="normal">4275</span>
<span class="normal">4276</span>
<span class="normal">4277</span>
<span class="normal">4278</span>
<span class="normal">4279</span>
<span class="normal">4280</span>
<span class="normal">4281</span>
<span class="normal">4282</span>
<span class="normal">4283</span>
<span class="normal">4284</span>
<span class="normal">4285</span>
<span class="normal">4286</span>
<span class="normal">4287</span>
<span class="normal">4288</span>
<span class="normal">4289</span>
<span class="normal">4290</span>
<span class="normal">4291</span>
<span class="normal">4292</span>
<span class="normal">4293</span>
<span class="normal">4294</span>
<span class="normal">4295</span>
<span class="normal">4296</span>
<span class="normal">4297</span>
<span class="normal">4298</span>
<span class="normal">4299</span>
<span class="normal">4300</span>
<span class="normal">4301</span>
<span class="normal">4302</span>
<span class="normal">4303</span>
<span class="normal">4304</span>
<span class="normal">4305</span>
<span class="normal">4306</span>
<span class="normal">4307</span>
<span class="normal">4308</span>
<span class="normal">4309</span>
<span class="normal">4310</span>
<span class="normal">4311</span>
<span class="normal">4312</span>
<span class="normal">4313</span>
<span class="normal">4314</span>
<span class="normal">4315</span>
<span class="normal">4316</span>
<span class="normal">4317</span>
<span class="normal">4318</span>
<span class="normal">4319</span>
<span class="normal">4320</span>
<span class="normal">4321</span>
<span class="normal">4322</span>
<span class="normal">4323</span>
<span class="normal">4324</span>
<span class="normal">4325</span>
<span class="normal">4326</span>
<span class="normal">4327</span>
<span class="normal">4328</span>
<span class="normal">4329</span>
<span class="normal">4330</span>
<span class="normal">4331</span>
<span class="normal">4332</span>
<span class="normal">4333</span>
<span class="normal">4334</span>
<span class="normal">4335</span>
<span class="normal">4336</span>
<span class="normal">4337</span>
<span class="normal">4338</span>
<span class="normal">4339</span>
<span class="normal">4340</span>
<span class="normal">4341</span>
<span class="normal">4342</span>
<span class="normal">4343</span>
<span class="normal">4344</span>
<span class="normal">4345</span>
<span class="normal">4346</span>
<span class="normal">4347</span>
<span class="normal">4348</span>
<span class="normal">4349</span>
<span class="normal">4350</span>
<span class="normal">4351</span>
<span class="normal">4352</span>
<span class="normal">4353</span>
<span class="normal">4354</span>
<span class="normal">4355</span>
<span class="normal">4356</span>
<span class="normal">4357</span>
<span class="normal">4358</span>
<span class="normal">4359</span>
<span class="normal">4360</span>
<span class="normal">4361</span>
<span class="normal">4362</span>
<span class="normal">4363</span>
<span class="normal">4364</span>
<span class="normal">4365</span>
<span class="normal">4366</span>
<span class="normal">4367</span>
<span class="normal">4368</span>
<span class="normal">4369</span>
<span class="normal">4370</span>
<span class="normal">4371</span>
<span class="normal">4372</span>
<span class="normal">4373</span>
<span class="normal">4374</span>
<span class="normal">4375</span>
<span class="normal">4376</span>
<span class="normal">4377</span>
<span class="normal">4378</span>
<span class="normal">4379</span>
<span class="normal">4380</span>
<span class="normal">4381</span>
<span class="normal">4382</span>
<span class="normal">4383</span>
<span class="normal">4384</span>
<span class="normal">4385</span>
<span class="normal">4386</span>
<span class="normal">4387</span>
<span class="normal">4388</span>
<span class="normal">4389</span>
<span class="normal">4390</span>
<span class="normal">4391</span>
<span class="normal">4392</span>
<span class="normal">4393</span>
<span class="normal">4394</span>
<span class="normal">4395</span>
<span class="normal">4396</span>
<span class="normal">4397</span>
<span class="normal">4398</span>
<span class="normal">4399</span>
<span class="normal">4400</span>
<span class="normal">4401</span>
<span class="normal">4402</span>
<span class="normal">4403</span>
<span class="normal">4404</span>
<span class="normal">4405</span>
<span class="normal">4406</span>
<span class="normal">4407</span>
<span class="normal">4408</span>
<span class="normal">4409</span>
<span class="normal">4410</span>
<span class="normal">4411</span>
<span class="normal">4412</span>
<span class="normal">4413</span>
<span class="normal">4414</span>
<span class="normal">4415</span>
<span class="normal">4416</span>
<span class="normal">4417</span>
<span class="normal">4418</span>
<span class="normal">4419</span>
<span class="normal">4420</span>
<span class="normal">4421</span>
<span class="normal">4422</span>
<span class="normal">4423</span>
<span class="normal">4424</span>
<span class="normal">4425</span>
<span class="normal">4426</span>
<span class="normal">4427</span>
<span class="normal">4428</span>
<span class="normal">4429</span>
<span class="normal">4430</span>
<span class="normal">4431</span>
<span class="normal">4432</span>
<span class="normal">4433</span>
<span class="normal">4434</span>
<span class="normal">4435</span>
<span class="normal">4436</span>
<span class="normal">4437</span>
<span class="normal">4438</span>
<span class="normal">4439</span>
<span class="normal">4440</span>
<span class="normal">4441</span>
<span class="normal">4442</span>
<span class="normal">4443</span>
<span class="normal">4444</span>
<span class="normal">4445</span>
<span class="normal">4446</span>
<span class="normal">4447</span>
<span class="normal">4448</span>
<span class="normal">4449</span>
<span class="normal">4450</span>
<span class="normal">4451</span>
<span class="normal">4452</span>
<span class="normal">4453</span>
<span class="normal">4454</span>
<span class="normal">4455</span>
<span class="normal">4456</span>
<span class="normal">4457</span>
<span class="normal">4458</span>
<span class="normal">4459</span>
<span class="normal">4460</span>
<span class="normal">4461</span>
<span class="normal">4462</span>
<span class="normal">4463</span>
<span class="normal">4464</span>
<span class="normal">4465</span>
<span class="normal">4466</span>
<span class="normal">4467</span>
<span class="normal">4468</span>
<span class="normal">4469</span>
<span class="normal">4470</span>
<span class="normal">4471</span>
<span class="normal">4472</span>
<span class="normal">4473</span>
<span class="normal">4474</span>
<span class="normal">4475</span>
<span class="normal">4476</span>
<span class="normal">4477</span>
<span class="normal">4478</span>
<span class="normal">4479</span>
<span class="normal">4480</span>
<span class="normal">4481</span>
<span class="normal">4482</span>
<span class="normal">4483</span>
<span class="normal">4484</span>
<span class="normal">4485</span>
<span class="normal">4486</span>
<span class="normal">4487</span>
<span class="normal">4488</span>
<span class="normal">4489</span>
<span class="normal">4490</span>
<span class="normal">4491</span>
<span class="normal">4492</span>
<span class="normal">4493</span>
<span class="normal">4494</span>
<span class="normal">4495</span>
<span class="normal">4496</span>
<span class="normal">4497</span>
<span class="normal">4498</span>
<span class="normal">4499</span>
<span class="normal">4500</span>
<span class="normal">4501</span>
<span class="normal">4502</span>
<span class="normal">4503</span>
<span class="normal">4504</span>
<span class="normal">4505</span>
<span class="normal">4506</span>
<span class="normal">4507</span>
<span class="normal">4508</span>
<span class="normal">4509</span>
<span class="normal">4510</span>
<span class="normal">4511</span>
<span class="normal">4512</span>
<span class="normal">4513</span>
<span class="normal">4514</span>
<span class="normal">4515</span>
<span class="normal">4516</span>
<span class="normal">4517</span>
<span class="normal">4518</span>
<span class="normal">4519</span>
<span class="normal">4520</span>
<span class="normal">4521</span>
<span class="normal">4522</span>
<span class="normal">4523</span>
<span class="normal">4524</span>
<span class="normal">4525</span>
<span class="normal">4526</span>
<span class="normal">4527</span>
<span class="normal">4528</span>
<span class="normal">4529</span>
<span class="normal">4530</span>
<span class="normal">4531</span>
<span class="normal">4532</span>
<span class="normal">4533</span>
<span class="normal">4534</span>
<span class="normal">4535</span>
<span class="normal">4536</span>
<span class="normal">4537</span>
<span class="normal">4538</span>
<span class="normal">4539</span>
<span class="normal">4540</span>
<span class="normal">4541</span>
<span class="normal">4542</span>
<span class="normal">4543</span>
<span class="normal">4544</span>
<span class="normal">4545</span>
<span class="normal">4546</span>
<span class="normal">4547</span>
<span class="normal">4548</span>
<span class="normal">4549</span>
<span class="normal">4550</span>
<span class="normal">4551</span>
<span class="normal">4552</span>
<span class="normal">4553</span>
<span class="normal">4554</span>
<span class="normal">4555</span>
<span class="normal">4556</span>
<span class="normal">4557</span>
<span class="normal">4558</span>
<span class="normal">4559</span>
<span class="normal">4560</span>
<span class="normal">4561</span>
<span class="normal">4562</span>
<span class="normal">4563</span>
<span class="normal">4564</span>
<span class="normal">4565</span>
<span class="normal">4566</span>
<span class="normal">4567</span>
<span class="normal">4568</span>
<span class="normal">4569</span>
<span class="normal">4570</span>
<span class="normal">4571</span>
<span class="normal">4572</span>
<span class="normal">4573</span>
<span class="normal">4574</span>
<span class="normal">4575</span>
<span class="normal">4576</span>
<span class="normal">4577</span>
<span class="normal">4578</span>
<span class="normal">4579</span>
<span class="normal">4580</span>
<span class="normal">4581</span>
<span class="normal">4582</span>
<span class="normal">4583</span>
<span class="normal">4584</span>
<span class="normal">4585</span>
<span class="normal">4586</span>
<span class="normal">4587</span>
<span class="normal">4588</span>
<span class="normal">4589</span>
<span class="normal">4590</span>
<span class="normal">4591</span>
<span class="normal">4592</span>
<span class="normal">4593</span>
<span class="normal">4594</span>
<span class="normal">4595</span>
<span class="normal">4596</span>
<span class="normal">4597</span>
<span class="normal">4598</span>
<span class="normal">4599</span>
<span class="normal">4600</span>
<span class="normal">4601</span>
<span class="normal">4602</span>
<span class="normal">4603</span>
<span class="normal">4604</span>
<span class="normal">4605</span>
<span class="normal">4606</span>
<span class="normal">4607</span>
<span class="normal">4608</span>
<span class="normal">4609</span>
<span class="normal">4610</span>
<span class="normal">4611</span>
<span class="normal">4612</span>
<span class="normal">4613</span>
<span class="normal">4614</span>
<span class="normal">4615</span>
<span class="normal">4616</span>
<span class="normal">4617</span>
<span class="normal">4618</span>
<span class="normal">4619</span>
<span class="normal">4620</span>
<span class="normal">4621</span>
<span class="normal">4622</span>
<span class="normal">4623</span>
<span class="normal">4624</span>
<span class="normal">4625</span>
<span class="normal">4626</span>
<span class="normal">4627</span>
<span class="normal">4628</span>
<span class="normal">4629</span>
<span class="normal">4630</span>
<span class="normal">4631</span>
<span class="normal">4632</span>
<span class="normal">4633</span>
<span class="normal">4634</span>
<span class="normal">4635</span>
<span class="normal">4636</span>
<span class="normal">4637</span>
<span class="normal">4638</span>
<span class="normal">4639</span>
<span class="normal">4640</span>
<span class="normal">4641</span>
<span class="normal">4642</span>
<span class="normal">4643</span>
<span class="normal">4644</span>
<span class="normal">4645</span>
<span class="normal">4646</span>
<span class="normal">4647</span>
<span class="normal">4648</span>
<span class="normal">4649</span>
<span class="normal">4650</span>
<span class="normal">4651</span>
<span class="normal">4652</span>
<span class="normal">4653</span>
<span class="normal">4654</span>
<span class="normal">4655</span>
<span class="normal">4656</span>
<span class="normal">4657</span>
<span class="normal">4658</span>
<span class="normal">4659</span>
<span class="normal">4660</span>
<span class="normal">4661</span>
<span class="normal">4662</span>
<span class="normal">4663</span>
<span class="normal">4664</span>
<span class="normal">4665</span>
<span class="normal">4666</span>
<span class="normal">4667</span>
<span class="normal">4668</span>
<span class="normal">4669</span>
<span class="normal">4670</span>
<span class="normal">4671</span>
<span class="normal">4672</span>
<span class="normal">4673</span>
<span class="normal">4674</span>
<span class="normal">4675</span>
<span class="normal">4676</span>
<span class="normal">4677</span>
<span class="normal">4678</span>
<span class="normal">4679</span>
<span class="normal">4680</span>
<span class="normal">4681</span>
<span class="normal">4682</span>
<span class="normal">4683</span>
<span class="normal">4684</span>
<span class="normal">4685</span>
<span class="normal">4686</span>
<span class="normal">4687</span>
<span class="normal">4688</span>
<span class="normal">4689</span>
<span class="normal">4690</span>
<span class="normal">4691</span>
<span class="normal">4692</span>
<span class="normal">4693</span>
<span class="normal">4694</span>
<span class="normal">4695</span>
<span class="normal">4696</span>
<span class="normal">4697</span>
<span class="normal">4698</span>
<span class="normal">4699</span>
<span class="normal">4700</span>
<span class="normal">4701</span>
<span class="normal">4702</span>
<span class="normal">4703</span>
<span class="normal">4704</span>
<span class="normal">4705</span>
<span class="normal">4706</span>
<span class="normal">4707</span>
<span class="normal">4708</span>
<span class="normal">4709</span>
<span class="normal">4710</span>
<span class="normal">4711</span>
<span class="normal">4712</span>
<span class="normal">4713</span>
<span class="normal">4714</span>
<span class="normal">4715</span>
<span class="normal">4716</span>
<span class="normal">4717</span>
<span class="normal">4718</span>
<span class="normal">4719</span>
<span class="normal">4720</span>
<span class="normal">4721</span>
<span class="normal">4722</span>
<span class="normal">4723</span>
<span class="normal">4724</span>
<span class="normal">4725</span>
<span class="normal">4726</span>
<span class="normal">4727</span>
<span class="normal">4728</span>
<span class="normal">4729</span>
<span class="normal">4730</span>
<span class="normal">4731</span>
<span class="normal">4732</span>
<span class="normal">4733</span>
<span class="normal">4734</span>
<span class="normal">4735</span>
<span class="normal">4736</span>
<span class="normal">4737</span>
<span class="normal">4738</span>
<span class="normal">4739</span>
<span class="normal">4740</span>
<span class="normal">4741</span>
<span class="normal">4742</span>
<span class="normal">4743</span>
<span class="normal">4744</span>
<span class="normal">4745</span>
<span class="normal">4746</span>
<span class="normal">4747</span>
<span class="normal">4748</span>
<span class="normal">4749</span>
<span class="normal">4750</span>
<span class="normal">4751</span>
<span class="normal">4752</span>
<span class="normal">4753</span>
<span class="normal">4754</span>
<span class="normal">4755</span>
<span class="normal">4756</span>
<span class="normal">4757</span>
<span class="normal">4758</span>
<span class="normal">4759</span>
<span class="normal">4760</span>
<span class="normal">4761</span>
<span class="normal">4762</span>
<span class="normal">4763</span>
<span class="normal">4764</span>
<span class="normal">4765</span>
<span class="normal">4766</span>
<span class="normal">4767</span>
<span class="normal">4768</span>
<span class="normal">4769</span>
<span class="normal">4770</span>
<span class="normal">4771</span>
<span class="normal">4772</span>
<span class="normal">4773</span>
<span class="normal">4774</span>
<span class="normal">4775</span>
<span class="normal">4776</span>
<span class="normal">4777</span>
<span class="normal">4778</span>
<span class="normal">4779</span>
<span class="normal">4780</span>
<span class="normal">4781</span>
<span class="normal">4782</span>
<span class="normal">4783</span>
<span class="normal">4784</span>
<span class="normal">4785</span>
<span class="normal">4786</span>
<span class="normal">4787</span>
<span class="normal">4788</span>
<span class="normal">4789</span>
<span class="normal">4790</span>
<span class="normal">4791</span>
<span class="normal">4792</span>
<span class="normal">4793</span>
<span class="normal">4794</span>
<span class="normal">4795</span>
<span class="normal">4796</span>
<span class="normal">4797</span>
<span class="normal">4798</span>
<span class="normal">4799</span>
<span class="normal">4800</span>
<span class="normal">4801</span>
<span class="normal">4802</span>
<span class="normal">4803</span>
<span class="normal">4804</span>
<span class="normal">4805</span>
<span class="normal">4806</span>
<span class="normal">4807</span>
<span class="normal">4808</span>
<span class="normal">4809</span>
<span class="normal">4810</span>
<span class="normal">4811</span>
<span class="normal">4812</span>
<span class="normal">4813</span>
<span class="normal">4814</span>
<span class="normal">4815</span>
<span class="normal">4816</span>
<span class="normal">4817</span>
<span class="normal">4818</span>
<span class="normal">4819</span>
<span class="normal">4820</span>
<span class="normal">4821</span>
<span class="normal">4822</span>
<span class="normal">4823</span>
<span class="normal">4824</span>
<span class="normal">4825</span>
<span class="normal">4826</span>
<span class="normal">4827</span>
<span class="normal">4828</span>
<span class="normal">4829</span>
<span class="normal">4830</span>
<span class="normal">4831</span>
<span class="normal">4832</span>
<span class="normal">4833</span>
<span class="normal">4834</span>
<span class="normal">4835</span>
<span class="normal">4836</span>
<span class="normal">4837</span>
<span class="normal">4838</span>
<span class="normal">4839</span>
<span class="normal">4840</span>
<span class="normal">4841</span>
<span class="normal">4842</span>
<span class="normal">4843</span>
<span class="normal">4844</span>
<span class="normal">4845</span>
<span class="normal">4846</span>
<span class="normal">4847</span>
<span class="normal">4848</span>
<span class="normal">4849</span>
<span class="normal">4850</span>
<span class="normal">4851</span>
<span class="normal">4852</span>
<span class="normal">4853</span>
<span class="normal">4854</span>
<span class="normal">4855</span>
<span class="normal">4856</span>
<span class="normal">4857</span>
<span class="normal">4858</span>
<span class="normal">4859</span>
<span class="normal">4860</span>
<span class="normal">4861</span>
<span class="normal">4862</span>
<span class="normal">4863</span>
<span class="normal">4864</span>
<span class="normal">4865</span>
<span class="normal">4866</span>
<span class="normal">4867</span>
<span class="normal">4868</span>
<span class="normal">4869</span>
<span class="normal">4870</span>
<span class="normal">4871</span>
<span class="normal">4872</span>
<span class="normal">4873</span>
<span class="normal">4874</span>
<span class="normal">4875</span>
<span class="normal">4876</span>
<span class="normal">4877</span>
<span class="normal">4878</span>
<span class="normal">4879</span>
<span class="normal">4880</span>
<span class="normal">4881</span>
<span class="normal">4882</span>
<span class="normal">4883</span>
<span class="normal">4884</span>
<span class="normal">4885</span>
<span class="normal">4886</span>
<span class="normal">4887</span>
<span class="normal">4888</span>
<span class="normal">4889</span>
<span class="normal">4890</span>
<span class="normal">4891</span>
<span class="normal">4892</span>
<span class="normal">4893</span>
<span class="normal">4894</span>
<span class="normal">4895</span>
<span class="normal">4896</span>
<span class="normal">4897</span>
<span class="normal">4898</span>
<span class="normal">4899</span>
<span class="normal">4900</span>
<span class="normal">4901</span>
<span class="normal">4902</span>
<span class="normal">4903</span>
<span class="normal">4904</span>
<span class="normal">4905</span>
<span class="normal">4906</span>
<span class="normal">4907</span>
<span class="normal">4908</span>
<span class="normal">4909</span>
<span class="normal">4910</span>
<span class="normal">4911</span>
<span class="normal">4912</span>
<span class="normal">4913</span>
<span class="normal">4914</span>
<span class="normal">4915</span>
<span class="normal">4916</span>
<span class="normal">4917</span>
<span class="normal">4918</span>
<span class="normal">4919</span>
<span class="normal">4920</span>
<span class="normal">4921</span>
<span class="normal">4922</span>
<span class="normal">4923</span>
<span class="normal">4924</span>
<span class="normal">4925</span>
<span class="normal">4926</span>
<span class="normal">4927</span>
<span class="normal">4928</span>
<span class="normal">4929</span>
<span class="normal">4930</span>
<span class="normal">4931</span>
<span class="normal">4932</span>
<span class="normal">4933</span>
<span class="normal">4934</span>
<span class="normal">4935</span>
<span class="normal">4936</span>
<span class="normal">4937</span>
<span class="normal">4938</span>
<span class="normal">4939</span>
<span class="normal">4940</span>
<span class="normal">4941</span>
<span class="normal">4942</span>
<span class="normal">4943</span>
<span class="normal">4944</span>
<span class="normal">4945</span>
<span class="normal">4946</span>
<span class="normal">4947</span>
<span class="normal">4948</span>
<span class="normal">4949</span>
<span class="normal">4950</span>
<span class="normal">4951</span>
<span class="normal">4952</span>
<span class="normal">4953</span>
<span class="normal">4954</span>
<span class="normal">4955</span>
<span class="normal">4956</span>
<span class="normal">4957</span>
<span class="normal">4958</span>
<span class="normal">4959</span>
<span class="normal">4960</span>
<span class="normal">4961</span>
<span class="normal">4962</span>
<span class="normal">4963</span>
<span class="normal">4964</span>
<span class="normal">4965</span>
<span class="normal">4966</span>
<span class="normal">4967</span>
<span class="normal">4968</span>
<span class="normal">4969</span>
<span class="normal">4970</span>
<span class="normal">4971</span>
<span class="normal">4972</span>
<span class="normal">4973</span>
<span class="normal">4974</span>
<span class="normal">4975</span>
<span class="normal">4976</span>
<span class="normal">4977</span>
<span class="normal">4978</span>
<span class="normal">4979</span>
<span class="normal">4980</span>
<span class="normal">4981</span>
<span class="normal">4982</span>
<span class="normal">4983</span>
<span class="normal">4984</span>
<span class="normal">4985</span>
<span class="normal">4986</span>
<span class="normal">4987</span>
<span class="normal">4988</span>
<span class="normal">4989</span>
<span class="normal">4990</span>
<span class="normal">4991</span>
<span class="normal">4992</span>
<span class="normal">4993</span>
<span class="normal">4994</span>
<span class="normal">4995</span>
<span class="normal">4996</span>
<span class="normal">4997</span>
<span class="normal">4998</span>
<span class="normal">4999</span>
<span class="normal">5000</span>
<span class="normal">5001</span>
<span class="normal">5002</span>
<span class="normal">5003</span>
<span class="normal">5004</span>
<span class="normal">5005</span>
<span class="normal">5006</span>
<span class="normal">5007</span>
<span class="normal">5008</span>
<span class="normal">5009</span>
<span class="normal">5010</span>
<span class="normal">5011</span>
<span class="normal">5012</span>
<span class="normal">5013</span>
<span class="normal">5014</span>
<span class="normal">5015</span>
<span class="normal">5016</span>
<span class="normal">5017</span>
<span class="normal">5018</span>
<span class="normal">5019</span>
<span class="normal">5020</span>
<span class="normal">5021</span>
<span class="normal">5022</span>
<span class="normal">5023</span>
<span class="normal">5024</span>
<span class="normal">5025</span>
<span class="normal">5026</span>
<span class="normal">5027</span>
<span class="normal">5028</span>
<span class="normal">5029</span>
<span class="normal">5030</span>
<span class="normal">5031</span>
<span class="normal">5032</span>
<span class="normal">5033</span>
<span class="normal">5034</span>
<span class="normal">5035</span>
<span class="normal">5036</span>
<span class="normal">5037</span>
<span class="normal">5038</span>
<span class="normal">5039</span>
<span class="normal">5040</span>
<span class="normal">5041</span>
<span class="normal">5042</span>
<span class="normal">5043</span>
<span class="normal">5044</span>
<span class="normal">5045</span>
<span class="normal">5046</span>
<span class="normal">5047</span>
<span class="normal">5048</span>
<span class="normal">5049</span>
<span class="normal">5050</span>
<span class="normal">5051</span>
<span class="normal">5052</span>
<span class="normal">5053</span>
<span class="normal">5054</span>
<span class="normal">5055</span>
<span class="normal">5056</span>
<span class="normal">5057</span>
<span class="normal">5058</span>
<span class="normal">5059</span>
<span class="normal">5060</span>
<span class="normal">5061</span>
<span class="normal">5062</span>
<span class="normal">5063</span>
<span class="normal">5064</span>
<span class="normal">5065</span>
<span class="normal">5066</span>
<span class="normal">5067</span>
<span class="normal">5068</span>
<span class="normal">5069</span>
<span class="normal">5070</span>
<span class="normal">5071</span>
<span class="normal">5072</span>
<span class="normal">5073</span>
<span class="normal">5074</span>
<span class="normal">5075</span>
<span class="normal">5076</span>
<span class="normal">5077</span>
<span class="normal">5078</span>
<span class="normal">5079</span>
<span class="normal">5080</span>
<span class="normal">5081</span>
<span class="normal">5082</span>
<span class="normal">5083</span>
<span class="normal">5084</span>
<span class="normal">5085</span>
<span class="normal">5086</span>
<span class="normal">5087</span>
<span class="normal">5088</span>
<span class="normal">5089</span>
<span class="normal">5090</span>
<span class="normal">5091</span>
<span class="normal">5092</span>
<span class="normal">5093</span>
<span class="normal">5094</span>
<span class="normal">5095</span>
<span class="normal">5096</span>
<span class="normal">5097</span>
<span class="normal">5098</span>
<span class="normal">5099</span>
<span class="normal">5100</span>
<span class="normal">5101</span>
<span class="normal">5102</span>
<span class="normal">5103</span>
<span class="normal">5104</span>
<span class="normal">5105</span>
<span class="normal">5106</span>
<span class="normal">5107</span>
<span class="normal">5108</span>
<span class="normal">5109</span>
<span class="normal">5110</span>
<span class="normal">5111</span>
<span class="normal">5112</span>
<span class="normal">5113</span>
<span class="normal">5114</span>
<span class="normal">5115</span>
<span class="normal">5116</span>
<span class="normal">5117</span>
<span class="normal">5118</span>
<span class="normal">5119</span>
<span class="normal">5120</span>
<span class="normal">5121</span>
<span class="normal">5122</span>
<span class="normal">5123</span>
<span class="normal">5124</span>
<span class="normal">5125</span>
<span class="normal">5126</span>
<span class="normal">5127</span>
<span class="normal">5128</span>
<span class="normal">5129</span>
<span class="normal">5130</span>
<span class="normal">5131</span>
<span class="normal">5132</span>
<span class="normal">5133</span>
<span class="normal">5134</span>
<span class="normal">5135</span>
<span class="normal">5136</span>
<span class="normal">5137</span>
<span class="normal">5138</span>
<span class="normal">5139</span>
<span class="normal">5140</span>
<span class="normal">5141</span>
<span class="normal">5142</span>
<span class="normal">5143</span>
<span class="normal">5144</span>
<span class="normal">5145</span>
<span class="normal">5146</span>
<span class="normal">5147</span>
<span class="normal">5148</span>
<span class="normal">5149</span>
<span class="normal">5150</span>
<span class="normal">5151</span>
<span class="normal">5152</span>
<span class="normal">5153</span>
<span class="normal">5154</span>
<span class="normal">5155</span>
<span class="normal">5156</span>
<span class="normal">5157</span>
<span class="normal">5158</span>
<span class="normal">5159</span>
<span class="normal">5160</span>
<span class="normal">5161</span>
<span class="normal">5162</span>
<span class="normal">5163</span>
<span class="normal">5164</span>
<span class="normal">5165</span>
<span class="normal">5166</span>
<span class="normal">5167</span>
<span class="normal">5168</span>
<span class="normal">5169</span>
<span class="normal">5170</span>
<span class="normal">5171</span>
<span class="normal">5172</span>
<span class="normal">5173</span>
<span class="normal">5174</span>
<span class="normal">5175</span>
<span class="normal">5176</span>
<span class="normal">5177</span>
<span class="normal">5178</span>
<span class="normal">5179</span>
<span class="normal">5180</span>
<span class="normal">5181</span>
<span class="normal">5182</span>
<span class="normal">5183</span>
<span class="normal">5184</span>
<span class="normal">5185</span>
<span class="normal">5186</span>
<span class="normal">5187</span>
<span class="normal">5188</span>
<span class="normal">5189</span>
<span class="normal">5190</span>
<span class="normal">5191</span>
<span class="normal">5192</span>
<span class="normal">5193</span>
<span class="normal">5194</span>
<span class="normal">5195</span>
<span class="normal">5196</span>
<span class="normal">5197</span>
<span class="normal">5198</span>
<span class="normal">5199</span>
<span class="normal">5200</span>
<span class="normal">5201</span>
<span class="normal">5202</span>
<span class="normal">5203</span>
<span class="normal">5204</span>
<span class="normal">5205</span>
<span class="normal">5206</span>
<span class="normal">5207</span>
<span class="normal">5208</span>
<span class="normal">5209</span>
<span class="normal">5210</span>
<span class="normal">5211</span>
<span class="normal">5212</span>
<span class="normal">5213</span>
<span class="normal">5214</span>
<span class="normal">5215</span>
<span class="normal">5216</span>
<span class="normal">5217</span>
<span class="normal">5218</span>
<span class="normal">5219</span>
<span class="normal">5220</span>
<span class="normal">5221</span>
<span class="normal">5222</span>
<span class="normal">5223</span>
<span class="normal">5224</span>
<span class="normal">5225</span>
<span class="normal">5226</span>
<span class="normal">5227</span>
<span class="normal">5228</span>
<span class="normal">5229</span>
<span class="normal">5230</span>
<span class="normal">5231</span>
<span class="normal">5232</span>
<span class="normal">5233</span>
<span class="normal">5234</span>
<span class="normal">5235</span>
<span class="normal">5236</span>
<span class="normal">5237</span>
<span class="normal">5238</span>
<span class="normal">5239</span>
<span class="normal">5240</span>
<span class="normal">5241</span>
<span class="normal">5242</span>
<span class="normal">5243</span>
<span class="normal">5244</span>
<span class="normal">5245</span>
<span class="normal">5246</span>
<span class="normal">5247</span>
<span class="normal">5248</span>
<span class="normal">5249</span>
<span class="normal">5250</span>
<span class="normal">5251</span>
<span class="normal">5252</span>
<span class="normal">5253</span>
<span class="normal">5254</span>
<span class="normal">5255</span>
<span class="normal">5256</span>
<span class="normal">5257</span>
<span class="normal">5258</span>
<span class="normal">5259</span>
<span class="normal">5260</span>
<span class="normal">5261</span>
<span class="normal">5262</span>
<span class="normal">5263</span>
<span class="normal">5264</span>
<span class="normal">5265</span>
<span class="normal">5266</span>
<span class="normal">5267</span>
<span class="normal">5268</span>
<span class="normal">5269</span>
<span class="normal">5270</span>
<span class="normal">5271</span>
<span class="normal">5272</span>
<span class="normal">5273</span>
<span class="normal">5274</span>
<span class="normal">5275</span>
<span class="normal">5276</span>
<span class="normal">5277</span>
<span class="normal">5278</span>
<span class="normal">5279</span>
<span class="normal">5280</span>
<span class="normal">5281</span>
<span class="normal">5282</span>
<span class="normal">5283</span>
<span class="normal">5284</span>
<span class="normal">5285</span>
<span class="normal">5286</span>
<span class="normal">5287</span>
<span class="normal">5288</span>
<span class="normal">5289</span>
<span class="normal">5290</span>
<span class="normal">5291</span>
<span class="normal">5292</span>
<span class="normal">5293</span>
<span class="normal">5294</span>
<span class="normal">5295</span>
<span class="normal">5296</span>
<span class="normal">5297</span>
<span class="normal">5298</span>
<span class="normal">5299</span>
<span class="normal">5300</span>
<span class="normal">5301</span>
<span class="normal">5302</span>
<span class="normal">5303</span>
<span class="normal">5304</span>
<span class="normal">5305</span>
<span class="normal">5306</span>
<span class="normal">5307</span>
<span class="normal">5308</span>
<span class="normal">5309</span>
<span class="normal">5310</span>
<span class="normal">5311</span>
<span class="normal">5312</span>
<span class="normal">5313</span>
<span class="normal">5314</span>
<span class="normal">5315</span>
<span class="normal">5316</span>
<span class="normal">5317</span>
<span class="normal">5318</span>
<span class="normal">5319</span>
<span class="normal">5320</span>
<span class="normal">5321</span>
<span class="normal">5322</span>
<span class="normal">5323</span>
<span class="normal">5324</span>
<span class="normal">5325</span>
<span class="normal">5326</span>
<span class="normal">5327</span>
<span class="normal">5328</span>
<span class="normal">5329</span>
<span class="normal">5330</span>
<span class="normal">5331</span>
<span class="normal">5332</span>
<span class="normal">5333</span>
<span class="normal">5334</span>
<span class="normal">5335</span>
<span class="normal">5336</span>
<span class="normal">5337</span>
<span class="normal">5338</span>
<span class="normal">5339</span>
<span class="normal">5340</span>
<span class="normal">5341</span>
<span class="normal">5342</span>
<span class="normal">5343</span>
<span class="normal">5344</span>
<span class="normal">5345</span>
<span class="normal">5346</span>
<span class="normal">5347</span>
<span class="normal">5348</span>
<span class="normal">5349</span>
<span class="normal">5350</span>
<span class="normal">5351</span>
<span class="normal">5352</span>
<span class="normal">5353</span>
<span class="normal">5354</span>
<span class="normal">5355</span>
<span class="normal">5356</span>
<span class="normal">5357</span>
<span class="normal">5358</span>
<span class="normal">5359</span>
<span class="normal">5360</span>
<span class="normal">5361</span>
<span class="normal">5362</span>
<span class="normal">5363</span>
<span class="normal">5364</span>
<span class="normal">5365</span>
<span class="normal">5366</span>
<span class="normal">5367</span>
<span class="normal">5368</span>
<span class="normal">5369</span>
<span class="normal">5370</span>
<span class="normal">5371</span>
<span class="normal">5372</span>
<span class="normal">5373</span>
<span class="normal">5374</span>
<span class="normal">5375</span>
<span class="normal">5376</span>
<span class="normal">5377</span>
<span class="normal">5378</span>
<span class="normal">5379</span>
<span class="normal">5380</span>
<span class="normal">5381</span>
<span class="normal">5382</span>
<span class="normal">5383</span>
<span class="normal">5384</span>
<span class="normal">5385</span>
<span class="normal">5386</span>
<span class="normal">5387</span>
<span class="normal">5388</span>
<span class="normal">5389</span>
<span class="normal">5390</span>
<span class="normal">5391</span>
<span class="normal">5392</span>
<span class="normal">5393</span>
<span class="normal">5394</span>
<span class="normal">5395</span>
<span class="normal">5396</span>
<span class="normal">5397</span>
<span class="normal">5398</span>
<span class="normal">5399</span>
<span class="normal">5400</span>
<span class="normal">5401</span>
<span class="normal">5402</span>
<span class="normal">5403</span>
<span class="normal">5404</span>
<span class="normal">5405</span>
<span class="normal">5406</span>
<span class="normal">5407</span>
<span class="normal">5408</span>
<span class="normal">5409</span>
<span class="normal">5410</span>
<span class="normal">5411</span>
<span class="normal">5412</span>
<span class="normal">5413</span>
<span class="normal">5414</span>
<span class="normal">5415</span>
<span class="normal">5416</span>
<span class="normal">5417</span>
<span class="normal">5418</span>
<span class="normal">5419</span>
<span class="normal">5420</span>
<span class="normal">5421</span>
<span class="normal">5422</span>
<span class="normal">5423</span>
<span class="normal">5424</span>
<span class="normal">5425</span>
<span class="normal">5426</span>
<span class="normal">5427</span>
<span class="normal">5428</span>
<span class="normal">5429</span>
<span class="normal">5430</span>
<span class="normal">5431</span>
<span class="normal">5432</span>
<span class="normal">5433</span>
<span class="normal">5434</span>
<span class="normal">5435</span>
<span class="normal">5436</span>
<span class="normal">5437</span>
<span class="normal">5438</span>
<span class="normal">5439</span>
<span class="normal">5440</span>
<span class="normal">5441</span>
<span class="normal">5442</span>
<span class="normal">5443</span>
<span class="normal">5444</span>
<span class="normal">5445</span>
<span class="normal">5446</span>
<span class="normal">5447</span>
<span class="normal">5448</span>
<span class="normal">5449</span>
<span class="normal">5450</span>
<span class="normal">5451</span>
<span class="normal">5452</span>
<span class="normal">5453</span>
<span class="normal">5454</span>
<span class="normal">5455</span>
<span class="normal">5456</span>
<span class="normal">5457</span>
<span class="normal">5458</span>
<span class="normal">5459</span>
<span class="normal">5460</span>
<span class="normal">5461</span>
<span class="normal">5462</span>
<span class="normal">5463</span>
<span class="normal">5464</span>
<span class="normal">5465</span>
<span class="normal">5466</span>
<span class="normal">5467</span>
<span class="normal">5468</span>
<span class="normal">5469</span>
<span class="normal">5470</span>
<span class="normal">5471</span>
<span class="normal">5472</span>
<span class="normal">5473</span>
<span class="normal">5474</span>
<span class="normal">5475</span>
<span class="normal">5476</span>
<span class="normal">5477</span>
<span class="normal">5478</span>
<span class="normal">5479</span>
<span class="normal">5480</span>
<span class="normal">5481</span>
<span class="normal">5482</span>
<span class="normal">5483</span>
<span class="normal">5484</span>
<span class="normal">5485</span>
<span class="normal">5486</span>
<span class="normal">5487</span>
<span class="normal">5488</span>
<span class="normal">5489</span>
<span class="normal">5490</span>
<span class="normal">5491</span>
<span class="normal">5492</span>
<span class="normal">5493</span>
<span class="normal">5494</span>
<span class="normal">5495</span>
<span class="normal">5496</span>
<span class="normal">5497</span>
<span class="normal">5498</span>
<span class="normal">5499</span>
<span class="normal">5500</span>
<span class="normal">5501</span>
<span class="normal">5502</span>
<span class="normal">5503</span>
<span class="normal">5504</span>
<span class="normal">5505</span>
<span class="normal">5506</span>
<span class="normal">5507</span>
<span class="normal">5508</span>
<span class="normal">5509</span>
<span class="normal">5510</span>
<span class="normal">5511</span>
<span class="normal">5512</span>
<span class="normal">5513</span>
<span class="normal">5514</span>
<span class="normal">5515</span>
<span class="normal">5516</span>
<span class="normal">5517</span>
<span class="normal">5518</span>
<span class="normal">5519</span>
<span class="normal">5520</span>
<span class="normal">5521</span>
<span class="normal">5522</span>
<span class="normal">5523</span>
<span class="normal">5524</span>
<span class="normal">5525</span>
<span class="normal">5526</span>
<span class="normal">5527</span>
<span class="normal">5528</span>
<span class="normal">5529</span>
<span class="normal">5530</span>
<span class="normal">5531</span>
<span class="normal">5532</span>
<span class="normal">5533</span>
<span class="normal">5534</span>
<span class="normal">5535</span>
<span class="normal">5536</span>
<span class="normal">5537</span>
<span class="normal">5538</span>
<span class="normal">5539</span>
<span class="normal">5540</span>
<span class="normal">5541</span>
<span class="normal">5542</span>
<span class="normal">5543</span>
<span class="normal">5544</span>
<span class="normal">5545</span>
<span class="normal">5546</span>
<span class="normal">5547</span>
<span class="normal">5548</span>
<span class="normal">5549</span>
<span class="normal">5550</span>
<span class="normal">5551</span>
<span class="normal">5552</span>
<span class="normal">5553</span>
<span class="normal">5554</span>
<span class="normal">5555</span>
<span class="normal">5556</span>
<span class="normal">5557</span>
<span class="normal">5558</span>
<span class="normal">5559</span>
<span class="normal">5560</span>
<span class="normal">5561</span>
<span class="normal">5562</span>
<span class="normal">5563</span>
<span class="normal">5564</span>
<span class="normal">5565</span>
<span class="normal">5566</span>
<span class="normal">5567</span>
<span class="normal">5568</span>
<span class="normal">5569</span>
<span class="normal">5570</span>
<span class="normal">5571</span>
<span class="normal">5572</span>
<span class="normal">5573</span>
<span class="normal">5574</span>
<span class="normal">5575</span>
<span class="normal">5576</span>
<span class="normal">5577</span>
<span class="normal">5578</span>
<span class="normal">5579</span>
<span class="normal">5580</span>
<span class="normal">5581</span>
<span class="normal">5582</span>
<span class="normal">5583</span>
<span class="normal">5584</span>
<span class="normal">5585</span>
<span class="normal">5586</span>
<span class="normal">5587</span>
<span class="normal">5588</span>
<span class="normal">5589</span>
<span class="normal">5590</span>
<span class="normal">5591</span>
<span class="normal">5592</span>
<span class="normal">5593</span>
<span class="normal">5594</span>
<span class="normal">5595</span>
<span class="normal">5596</span>
<span class="normal">5597</span>
<span class="normal">5598</span>
<span class="normal">5599</span>
<span class="normal">5600</span>
<span class="normal">5601</span>
<span class="normal">5602</span>
<span class="normal">5603</span>
<span class="normal">5604</span>
<span class="normal">5605</span>
<span class="normal">5606</span>
<span class="normal">5607</span>
<span class="normal">5608</span>
<span class="normal">5609</span>
<span class="normal">5610</span>
<span class="normal">5611</span>
<span class="normal">5612</span>
<span class="normal">5613</span>
<span class="normal">5614</span>
<span class="normal">5615</span>
<span class="normal">5616</span>
<span class="normal">5617</span>
<span class="normal">5618</span>
<span class="normal">5619</span>
<span class="normal">5620</span>
<span class="normal">5621</span>
<span class="normal">5622</span>
<span class="normal">5623</span>
<span class="normal">5624</span>
<span class="normal">5625</span>
<span class="normal">5626</span>
<span class="normal">5627</span>
<span class="normal">5628</span>
<span class="normal">5629</span>
<span class="normal">5630</span>
<span class="normal">5631</span>
<span class="normal">5632</span>
<span class="normal">5633</span>
<span class="normal">5634</span>
<span class="normal">5635</span>
<span class="normal">5636</span>
<span class="normal">5637</span>
<span class="normal">5638</span>
<span class="normal">5639</span>
<span class="normal">5640</span>
<span class="normal">5641</span>
<span class="normal">5642</span>
<span class="normal">5643</span>
<span class="normal">5644</span>
<span class="normal">5645</span>
<span class="normal">5646</span>
<span class="normal">5647</span>
<span class="normal">5648</span>
<span class="normal">5649</span>
<span class="normal">5650</span>
<span class="normal">5651</span>
<span class="normal">5652</span>
<span class="normal">5653</span>
<span class="normal">5654</span>
<span class="normal">5655</span>
<span class="normal">5656</span>
<span class="normal">5657</span>
<span class="normal">5658</span>
<span class="normal">5659</span>
<span class="normal">5660</span>
<span class="normal">5661</span>
<span class="normal">5662</span>
<span class="normal">5663</span>
<span class="normal">5664</span>
<span class="normal">5665</span>
<span class="normal">5666</span>
<span class="normal">5667</span>
<span class="normal">5668</span>
<span class="normal">5669</span>
<span class="normal">5670</span>
<span class="normal">5671</span>
<span class="normal">5672</span>
<span class="normal">5673</span>
<span class="normal">5674</span>
<span class="normal">5675</span>
<span class="normal">5676</span>
<span class="normal">5677</span>
<span class="normal">5678</span>
<span class="normal">5679</span>
<span class="normal">5680</span>
<span class="normal">5681</span>
<span class="normal">5682</span>
<span class="normal">5683</span>
<span class="normal">5684</span>
<span class="normal">5685</span>
<span class="normal">5686</span>
<span class="normal">5687</span>
<span class="normal">5688</span>
<span class="normal">5689</span>
<span class="normal">5690</span>
<span class="normal">5691</span>
<span class="normal">5692</span>
<span class="normal">5693</span>
<span class="normal">5694</span>
<span class="normal">5695</span>
<span class="normal">5696</span>
<span class="normal">5697</span>
<span class="normal">5698</span>
<span class="normal">5699</span>
<span class="normal">5700</span>
<span class="normal">5701</span>
<span class="normal">5702</span>
<span class="normal">5703</span>
<span class="normal">5704</span>
<span class="normal">5705</span>
<span class="normal">5706</span>
<span class="normal">5707</span>
<span class="normal">5708</span>
<span class="normal">5709</span>
<span class="normal">5710</span>
<span class="normal">5711</span>
<span class="normal">5712</span>
<span class="normal">5713</span>
<span class="normal">5714</span>
<span class="normal">5715</span>
<span class="normal">5716</span>
<span class="normal">5717</span>
<span class="normal">5718</span>
<span class="normal">5719</span>
<span class="normal">5720</span>
<span class="normal">5721</span>
<span class="normal">5722</span>
<span class="normal">5723</span>
<span class="normal">5724</span>
<span class="normal">5725</span>
<span class="normal">5726</span>
<span class="normal">5727</span>
<span class="normal">5728</span>
<span class="normal">5729</span>
<span class="normal">5730</span>
<span class="normal">5731</span>
<span class="normal">5732</span>
<span class="normal">5733</span>
<span class="normal">5734</span>
<span class="normal">5735</span>
<span class="normal">5736</span>
<span class="normal">5737</span>
<span class="normal">5738</span>
<span class="normal">5739</span>
<span class="normal">5740</span>
<span class="normal">5741</span>
<span class="normal">5742</span>
<span class="normal">5743</span>
<span class="normal">5744</span>
<span class="normal">5745</span>
<span class="normal">5746</span>
<span class="normal">5747</span>
<span class="normal">5748</span>
<span class="normal">5749</span>
<span class="normal">5750</span>
<span class="normal">5751</span>
<span class="normal">5752</span>
<span class="normal">5753</span>
<span class="normal">5754</span>
<span class="normal">5755</span>
<span class="normal">5756</span>
<span class="normal">5757</span>
<span class="normal">5758</span>
<span class="normal">5759</span>
<span class="normal">5760</span>
<span class="normal">5761</span>
<span class="normal">5762</span>
<span class="normal">5763</span>
<span class="normal">5764</span>
<span class="normal">5765</span>
<span class="normal">5766</span>
<span class="normal">5767</span>
<span class="normal">5768</span>
<span class="normal">5769</span>
<span class="normal">5770</span>
<span class="normal">5771</span>
<span class="normal">5772</span>
<span class="normal">5773</span>
<span class="normal">5774</span>
<span class="normal">5775</span>
<span class="normal">5776</span>
<span class="normal">5777</span>
<span class="normal">5778</span>
<span class="normal">5779</span>
<span class="normal">5780</span>
<span class="normal">5781</span>
<span class="normal">5782</span>
<span class="normal">5783</span>
<span class="normal">5784</span>
<span class="normal">5785</span>
<span class="normal">5786</span>
<span class="normal">5787</span>
<span class="normal">5788</span>
<span class="normal">5789</span>
<span class="normal">5790</span>
<span class="normal">5791</span>
<span class="normal">5792</span>
<span class="normal">5793</span>
<span class="normal">5794</span>
<span class="normal">5795</span>
<span class="normal">5796</span>
<span class="normal">5797</span>
<span class="normal">5798</span>
<span class="normal">5799</span>
<span class="normal">5800</span>
<span class="normal">5801</span>
<span class="normal">5802</span>
<span class="normal">5803</span>
<span class="normal">5804</span>
<span class="normal">5805</span>
<span class="normal">5806</span>
<span class="normal">5807</span>
<span class="normal">5808</span>
<span class="normal">5809</span>
<span class="normal">5810</span>
<span class="normal">5811</span>
<span class="normal">5812</span>
<span class="normal">5813</span>
<span class="normal">5814</span>
<span class="normal">5815</span>
<span class="normal">5816</span>
<span class="normal">5817</span>
<span class="normal">5818</span>
<span class="normal">5819</span>
<span class="normal">5820</span>
<span class="normal">5821</span>
<span class="normal">5822</span>
<span class="normal">5823</span>
<span class="normal">5824</span>
<span class="normal">5825</span>
<span class="normal">5826</span>
<span class="normal">5827</span>
<span class="normal">5828</span>
<span class="normal">5829</span>
<span class="normal">5830</span>
<span class="normal">5831</span>
<span class="normal">5832</span>
<span class="normal">5833</span>
<span class="normal">5834</span>
<span class="normal">5835</span>
<span class="normal">5836</span>
<span class="normal">5837</span>
<span class="normal">5838</span>
<span class="normal">5839</span>
<span class="normal">5840</span>
<span class="normal">5841</span>
<span class="normal">5842</span>
<span class="normal">5843</span>
<span class="normal">5844</span>
<span class="normal">5845</span>
<span class="normal">5846</span>
<span class="normal">5847</span>
<span class="normal">5848</span>
<span class="normal">5849</span>
<span class="normal">5850</span>
<span class="normal">5851</span>
<span class="normal">5852</span>
<span class="normal">5853</span>
<span class="normal">5854</span>
<span class="normal">5855</span>
<span class="normal">5856</span>
<span class="normal">5857</span>
<span class="normal">5858</span>
<span class="normal">5859</span>
<span class="normal">5860</span>
<span class="normal">5861</span>
<span class="normal">5862</span>
<span class="normal">5863</span>
<span class="normal">5864</span>
<span class="normal">5865</span>
<span class="normal">5866</span>
<span class="normal">5867</span>
<span class="normal">5868</span>
<span class="normal">5869</span>
<span class="normal">5870</span>
<span class="normal">5871</span>
<span class="normal">5872</span>
<span class="normal">5873</span>
<span class="normal">5874</span>
<span class="normal">5875</span>
<span class="normal">5876</span>
<span class="normal">5877</span>
<span class="normal">5878</span>
<span class="normal">5879</span>
<span class="normal">5880</span>
<span class="normal">5881</span>
<span class="normal">5882</span>
<span class="normal">5883</span>
<span class="normal">5884</span>
<span class="normal">5885</span>
<span class="normal">5886</span>
<span class="normal">5887</span>
<span class="normal">5888</span>
<span class="normal">5889</span>
<span class="normal">5890</span>
<span class="normal">5891</span>
<span class="normal">5892</span>
<span class="normal">5893</span>
<span class="normal">5894</span>
<span class="normal">5895</span>
<span class="normal">5896</span>
<span class="normal">5897</span>
<span class="normal">5898</span>
<span class="normal">5899</span>
<span class="normal">5900</span>
<span class="normal">5901</span>
<span class="normal">5902</span>
<span class="normal">5903</span>
<span class="normal">5904</span>
<span class="normal">5905</span>
<span class="normal">5906</span>
<span class="normal">5907</span>
<span class="normal">5908</span>
<span class="normal">5909</span>
<span class="normal">5910</span>
<span class="normal">5911</span>
<span class="normal">5912</span>
<span class="normal">5913</span>
<span class="normal">5914</span>
<span class="normal">5915</span>
<span class="normal">5916</span>
<span class="normal">5917</span>
<span class="normal">5918</span>
<span class="normal">5919</span>
<span class="normal">5920</span>
<span class="normal">5921</span>
<span class="normal">5922</span>
<span class="normal">5923</span>
<span class="normal">5924</span>
<span class="normal">5925</span>
<span class="normal">5926</span>
<span class="normal">5927</span>
<span class="normal">5928</span>
<span class="normal">5929</span>
<span class="normal">5930</span>
<span class="normal">5931</span>
<span class="normal">5932</span>
<span class="normal">5933</span>
<span class="normal">5934</span>
<span class="normal">5935</span>
<span class="normal">5936</span>
<span class="normal">5937</span>
<span class="normal">5938</span>
<span class="normal">5939</span>
<span class="normal">5940</span>
<span class="normal">5941</span>
<span class="normal">5942</span>
<span class="normal">5943</span>
<span class="normal">5944</span>
<span class="normal">5945</span>
<span class="normal">5946</span>
<span class="normal">5947</span>
<span class="normal">5948</span>
<span class="normal">5949</span>
<span class="normal">5950</span>
<span class="normal">5951</span>
<span class="normal">5952</span>
<span class="normal">5953</span>
<span class="normal">5954</span>
<span class="normal">5955</span>
<span class="normal">5956</span>
<span class="normal">5957</span>
<span class="normal">5958</span>
<span class="normal">5959</span>
<span class="normal">5960</span>
<span class="normal">5961</span>
<span class="normal">5962</span>
<span class="normal">5963</span>
<span class="normal">5964</span>
<span class="normal">5965</span>
<span class="normal">5966</span>
<span class="normal">5967</span>
<span class="normal">5968</span>
<span class="normal">5969</span>
<span class="normal">5970</span>
<span class="normal">5971</span>
<span class="normal">5972</span>
<span class="normal">5973</span>
<span class="normal">5974</span>
<span class="normal">5975</span>
<span class="normal">5976</span>
<span class="normal">5977</span>
<span class="normal">5978</span>
<span class="normal">5979</span>
<span class="normal">5980</span>
<span class="normal">5981</span>
<span class="normal">5982</span>
<span class="normal">5983</span>
<span class="normal">5984</span>
<span class="normal">5985</span>
<span class="normal">5986</span>
<span class="normal">5987</span>
<span class="normal">5988</span>
<span class="normal">5989</span>
<span class="normal">5990</span>
<span class="normal">5991</span>
<span class="normal">5992</span>
<span class="normal">5993</span>
<span class="normal">5994</span>
<span class="normal">5995</span>
<span class="normal">5996</span>
<span class="normal">5997</span>
<span class="normal">5998</span>
<span class="normal">5999</span>
<span class="normal">6000</span>
<span class="normal">6001</span>
<span class="normal">6002</span>
<span class="normal">6003</span>
<span class="normal">6004</span>
<span class="normal">6005</span>
<span class="normal">6006</span>
<span class="normal">6007</span>
<span class="normal">6008</span>
<span class="normal">6009</span>
<span class="normal">6010</span>
<span class="normal">6011</span>
<span class="normal">6012</span>
<span class="normal">6013</span>
<span class="normal">6014</span>
<span class="normal">6015</span>
<span class="normal">6016</span>
<span class="normal">6017</span>
<span class="normal">6018</span>
<span class="normal">6019</span>
<span class="normal">6020</span>
<span class="normal">6021</span>
<span class="normal">6022</span>
<span class="normal">6023</span>
<span class="normal">6024</span>
<span class="normal">6025</span>
<span class="normal">6026</span>
<span class="normal">6027</span>
<span class="normal">6028</span>
<span class="normal">6029</span>
<span class="normal">6030</span>
<span class="normal">6031</span>
<span class="normal">6032</span>
<span class="normal">6033</span>
<span class="normal">6034</span>
<span class="normal">6035</span>
<span class="normal">6036</span>
<span class="normal">6037</span>
<span class="normal">6038</span>
<span class="normal">6039</span>
<span class="normal">6040</span>
<span class="normal">6041</span>
<span class="normal">6042</span>
<span class="normal">6043</span>
<span class="normal">6044</span>
<span class="normal">6045</span>
<span class="normal">6046</span>
<span class="normal">6047</span>
<span class="normal">6048</span>
<span class="normal">6049</span>
<span class="normal">6050</span>
<span class="normal">6051</span>
<span class="normal">6052</span>
<span class="normal">6053</span>
<span class="normal">6054</span>
<span class="normal">6055</span>
<span class="normal">6056</span>
<span class="normal">6057</span>
<span class="normal">6058</span>
<span class="normal">6059</span>
<span class="normal">6060</span>
<span class="normal">6061</span>
<span class="normal">6062</span>
<span class="normal">6063</span>
<span class="normal">6064</span>
<span class="normal">6065</span>
<span class="normal">6066</span>
<span class="normal">6067</span>
<span class="normal">6068</span>
<span class="normal">6069</span>
<span class="normal">6070</span>
<span class="normal">6071</span>
<span class="normal">6072</span>
<span class="normal">6073</span>
<span class="normal">6074</span>
<span class="normal">6075</span>
<span class="normal">6076</span>
<span class="normal">6077</span>
<span class="normal">6078</span>
<span class="normal">6079</span>
<span class="normal">6080</span>
<span class="normal">6081</span>
<span class="normal">6082</span>
<span class="normal">6083</span>
<span class="normal">6084</span>
<span class="normal">6085</span>
<span class="normal">6086</span>
<span class="normal">6087</span>
<span class="normal">6088</span>
<span class="normal">6089</span>
<span class="normal">6090</span>
<span class="normal">6091</span>
<span class="normal">6092</span>
<span class="normal">6093</span>
<span class="normal">6094</span>
<span class="normal">6095</span>
<span class="normal">6096</span>
<span class="normal">6097</span>
<span class="normal">6098</span>
<span class="normal">6099</span>
<span class="normal">6100</span>
<span class="normal">6101</span>
<span class="normal">6102</span>
<span class="normal">6103</span>
<span class="normal">6104</span>
<span class="normal">6105</span>
<span class="normal">6106</span>
<span class="normal">6107</span>
<span class="normal">6108</span>
<span class="normal">6109</span>
<span class="normal">6110</span>
<span class="normal">6111</span>
<span class="normal">6112</span>
<span class="normal">6113</span>
<span class="normal">6114</span>
<span class="normal">6115</span>
<span class="normal">6116</span>
<span class="normal">6117</span>
<span class="normal">6118</span>
<span class="normal">6119</span>
<span class="normal">6120</span>
<span class="normal">6121</span>
<span class="normal">6122</span>
<span class="normal">6123</span>
<span class="normal">6124</span>
<span class="normal">6125</span>
<span class="normal">6126</span>
<span class="normal">6127</span>
<span class="normal">6128</span>
<span class="normal">6129</span>
<span class="normal">6130</span>
<span class="normal">6131</span>
<span class="normal">6132</span>
<span class="normal">6133</span>
<span class="normal">6134</span>
<span class="normal">6135</span>
<span class="normal">6136</span>
<span class="normal">6137</span>
<span class="normal">6138</span>
<span class="normal">6139</span>
<span class="normal">6140</span>
<span class="normal">6141</span>
<span class="normal">6142</span>
<span class="normal">6143</span>
<span class="normal">6144</span>
<span class="normal">6145</span>
<span class="normal">6146</span>
<span class="normal">6147</span>
<span class="normal">6148</span>
<span class="normal">6149</span>
<span class="normal">6150</span>
<span class="normal">6151</span>
<span class="normal">6152</span>
<span class="normal">6153</span>
<span class="normal">6154</span>
<span class="normal">6155</span>
<span class="normal">6156</span>
<span class="normal">6157</span>
<span class="normal">6158</span>
<span class="normal">6159</span>
<span class="normal">6160</span>
<span class="normal">6161</span>
<span class="normal">6162</span>
<span class="normal">6163</span>
<span class="normal">6164</span>
<span class="normal">6165</span>
<span class="normal">6166</span>
<span class="normal">6167</span>
<span class="normal">6168</span>
<span class="normal">6169</span>
<span class="normal">6170</span>
<span class="normal">6171</span>
<span class="normal">6172</span>
<span class="normal">6173</span>
<span class="normal">6174</span>
<span class="normal">6175</span>
<span class="normal">6176</span>
<span class="normal">6177</span>
<span class="normal">6178</span>
<span class="normal">6179</span>
<span class="normal">6180</span>
<span class="normal">6181</span>
<span class="normal">6182</span>
<span class="normal">6183</span>
<span class="normal">6184</span>
<span class="normal">6185</span>
<span class="normal">6186</span>
<span class="normal">6187</span>
<span class="normal">6188</span>
<span class="normal">6189</span>
<span class="normal">6190</span>
<span class="normal">6191</span>
<span class="normal">6192</span>
<span class="normal">6193</span>
<span class="normal">6194</span>
<span class="normal">6195</span>
<span class="normal">6196</span>
<span class="normal">6197</span>
<span class="normal">6198</span>
<span class="normal">6199</span>
<span class="normal">6200</span>
<span class="normal">6201</span>
<span class="normal">6202</span>
<span class="normal">6203</span>
<span class="normal">6204</span>
<span class="normal">6205</span>
<span class="normal">6206</span>
<span class="normal">6207</span>
<span class="normal">6208</span>
<span class="normal">6209</span>
<span class="normal">6210</span>
<span class="normal">6211</span>
<span class="normal">6212</span>
<span class="normal">6213</span>
<span class="normal">6214</span>
<span class="normal">6215</span>
<span class="normal">6216</span>
<span class="normal">6217</span>
<span class="normal">6218</span>
<span class="normal">6219</span>
<span class="normal">6220</span>
<span class="normal">6221</span>
<span class="normal">6222</span>
<span class="normal">6223</span>
<span class="normal">6224</span>
<span class="normal">6225</span>
<span class="normal">6226</span>
<span class="normal">6227</span>
<span class="normal">6228</span>
<span class="normal">6229</span>
<span class="normal">6230</span>
<span class="normal">6231</span>
<span class="normal">6232</span>
<span class="normal">6233</span>
<span class="normal">6234</span>
<span class="normal">6235</span>
<span class="normal">6236</span>
<span class="normal">6237</span>
<span class="normal">6238</span>
<span class="normal">6239</span>
<span class="normal">6240</span>
<span class="normal">6241</span>
<span class="normal">6242</span>
<span class="normal">6243</span>
<span class="normal">6244</span>
<span class="normal">6245</span>
<span class="normal">6246</span>
<span class="normal">6247</span>
<span class="normal">6248</span>
<span class="normal">6249</span>
<span class="normal">6250</span>
<span class="normal">6251</span>
<span class="normal">6252</span>
<span class="normal">6253</span>
<span class="normal">6254</span>
<span class="normal">6255</span>
<span class="normal">6256</span>
<span class="normal">6257</span>
<span class="normal">6258</span>
<span class="normal">6259</span>
<span class="normal">6260</span>
<span class="normal">6261</span>
<span class="normal">6262</span>
<span class="normal">6263</span>
<span class="normal">6264</span>
<span class="normal">6265</span>
<span class="normal">6266</span>
<span class="normal">6267</span>
<span class="normal">6268</span>
<span class="normal">6269</span>
<span class="normal">6270</span>
<span class="normal">6271</span>
<span class="normal">6272</span>
<span class="normal">6273</span>
<span class="normal">6274</span>
<span class="normal">6275</span>
<span class="normal">6276</span>
<span class="normal">6277</span>
<span class="normal">6278</span>
<span class="normal">6279</span>
<span class="normal">6280</span>
<span class="normal">6281</span>
<span class="normal">6282</span>
<span class="normal">6283</span>
<span class="normal">6284</span>
<span class="normal">6285</span>
<span class="normal">6286</span>
<span class="normal">6287</span>
<span class="normal">6288</span>
<span class="normal">6289</span>
<span class="normal">6290</span>
<span class="normal">6291</span>
<span class="normal">6292</span>
<span class="normal">6293</span>
<span class="normal">6294</span>
<span class="normal">6295</span>
<span class="normal">6296</span>
<span class="normal">6297</span>
<span class="normal">6298</span>
<span class="normal">6299</span>
<span class="normal">6300</span>
<span class="normal">6301</span>
<span class="normal">6302</span>
<span class="normal">6303</span>
<span class="normal">6304</span>
<span class="normal">6305</span>
<span class="normal">6306</span>
<span class="normal">6307</span>
<span class="normal">6308</span>
<span class="normal">6309</span>
<span class="normal">6310</span>
<span class="normal">6311</span>
<span class="normal">6312</span>
<span class="normal">6313</span>
<span class="normal">6314</span>
<span class="normal">6315</span>
<span class="normal">6316</span>
<span class="normal">6317</span>
<span class="normal">6318</span>
<span class="normal">6319</span>
<span class="normal">6320</span>
<span class="normal">6321</span>
<span class="normal">6322</span>
<span class="normal">6323</span>
<span class="normal">6324</span>
<span class="normal">6325</span>
<span class="normal">6326</span>
<span class="normal">6327</span>
<span class="normal">6328</span>
<span class="normal">6329</span>
<span class="normal">6330</span>
<span class="normal">6331</span>
<span class="normal">6332</span>
<span class="normal">6333</span>
<span class="normal">6334</span>
<span class="normal">6335</span>
<span class="normal">6336</span>
<span class="normal">6337</span>
<span class="normal">6338</span>
<span class="normal">6339</span>
<span class="normal">6340</span>
<span class="normal">6341</span>
<span class="normal">6342</span>
<span class="normal">6343</span>
<span class="normal">6344</span>
<span class="normal">6345</span>
<span class="normal">6346</span>
<span class="normal">6347</span>
<span class="normal">6348</span>
<span class="normal">6349</span>
<span class="normal">6350</span>
<span class="normal">6351</span>
<span class="normal">6352</span>
<span class="normal">6353</span>
<span class="normal">6354</span>
<span class="normal">6355</span>
<span class="normal">6356</span>
<span class="normal">6357</span>
<span class="normal">6358</span>
<span class="normal">6359</span>
<span class="normal">6360</span>
<span class="normal">6361</span>
<span class="normal">6362</span>
<span class="normal">6363</span>
<span class="normal">6364</span>
<span class="normal">6365</span>
<span class="normal">6366</span>
<span class="normal">6367</span>
<span class="normal">6368</span>
<span class="normal">6369</span>
<span class="normal">6370</span>
<span class="normal">6371</span>
<span class="normal">6372</span>
<span class="normal">6373</span>
<span class="normal">6374</span>
<span class="normal">6375</span>
<span class="normal">6376</span>
<span class="normal">6377</span>
<span class="normal">6378</span>
<span class="normal">6379</span>
<span class="normal">6380</span>
<span class="normal">6381</span>
<span class="normal">6382</span>
<span class="normal">6383</span>
<span class="normal">6384</span>
<span class="normal">6385</span>
<span class="normal">6386</span>
<span class="normal">6387</span>
<span class="normal">6388</span>
<span class="normal">6389</span>
<span class="normal">6390</span>
<span class="normal">6391</span>
<span class="normal">6392</span>
<span class="normal">6393</span>
<span class="normal">6394</span>
<span class="normal">6395</span>
<span class="normal">6396</span>
<span class="normal">6397</span>
<span class="normal">6398</span>
<span class="normal">6399</span>
<span class="normal">6400</span>
<span class="normal">6401</span>
<span class="normal">6402</span>
<span class="normal">6403</span>
<span class="normal">6404</span>
<span class="normal">6405</span>
<span class="normal">6406</span>
<span class="normal">6407</span>
<span class="normal">6408</span>
<span class="normal">6409</span>
<span class="normal">6410</span>
<span class="normal">6411</span>
<span class="normal">6412</span>
<span class="normal">6413</span>
<span class="normal">6414</span>
<span class="normal">6415</span>
<span class="normal">6416</span>
<span class="normal">6417</span>
<span class="normal">6418</span>
<span class="normal">6419</span>
<span class="normal">6420</span>
<span class="normal">6421</span>
<span class="normal">6422</span>
<span class="normal">6423</span>
<span class="normal">6424</span>
<span class="normal">6425</span>
<span class="normal">6426</span>
<span class="normal">6427</span>
<span class="normal">6428</span>
<span class="normal">6429</span>
<span class="normal">6430</span>
<span class="normal">6431</span>
<span class="normal">6432</span>
<span class="normal">6433</span>
<span class="normal">6434</span>
<span class="normal">6435</span>
<span class="normal">6436</span>
<span class="normal">6437</span>
<span class="normal">6438</span>
<span class="normal">6439</span>
<span class="normal">6440</span>
<span class="normal">6441</span>
<span class="normal">6442</span>
<span class="normal">6443</span>
<span class="normal">6444</span>
<span class="normal">6445</span>
<span class="normal">6446</span>
<span class="normal">6447</span>
<span class="normal">6448</span>
<span class="normal">6449</span>
<span class="normal">6450</span>
<span class="normal">6451</span>
<span class="normal">6452</span>
<span class="normal">6453</span>
<span class="normal">6454</span>
<span class="normal">6455</span>
<span class="normal">6456</span>
<span class="normal">6457</span>
<span class="normal">6458</span>
<span class="normal">6459</span>
<span class="normal">6460</span>
<span class="normal">6461</span>
<span class="normal">6462</span>
<span class="normal">6463</span>
<span class="normal">6464</span>
<span class="normal">6465</span>
<span class="normal">6466</span>
<span class="normal">6467</span>
<span class="normal">6468</span>
<span class="normal">6469</span>
<span class="normal">6470</span>
<span class="normal">6471</span>
<span class="normal">6472</span>
<span class="normal">6473</span>
<span class="normal">6474</span>
<span class="normal">6475</span>
<span class="normal">6476</span>
<span class="normal">6477</span>
<span class="normal">6478</span>
<span class="normal">6479</span>
<span class="normal">6480</span>
<span class="normal">6481</span>
<span class="normal">6482</span>
<span class="normal">6483</span>
<span class="normal">6484</span>
<span class="normal">6485</span>
<span class="normal">6486</span>
<span class="normal">6487</span>
<span class="normal">6488</span>
<span class="normal">6489</span>
<span class="normal">6490</span>
<span class="normal">6491</span>
<span class="normal">6492</span>
<span class="normal">6493</span>
<span class="normal">6494</span>
<span class="normal">6495</span>
<span class="normal">6496</span>
<span class="normal">6497</span>
<span class="normal">6498</span>
<span class="normal">6499</span>
<span class="normal">6500</span>
<span class="normal">6501</span>
<span class="normal">6502</span>
<span class="normal">6503</span>
<span class="normal">6504</span>
<span class="normal">6505</span>
<span class="normal">6506</span>
<span class="normal">6507</span>
<span class="normal">6508</span>
<span class="normal">6509</span>
<span class="normal">6510</span>
<span class="normal">6511</span>
<span class="normal">6512</span>
<span class="normal">6513</span>
<span class="normal">6514</span>
<span class="normal">6515</span>
<span class="normal">6516</span>
<span class="normal">6517</span>
<span class="normal">6518</span>
<span class="normal">6519</span>
<span class="normal">6520</span>
<span class="normal">6521</span>
<span class="normal">6522</span>
<span class="normal">6523</span>
<span class="normal">6524</span>
<span class="normal">6525</span>
<span class="normal">6526</span>
<span class="normal">6527</span>
<span class="normal">6528</span>
<span class="normal">6529</span>
<span class="normal">6530</span>
<span class="normal">6531</span>
<span class="normal">6532</span>
<span class="normal">6533</span>
<span class="normal">6534</span>
<span class="normal">6535</span>
<span class="normal">6536</span>
<span class="normal">6537</span>
<span class="normal">6538</span>
<span class="normal">6539</span>
<span class="normal">6540</span>
<span class="normal">6541</span>
<span class="normal">6542</span>
<span class="normal">6543</span>
<span class="normal">6544</span>
<span class="normal">6545</span>
<span class="normal">6546</span>
<span class="normal">6547</span>
<span class="normal">6548</span>
<span class="normal">6549</span>
<span class="normal">6550</span>
<span class="normal">6551</span>
<span class="normal">6552</span>
<span class="normal">6553</span>
<span class="normal">6554</span>
<span class="normal">6555</span>
<span class="normal">6556</span>
<span class="normal">6557</span>
<span class="normal">6558</span>
<span class="normal">6559</span>
<span class="normal">6560</span>
<span class="normal">6561</span>
<span class="normal">6562</span>
<span class="normal">6563</span>
<span class="normal">6564</span>
<span class="normal">6565</span>
<span class="normal">6566</span>
<span class="normal">6567</span>
<span class="normal">6568</span>
<span class="normal">6569</span>
<span class="normal">6570</span>
<span class="normal">6571</span>
<span class="normal">6572</span>
<span class="normal">6573</span>
<span class="normal">6574</span>
<span class="normal">6575</span>
<span class="normal">6576</span>
<span class="normal">6577</span>
<span class="normal">6578</span>
<span class="normal">6579</span>
<span class="normal">6580</span>
<span class="normal">6581</span>
<span class="normal">6582</span>
<span class="normal">6583</span>
<span class="normal">6584</span>
<span class="normal">6585</span>
<span class="normal">6586</span>
<span class="normal">6587</span>
<span class="normal">6588</span>
<span class="normal">6589</span>
<span class="normal">6590</span>
<span class="normal">6591</span>
<span class="normal">6592</span>
<span class="normal">6593</span>
<span class="normal">6594</span>
<span class="normal">6595</span>
<span class="normal">6596</span>
<span class="normal">6597</span>
<span class="normal">6598</span>
<span class="normal">6599</span>
<span class="normal">6600</span>
<span class="normal">6601</span>
<span class="normal">6602</span>
<span class="normal">6603</span>
<span class="normal">6604</span>
<span class="normal">6605</span>
<span class="normal">6606</span>
<span class="normal">6607</span>
<span class="normal">6608</span>
<span class="normal">6609</span>
<span class="normal">6610</span>
<span class="normal">6611</span>
<span class="normal">6612</span>
<span class="normal">6613</span>
<span class="normal">6614</span>
<span class="normal">6615</span>
<span class="normal">6616</span>
<span class="normal">6617</span>
<span class="normal">6618</span>
<span class="normal">6619</span>
<span class="normal">6620</span>
<span class="normal">6621</span>
<span class="normal">6622</span>
<span class="normal">6623</span>
<span class="normal">6624</span>
<span class="normal">6625</span>
<span class="normal">6626</span>
<span class="normal">6627</span>
<span class="normal">6628</span>
<span class="normal">6629</span>
<span class="normal">6630</span>
<span class="normal">6631</span>
<span class="normal">6632</span>
<span class="normal">6633</span>
<span class="normal">6634</span>
<span class="normal">6635</span>
<span class="normal">6636</span>
<span class="normal">6637</span>
<span class="normal">6638</span>
<span class="normal">6639</span>
<span class="normal">6640</span>
<span class="normal">6641</span>
<span class="normal">6642</span>
<span class="normal">6643</span>
<span class="normal">6644</span>
<span class="normal">6645</span>
<span class="normal">6646</span>
<span class="normal">6647</span>
<span class="normal">6648</span>
<span class="normal">6649</span>
<span class="normal">6650</span>
<span class="normal">6651</span>
<span class="normal">6652</span>
<span class="normal">6653</span>
<span class="normal">6654</span>
<span class="normal">6655</span>
<span class="normal">6656</span>
<span class="normal">6657</span>
<span class="normal">6658</span>
<span class="normal">6659</span>
<span class="normal">6660</span>
<span class="normal">6661</span>
<span class="normal">6662</span>
<span class="normal">6663</span>
<span class="normal">6664</span>
<span class="normal">6665</span>
<span class="normal">6666</span>
<span class="normal">6667</span>
<span class="normal">6668</span>
<span class="normal">6669</span>
<span class="normal">6670</span>
<span class="normal">6671</span>
<span class="normal">6672</span>
<span class="normal">6673</span>
<span class="normal">6674</span>
<span class="normal">6675</span>
<span class="normal">6676</span>
<span class="normal">6677</span>
<span class="normal">6678</span>
<span class="normal">6679</span>
<span class="normal">6680</span>
<span class="normal">6681</span>
<span class="normal">6682</span>
<span class="normal">6683</span>
<span class="normal">6684</span>
<span class="normal">6685</span>
<span class="normal">6686</span>
<span class="normal">6687</span>
<span class="normal">6688</span>
<span class="normal">6689</span>
<span class="normal">6690</span>
<span class="normal">6691</span>
<span class="normal">6692</span>
<span class="normal">6693</span>
<span class="normal">6694</span>
<span class="normal">6695</span>
<span class="normal">6696</span>
<span class="normal">6697</span>
<span class="normal">6698</span>
<span class="normal">6699</span>
<span class="normal">6700</span>
<span class="normal">6701</span>
<span class="normal">6702</span>
<span class="normal">6703</span>
<span class="normal">6704</span>
<span class="normal">6705</span>
<span class="normal">6706</span>
<span class="normal">6707</span>
<span class="normal">6708</span>
<span class="normal">6709</span>
<span class="normal">6710</span>
<span class="normal">6711</span>
<span class="normal">6712</span>
<span class="normal">6713</span>
<span class="normal">6714</span>
<span class="normal">6715</span>
<span class="normal">6716</span>
<span class="normal">6717</span>
<span class="normal">6718</span>
<span class="normal">6719</span>
<span class="normal">6720</span>
<span class="normal">6721</span>
<span class="normal">6722</span>
<span class="normal">6723</span>
<span class="normal">6724</span>
<span class="normal">6725</span>
<span class="normal">6726</span>
<span class="normal">6727</span>
<span class="normal">6728</span>
<span class="normal">6729</span>
<span class="normal">6730</span>
<span class="normal">6731</span>
<span class="normal">6732</span>
<span class="normal">6733</span>
<span class="normal">6734</span>
<span class="normal">6735</span>
<span class="normal">6736</span>
<span class="normal">6737</span>
<span class="normal">6738</span>
<span class="normal">6739</span>
<span class="normal">6740</span>
<span class="normal">6741</span>
<span class="normal">6742</span>
<span class="normal">6743</span>
<span class="normal">6744</span>
<span class="normal">6745</span>
<span class="normal">6746</span>
<span class="normal">6747</span>
<span class="normal">6748</span>
<span class="normal">6749</span>
<span class="normal">6750</span>
<span class="normal">6751</span>
<span class="normal">6752</span>
<span class="normal">6753</span>
<span class="normal">6754</span>
<span class="normal">6755</span>
<span class="normal">6756</span>
<span class="normal">6757</span>
<span class="normal">6758</span>
<span class="normal">6759</span>
<span class="normal">6760</span>
<span class="normal">6761</span>
<span class="normal">6762</span>
<span class="normal">6763</span>
<span class="normal">6764</span>
<span class="normal">6765</span>
<span class="normal">6766</span>
<span class="normal">6767</span>
<span class="normal">6768</span>
<span class="normal">6769</span>
<span class="normal">6770</span>
<span class="normal">6771</span>
<span class="normal">6772</span>
<span class="normal">6773</span>
<span class="normal">6774</span>
<span class="normal">6775</span>
<span class="normal">6776</span>
<span class="normal">6777</span>
<span class="normal">6778</span>
<span class="normal">6779</span>
<span class="normal">6780</span>
<span class="normal">6781</span>
<span class="normal">6782</span>
<span class="normal">6783</span>
<span class="normal">6784</span>
<span class="normal">6785</span>
<span class="normal">6786</span>
<span class="normal">6787</span>
<span class="normal">6788</span>
<span class="normal">6789</span>
<span class="normal">6790</span>
<span class="normal">6791</span>
<span class="normal">6792</span>
<span class="normal">6793</span>
<span class="normal">6794</span>
<span class="normal">6795</span>
<span class="normal">6796</span>
<span class="normal">6797</span>
<span class="normal">6798</span>
<span class="normal">6799</span>
<span class="normal">6800</span>
<span class="normal">6801</span>
<span class="normal">6802</span>
<span class="normal">6803</span>
<span class="normal">6804</span>
<span class="normal">6805</span>
<span class="normal">6806</span>
<span class="normal">6807</span>
<span class="normal">6808</span>
<span class="normal">6809</span>
<span class="normal">6810</span>
<span class="normal">6811</span>
<span class="normal">6812</span>
<span class="normal">6813</span>
<span class="normal">6814</span>
<span class="normal">6815</span>
<span class="normal">6816</span>
<span class="normal">6817</span>
<span class="normal">6818</span>
<span class="normal">6819</span>
<span class="normal">6820</span>
<span class="normal">6821</span>
<span class="normal">6822</span>
<span class="normal">6823</span>
<span class="normal">6824</span>
<span class="normal">6825</span>
<span class="normal">6826</span>
<span class="normal">6827</span>
<span class="normal">6828</span>
<span class="normal">6829</span>
<span class="normal">6830</span>
<span class="normal">6831</span>
<span class="normal">6832</span>
<span class="normal">6833</span>
<span class="normal">6834</span>
<span class="normal">6835</span>
<span class="normal">6836</span>
<span class="normal">6837</span>
<span class="normal">6838</span>
<span class="normal">6839</span>
<span class="normal">6840</span>
<span class="normal">6841</span>
<span class="normal">6842</span>
<span class="normal">6843</span>
<span class="normal">6844</span>
<span class="normal">6845</span>
<span class="normal">6846</span>
<span class="normal">6847</span>
<span class="normal">6848</span>
<span class="normal">6849</span>
<span class="normal">6850</span>
<span class="normal">6851</span>
<span class="normal">6852</span>
<span class="normal">6853</span>
<span class="normal">6854</span>
<span class="normal">6855</span>
<span class="normal">6856</span>
<span class="normal">6857</span>
<span class="normal">6858</span>
<span class="normal">6859</span>
<span class="normal">6860</span>
<span class="normal">6861</span>
<span class="normal">6862</span>
<span class="normal">6863</span>
<span class="normal">6864</span>
<span class="normal">6865</span>
<span class="normal">6866</span>
<span class="normal">6867</span>
<span class="normal">6868</span>
<span class="normal">6869</span>
<span class="normal">6870</span>
<span class="normal">6871</span>
<span class="normal">6872</span>
<span class="normal">6873</span>
<span class="normal">6874</span>
<span class="normal">6875</span>
<span class="normal">6876</span>
<span class="normal">6877</span>
<span class="normal">6878</span>
<span class="normal">6879</span>
<span class="normal">6880</span>
<span class="normal">6881</span>
<span class="normal">6882</span>
<span class="normal">6883</span>
<span class="normal">6884</span>
<span class="normal">6885</span>
<span class="normal">6886</span>
<span class="normal">6887</span>
<span class="normal">6888</span>
<span class="normal">6889</span>
<span class="normal">6890</span>
<span class="normal">6891</span>
<span class="normal">6892</span>
<span class="normal">6893</span>
<span class="normal">6894</span>
<span class="normal">6895</span>
<span class="normal">6896</span>
<span class="normal">6897</span>
<span class="normal">6898</span>
<span class="normal">6899</span>
<span class="normal">6900</span>
<span class="normal">6901</span>
<span class="normal">6902</span>
<span class="normal">6903</span>
<span class="normal">6904</span>
<span class="normal">6905</span>
<span class="normal">6906</span>
<span class="normal">6907</span>
<span class="normal">6908</span>
<span class="normal">6909</span>
<span class="normal">6910</span>
<span class="normal">6911</span>
<span class="normal">6912</span>
<span class="normal">6913</span>
<span class="normal">6914</span>
<span class="normal">6915</span>
<span class="normal">6916</span>
<span class="normal">6917</span>
<span class="normal">6918</span>
<span class="normal">6919</span>
<span class="normal">6920</span>
<span class="normal">6921</span>
<span class="normal">6922</span>
<span class="normal">6923</span>
<span class="normal">6924</span>
<span class="normal">6925</span>
<span class="normal">6926</span>
<span class="normal">6927</span>
<span class="normal">6928</span>
<span class="normal">6929</span>
<span class="normal">6930</span>
<span class="normal">6931</span>
<span class="normal">6932</span>
<span class="normal">6933</span>
<span class="normal">6934</span>
<span class="normal">6935</span>
<span class="normal">6936</span>
<span class="normal">6937</span>
<span class="normal">6938</span>
<span class="normal">6939</span>
<span class="normal">6940</span>
<span class="normal">6941</span>
<span class="normal">6942</span>
<span class="normal">6943</span>
<span class="normal">6944</span>
<span class="normal">6945</span>
<span class="normal">6946</span>
<span class="normal">6947</span>
<span class="normal">6948</span>
<span class="normal">6949</span>
<span class="normal">6950</span>
<span class="normal">6951</span>
<span class="normal">6952</span>
<span class="normal">6953</span>
<span class="normal">6954</span>
<span class="normal">6955</span>
<span class="normal">6956</span>
<span class="normal">6957</span>
<span class="normal">6958</span>
<span class="normal">6959</span>
<span class="normal">6960</span>
<span class="normal">6961</span>
<span class="normal">6962</span>
<span class="normal">6963</span>
<span class="normal">6964</span>
<span class="normal">6965</span>
<span class="normal">6966</span>
<span class="normal">6967</span>
<span class="normal">6968</span>
<span class="normal">6969</span>
<span class="normal">6970</span>
<span class="normal">6971</span>
<span class="normal">6972</span>
<span class="normal">6973</span>
<span class="normal">6974</span>
<span class="normal">6975</span>
<span class="normal">6976</span>
<span class="normal">6977</span>
<span class="normal">6978</span>
<span class="normal">6979</span>
<span class="normal">6980</span>
<span class="normal">6981</span>
<span class="normal">6982</span>
<span class="normal">6983</span>
<span class="normal">6984</span>
<span class="normal">6985</span>
<span class="normal">6986</span>
<span class="normal">6987</span>
<span class="normal">6988</span>
<span class="normal">6989</span>
<span class="normal">6990</span>
<span class="normal">6991</span>
<span class="normal">6992</span>
<span class="normal">6993</span>
<span class="normal">6994</span>
<span class="normal">6995</span>
<span class="normal">6996</span>
<span class="normal">6997</span>
<span class="normal">6998</span>
<span class="normal">6999</span>
<span class="normal">7000</span>
<span class="normal">7001</span>
<span class="normal">7002</span>
<span class="normal">7003</span>
<span class="normal">7004</span>
<span class="normal">7005</span>
<span class="normal">7006</span>
<span class="normal">7007</span>
<span class="normal">7008</span>
<span class="normal">7009</span>
<span class="normal">7010</span>
<span class="normal">7011</span>
<span class="normal">7012</span>
<span class="normal">7013</span>
<span class="normal">7014</span>
<span class="normal">7015</span>
<span class="normal">7016</span>
<span class="normal">7017</span>
<span class="normal">7018</span>
<span class="normal">7019</span>
<span class="normal">7020</span>
<span class="normal">7021</span>
<span class="normal">7022</span>
<span class="normal">7023</span>
<span class="normal">7024</span>
<span class="normal">7025</span>
<span class="normal">7026</span>
<span class="normal">7027</span>
<span class="normal">7028</span>
<span class="normal">7029</span>
<span class="normal">7030</span>
<span class="normal">7031</span>
<span class="normal">7032</span>
<span class="normal">7033</span>
<span class="normal">7034</span>
<span class="normal">7035</span>
<span class="normal">7036</span>
<span class="normal">7037</span>
<span class="normal">7038</span>
<span class="normal">7039</span>
<span class="normal">7040</span>
<span class="normal">7041</span>
<span class="normal">7042</span>
<span class="normal">7043</span>
<span class="normal">7044</span>
<span class="normal">7045</span>
<span class="normal">7046</span>
<span class="normal">7047</span>
<span class="normal">7048</span>
<span class="normal">7049</span>
<span class="normal">7050</span>
<span class="normal">7051</span>
<span class="normal">7052</span>
<span class="normal">7053</span>
<span class="normal">7054</span>
<span class="normal">7055</span>
<span class="normal">7056</span>
<span class="normal">7057</span>
<span class="normal">7058</span>
<span class="normal">7059</span>
<span class="normal">7060</span>
<span class="normal">7061</span>
<span class="normal">7062</span>
<span class="normal">7063</span>
<span class="normal">7064</span>
<span class="normal">7065</span>
<span class="normal">7066</span>
<span class="normal">7067</span>
<span class="normal">7068</span>
<span class="normal">7069</span>
<span class="normal">7070</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span><span class="n">MapWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Map class inherits from the MapWidget class of the maplibre.ipywidget module.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">center</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
        <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;navigation&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;globe&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">projection</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mercator&quot;</span><span class="p">,</span>
        <span class="n">use_message_queue</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">add_floating_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sidebar_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
        <span class="n">sidebar_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_manager_expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Map object.</span>

<span class="sd">        Args:</span>
<span class="sd">            center (tuple, optional): The center of the map (lon, lat). Defaults</span>
<span class="sd">                to (0, 20).</span>
<span class="sd">            zoom (float, optional): The zoom level of the map. Defaults to 1.</span>
<span class="sd">            pitch (float, optional): The pitch of the map. Measured in degrees</span>
<span class="sd">                away from the plane of the screen (0-85) Defaults to 0.</span>
<span class="sd">            bearing (float, optional): The bearing of the map. Measured in degrees</span>
<span class="sd">                counter-clockwise from north. Defaults to 0.</span>
<span class="sd">            style (str, optional): The style of the map. It can be a string or a URL.</span>
<span class="sd">                If it is a string, it must be one of the following: &quot;dark-matter&quot;, &quot;positron&quot;,</span>
<span class="sd">                &quot;carto-positron&quot;, &quot;voyager&quot;, &quot;positron-nolabels&quot;, &quot;dark-matter-nolabels&quot;,</span>
<span class="sd">                &quot;voyager-nolabels&quot;, &quot;demotiles&quot;, &quot;liberty&quot;, &quot;bright&quot;, or &quot;positron2&quot;.</span>
<span class="sd">                If a MapTiler API key is set, you can also use any of the MapTiler styles,</span>
<span class="sd">                such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,</span>
<span class="sd">                openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">                If it is a URL, it must point to a MapLibre style JSON. Defaults to &quot;dark-matter&quot;.</span>
<span class="sd">            height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">            controls (dict, optional): The controls and their positions on the</span>
<span class="sd">                map. Defaults to {&quot;fullscreen&quot;: &quot;top-right&quot;, &quot;scale&quot;: &quot;bottom-left&quot;}.</span>
<span class="sd">            projection (str, optional): The projection of the map. It can be</span>
<span class="sd">                &quot;mercator&quot; or &quot;globe&quot;. Defaults to &quot;mercator&quot;.</span>
<span class="sd">            use_message_queue (bool, optional): Whether to use the message queue.</span>
<span class="sd">                Defaults to None. If None, it will check the environment variable</span>
<span class="sd">                &quot;USE_MESSAGE_QUEUE&quot;. If it is set to &quot;True&quot;, it will use the message queue, which</span>
<span class="sd">                is needed to export the map to HTML. If it is set to &quot;False&quot;, it will not use the message</span>
<span class="sd">                queue, which is needed to display the map multiple times in the same notebook.</span>
<span class="sd">            add_sidebar (bool, optional): Whether to add a sidebar to the map.</span>
<span class="sd">                Defaults to False. If True, the map will be displayed in a sidebar.</span>
<span class="sd">            add_floating_sidebar (bool, optional): Whether to add a floating sidebar to the map.</span>
<span class="sd">                Defaults to True. If True, the map will be displayed in a floating sidebar.</span>
<span class="sd">            sidebar_visible (bool, optional): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">            sidebar_width (int, optional): The width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">            sidebar_args (dict, optional): The arguments for the sidebar. It can</span>
<span class="sd">                be a dictionary with the following keys: &quot;sidebar_visible&quot;, &quot;min_width&quot;,</span>
<span class="sd">                &quot;max_width&quot;, and &quot;sidebar_content&quot;. Defaults to None. If None, it will</span>
<span class="sd">                use the default values for the sidebar.</span>
<span class="sd">            layer_manager_expanded (bool, optional): Whether the layer manager is expanded. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the MapOptions class.</span>
<span class="sd">                See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/</span>
<span class="sd">                for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">carto_basemaps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voyager&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron-nolabels&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dark-matter-nolabels&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voyager-nolabels&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">openfreemap_basemaps</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;liberty&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright&quot;</span><span class="p">,</span>
            <span class="s2">&quot;positron2&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;The provided style URL is invalid. Falling back to &#39;dark-matter&#39;.&quot;</span>
                    <span class="p">)</span>
                    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">style</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">):</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">maptiler_3d_style</span><span class="p">(</span>
                    <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="n">exaggeration</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;exaggeration&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">tile_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tile_size&quot;</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span>
                    <span class="n">hillshade</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;amazon-&quot;</span><span class="p">):</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_amazon_style</span><span class="p">(</span>
                    <span class="n">map_style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;amazon-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="n">region</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="s2">&quot;us-east-1&quot;</span><span class="p">),</span>
                    <span class="n">api_key</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                    <span class="n">token</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;AWS_MAPS_API_KEY&quot;</span><span class="p">),</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">openfreemap_basemaps</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;positron2&quot;</span><span class="p">:</span>
                    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;positron&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.openfreemap.org/styles/</span><span class="si">{</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;demotiles&quot;</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;https://demotiles.maplibre.org/style.json&quot;</span>
            <span class="k">elif</span> <span class="s2">&quot;background-&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">background</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">map_options</span> <span class="o">=</span> <span class="n">MapOptions</span><span class="p">(</span>
            <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="n">bearing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">map_options</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">use_message_queue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">use_message_queue</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MESSAGE_QUEUE&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_message_queue</span><span class="p">(</span><span class="n">use_message_queue</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">control</span><span class="p">,</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">controls</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">[</span><span class="n">control</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">),</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">projection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;globe&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_globe_control</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_projection</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                    <span class="mi">10</span><span class="p">,</span>
                    <span class="s2">&quot;vertical-perspective&quot;</span><span class="p">,</span>
                    <span class="mi">12</span><span class="p">,</span>
                    <span class="s2">&quot;mercator&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">sidebar_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sidebar_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s2">&quot;sidebar_visible&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
            <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
        <span class="k">if</span> <span class="s2">&quot;sidebar_width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sidebar_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">sidebar_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sidebar_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
            <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
        <span class="k">if</span> <span class="s2">&quot;expanded&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
            <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;expanded&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer_manager_expanded</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span> <span class="o">=</span> <span class="n">sidebar_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar_flag</span> <span class="o">=</span> <span class="n">add_floating_sidebar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_widget</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">add_sidebar</span> <span class="ow">or</span> <span class="n">add_floating_sidebar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ipython_display_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_patched_display</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
        <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the map with an optional sidebar.</span>

<span class="sd">        Args:</span>
<span class="sd">            sidebar_visible (bool): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">            min_width (int): Minimum width of the sidebar in pixels. Defaults to 250.</span>
<span class="sd">            max_width (int): Maximum width of the sidebar in pixels. Defaults to 300.</span>
<span class="sd">            sidebar_content (Optional[Any]): Content to display in the sidebar. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Container</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
            <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
            <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
            <span class="n">sidebar_content</span><span class="o">=</span><span class="n">sidebar_content</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_container</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span><span class="o">.</span><span class="n">Container</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a container widget for the map with an optional sidebar.</span>

<span class="sd">        This method initializes a `LayerManagerWidget` and a `Container` widget to display the map</span>
<span class="sd">        alongside a sidebar. The sidebar can be customized with visibility, width, and additional content.</span>

<span class="sd">        Args:</span>
<span class="sd">            sidebar_visible (bool): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">            min_width (int): Minimum width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">            max_width (int): Maximum width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">            expanded (bool): Whether the `LayerManagerWidget` is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments passed to the `Container` widget.</span>

<span class="sd">        Returns:</span>
<span class="sd">            v.Container: The created container widget with the map and sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sidebar_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">min_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expanded</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">expanded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expanded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">)</span>

        <span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">(</span>
            <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
            <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
            <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
            <span class="n">sidebar_content</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="p">],</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="s2">&quot;Layers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span>
        <span class="k">return</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the map in an IPython environment.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">replace_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">replace_key</span><span class="o">=</span><span class="n">replace_key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_patched_display</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the map in an IPython environment with a patched display method.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar_flag</span><span class="p">:</span>
            <span class="c1"># Use floating sidebar</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_widget</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sidebar_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="n">expanded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expanded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="s2">&quot;top-left&quot;</span><span class="p">)</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;370px&quot;</span><span class="p">)</span>
                <span class="n">max_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_height&quot;</span><span class="p">,</span> <span class="s2">&quot;80vh&quot;</span><span class="p">)</span>
                <span class="n">sidebar_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sidebar_content&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

                <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar</span><span class="p">(</span>
                    <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                    <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                    <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                    <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
                    <span class="n">sidebar_content</span><span class="o">=</span><span class="n">sidebar_content</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_widget</span> <span class="o">=</span> <span class="n">widget</span>

            <span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">ipyvue</span> <span class="k">as</span> <span class="nn">vue</span>

                <span class="n">display</span><span class="p">(</span><span class="n">vue</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[]),</span> <span class="n">widget</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">display</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Use regular container sidebar</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">container</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sidebar_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="n">min_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
                <span class="n">max_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
                <span class="n">expanded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expanded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">)</span>
                <span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">(</span>
                    <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
                    <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                    <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                    <span class="n">sidebar_content</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="p">],</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="s2">&quot;Layers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">container</span>

            <span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">ipyvue</span> <span class="k">as</span> <span class="nn">vue</span>

                <span class="n">display</span><span class="p">(</span><span class="n">vue</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[]),</span> <span class="n">container</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">display</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer_manager</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">layer_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-layers&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Layers&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">layer_icon</span><span class="o">=</span><span class="n">layer_icon</span><span class="p">,</span>
                <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
                <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sidebar_content</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replaces all content in the sidebar (except the toggle button).</span>

<span class="sd">        Args:</span>
<span class="sd">            content (Union[widgets.VBox, List[widgets.Widget]]): The new content for the sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends a widget to the sidebar content.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize floating sidebar state if needed and we&#39;re using floating sidebar</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;add_floating_sidebar_flag&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar_flag</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Check if floating sidebar is being used</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
            <span class="c1"># Handle floating sidebar case</span>
            <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
                    <span class="n">widget</span><span class="p">,</span>
                    <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
                    <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
                    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                    <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                    <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Handle regular container sidebar case</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span>
                <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
                <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_from_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a widget from the sidebar content.</span>

<span class="sd">        Args:</span>
<span class="sd">            widget (widgets.Widget): The widget to remove from the sidebar.</span>
<span class="sd">            name (str): The name of the widget to remove from the sidebar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if floating sidebar is being used</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
            <span class="c1"># Handle floating sidebar case</span>
            <span class="n">key</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">widget</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="n">child</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
                <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">widget</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Handle regular container sidebar case</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sidebar_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically updates the sidebar&#39;s minimum and maximum width.</span>

<span class="sd">        Args:</span>
<span class="sd">            min_width (int, optional): New minimum width in pixels. If None, keep current.</span>
<span class="sd">            max_width (int, optional): New maximum width in pixels. If None, keep current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="p">,</span> <span class="n">max_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>

    <span class="k">def</span> <span class="nf">add_to_map_container</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append one or more widgets beneath the map (in insertion order).</span>

<span class="sd">        This method adds widgets to the map container while ensuring the sidebar</span>
<span class="sd">        remains visible and properly positioned.</span>

<span class="sd">        Args:</span>
<span class="sd">            *items: One or more widgets to add beneath the map. Can be individual</span>
<span class="sd">                   widgets or iterables of widgets. None values are ignored.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; import ipywidgets as widgets</span>
<span class="sd">            &gt;&gt;&gt; m = leafmap.Map()</span>
<span class="sd">            &gt;&gt;&gt; button = widgets.Button(description=&quot;Click me&quot;)</span>
<span class="sd">            &gt;&gt;&gt; slider = widgets.IntSlider(value=5, min=0, max=10)</span>
<span class="sd">            &gt;&gt;&gt; m.add_to_map_container(button, slider)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_to_map_container</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sidebar_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of widgets currently in the sidebar.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, widgets.Widget]: A dictionary where keys are the labels of the widgets and values are the widgets themselves.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a widget or layer to the map based on the type of obj.</span>

<span class="sd">        If obj is a string and equals &quot;NASA_OPERA&quot;, it adds a NASA OPERA data GUI widget to the sidebar.</span>
<span class="sd">        Otherwise, it attempts to add obj as a layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (Union[str, Any]): The object to add to the map. Can be a string or any other type.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to pass to the widget or layer constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;NASA_OPERA&quot;</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">nasa_opera_gui</span>

                <span class="n">widget</span> <span class="o">=</span> <span class="n">nasa_opera_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;maplibre&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                    <span class="n">widget</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-satellite-variant&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;NASA OPERA&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer</span><span class="p">:</span> <span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a layer to the map.</span>

<span class="sd">        This method adds a layer to the map. If a name is provided, it is used</span>
<span class="sd">            as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">            the layer&#39;s ID is used as the key. If a before_id is provided, the</span>
<span class="sd">            layer is inserted before the layer with that ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer (Layer): The layer object to add to the map.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            name (str, optional): The name to use as the key to store the layer</span>
<span class="sd">                in the layer dictionary. If None, the layer&#39;s ID is used as the key.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible by default.</span>
<span class="sd">            overwrite (bool, optional): If True, the function will return the</span>
<span class="sd">                original name even if it exists in the list. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;minzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;min-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;minzoom&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;maxzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;max-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_top_level_hyphens</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">layer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">id</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">(),</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">paint</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">visible</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a layer from the map.</span>

<span class="sd">        This method removes a layer from the map using the layer&#39;s name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer to remove.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">layer</span> <span class="ow">and</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Deck&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_deck_layers</span><span class="p">(</span><span class="n">layer_ids</span><span class="o">=</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
                <span class="k">return</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="n">Layer</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">):</span>
                    <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">remove_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_deck_layers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Deck.GL layers to the layer stack</span>

<span class="sd">        Args:</span>
<span class="sd">            layers (list[dict]): A list of dictionaries containing the Deck.GL layers to be added.</span>
<span class="sd">            tooltip (str | dict): Either a single mustache template string applied to all layers</span>
<span class="sd">                or a dictionary where keys are layer ids and values are mustache template strings.</span>
<span class="sd">            columns (list[str]): A list of column names to be used for the tooltip.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;&lt;b&gt;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">:&lt;/b&gt; </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_deck_initialized&quot;</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_deck_initialized&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="n">layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="n">tooltip</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
                <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Deck-&quot;</span> <span class="o">+</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@@type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;getFillColor&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">),</span>
                <span class="c1"># &quot;tooltip&quot;: tooltip.get(layer[&quot;id&quot;], None),</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">remove_deck_layers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">layer_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a list of Deck.GL layers from the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_ids (List[str]): A list of layer IDs to remove.</span>
<span class="sd">            tooltip (bool): Tooltip for the remaining layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tooltip</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">deck_layers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">deck_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">layer_type</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Deck&quot;</span><span class="p">):</span>
                <span class="n">deck_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="n">deck_layer_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">([])</span>
            <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="n">deck_layer_ids</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">remaining_layers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">remaining_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="n">deck_layer_ids</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">layer_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
                    <span class="n">remaining_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">])</span>
                    <span class="n">remaining_layer_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="n">remaining_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="n">remaining_layers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="n">remaining_layer_ids</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="n">tooltip</span>

    <span class="k">def</span> <span class="nf">add_arc_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
        <span class="n">src_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">src_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dst_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dst_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">src_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="n">dst_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;arc_layer&quot;</span><span class="p">,</span>
        <span class="n">pickable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a DeckGL ArcLayer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Union[str, pd.DataFrame]): The file path or DataFrame containing the data.</span>
<span class="sd">            src_lon (str): The source longitude column name.</span>
<span class="sd">            src_lat (str): The source latitude column name.</span>
<span class="sd">            dst_lon (str): The destination longitude column name.</span>
<span class="sd">            dst_lat (str): The destination latitude column name.</span>
<span class="sd">            src_color (List[int]): The source color as an RGB list.</span>
<span class="sd">            dst_color (List[int]): The destination color as an RGB list.</span>
<span class="sd">            line_width (int): The width of the lines.</span>
<span class="sd">            layer_id (str): The ID of the layer.</span>
<span class="sd">            pickable (bool): Whether the layer is pickable.</span>
<span class="sd">            tooltip (Optional[Union[str, List[str]]], optional): The tooltip content or list of columns. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional arguments for the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>

        <span class="n">arc_data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;source_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">src_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">src_lat</span><span class="p">]],</span>
                <span class="s2">&quot;target_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">dst_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">dst_lat</span><span class="p">]],</span>
                <span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>  <span class="c1"># Include other columns</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="c1"># Generate tooltip template dynamically based on the columns</span>
        <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tooltip</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">tooltip</span>
        <span class="n">tooltip_content</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;&lt;b&gt;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">:&lt;/b&gt; </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">deck_arc_layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;@@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ArcLayer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">arc_data</span><span class="p">,</span>
            <span class="s2">&quot;getSourcePosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=source_position&quot;</span><span class="p">,</span>
            <span class="s2">&quot;getTargetPosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=target_position&quot;</span><span class="p">,</span>
            <span class="s2">&quot;getSourceColor&quot;</span><span class="p">:</span> <span class="n">src_color</span><span class="p">,</span>
            <span class="s2">&quot;getTargetColor&quot;</span><span class="p">:</span> <span class="n">dst_color</span><span class="p">,</span>
            <span class="s2">&quot;getWidth&quot;</span><span class="p">:</span> <span class="n">line_width</span><span class="p">,</span>
            <span class="s2">&quot;pickable&quot;</span><span class="p">:</span> <span class="n">pickable</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">deck_arc_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span>
            <span class="p">[</span><span class="n">deck_arc_layer</span><span class="p">],</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="p">{</span>
                <span class="n">layer_id</span><span class="p">:</span> <span class="n">tooltip_content</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_deck_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Deck.GL layer from the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_id (str): The ID of the layer to get.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deck_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">deck_layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">layer_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">set_deck_layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the opacity of a Deck.GL layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_id (str): The ID of the layer to set the opacity of.</span>
<span class="sd">            opacity (float): The opacity of the layer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
        <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
        <span class="n">deck_layer</span><span class="p">[</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_deck_layer_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">property</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the property of a Deck.GL layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_id (str): The ID of the layer to set the property of.</span>
<span class="sd">            property (str): The property to set.</span>
<span class="sd">            value (Any): The value of the property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
        <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
        <span class="n">deck_layer</span><span class="p">[</span><span class="nb">property</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="nb">property</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_deck_layer_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">properties</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the properties of a Deck.GL layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_id (str): The ID of the layer to set the properties of.</span>
<span class="sd">            properties (dict): The properties to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
        <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
        <span class="n">deck_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a control to the map.</span>

<span class="sd">        This method adds a control to the map. The control can be one of the</span>
<span class="sd">            following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;,</span>
<span class="sd">            and &quot;draw&quot;. If the control is a string, it is converted to the</span>
<span class="sd">            corresponding control object. If the control is not a string, it is</span>
<span class="sd">            assumed to be a control object.</span>

<span class="sd">        Args:</span>
<span class="sd">            control (str or object): The control to add to the map. Can be one</span>
<span class="sd">                of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;,</span>
<span class="sd">                 &quot;attribution&quot;, and &quot;draw&quot;.</span>
<span class="sd">            position (str, optional): The position of the control. Defaults to &quot;top-right&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the control object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the control is a string and is not one of the</span>
<span class="sd">                following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">ScaleControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">FullscreenControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;geolocate&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">GeolocateControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;navigation&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">NavigationControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;attribution&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">AttributionControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;globe&quot;</span><span class="p">:</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">GlobeControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;draw&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;layers&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Control can only be one of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, and &#39;draw&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a drawing control to the map.</span>

<span class="sd">        This method enables users to add interactive drawing controls to the map,</span>
<span class="sd">        allowing for the creation, editing, and deletion of geometric shapes on</span>
<span class="sd">        the map. The options, position, and initial GeoJSON can be customized.</span>

<span class="sd">        Args:</span>
<span class="sd">            options (Optional[Dict[str, Any]]): Configuration options for the</span>
<span class="sd">                drawing control. Defaults to None.</span>
<span class="sd">            controls (Optional[Dict[str, Any]]): The drawing controls to enable.</span>
<span class="sd">                Can be one or more of the following: &#39;polygon&#39;, &#39;line_string&#39;,</span>
<span class="sd">                &#39;point&#39;, &#39;trash&#39;, &#39;combine_features&#39;, &#39;uncombine_features&#39;.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            position (str): The position of the control on the map. Defaults</span>
<span class="sd">                to &quot;top-right&quot;.</span>
<span class="sd">            geojson (Optional[Dict[str, Any]]): Initial GeoJSON data to load</span>
<span class="sd">                into the drawing control. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">                drawing control.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">maplibre.plugins</span> <span class="kn">import</span> <span class="n">MapboxDrawControls</span><span class="p">,</span> <span class="n">MapboxDrawOptions</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;line_string&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;line_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;trash&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;trash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;combine_features&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;combine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;uncombine_features&quot;</span><span class="p">:</span>
                    <span class="n">args</span><span class="p">[</span><span class="s2">&quot;uncombine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">options</span> <span class="o">=</span> <span class="n">MapboxDrawOptions</span><span class="p">(</span>
                <span class="n">display_controls_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">controls</span><span class="o">=</span><span class="n">MapboxDrawControls</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_mapbox_draw</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">[</span><span class="s2">&quot;draw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>

    <span class="k">def</span> <span class="nf">add_globe_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a globe control to the map.</span>

<span class="sd">        This method adds a globe control to the map, allowing users to switch</span>
<span class="sd">        between 2D and 3D views. The position of the control can be customized.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str): The position of the control on the map. Defaults</span>
<span class="sd">                to &quot;top-right&quot;.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">                globe control.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;globe&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">GlobeControl</span><span class="p">(),</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_search_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">collapsed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a search control to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str): The position of the control on the map. Defaults to &quot;top-right&quot;.</span>
<span class="sd">            api_key (str): The API key for the search control. Defaults to None.</span>
<span class="sd">                If not provided, it will be retrieved from the environment variable MAPTILER_KEY.</span>
<span class="sd">            collapsed (bool): Whether the control is collapsed. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the search control.</span>
<span class="sd">                See https://eoda-dev.github.io/py-maplibregl/api/controls/#maplibre.controls.MapTilerGeocodingControl</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">MapTilerGeocodingControl</span>

        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;An MapTiler API key is required. Please set the MAPTILER_KEY environment variable.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">MapTilerGeocodingControl</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">collapsed</span><span class="o">=</span><span class="n">collapsed</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the drawn features to a file.</span>

<span class="sd">        This method saves all features created with the drawing control to a</span>
<span class="sd">        specified file in GeoJSON format. If there are no features to save, the</span>
<span class="sd">        file will not be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath (str): The path to the file where the GeoJSON data will be saved.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to be passed to json.dump for custom serialization.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the feature collection is empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">json</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are no features to save.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a source to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the source.</span>
<span class="sd">            source (str or dict): The source data. .</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>

    <span class="k">def</span> <span class="nf">remove_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes a source from the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeSource&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the data for a source.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the source.</span>
<span class="sd">            data (str or dict): The data to set for the source.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
        <span class="k">elif</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Source </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the center of the map.</span>

<span class="sd">        This method sets the center of the map to the specified longitude and latitude.</span>
<span class="sd">        If a zoom level is provided, it also sets the zoom level of the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (float): The longitude of the center of the map.</span>
<span class="sd">            lat (float): The latitude of the center of the map.</span>
<span class="sd">            zoom (int, optional): The zoom level of the map. If None, the zoom</span>
<span class="sd">                level is not changed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setCenter&quot;</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the zoom level of the map.</span>

<span class="sd">        This method sets the zoom level of the map to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (int): The zoom level of the map.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fit_bounds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjusts the viewport of the map to fit the specified geographical bounds</span>
<span class="sd">            in the format of [[lon_min, lat_min], [lon_max, lat_max]] or</span>
<span class="sd">            [lon_min, lat_min, lon_max, lat_max].</span>

<span class="sd">        This method adjusts the viewport of the map so that the specified geographical bounds</span>
<span class="sd">        are visible in the viewport. The bounds are specified as a list of two points,</span>
<span class="sd">        where each point is a list of two numbers representing the longitude and latitude.</span>

<span class="sd">        Args:</span>
<span class="sd">            bounds (list): A list of two points representing the geographical bounds that</span>
<span class="sd">                        should be visible in the viewport. Each point is a list of two</span>
<span class="sd">                        numbers representing the longitude and latitude. For example,</span>
<span class="sd">                        [[32.958984, -5.353521],[43.50585, 5.615985]]</span>
<span class="sd">            options (dict, optional): Additional options for fitting the bounds.</span>
<span class="sd">                See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions/.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">):</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span>

        <span class="n">options</span><span class="p">[</span><span class="s2">&quot;animate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;animate&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;fitBounds&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_terrain</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://elevation-tiles-prod.s3.amazonaws.com/terrarium/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&quot;</span><span class="p">,</span>
        <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;terrarium&quot;</span><span class="p">,</span>
        <span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;terrain-dem&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add terrain visualization to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            source: URL template for terrain tiles. Defaults to AWS elevation tiles.</span>
<span class="sd">            exaggeration: Terrain exaggeration factor. Defaults to 1.0.</span>
<span class="sd">            tile_size: Tile size in pixels. Defaults to 256.</span>
<span class="sd">            encoding: Encoding for the terrain tiles. Defaults to &quot;terrarium&quot;.</span>
<span class="sd">            source_id: Unique identifier for the terrain source. Defaults to &quot;terrain-dem&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add terrain source</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
            <span class="n">source_id</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">source</span><span class="p">],</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
                <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="n">encoding</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

        <span class="c1"># Set terrain on the map</span>
        <span class="n">terrain_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_id</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">}</span>

        <span class="c1"># Store terrain configuration in persistent state</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="n">terrain_config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_terrain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove terrain visualization from the map.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">basemap</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a basemap to the map.</span>

<span class="sd">        This method adds a basemap to the map. The basemap can be a string from</span>
<span class="sd">        predefined basemaps, an instance of xyzservices.TileProvider, or a key</span>
<span class="sd">        from the basemaps dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            basemap (str or TileProvider, optional): The basemap to add. Can be</span>
<span class="sd">                one of the predefined strings, an instance of xyzservices.TileProvider,</span>
<span class="sd">                or a key from the basemaps dictionary. Defaults to None, which adds</span>
<span class="sd">                the basemap widget.</span>
<span class="sd">            opacity (float, optional): The opacity of the basemap. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the basemap is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            attribution (str, optional): The attribution text to display for the</span>
<span class="sd">                basemap. If None, the attribution text is taken from the basemap</span>
<span class="sd">                or the TileProvider. Defaults to None.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">                RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the basemap is not one of the predefined strings,</span>
<span class="sd">                not an instance of TileProvider, and not a key from the basemaps dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">basemap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basemap_widget</span><span class="p">()</span>

        <span class="n">map_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;ROADMAP&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Maps&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SATELLITE&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TERRAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Terrain&quot;</span><span class="p">,</span>
            <span class="s2">&quot;HYBRID&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Hybrid&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span>
        <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">min_zoom</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">map_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_google_map</span><span class="p">(</span><span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">url</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">attribution</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
            <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">basemap</span> <span class="o">==</span> <span class="s2">&quot;amazon-satellite&quot;</span><span class="p">:</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="s2">&quot;us-east-1&quot;</span><span class="p">)</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;AWS_MAPS_API_KEY&quot;</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://maps.geo.</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com/v2/tiles/raster.satellite/</span><span class="se">{{</span><span class="s2">z</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">x</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">y</span><span class="se">}}</span><span class="s2">?key=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;© Amazon&quot;</span>
        <span class="k">elif</span> <span class="n">basemap</span> <span class="o">==</span> <span class="s2">&quot;USGS.Imagery&quot;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://basemap.nationalmap.gov/arcgis/services/USGSImageryOnly/MapServer/WMSServer?service=WMS&amp;request=GetMap&amp;layers=0&amp;styles=&amp;format=image</span><span class="si">%2F</span><span class="s2">png&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox={bbox-epsg-3857}&quot;</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;© USGS&quot;</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;USGS.Imagery&quot;</span>
            <span class="k">if</span> <span class="n">before_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">before_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_symbol_layer_id</span>
        <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
                <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="p">],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
            <span class="n">min_zoom</span><span class="o">=</span><span class="n">min_zoom</span><span class="p">,</span>
            <span class="c1"># tile_size=256,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;OpenStreetMap.Mapnik&quot;</span><span class="p">:</span>
                <span class="n">layer_name</span> <span class="o">=</span> <span class="s2">&quot;OpenStreetMap&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">layer_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">fit_bounds_options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GeoJSON layer to the map.</span>

<span class="sd">        This method adds a GeoJSON layer to the map. The GeoJSON data can be a</span>
<span class="sd">        URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it</span>
<span class="sd">        is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        a random name is generated.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | dict): The GeoJSON data. This can be a URL to a GeoJSON</span>
<span class="sd">                file or a GeoJSON dictionary.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. It can be one of</span>
<span class="sd">                the following: &#39;circle&#39;, &#39;fill&#39;, &#39;fill-extrusion&#39;, &#39;line&#39;, &#39;symbol&#39;,</span>
<span class="sd">                &#39;raster&#39;, &#39;background&#39;, &#39;heatmap&#39;, &#39;hillshade&#39;. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            fit_bounds_options (dict, optional): Additional options for fitting the bounds.</span>
<span class="sd">                See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions</span>
<span class="sd">                for more information.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://maplibre.org/maplibre-style-spec/layers/ for more info.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">geom_type</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
                <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
                    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>

        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;GeoJSON&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">}</span>
            <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;LineString&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="p">}</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
            <span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span> <span class="ow">and</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paint</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span> <span class="ow">in</span> <span class="n">paint</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a vector layer to the map.</span>

<span class="sd">        This method adds a vector layer to the map. The vector data can be a</span>
<span class="sd">        URL or local file path to a vector file. If a name is provided, it</span>
<span class="sd">        is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        a random name is generated.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | dict): The vector data. This can be a URL or local file</span>
<span class="sd">                path to a vector file.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
            <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a vector layer to the map.</span>

<span class="sd">        This method adds a GeoDataFrame to the map as a vector layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf (gpd.GeoDataFrame): The GeoDataFrame to add to the map.</span>
<span class="sd">            layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">                is inferred from the GeoJSON data.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a GeoDataFrame.&quot;</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
            <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Tile Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a TileLayer to the map.</span>

<span class="sd">        This method adds a TileLayer to the map. The TileLayer is created from</span>
<span class="sd">            the specified URL, and it is added to the map with the specified</span>
<span class="sd">            name, attribution, visibility, and tile size.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the tile layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. Defaults to &#39;</span>
<span class="sd">                Tile Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">                Defaults to 256.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the RasterTileSource class.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
            <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_vector_tile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
        <span class="n">source_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">add_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a vector tile layer to the map.</span>

<span class="sd">        This method adds a vector tile layer to the map using a vector tile source.</span>
<span class="sd">        Vector tiles are a data format for efficiently storing and transmitting</span>
<span class="sd">        vector map data.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL template for the vector tiles. Should contain {z}, {x},</span>
<span class="sd">                and {y} placeholders for tile coordinates.</span>
<span class="sd">            layer_id (str): The ID of the layer within the vector tile source.</span>
<span class="sd">            layer_type (str, optional): The type of layer to create. Can be &#39;fill&#39;,</span>
<span class="sd">                &#39;line&#39;, &#39;symbol&#39;, &#39;circle&#39;, etc. Defaults to &#39;fill&#39;.</span>
<span class="sd">            source_layer (str, optional): The name of the source layer within the</span>
<span class="sd">                vector tiles. If None, uses layer_id.</span>
<span class="sd">            name (str, optional): The name to use for the layer. If None, uses layer_id.</span>
<span class="sd">            paint (dict, optional): Paint properties for the layer. If None, uses</span>
<span class="sd">                default styling based on layer_type.</span>
<span class="sd">            layout (dict, optional): Layout properties for the layer.</span>
<span class="sd">            filter (dict, optional): Filter expression for the layer.</span>
<span class="sd">            minzoom (int, optional): Minimum zoom level for the layer.</span>
<span class="sd">            maxzoom (int, optional): Maximum zoom level for the layer.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            add_popup (bool, optional): Whether to add a popup to the layer. Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which the</span>
<span class="sd">                new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments passed to the</span>
<span class="sd">                vector tile source.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with</span>
<span class="sd">                the same name. Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments passed to the Layer class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; m = Map()</span>
<span class="sd">            &gt;&gt;&gt; m.add_vector_tile(</span>
<span class="sd">            ...     url=&quot;https://api.maptiler.com/tiles/contours/tiles.json?key={api_key}&quot;,</span>
<span class="sd">            ...     layer_id=&quot;contour-lines&quot;,</span>
<span class="sd">            ...     layer_type=&quot;line&quot;,</span>
<span class="sd">            ...     source_layer=&quot;contour&quot;,</span>
<span class="sd">            ...     paint={&quot;line-color&quot;: &quot;#ff69b4&quot;, &quot;line-width&quot;: 1}</span>
<span class="sd">            ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer_id</span>

        <span class="k">if</span> <span class="n">source_layer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">source_layer</span> <span class="o">=</span> <span class="n">layer_id</span>

        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Create vector tile source</span>
        <span class="n">vector_source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># If URL doesn&#39;t contain tiles.json, assume it&#39;s a direct tile URL template</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;tiles.json&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;</span><span class="si">{z}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
            <span class="n">vector_source</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">url</span><span class="p">],</span>
                <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">vector_source</span><span class="p">)</span>

        <span class="c1"># Set default paint properties based on layer type</span>
        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                    <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;text-halo-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;text-halo-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="c1"># Build layer configuration</span>
        <span class="n">layer_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer_type</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">vector_source</span><span class="p">,</span>
            <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="n">source_layer</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>
        <span class="k">if</span> <span class="n">layout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layout</span>
        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
        <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>

        <span class="c1"># Add any additional kwargs</span>
        <span class="n">layer_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
            <span class="n">layer_config</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">add_popup</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">layers</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;WMS Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a WMS layer to the map.</span>

<span class="sd">        This method adds a WMS layer to the map. The WMS  is created from</span>
<span class="sd">            the specified URL, and it is added to the map with the specified</span>
<span class="sd">            name, attribution, visibility, and tile size.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the tile layer.</span>
<span class="sd">            layers (str): The layers to include in the WMS request.</span>
<span class="sd">            format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">                &#39;WMS Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">                Defaults to 256.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the RasterTileSource class.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">?service=WMS&amp;request=GetMap&amp;layers=</span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&amp;styles=&amp;format=</span><span class="si">{</span><span class="nb">format</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">%2F</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox=</span><span class="se">{{</span><span class="s2">bbox-epsg-3857</span><span class="se">}}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_nwi_basemap</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;NWI Wetlands&quot;</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;USFWS&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a NWI Wetlands basemap to the map.</span>

<span class="sd">        This method adds a NWI Wetlands basemap to the map. The NWI Wetlands basemap is created from</span>
<span class="sd">            the specified URL, and it is added to the map with the specified</span>
<span class="sd">            name, attribution, visibility, and tile size.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">                &#39;NWI Wetlands&#39;.</span>
<span class="sd">            format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">                Defaults to 256.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">                See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://fwspublicservices.wim.usgs.gov/wetlandsmapservice/services/Wetlands/MapServer/WMSServer&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_wms_layer</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asset_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Google Earth Engine&quot;</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ee_initialize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Google Earth Engine tile layer to the map based on the tile layer URL from</span>
<span class="sd">            https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (object): The Earth Engine object to display.</span>
<span class="sd">            vis_params (dict): Visualization parameters. For example, {&#39;min&#39;: 0, &#39;max&#39;: 100}.</span>
<span class="sd">            name (str, optional): The name of the tile layer. If not provided,</span>
<span class="sd">                the asset ID will be used. Default is None.</span>
<span class="sd">            asset_id (str): The ID of the Earth Engine asset.</span>
<span class="sd">            opacity (float, optional): The opacity of the tile layer (0 to 1).</span>
<span class="sd">                Default is 1.</span>
<span class="sd">            attribution (str, optional): The attribution text to be displayed.</span>
<span class="sd">                Default is &quot;Google Earth Engine&quot;.</span>
<span class="sd">            visible (bool, optional): Whether the tile layer should be shown on</span>
<span class="sd">                the map. Default is True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            ee_initialize (bool, optional): Whether to initialize the Earth Engine</span>
<span class="sd">                account. Default is False.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">                `add_tile_layer` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
                <span class="s2">&quot;https://raw.githubusercontent.com/opengeos/ee-tile-layers/main/datasets.tsv&quot;</span><span class="p">,</span>
                <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">asset_id</span>

            <span class="k">if</span> <span class="n">asset_id</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset_id</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                    <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">asset_id</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ee_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">get_ee_tile_url</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">ee_object</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                    <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">geemap</span>
                    <span class="kn">from</span> <span class="nn">geemap.ee_tile_layers</span> <span class="kn">import</span> <span class="n">_get_tile_url_format</span>

                    <span class="k">if</span> <span class="n">ee_initialize</span><span class="p">:</span>
                        <span class="n">geemap</span><span class="o">.</span><span class="n">ee_initialize</span><span class="p">()</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">_get_tile_url_format</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">name</span><span class="p">,</span>
                        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;Please install the `geemap` package to use the `add_ee_layer` function.&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span>

    <span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</span>

<span class="sd">        This method adds a COG TileLayer to the map. The COG TileLayer is created</span>
<span class="sd">        from the specified URL, and it is added to the map with the specified name,</span>
<span class="sd">        attribution, opacity, visibility, and bands.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the COG tile layer.</span>
<span class="sd">            name (str, optional): The name to use for the layer. If None, a</span>
<span class="sd">                random name is generated. Defaults to None.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">                Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            bands (list, optional): A list of bands to use for the layer.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            nodata (float, optional): The nodata value to use for the layer.</span>
<span class="sd">            titiler_endpoint (str, optional): The endpoint of the titiler service.</span>
<span class="sd">                Defaults to &quot;https://giswqs-titiler-endpoint.hf.space&quot;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of</span>
<span class="sd">                the map to fit the bounds of the layer. Defaults to True.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">                nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                    colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">                and https://cogeotiff.github.io/rio-tiler/colormap/.</span>
<span class="sd">                    To select a certain bands, use bidx=[1, 2, 3]. apply a</span>
<span class="sd">                        rescaling to multiple bands, use something like</span>
<span class="sd">                        `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;COG_&quot;</span> <span class="o">+</span> <span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;vmin&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s2">&quot;vmax&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;vmin&quot;</span><span class="p">)</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;vmax&quot;</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rescale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">vmin</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">vmax</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_tile</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">tile_url</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">collection</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">assets</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a STAC TileLayer to the map.</span>

<span class="sd">        This method adds a STAC TileLayer to the map. The STAC TileLayer is</span>
<span class="sd">        created from the specified URL, collection, item, assets, and bands, and</span>
<span class="sd">        it is added to the map with the specified name, attribution, opacity,</span>
<span class="sd">        visibility, and fit bounds.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str, optional): HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            collection (str, optional): The Microsoft Planetary Computer STAC</span>
<span class="sd">                collection ID, e.g., landsat-8-c2-l2. Defaults to None.</span>
<span class="sd">            item (str, optional): The Microsoft Planetary Computer STAC item ID, e.g.,</span>
<span class="sd">                LC08_L2SP_047027_20201204_02_T1. Defaults to None.</span>
<span class="sd">            assets (str | list, optional): The Microsoft Planetary Computer STAC asset ID,</span>
<span class="sd">                e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">            bands (list, optional): A list of band names, e.g.,</span>
<span class="sd">                [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">            nodata (int | float, optional): The nodata value to use for the layer.</span>
<span class="sd">            titiler_endpoint (str, optional): TiTiler endpoint, e.g., &quot;https://giswqs-titiler-endpoint.hf.space&quot;,</span>
<span class="sd">                &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;,</span>
<span class="sd">                &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">            name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">            visible (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">                be on by default. Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): A flag indicating whether the map should</span>
<span class="sd">                be zoomed to the layer extent. Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">                nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">                and https://cogeotiff.github.io/rio-tiler/colormap/. To select</span>
<span class="sd">                a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple</span>
<span class="sd">                bands, use something like `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_tile</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">collection</span><span class="p">,</span>
            <span class="n">item</span><span class="p">,</span>
            <span class="n">assets</span><span class="p">,</span>
            <span class="n">bands</span><span class="p">,</span>
            <span class="n">titiler_endpoint</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">tile_url</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;cors_all&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">            If you are using this function in JupyterHub on a remote server</span>
<span class="sd">            (e.g., Binder, Microsoft Planetary Computer) and if the raster</span>
<span class="sd">            does not render properly, try installing jupyter-server-proxy using</span>
<span class="sd">            `pip install jupyter-server-proxy`, then running the following code</span>
<span class="sd">            before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">            import os</span>
<span class="sd">            os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            source (str): The path to the GeoTIFF file or the URL of the Cloud</span>
<span class="sd">                Optimized GeoTIFF.</span>
<span class="sd">            indexes (int, optional): The band(s) to use. Band indexing starts</span>
<span class="sd">                at 1. Defaults to None.</span>
<span class="sd">            colormap (str, optional): The name of the colormap from `matplotlib`</span>
<span class="sd">                to use when plotting a single band.</span>
<span class="sd">                See https://matplotlib.org/stable/gallery/color/colormap_reference.html.</span>
<span class="sd">                Default is greyscale.</span>
<span class="sd">            vmin (float, optional): The minimum value to use when colormapping</span>
<span class="sd">                the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            vmax (float, optional): The maximum value to use when colormapping</span>
<span class="sd">                the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            nodata (float, optional): The value from the band to use to interpret</span>
<span class="sd">                as not valid data. Defaults to None.</span>
<span class="sd">            name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">            before_id (str, optional): The layer id to insert the layer before. Defaults to None.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to zoom to the extent of the</span>
<span class="sd">                layer. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            array_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">                `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">            client_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">                localtileserver.TileClient. Defaults to { &quot;cors_all&quot;: False }.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">                `add_tile_layer` method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

        <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">fit_bounds</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;layer_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;layer_name&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_local_tile_url</span><span class="p">(</span>
            <span class="n">source</span><span class="p">,</span>
            <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
            <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">client_args</span><span class="o">=</span><span class="n">client_args</span><span class="p">,</span>
            <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
        <span class="c1"># [minx, miny, maxx, maxy]</span>
        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Awesome Map&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="n">replace_key</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">remove_port</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the map to an HTML page.</span>

<span class="sd">        Args:</span>
<span class="sd">            output (str, optional): The output HTML file. If None, the HTML content</span>
<span class="sd">                is returned as a string. Defaults</span>
<span class="sd">            title (str, optional): The title of the HTML page. Defaults to &#39;My Awesome Map&#39;.</span>
<span class="sd">            width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">            height (str, optional): The height of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">            replace_key (bool, optional): Whether to replace the API key in the HTML.</span>
<span class="sd">                If True, the API key is replaced with the public API key.</span>
<span class="sd">                The API key is read from the environment variable `MAPTILER_KEY`.</span>
<span class="sd">                The public API key is read from the environment variable `MAPTILER_KEY_PUBLIC`.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            remove_port (bool, optional): Whether to remove the port number from the HTML.</span>
<span class="sd">            preview (bool, optional): Whether to preview the HTML file in a web browser.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            overwrite (bool, optional): Whether to overwrite the output file if it already exists.</span>
<span class="sd">            **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">                `maplibre.ipywidget.MapWidget.to_html()` method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The HTML content of the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">height</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;style&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">height</span><span class="p">):</span>
            <span class="n">style_before</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
            <span class="n">style_after</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;html, body {height: 100%; margin: 0; padding: 0;} #pymaplibregl {width: 100%; height: &quot;&quot;&quot;</span>
                <span class="o">+</span> <span class="n">height</span>
                <span class="o">+</span> <span class="s2">&quot;&quot;&quot;;}</span><span class="se">\n</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
            <span class="p">)</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">style_before</span><span class="p">,</span> <span class="n">style_after</span><span class="p">)</span>

            <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;width: 100%; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">div_after</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

            <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">replace_key</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">key_before</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
            <span class="n">key_after</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY_PUBLIC&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key_after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">key_before</span><span class="p">,</span> <span class="n">key_after</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">remove_port</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">remove_port_from_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output</span><span class="p">:</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
                <span class="kn">import</span> <span class="nn">glob</span>

                <span class="n">num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;*.html&quot;</span><span class="p">)))</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">preview</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">webbrowser</span>

                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the paint property of a layer.</span>

<span class="sd">        This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            prop (str): The paint property to set.</span>
<span class="sd">            value (Any): The value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">prop</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_layout_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the layout property of a layer.</span>

<span class="sd">        This method sets the layout property of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            prop (str): The layout property to set.</span>
<span class="sd">            value (Any): The value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the color of a layer.</span>

<span class="sd">        This method sets the color of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            color (str): The color value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">color</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

    <span class="k">def</span> <span class="nf">set_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the opacity of a layer.</span>

<span class="sd">        This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            opacity (float): The opacity value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">layer_type</span> <span class="o">!=</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
                    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
                        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="s2">&quot;icon-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
                    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="s2">&quot;text-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layer_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="n">Layer</span><span class="p">):</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
                <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">if</span> <span class="n">layer_type</span> <span class="o">!=</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="c1"># if layer_type == &quot;circle&quot;:</span>
            <span class="c1">#     super().set_paint_property(name, &quot;circle-stroke-opacity&quot;, opacity)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;icon-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;text-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the visibility of a layer.</span>

<span class="sd">        This method sets the visibility of the specified layer to the specified value.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>
<span class="sd">            visible (bool): The visibility value to set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">visible</span>

    <span class="k">def</span> <span class="nf">layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

        <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">style_layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a style layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The is of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">layer_ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">visibility</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">extract_rgb</span><span class="p">(</span><span class="n">rgba_string</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">re</span>

            <span class="c1"># Extracting the RGB values using regex</span>
            <span class="n">rgb_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">rgba_string</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">rgb_tuple</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
            <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

        <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>

            <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
                <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">visibility</span>
            <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">opacity</span>

            <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">color</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
                <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span>
                <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span> <span class="k">if</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;none&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
                <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span>
            <span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">_basemap_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ipywidgets.Widget: The layer widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span>
        <span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="n">tile</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
            <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]],</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
            <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Basemap&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;600px&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">old</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;old&quot;</span><span class="p">]</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>

            <span class="n">tile</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
                <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]],</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">tile</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
                <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

            <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
            <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>

        <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hbox</span>

    <span class="k">def</span> <span class="nf">add_pmtiles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">exclude_mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;PMTiles&quot;</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a PMTiles layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the PMTiles file.</span>
<span class="sd">            style (dict, optional): The CSS style to apply to the layer. Defaults to None.</span>
<span class="sd">                See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</span>
<span class="sd">            visible (bool, optional): Whether the layer should be shown initially. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            exclude_mask (bool, optional): Whether to exclude the mask layer. Defaults to False.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the layer. Defaults to True.</span>
<span class="sd">            properties (dict, optional): The properties to use for the tooltips. Defaults to None.</span>
<span class="sd">            template (str, optional): The template to use for the tooltips. Defaults to None.</span>
<span class="sd">            attribution (str, optional): The attribution to use for the layer. Defaults to &#39;PMTiles&#39;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to zoom to the layer extent. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the PMTilesLayer constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>

            <span class="n">pmtiles_source</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;pmtiles://</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="n">attribution</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_style</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">style</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">pmtiles_source</span><span class="p">)</span>

            <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_hyphens_in_keys</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]:</span>

                <span class="k">if</span> <span class="n">exclude_mask</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source_layer&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mask&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">])</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">opacity</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">tooltip</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_tooltip</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_metadata</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">marker</span><span class="p">:</span> <span class="n">Marker</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lng_lat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">popup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a marker to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            marker (Marker, optional): A Marker object. Defaults to None.</span>
<span class="sd">            lng_lat (List[Union[float, float]]): A list of two floats</span>
<span class="sd">                representing the longitude and latitude of the marker.</span>
<span class="sd">            popup (Optional[str], optional): The text to display in a popup when</span>
<span class="sd">                the marker is clicked. Defaults to None.</span>
<span class="sd">            options (Optional[Dict], optional): A dictionary of options to</span>
<span class="sd">                customize the marker. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">lng_lat</span><span class="o">=</span><span class="n">lng_lat</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fly_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">speed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">essential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes the map fly to a specified location.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (float): The longitude of the location to fly to.</span>
<span class="sd">            lat (float): The latitude of the location to fly to.</span>
<span class="sd">            zoom (Optional[float], optional): The zoom level to use when flying</span>
<span class="sd">                to the location. Defaults to None.</span>
<span class="sd">            speed (Optional[float], optional): The speed of the fly animation.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            essential (bool, optional): Whether the flyTo animation is considered</span>
<span class="sd">                essential and not affected by prefers-reduced-motion. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the flyTo function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span>
        <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zoom</span>
        <span class="k">if</span> <span class="n">speed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed</span>
        <span class="k">if</span> <span class="n">essential</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;essential&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">essential</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;flyTo&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads an image from a URL or a local file path and returns a dictionary</span>
<span class="sd">            with the image data.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (str): The URL or local file path to the image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Union[int, List[int]]]: A dictionary with the image width,</span>
<span class="sd">                height, and flattened data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the image argument is not a string representing a URL</span>
<span class="sd">                or a local file path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">os</span>

        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
                        <span class="n">image</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The image file does not exist.&quot;</span><span class="p">)</span>

                <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
                <span class="c1"># Convert image to numpy array and then flatten it</span>
                <span class="n">img_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">img_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">img_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="c1"># Split the grayscale and alpha channels</span>
                    <span class="n">gray_channel</span> <span class="o">=</span> <span class="n">img_data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">alpha_channel</span> <span class="o">=</span> <span class="n">img_data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>

                    <span class="c1"># Create the R, G, and B channels by duplicating the grayscale channel</span>
                    <span class="n">R_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>
                    <span class="n">G_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>
                    <span class="n">B_channel</span> <span class="o">=</span> <span class="n">gray_channel</span>

                    <span class="c1"># Combine the channels into an RGBA image</span>
                    <span class="n">RGBA_image_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">R_channel</span><span class="p">,</span> <span class="n">G_channel</span><span class="p">,</span> <span class="n">B_channel</span><span class="p">,</span> <span class="n">alpha_channel</span><span class="p">),</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span>
                    <span class="p">)</span>

                    <span class="c1"># Update img_data to the new RGBA image data</span>
                    <span class="n">img_data</span> <span class="o">=</span> <span class="n">RGBA_image_data</span>

                <span class="n">flat_img_data</span> <span class="o">=</span> <span class="n">img_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

                <span class="c1"># Create the image dictionary with the flattened data</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">flat_img_data</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>  <span class="c1"># Convert to list if necessary</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="n">image_dict</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The image must be a URL or a local file path.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The layer ID of the image.</span>
<span class="sd">            image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">                the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">                array representing the image.</span>
<span class="sd">            width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">            height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">            coordinates (List[float], optional): The longitude and latitude</span>
<span class="sd">                coordinates to place the image.</span>
<span class="sd">            position (str, optional): The position of the image. Defaults to None.</span>
<span class="sd">                Can be one of &#39;top-right&#39;, &#39;top-left&#39;, &#39;bottom-right&#39;, &#39;bottom-left&#39;.</span>
<span class="sd">            icon_size (float, optional): The size of the icon. Defaults to 1.0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>

        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="n">image</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The image must be a URL, a local file path, or a numpy array.&quot;</span>
                <span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;addImage&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">image_dict</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

                <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
                                <span class="p">},</span>
                            <span class="p">}</span>
                        <span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">}</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;image_point&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_points&quot;</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;symbol&quot;</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_point&quot;</span>
                <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon_size</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_image_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">header_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The layer ID of the image.</span>
<span class="sd">            image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">                the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">                array representing the image.</span>
<span class="sd">            width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">            height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            header_height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
            <span class="n">html</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">header_height</span><span class="o">=</span><span class="n">header_height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_symbol</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
        <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">symbol_placement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Symbols&quot;</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a symbol to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            source (Union[str, Dict]): The source of the symbol.</span>
<span class="sd">            image (str): The URL or local file path to the image. Default to the arrow image.</span>
<span class="sd">                at https://assets.gishub.org/images/right-arrow.png.</span>
<span class="sd">                Find more icons from https://www.veryicon.com.</span>
<span class="sd">            icon_size (int, optional): The size of the symbol. Defaults to 1.</span>
<span class="sd">            symbol_placement (str, optional): The placement of the symbol. Defaults to &quot;line&quot;.</span>
<span class="sd">            minzoom (Optional[float], optional): The minimum zoom level for the symbol. Defaults to None.</span>
<span class="sd">            maxzoom (Optional[float], optional): The maximum zoom level for the symbol. Defaults to None.</span>
<span class="sd">            filter (Optional[Any], optional): A filter to apply to the symbol. Defaults to None.</span>
<span class="sd">            name (Optional[str], optional): The name of the symbol layer. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to pass to the layer layout.</span>
<span class="sd">                For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">image_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">image_id</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">source</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
            <span class="k">elif</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="n">source</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geojson</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
                <span class="n">geojson_source</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">}</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">geojson_source</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
            <span class="n">geojson_source</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">geojson_source</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The source must be a string or a dictionary.&quot;</span><span class="p">)</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_name</span><span class="p">,</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;icon-image&quot;</span><span class="p">:</span> <span class="n">image_id</span><span class="p">,</span>
                <span class="s2">&quot;icon-size&quot;</span><span class="p">:</span> <span class="n">icon_size</span><span class="p">,</span>
                <span class="s2">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="n">symbol_placement</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
        <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>
        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Arrow&quot;</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an arrow symbol to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            source (str): The source layer to which the arrow symbol will be added.</span>
<span class="sd">            image (Optional[str], optional): The URL of the arrow image.</span>
<span class="sd">                Defaults to &quot;https://assets.gishub.org/images/right-arrow.png&quot;.</span>
<span class="sd">                Find more icons from https://www.veryicon.com.</span>
<span class="sd">            icon_size (int, optional): The size of the icon. Defaults to 0.1.</span>
<span class="sd">            minzoom (Optional[float], optional): The minimum zoom level at which</span>
<span class="sd">                the arrow symbol will be visible. Defaults to 19.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_symbol method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="s2">&quot;https://assets.gishub.org/images/right-arrow.png&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span>
            <span class="n">source</span><span class="p">,</span>
            <span class="n">image</span><span class="p">,</span>
            <span class="n">icon_size</span><span class="p">,</span>
            <span class="n">minzoom</span><span class="o">=</span><span class="n">minzoom</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
        <span class="n">scrolling</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the map to a Streamlit component.</span>

<span class="sd">        This function converts the map to a Streamlit component by encoding the</span>
<span class="sd">        HTML representation of the map as base64 and embedding it in an iframe.</span>
<span class="sd">        The width, height, and scrolling parameters control the appearance of</span>
<span class="sd">        the iframe.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (Optional[int]): The width of the iframe. If None, the width</span>
<span class="sd">                will be determined by Streamlit.</span>
<span class="sd">            height (Optional[int]): The height of the iframe. Default is 600.</span>
<span class="sd">            scrolling (Optional[bool]): Whether the iframe should be scrollable.</span>
<span class="sd">                Default is False.</span>
<span class="sd">            **kwargs (Any): Additional arguments to pass to the Streamlit iframe</span>
<span class="sd">                function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The Streamlit component.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there is an error in creating the Streamlit component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">base64</span>

            <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>  <span class="c1"># pylint: disable=E0401</span>

            <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">raw_html</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">iframe</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;data:text/html;base64,</span><span class="si">{</span><span class="n">raw_html</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rotate the map to a specified bearing.</span>

<span class="sd">        This function rotates the map to a specified bearing. The bearing is specified in degrees</span>
<span class="sd">        counter-clockwise from true north. If the bearing is not specified, the map will rotate to</span>
<span class="sd">        true north. Additional options and keyword arguments can be provided to control the rotation.</span>
<span class="sd">        For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</span>

<span class="sd">        Args:</span>
<span class="sd">            bearing (float): The bearing to rotate to, in degrees counter-clockwise from true north.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the rotation. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the rotation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;rotateTo&quot;</span><span class="p">,</span> <span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a file uploader widget to upload a GeoJSON file. When a file is</span>
<span class="sd">        uploaded, it is written to a temporary file and added to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            widgets.FileUpload: The file uploader widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
            <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span>  <span class="c1"># Accept GeoJSON files</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Only single file upload</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Open GeoJSON&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="n">temp_file</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">uploader</span>

    <span class="k">def</span> <span class="nf">pan_to</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lnglat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pans the map to a specified location.</span>

<span class="sd">        This function pans the map to the specified longitude and latitude coordinates.</span>
<span class="sd">        Additional options and keyword arguments can be provided to control the panning.</span>
<span class="sd">        For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</span>

<span class="sd">        Args:</span>
<span class="sd">            lnglat (List[float, float]): The longitude and latitude coordinates to pan to.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the panning. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the panning.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;panTo&quot;</span><span class="p">,</span> <span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_pitch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the pitch of the map.</span>

<span class="sd">        This function sets the pitch of the map to the specified value. The pitch is the</span>
<span class="sd">        angle of the camera measured in degrees where 0 is looking straight down, and 60 is</span>
<span class="sd">        looking towards the horizon. Additional keyword arguments can be provided to control</span>
<span class="sd">        the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</span>

<span class="sd">        Args:</span>
<span class="sd">            pitch (float): The pitch value to set.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the pitch.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setPitch&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">jump_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Jumps the map to a specified location.</span>

<span class="sd">        This function jumps the map to the specified location with the specified options.</span>
<span class="sd">        Additional keyword arguments can be provided to control the jump. For more information,</span>
<span class="sd">        see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</span>

<span class="sd">        Args:</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the jump. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the jump.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;jumpTo&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_3d_terrain_style</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">satellite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the 3D terrain style for the map.</span>

<span class="sd">        This function generates a style dictionary for the map that includes 3D terrain features.</span>
<span class="sd">        The terrain exaggeration and API key can be specified. If the API key is not provided,</span>
<span class="sd">        it will be retrieved using the specified token.</span>

<span class="sd">        Args:</span>
<span class="sd">            exaggeration (float, optional): The terrain exaggeration. Defaults to 1.</span>
<span class="sd">            token (str, optional): The token to use to retrieve the API key. Defaults to &quot;MAPTILER_KEY&quot;.</span>
<span class="sd">            api_key (Optional[str], optional): The API key. If not provided, it will be retrieved using the token.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The style dictionary for the map.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the API key is not provided and cannot be retrieved using the token.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An API key is required to use the 3D terrain feature.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;dark-matter&quot;</span>

        <span class="n">layers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">satellite</span><span class="p">:</span>
            <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">})</span>

        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;hills&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">,</span>
                <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;visibility&quot;</span><span class="p">:</span> <span class="s2">&quot;visible&quot;</span><span class="p">},</span>
                <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hillshade-shadow-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#473B24&quot;</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;https://api.maptiler.com/tiles/satellite-v2/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.jpg?key=&quot;</span>
                        <span class="o">+</span> <span class="n">api_key</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                    <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="s2">&quot;&amp;copy; MapTiler&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="n">layers</span><span class="p">,</span>
            <span class="s2">&quot;terrain&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;terrainSource&quot;</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">style</span>

    <span class="k">def</span> <span class="nf">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the style of the map.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict: The style of the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">)</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">return</span> <span class="n">style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get_style_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the names of the basemap layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The names of the basemap layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">return_ids</span><span class="p">:</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                    <span class="n">ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

                <span class="k">return</span> <span class="n">ids</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layers</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_style_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for a style layer in the map&#39;s current style by its ID and returns it if found.</span>

<span class="sd">        Args:</span>
<span class="sd">            id (str): The ID of the style layer to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict]: The style layer as a dictionary if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">zoom_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zooms the map to a specified zoom level.</span>

<span class="sd">        This function zooms the map to the specified zoom level. Additional options and keyword</span>
<span class="sd">        arguments can be provided to control the zoom. For more information, see</span>
<span class="sd">        https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (float): The zoom level to zoom to.</span>
<span class="sd">            options (Dict[str, Any], optional): Additional options to control the zoom. Defaults to {}.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to control the zoom.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;zoomTo&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_first_symbol_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the first symbol layer in the map&#39;s current style.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict]: The first symbol layer as a dictionary if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">first_symbol_layer_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the ID of the first symbol layer in the map&#39;s current style.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_first_symbol_layer</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">bold</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">padding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">border_radius</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds text to the map with customizable styling.</span>

<span class="sd">        This method allows adding a text widget to the map with various styling options such as font size, color,</span>
<span class="sd">        background color, and more. The text&#39;s appearance can be further customized using additional CSS properties</span>
<span class="sd">        passed through kwargs.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The text to add to the map.</span>
<span class="sd">            fontsize (int, optional): The font size of the text. Defaults to 20.</span>
<span class="sd">            fontcolor (str, optional): The color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">            bold (bool, optional): If True, the text will be bold. Defaults to False.</span>
<span class="sd">            padding (str, optional): The padding around the text. Defaults to &quot;5px&quot;.</span>
<span class="sd">            bg_color (str, optional): The background color of the text widget. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            border_radius (str, optional): The border radius of the text widget. Defaults to &quot;5px&quot;.</span>
<span class="sd">            position (str, optional): The position of the text widget on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            **kwargs (Any): Additional CSS properties to apply to the text widget.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">InfoBoxControl</span>

        <span class="k">if</span> <span class="n">bg_color</span> <span class="o">==</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">and</span> <span class="s2">&quot;box-shadow&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;box-shadow&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

        <span class="n">css_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">; padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">; border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">css_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">;&quot;</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">InfoBoxControl</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_text_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-format-text&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds text to the sidebar.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The text to add to the sidebar.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">widget_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">widget_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">widget_args</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add HTML content to the map.</span>

<span class="sd">        This method allows for the addition of arbitrary HTML content to the map, which can be used to display</span>
<span class="sd">        custom information or controls. The background color and position of the HTML content can be customized.</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str): The HTML content to add.</span>
<span class="sd">            bg_color (str, optional): The background color of the HTML content. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            position (str, optional): The position of the HTML content on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">                &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_html_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-language-html5&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;HTML&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add HTML content to the map.</span>

<span class="sd">        This method allows for the addition of arbitrary HTML content to the sidebar, which can be used to display</span>
<span class="sd">        custom information or controls.</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str): The HTML content to add.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
        <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a legend to the map.</span>

<span class="sd">        This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">        labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">            legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">                If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">            labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">            colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">            fontsize (int, optional): The font size of the legend text. Defaults to 15.</span>
<span class="sd">            bg_color (str, optional): The background color of the legend. Defaults to &quot;white&quot;.</span>
<span class="sd">                To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">                To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">            position (str, optional): The position of the legend on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">                &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">            shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">importlib.resources</span>

        <span class="kn">from</span> <span class="nn">.legends</span> <span class="kn">import</span> <span class="n">builtin_legends</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">importlib</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;leafmap&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;leafmap.py&quot;</span><span class="p">)</span>
        <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend.html&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend template does not exist.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys must be a list.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">,</span> <span class="s2">&quot;Four&quot;</span><span class="p">,</span> <span class="s2">&quot;etc&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list of tuples.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys and values must be the same length.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend dict must be a dictionary.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The position must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span>
            <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;      &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">color</span><span class="p">,</span> <span class="n">key</span>
            <span class="p">)</span>
            <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;width: 30px&quot;</span><span class="p">,</span> <span class="s2">&quot;width: 16px&quot;</span><span class="p">)</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;border: 1px solid #999;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;border-radius: 50%;</span><span class="se">\n</span><span class="s2">      border: 1px solid #999;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;height: 16px&quot;</span><span class="p">,</span> <span class="s2">&quot;height: 3px&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span>
            <span class="n">legend_text</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
            <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_legend_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
        <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-view-sequential&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a legend to the map.</span>

<span class="sd">        This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">        labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">            legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">                If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">            labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">            colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">            builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">            shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">            add_header (bool, optional): If True, adds a header to the legend. Defaults to True.</span>
<span class="sd">            widget_icon (str, optional): The icon for the legend widget. Defaults to &quot;mdi-view-sequential&quot;.</span>
<span class="sd">            close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str, optional): The label for the legend widget. Defaults to &quot;Legend&quot;.</span>
<span class="sd">            background_color (str, optional): The background color of the legend widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            height (str, optional): The height of the legend widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool, optional): If True, the legend widget is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.map_widgets</span> <span class="kn">import</span> <span class="n">Legend</span>

        <span class="n">legend</span> <span class="o">=</span> <span class="n">Legend</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">,</span>
            <span class="n">keys</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">builtin_legend</span><span class="o">=</span><span class="n">builtin_legend</span><span class="p">,</span>
            <span class="n">shape_type</span><span class="o">=</span><span class="n">shape_type</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">legend</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="n">colorbar_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a colorbar to the map.</span>

<span class="sd">        This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">        the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">        label, and orientation.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">            height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">            vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">            vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">            palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">            vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">            cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">            discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">            label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">            label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">            label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">            tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">            bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">            orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">            dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">            transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">            position (str): Position of the colorbar on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">            colorbar_args (Optional[Dict[str, Any]]): Additional keyword arguments passed to the colorbar.</span>
<span class="sd">                Can be colorbar_args={&quot;ticks&quot;: list(range(0, 101, 10))}. Defaults to None.</span>
<span class="sd">            **kwargs: Additional keyword arguments passed to matplotlib.pyplot.savefig().</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Path to the generated colorbar image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
            <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

        <span class="k">if</span> <span class="n">colorbar_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colorbar_args</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="p">,</span>
            <span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="p">,</span>
            <span class="n">palette</span><span class="p">,</span>
            <span class="n">vis_params</span><span class="p">,</span>
            <span class="n">cmap</span><span class="p">,</span>
            <span class="n">discrete</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">label_size</span><span class="p">,</span>
            <span class="n">label_weight</span><span class="p">,</span>
            <span class="n">tick_size</span><span class="p">,</span>
            <span class="n">bg_color</span><span class="p">,</span>
            <span class="n">orientation</span><span class="p">,</span>
            <span class="n">dpi</span><span class="p">,</span>
            <span class="n">transparent</span><span class="p">,</span>
            <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">colorbar_args</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_colorbar_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-format-color-fill&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">header_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Colorbar&quot;</span><span class="p">,</span>
        <span class="n">header_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">header_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a colorbar to the sidebar.</span>

<span class="sd">        This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">        the Map.add_html_to_sidebar() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">        label, and orientation.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">            height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">            vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">            vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">            palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">            vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">            cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">            discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">            label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">            label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">            label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">            tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">            bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">            orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">            dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">            transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">            add_header (bool): If True, adds a header to the colorbar. Defaults to True.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Path to the generated colorbar image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
            <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

        <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="p">,</span>
            <span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="p">,</span>
            <span class="n">palette</span><span class="p">,</span>
            <span class="n">vis_params</span><span class="p">,</span>
            <span class="n">cmap</span><span class="p">,</span>
            <span class="n">discrete</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">label_size</span><span class="p">,</span>
            <span class="n">label_weight</span><span class="p">,</span>
            <span class="n">tick_size</span><span class="p">,</span>
            <span class="n">bg_color</span><span class="p">,</span>
            <span class="n">orientation</span><span class="p">,</span>
            <span class="n">dpi</span><span class="p">,</span>
            <span class="n">transparent</span><span class="p">,</span>
            <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
            <span class="n">html</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">header_label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">header_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">header_height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="n">css_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="n">bg_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a layer control to the map.</span>

<span class="sd">        This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility</span>
<span class="sd">        of specified layers. The appearance and functionality of the layer control can be customized with parameters</span>
<span class="sd">        such as theme, CSS styling, and position on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_ids (Optional[List[str]]): A list of layer IDs to include in the control. If None, all layers</span>
<span class="sd">                in the map will be included. Defaults to None.</span>
<span class="sd">            theme (str): The theme for the layer switcher control. Can be &quot;default&quot; or other custom themes. Defaults to &quot;default&quot;.</span>
<span class="sd">            css_text (Optional[str]): Custom CSS text for styling the layer control. If None, a default style will be applied.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            position (str): The position of the layer control on the map. Can be &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;,</span>
<span class="sd">                or &quot;bottom-right&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">            bg_layers (bool): If True, background layers will be included in the control. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">LayerSwitcherControl</span>

        <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
                <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bg_layers</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">bg_layers</span> <span class="o">+</span> <span class="n">layer_ids</span>
        <span class="k">elif</span> <span class="n">bg_layers</span><span class="p">:</span>
            <span class="n">background_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">background_ids</span> <span class="o">+</span> <span class="n">layer_ids</span>

        <span class="k">if</span> <span class="n">css_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">css_text</span> <span class="o">=</span> <span class="s2">&quot;padding: 5px; border: 1px solid darkgrey; border-radius: 4px;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">control</span> <span class="o">=</span> <span class="n">LayerSwitcherControl</span><span class="p">(</span>
                <span class="n">layer_ids</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
                <span class="n">theme</span><span class="o">=</span><span class="n">theme</span><span class="p">,</span>
                <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_floating_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;370px&quot;</span><span class="p">,</span>
        <span class="n">max_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;80vh&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;widgets.Widget&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a floating sidebar panel overlaid on the map with a toggle button.</span>

<span class="sd">        This method creates a floating sidebar that appears as an overlay on the map canvas.</span>
<span class="sd">        The sidebar includes a toggle button to show/hide it, along with the layer manager</span>
<span class="sd">        and any additional content you specify.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str): Position on the map. Can be &quot;top-right&quot;, &quot;top-left&quot;,</span>
<span class="sd">                &quot;bottom-right&quot;, or &quot;bottom-left&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">            width (str): Width of the sidebar (e.g., &quot;370px&quot;, &quot;25%&quot;). Defaults to &quot;370px&quot;.</span>
<span class="sd">            max_height (str): Maximum height of the sidebar (e.g., &quot;80vh&quot;, &quot;500px&quot;).</span>
<span class="sd">                Defaults to &quot;80vh&quot;.</span>
<span class="sd">            expanded (bool): Whether the layer manager starts expanded. Defaults to True.</span>
<span class="sd">            sidebar_visible (bool): Whether the sidebar content is initially visible.</span>
<span class="sd">                Defaults to False. The toggle button is always visible.</span>
<span class="sd">            sidebar_content (Optional[List[widgets.Widget]]): Additional widgets to include</span>
<span class="sd">                in the sidebar. Defaults to None (only layer manager).</span>
<span class="sd">            **kwargs: Additional keyword arguments passed to LayerManagerWidget.</span>

<span class="sd">        Returns:</span>
<span class="sd">            widgets.Widget: A widget containing the map with the floating sidebar overlay.</span>
<span class="sd">                Display this instead of the map object.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; m = leafmap.Map()</span>
<span class="sd">            &gt;&gt;&gt; m.add_basemap(&quot;Esri.WorldImagery&quot;)</span>
<span class="sd">            &gt;&gt;&gt; widget = m.add_floating_sidebar(position=&quot;top-left&quot;, width=&quot;360px&quot;)</span>
<span class="sd">            &gt;&gt;&gt; widget  # Display the returned widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Position styles mapping</span>
        <span class="n">position_styles</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;top-right&quot;</span><span class="p">:</span> <span class="s2">&quot;top: 10px; right: 10px;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top-left&quot;</span><span class="p">:</span> <span class="s2">&quot;top: 10px; left: 10px;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-right&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom: 50px; right: 10px;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bottom-left&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom: 50px; left: 10px;&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">pos_style</span> <span class="o">=</span> <span class="n">position_styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">position_styles</span><span class="p">[</span><span class="s2">&quot;top-left&quot;</span><span class="p">])</span>

        <span class="c1"># Create layer manager if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Initialize floating sidebar state</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_floating_sidebar_widgets&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Create sidebar content list</span>
        <span class="n">content_widgets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">sidebar_content</span><span class="p">:</span>
            <span class="n">content_widgets</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sidebar_content</span><span class="p">)</span>

        <span class="c1"># Create main sidebar box with layer manager and additional content</span>
        <span class="n">main_sidebar_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="n">content_widgets</span><span class="p">)</span>

        <span class="c1"># Create toggle button</span>
        <span class="n">toggle_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-chevron-left&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;mdi-chevron-right&quot;</span><span class="p">],</span>
            <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">toggle_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">toggle_icon</span><span class="p">],</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 22px; height: 22px; min-width: 22px; padding: 0;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create settings/wrench button</span>
        <span class="n">settings_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-wrench&quot;</span><span class="p">],</span> <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">settings_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">settings_icon</span><span class="p">],</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 22px; height: 22px; min-width: 22px; padding: 0;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create header row with toggle and settings buttons</span>
        <span class="n">header_row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0 d-flex justify-space-between align-center mb-1&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="n">settings_btn</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="c1"># State tracking for sidebar visibility</span>
        <span class="k">class</span> <span class="nc">SidebarState</span><span class="p">:</span>
            <span class="n">visible</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
            <span class="n">settings_visible</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Convert width string to number for calculation</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
                <span class="n">width_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">):</span>
                <span class="c1"># Assume parent container is 1440px wide if not available</span>
                <span class="n">parent_width</span> <span class="o">=</span> <span class="mi">1440</span>
                <span class="n">percent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">width_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parent_width</span> <span class="o">*</span> <span class="n">percent</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">width_num</span> <span class="o">=</span> <span class="mi">360</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">width_num</span> <span class="o">=</span> <span class="mi">360</span>

        <span class="c1"># Create width adjustment slider</span>
        <span class="n">width_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">width_num</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Width:&quot;</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># Width change handler</span>
        <span class="k">def</span> <span class="nf">on_width_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">new_width</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    position: absolute;</span>
<span class="s2">                    </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                    width: </span><span class="si">{</span><span class="n">new_width</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">                    max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                    overflow-y: auto;</span>
<span class="s2">                    overflow-x: hidden;</span>
<span class="s2">                    z-index: 1000;</span>
<span class="s2">                    background-color: white;</span>
<span class="s2">                    border-radius: 4px;</span>
<span class="s2">                &quot;&quot;&quot;</span>

        <span class="n">width_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_width_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="c1"># Create settings widget wrapped in CustomWidget for proper header</span>
        <span class="n">settings_widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
            <span class="n">width_slider</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-cog&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sidebar Settings&quot;</span><span class="p">,</span>
            <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Settings button handler - toggle settings widget visibility</span>
        <span class="k">def</span> <span class="nf">on_settings_click</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span>
            <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span><span class="p">:</span>
                <span class="c1"># Add settings widget to floating sidebar content box</span>
                <span class="k">if</span> <span class="n">settings_widget</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">settings_widget</span><span class="p">,</span>
                    <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Remove settings widget from floating sidebar content box</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                    <span class="n">child</span>
                    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
                    <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">settings_widget</span>
                <span class="p">)</span>

        <span class="n">settings_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">on_settings_click</span><span class="p">)</span>

        <span class="c1"># Combine main sidebar with dynamic content box for layer settings and other widgets</span>
        <span class="n">sidebar_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">main_sidebar_box</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Toggle function</span>
        <span class="k">def</span> <span class="nf">toggle_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span>
            <span class="n">toggle_icon</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;mdi-chevron-left&quot;</span> <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span> <span class="k">else</span> <span class="s2">&quot;mdi-chevron-right&quot;</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
                <span class="c1"># Show sidebar content</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">header_row</span><span class="p">,</span> <span class="n">sidebar_box</span><span class="p">]</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;pa-2 ma-0&quot;</span>
                <span class="n">current_width</span> <span class="o">=</span> <span class="n">width_slider</span><span class="o">.</span><span class="n">value</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    position: absolute;</span>
<span class="s2">                    </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                    width: </span><span class="si">{</span><span class="n">current_width</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">                    max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                    overflow-y: auto;</span>
<span class="s2">                    overflow-x: hidden;</span>
<span class="s2">                    z-index: 1000;</span>
<span class="s2">                    background-color: white;</span>
<span class="s2">                    border-radius: 4px;</span>
<span class="s2">                &quot;&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Hide sidebar content, only show toggle button</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">toggle_btn</span><span class="p">]</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;ma-0&quot;</span>
                <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    position: absolute;</span>
<span class="s2">                    </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                    width: auto;</span>
<span class="s2">                    height: auto;</span>
<span class="s2">                    max-height: none;</span>
<span class="s2">                    overflow: visible;</span>
<span class="s2">                    z-index: 1000;</span>
<span class="s2">                    background-color: white;</span>
<span class="s2">                    border-radius: 4px;</span>
<span class="s2">                    padding: 4px;</span>
<span class="s2">                &quot;&quot;&quot;</span>

        <span class="n">toggle_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">toggle_sidebar</span><span class="p">)</span>

        <span class="c1"># Create floating overlay container</span>
        <span class="n">initial_children</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">[</span><span class="n">header_row</span><span class="p">,</span> <span class="n">sidebar_box</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="n">toggle_btn</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">sidebar_visible</span><span class="p">:</span>
            <span class="n">initial_style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                position: absolute;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                width: </span><span class="si">{</span><span class="n">width_num</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">                max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                overflow-y: auto;</span>
<span class="s2">                overflow-x: hidden;</span>
<span class="s2">                z-index: 1000;</span>
<span class="s2">                background-color: white;</span>
<span class="s2">                border-radius: 4px;</span>
<span class="s2">            &quot;&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">initial_style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                position: absolute;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                width: auto;</span>
<span class="s2">                height: auto;</span>
<span class="s2">                max-height: none;</span>
<span class="s2">                overflow: visible;</span>
<span class="s2">                z-index: 1000;</span>
<span class="s2">                background-color: white;</span>
<span class="s2">                border-radius: 4px;</span>
<span class="s2">                padding: 4px;</span>
<span class="s2">            &quot;&quot;&quot;</span>

        <span class="n">overlay</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Card</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="s2">&quot;pa-2 ma-0&quot;</span><span class="p">,</span>
            <span class="n">elevation</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
            <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="n">initial_style</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="n">initial_children</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Create wrapper with the map and overlay</span>
        <span class="n">wrapper</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span>
            <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;div&quot;</span><span class="p">,</span>
            <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;position: relative; width: 100%; height: 100%;&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">overlay</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">def</span> <span class="nf">add_3d_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="n">min_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a 3D buildings layer to the map.</span>

<span class="sd">        This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings&#39; heights</span>
<span class="sd">        are determined by the &#39;render_height&#39; property, and their colors are interpolated based on specified values.</span>
<span class="sd">        The layer is only visible from a certain zoom level, specified by the &#39;min_zoom&#39; parameter.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the 3D buildings layer. Defaults to &quot;buildings&quot;.</span>
<span class="sd">            min_zoom (int): The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</span>
<span class="sd">            values (List[int]): A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</span>
<span class="sd">            colors (List[str]): A list of colors corresponding to the &#39;values&#39; list. Each color is applied to the</span>
<span class="sd">                building height range defined by the &#39;values&#39;. Defaults to [&quot;lightgray&quot;, &quot;royalblue&quot;, &quot;lightblue&quot;].</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_layer method.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the lengths of &#39;values&#39; and &#39;colors&#39; lists do not match.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">MAPTILER_KEY</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/v3/tiles.json?key=</span><span class="si">{</span><span class="n">MAPTILER_KEY</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>

        <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;min-zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
            <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
                <span class="p">]</span>
                <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                    <span class="mi">15</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="mi">16</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
                <span class="p">],</span>
                <span class="s2">&quot;fill-extrusion-base&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;case&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">],</span> <span class="mi">16</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_min_height&quot;</span><span class="p">],</span>
                    <span class="mi">0</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_3d_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add 3D buildings from Overture Maps to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (Optional[str], optional): The release date of the Overture Maps data.</span>
<span class="sd">                Defaults to the latest release. For more info, see</span>
<span class="sd">                https://github.com/OvertureMaps/overture-tiles.</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the buildings. Defaults to None.</span>
<span class="sd">            values (Optional[List[int]], optional): List of height values for</span>
<span class="sd">                color interpolation. Defaults to None.</span>
<span class="sd">            colors (Optional[List[str]], optional): List of colors corresponding</span>
<span class="sd">                to the height values. Defaults to None.</span>
<span class="sd">            visible (bool, optional): Whether the buildings layer is visible.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the buildings layer.</span>
<span class="sd">                Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the buildings.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            template (str, optional): The template for the tooltip. It can be</span>
<span class="sd">                &quot;simple&quot; or &quot;all&quot;. Defaults to &quot;simple&quot;.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                buildings layer. Defaults to False.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the length of values and colors lists are not the same.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

        <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;simple&quot;</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Name: {{@name}}&lt;br&gt;Subtype: {{subtype}}&lt;br&gt;Class: {{class}}&lt;br&gt;Height: {{height}}&quot;</span>
        <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>
            <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
                <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="mi">0</span><span class="p">,</span>
                        <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="p">]</span>
                            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building-part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="mi">0</span><span class="p">,</span>
                        <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                            <span class="p">]</span>
                            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">],</span>
            <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">                &quot;2024-12-28&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">            theme (str, optional): The theme of the data. It can be one of the following:</span>
<span class="sd">                &quot;addresses&quot;, &quot;base&quot;, &quot;buildings&quot;, &quot;divisions&quot;, &quot;places&quot;, &quot;transportation&quot;.</span>
<span class="sd">                Defaults to &quot;buildings&quot;.</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the data. Defaults to None.</span>
<span class="sd">            visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                data layer. Defaults to False.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the add_pmtiles method.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the theme is not one of the allowed themes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

        <span class="n">allowed_themes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
            <span class="s2">&quot;base&quot;</span><span class="p">,</span>
            <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
            <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;places&quot;</span><span class="p">,</span>
            <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_themes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The theme must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_themes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Infrastructure&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;infrastructure&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_cover&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_cover&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_use&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_use&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;buildings&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#6ea299&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#fdfdb2&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;divisions&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_area&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_area&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                            <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_boundary&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_boundary&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;places&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Place&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;places&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;place&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;transportation&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Segment&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Connector&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.pmtiles&quot;</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_overture_buildings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">                &quot;2024-12-18&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">            style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">                the data. Defaults to None.</span>
<span class="sd">            type (str, optional): The type of the data. It can be &quot;line&quot; or &quot;fill&quot;.</span>
<span class="sd">            visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">            tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">                data layer. Defaults to False.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the paint properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;line-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;line-width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="s2">&quot;line-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;fill-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#6ea299&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;fill-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">]</span>
            <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_video</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span>
        <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a video layer to the map.</span>

<span class="sd">        This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates</span>
<span class="sd">        that the video should cover. The video will be stretched and fitted into the specified coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            urls (Union[str, List[str]]): A single video URL or a list of video URLs. These URLs must be accessible</span>
<span class="sd">                from the client&#39;s location.</span>
<span class="sd">            coordinates (List[List[float]]): A list of four coordinates in [longitude, latitude] format, specifying</span>
<span class="sd">                the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</span>
<span class="sd">            layer_id (str): The ID for the video layer. Defaults to &quot;video&quot;.</span>
<span class="sd">            before_id (Optional[str]): The ID of an existing layer to insert the new layer before. If None, the layer</span>
<span class="sd">                will be added on top. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
            <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="n">urls</span><span class="p">,</span>
            <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;video_source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;video_source&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_video_to_sidebar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">src</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-video&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Video&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a video to the sidebar.</span>

<span class="sd">        Args:</span>
<span class="sd">            src (str): The URL of the video to be added.</span>
<span class="sd">            width (int): Width of the video in pixels. Defaults to 600.</span>
<span class="sd">            add_header (bool): If True, adds a header to the video. Defaults to True.</span>
<span class="sd">            widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">            background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">            height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">video_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;video width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot; controls&gt;</span>
<span class="s2">        &lt;source src=&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s2">&quot; type=&quot;video/mp4&quot;&gt;</span>
<span class="s2">        Your browser does not support the video tag.</span>
<span class="s2">        &lt;/video&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
            <span class="n">video_html</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_nlcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds National Land Cover Database (NLCD) data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            years (list): A list of years to add. It can be any of 1985-2023. Defaults to [2023].</span>
<span class="sd">            add_legend (bool): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the add_cog_layer method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">allowed_years</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;https://s3-us-west-2.amazonaws.com/mrlc/Annual_NLCD_LndCov_</span><span class="si">{}</span><span class="s2">_CU_C1V0.tif&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;colormap&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;11&quot;</span><span class="p">:</span> <span class="s2">&quot;#466b9f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;12&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1def8&quot;</span><span class="p">,</span>
                <span class="s2">&quot;21&quot;</span><span class="p">:</span> <span class="s2">&quot;#dec5c5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;22&quot;</span><span class="p">:</span> <span class="s2">&quot;#d99282&quot;</span><span class="p">,</span>
                <span class="s2">&quot;23&quot;</span><span class="p">:</span> <span class="s2">&quot;#eb0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;24&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab0000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;31&quot;</span><span class="p">:</span> <span class="s2">&quot;#b3ac9f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;41&quot;</span><span class="p">:</span> <span class="s2">&quot;#68ab5f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;42&quot;</span><span class="p">:</span> <span class="s2">&quot;#1c5f2c&quot;</span><span class="p">,</span>
                <span class="s2">&quot;43&quot;</span><span class="p">:</span> <span class="s2">&quot;#b5c58f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;51&quot;</span><span class="p">:</span> <span class="s2">&quot;#af963c&quot;</span><span class="p">,</span>
                <span class="s2">&quot;52&quot;</span><span class="p">:</span> <span class="s2">&quot;#ccb879&quot;</span><span class="p">,</span>
                <span class="s2">&quot;71&quot;</span><span class="p">:</span> <span class="s2">&quot;#dfdfc2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;72&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1d182&quot;</span><span class="p">,</span>
                <span class="s2">&quot;73&quot;</span><span class="p">:</span> <span class="s2">&quot;#a3cc51&quot;</span><span class="p">,</span>
                <span class="s2">&quot;74&quot;</span><span class="p">:</span> <span class="s2">&quot;#82ba9e&quot;</span><span class="p">,</span>
                <span class="s2">&quot;81&quot;</span><span class="p">:</span> <span class="s2">&quot;#dcd939&quot;</span><span class="p">,</span>
                <span class="s2">&quot;82&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab6c28&quot;</span><span class="p">,</span>
                <span class="s2">&quot;90&quot;</span><span class="p">:</span> <span class="s2">&quot;#b8d9eb&quot;</span><span class="p">,</span>
                <span class="s2">&quot;95&quot;</span><span class="p">:</span> <span class="s2">&quot;#6c9fb8&quot;</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_years</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be one of </span><span class="si">{</span><span class="n">allowed_years</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">year_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span><span class="n">year_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;NLCD </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;NLCD Land Cover Type&quot;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="s2">&quot;NLCD&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gps_trace</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ann_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colormap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">circle_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
        <span class="n">add_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">sort_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">line_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_draw_control</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">draw_control_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">legend_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GPS trace to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Union[str, List[Dict[str, Any]]]): The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</span>
<span class="sd">            x (str, optional): The column name for the x coordinates. Defaults to None,</span>
<span class="sd">                which assumes the x coordinates are in the &quot;longitude&quot;, &quot;lon&quot;, or &quot;x&quot; column.</span>
<span class="sd">            y (str, optional): The column name for the y coordinates. Defaults to None,</span>
<span class="sd">                which assumes the y coordinates are in the &quot;latitude&quot;, &quot;lat&quot;, or &quot;y&quot; column.</span>
<span class="sd">            columns (Optional[List[str]], optional): The list of columns to include in the GeoDataFrame. Defaults to None.</span>
<span class="sd">            ann_column (Optional[str], optional): The column name to use for coloring the GPS trace points. Defaults to None.</span>
<span class="sd">            colormap (Optional[Dict[str, str]], optional): The colormap for the GPS trace. Defaults to None.</span>
<span class="sd">            radius (int, optional): The radius of the GPS trace points. Defaults to 5.</span>
<span class="sd">            circle_color (Optional[Union[str, List[Any]]], optional): The color of the GPS trace points. Defaults to None.</span>
<span class="sd">            stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;#ffffff&quot;.</span>
<span class="sd">            opacity (float, optional): The opacity of the GPS trace points. Defaults to 1.0.</span>
<span class="sd">            paint (Optional[Dict[str, Any]], optional): The paint properties for the GPS trace points. Defaults to None.</span>
<span class="sd">            name (str, optional): The name of the GPS trace layer. Defaults to &quot;GPS Trace&quot;.</span>
<span class="sd">            add_line (bool, optional): If True, adds a line connecting the GPS trace points. Defaults to True.</span>
<span class="sd">            sort_column (Optional[str], optional): The column name to sort the points before connecting them as a line. Defaults to None.</span>
<span class="sd">            line_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_gdf method for the line layer. Defaults to None.</span>
<span class="sd">            add_draw_control (bool, optional): If True, adds a draw control to the map. Defaults to True.</span>
<span class="sd">            draw_control_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_draw_control method. Defaults to None.</span>
<span class="sd">            add_legend (bool, optional): If True, adds a legend to the map. Defaults to True.</span>
<span class="sd">            legend_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_legend method. Defaults to None.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

        <span class="k">if</span> <span class="n">add_draw_control</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">draw_control_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">draw_control_args</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;controls&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="o">**</span><span class="n">draw_control_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tmp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_tmp.csv&quot;</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
            <span class="c1"># If the temporary file exists, read the annotations from it</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">):</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">)</span>
                <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid data type. Use a GeoDataFrame or a file path to a CSV file.&quot;</span>
            <span class="p">)</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gps_trace&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_line</span><span class="p">:</span>
            <span class="n">line_gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">connect_points_as_line</span><span class="p">(</span>
                <span class="n">gdf</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="n">sort_column</span><span class="p">,</span> <span class="n">single_line</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line_gdf</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFF00&quot;</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">legend_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">legend_args</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;legend_dict&quot;</span><span class="p">:</span> <span class="n">colormap</span><span class="p">,</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="o">**</span><span class="n">legend_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span>
        <span class="p">):</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">ann_column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;annotation&quot;</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">ann_column</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Please specify the ann_column parameter or add an &#39;annotation&#39; column to the GeoDataFrame.&quot;</span>
                <span class="p">)</span>

        <span class="n">ann_column_edited</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ann_column</span><span class="si">}</span><span class="s2">_edited&quot;</span>
        <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ann_column</span><span class="p">,</span>
                <span class="n">ann_column_edited</span><span class="p">,</span>
                <span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="k">if</span> <span class="n">ann_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ann_column</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ann_column_edited</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ann_column_edited</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gdf&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">circle_color</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;match&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;to-string&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">ann_column_edited</span><span class="p">]],</span>
            <span class="p">]</span>
            <span class="c1"># Add the color matches from the colormap</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">circle_color</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">color</span><span class="p">])</span>

            <span class="c1"># Add the default color</span>
            <span class="n">circle_color</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;#CCCCCC&quot;</span><span class="p">)</span>  <span class="c1"># Default color if annotation does not match</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="n">radius</span><span class="p">,</span>
                <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="n">circle_color</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="n">stroke_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">circle_color</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stroke_color</span>

        <span class="k">if</span> <span class="n">line_gdf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">line_args</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span><span class="n">line_gdf</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">line_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;fit_bounds_options&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fit_bounds_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="s2">&quot;gpd.GeoDataFrame&quot;</span><span class="p">],</span>
        <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scheme</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
        <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">add_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">legend_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">legend_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
        <span class="n">legend_kwds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">classification_kwds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">legend_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extrude</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">scale_factor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add vector data to the map with a variety of classification schemes.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | pd.DataFrame | gpd.GeoDataFrame): The data to classify.</span>
<span class="sd">                It can be a filepath to a vector dataset, a pandas dataframe, or</span>
<span class="sd">                a geopandas geodataframe.</span>
<span class="sd">            column (str): The column to classify.</span>
<span class="sd">            cmap (str, optional): The name of a colormap recognized by matplotlib. Defaults to None.</span>
<span class="sd">            colors (list, optional): A list of colors to use for the classification. Defaults to None.</span>
<span class="sd">            labels (list, optional): A list of labels to use for the legend. Defaults to None.</span>
<span class="sd">            scheme (str, optional): Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">                Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">                A mapclassify.MapClassifier object will be used</span>
<span class="sd">                under the hood. Supported are all schemes provided by mapclassify (e.g.</span>
<span class="sd">                &#39;BoxPlot&#39;, &#39;EqualInterval&#39;, &#39;FisherJenks&#39;, &#39;FisherJenksSampled&#39;,</span>
<span class="sd">                &#39;HeadTailBreaks&#39;, &#39;JenksCaspall&#39;, &#39;JenksCaspallForced&#39;,</span>
<span class="sd">                &#39;JenksCaspallSampled&#39;, &#39;MaxP&#39;, &#39;MaximumBreaks&#39;,</span>
<span class="sd">                &#39;NaturalBreaks&#39;, &#39;Quantiles&#39;, &#39;Percentiles&#39;, &#39;StdMean&#39;,</span>
<span class="sd">                &#39;UserDefined&#39;). Arguments can be passed in classification_kwds.</span>
<span class="sd">            k (int, optional): Number of classes (ignored if scheme is None or if</span>
<span class="sd">                column is categorical). Default to 5.</span>
<span class="sd">            add_legend (bool, optional): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">            legend_title (str, optional): The title of the legend. Defaults to None.</span>
<span class="sd">            legend_position (str, optional): The position of the legend. Can be &#39;top-left&#39;,</span>
<span class="sd">                &#39;top-right&#39;, &#39;bottom-left&#39;, or &#39;bottom-right&#39;. Defaults to &#39;bottom-right&#39;.</span>
<span class="sd">            legend_kwds (dict, optional): Keyword arguments to pass to :func:`matplotlib.pyplot.legend`</span>
<span class="sd">                or `matplotlib.pyplot.colorbar`. Defaults to None.</span>
<span class="sd">                Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or</span>
<span class="sd">                Additional accepted keywords when `scheme` is specified:</span>
<span class="sd">                fmt : string</span>
<span class="sd">                    A formatting specification for the bin edges of the classes in the</span>
<span class="sd">                    legend. For example, to have no decimals: ``{&quot;fmt&quot;: &quot;{:.0f}&quot;}``.</span>
<span class="sd">                labels : list-like</span>
<span class="sd">                    A list of legend labels to override the auto-generated labblels.</span>
<span class="sd">                    Needs to have the same number of elements as the number of</span>
<span class="sd">                    classes (`k`).</span>
<span class="sd">                interval : boolean (default False)</span>
<span class="sd">                    An option to control brackets from mapclassify legend.</span>
<span class="sd">                    If True, open/closed interval brackets are shown in the legend.</span>
<span class="sd">            classification_kwds (dict, optional): Keyword arguments to pass to mapclassify.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            legend_args (dict, optional): Additional keyword arguments for the add_legend method. Defaults to None.</span>
<span class="sd">            layer_type (str, optional): The type of layer to add. Can be &#39;circle&#39;, &#39;line&#39;, or &#39;fill&#39;. Defaults to None.</span>
<span class="sd">            filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">                no filter is applied.</span>
<span class="sd">            paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">                If None, no paint properties are applied.</span>
<span class="sd">            name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">                is generated.</span>
<span class="sd">            fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">                map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">                the new layer should be inserted.</span>
<span class="sd">            source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">                passed to the GeoJSONSource class.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the GeoJSON class, such as</span>
<span class="sd">                fields, which can be a list of column names to be included in the popup.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">gdf</span><span class="p">,</span> <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">classify</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
            <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">,</span>
            <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
            <span class="n">legend_kwds</span><span class="o">=</span><span class="n">legend_kwds</span><span class="p">,</span>
            <span class="n">classification_kwds</span><span class="o">=</span><span class="n">classification_kwds</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">legend_title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_title</span> <span class="o">=</span> <span class="n">column</span>

        <span class="n">geom_type</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geom_type</span>

        <span class="k">if</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">:</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
            <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;LineString&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">:</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
            <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s2">&quot;line-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">extrude</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill-extrusion&quot;</span>
                <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Initialize the interpolate format</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
                        <span class="p">]</span>
                    <span class="p">}</span>

                    <span class="c1"># Parse the dictionary and append range and color values</span>
                    <span class="k">for</span> <span class="n">range_str</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">legend_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="c1"># Extract the upper bound from the range string</span>
                        <span class="n">upper_bound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">range_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot; ]&quot;</span><span class="p">))</span>
                        <span class="c1"># Add to the formatted output</span>
                        <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">upper_bound</span><span class="p">,</span> <span class="n">color</span><span class="p">])</span>

                    <span class="c1"># Scale down the extrusion height</span>
                    <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
                    <span class="p">]</span>

                    <span class="c1"># Add scaled values dynamically</span>
                    <span class="k">for</span> <span class="n">range_str</span> <span class="ow">in</span> <span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">upper_bound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">range_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot; ]&quot;</span><span class="p">))</span>
                        <span class="n">scaled_value</span> <span class="o">=</span> <span class="n">upper_bound</span> <span class="o">/</span> <span class="n">scale_factor</span>  <span class="c1"># Apply scaling</span>
                        <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">upper_bound</span><span class="p">,</span> <span class="n">scaled_value</span><span class="p">]</span>
                        <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
                <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Geometry type not recognized.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
            <span class="n">gdf</span><span class="p">,</span>
            <span class="n">layer_type</span><span class="p">,</span>
            <span class="nb">filter</span><span class="p">,</span>
            <span class="n">paint</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="p">,</span>
            <span class="n">visible</span><span class="p">,</span>
            <span class="n">before_id</span><span class="p">,</span>
            <span class="n">source_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">legend_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">legend_title</span><span class="p">,</span>
                <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">,</span>
                <span class="n">position</span><span class="o">=</span><span class="n">legend_position</span><span class="p">,</span>
                <span class="o">**</span><span class="n">legend_args</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_mapillary</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">maxzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
        <span class="n">sequence_lyr_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
        <span class="n">image_lyr_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sequence_paint</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_paint</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_minzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
        <span class="n">add_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">access_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">default_message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found&quot;</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
        <span class="n">widget_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Mapillary StreetView&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds Mapillary layers to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            minzoom (int): Minimum zoom level for the Mapillary tiles. Defaults to 6.</span>
<span class="sd">            maxzoom (int): Maximum zoom level for the Mapillary tiles. Defaults to 14.</span>
<span class="sd">            sequence_lyr_name (str): Name of the sequence layer. Defaults to &quot;sequence&quot;.</span>
<span class="sd">            image_lyr_name (str): Name of the image layer. Defaults to &quot;image&quot;.</span>
<span class="sd">            before_id (str): The ID of an existing layer to insert the new layer before. Defaults to None.</span>
<span class="sd">            sequence_paint (dict, optional): Paint properties for the sequence layer. Defaults to None.</span>
<span class="sd">            image_paint (dict, optional): Paint properties for the image layer. Defaults to None.</span>
<span class="sd">            image_minzoom (int): Minimum zoom level for the image layer. Defaults to 17.</span>
<span class="sd">            add_popup (bool): Whether to add popups to the layers. Defaults to True.</span>
<span class="sd">            access_token (str, optional): Access token for Mapillary API. Defaults to None.</span>
<span class="sd">            opacity (float): Opacity of the Mapillary layers. Defaults to 1.0.</span>
<span class="sd">            visible (bool): Whether the Mapillary layers are visible. Defaults to True.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If no access token is provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">access_token</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPILLARY_API_KEY&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;An access token is required to use Mapillary.&quot;</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.mapillary.com/maps/vtp/mly1_public/2/</span><span class="se">{{</span><span class="s2">z</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">x</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">y</span><span class="se">}}</span><span class="s2">?access_token=</span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">url</span><span class="p">],</span>
            <span class="s2">&quot;minzoom&quot;</span><span class="p">:</span> <span class="n">minzoom</span><span class="p">,</span>
            <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="n">maxzoom</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;mapillary&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sequence_paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sequence_paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;line-opacity&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
                <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#35AF6D&quot;</span><span class="p">,</span>
                <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">if</span> <span class="n">image_paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">image_paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="n">sequence_lyr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">sequence_lyr_name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;mapillary&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;line-cap&quot;</span><span class="p">:</span> <span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="s2">&quot;line-join&quot;</span><span class="p">:</span> <span class="s2">&quot;round&quot;</span><span class="p">},</span>
            <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">sequence_paint</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">image_lyr</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">image_lyr_name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;mapillary&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
            <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">image_paint</span><span class="p">,</span>
            <span class="s2">&quot;minzoom&quot;</span><span class="p">:</span> <span class="n">image_minzoom</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
            <span class="n">sequence_lyr</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">sequence_lyr_name</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
            <span class="n">image_lyr</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">image_lyr_name</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">add_popup</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">sequence_lyr_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">image_lyr_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_sidebar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">widget_label</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
                <span class="n">expanded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
                <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span>
                <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
                <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
                <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span>
                    <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    &lt;iframe</span>
<span class="s2">                        src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                    &lt;/iframe&gt;</span>
<span class="s2">                    &quot;&quot;&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default_message</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span> <span class="o">=</span> <span class="n">log_lng_lat</span>

            <span class="k">def</span> <span class="nf">_on_panel_toggle</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;Click on the map to view Mapillary StreetView&quot;</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">unobserve_mapillary</span><span class="p">()</span>

            <span class="c1"># Get the widget from the appropriate sidebar type</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
                <span class="c1"># Floating sidebar</span>
                <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">widget_label</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Container sidebar</span>
                <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">widget_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">sidebar_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">_on_panel_toggle</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;v_model&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_mapillary_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lat</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
        <span class="n">bbox</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">image_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">560</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">link</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">container</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">column_widths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Mapillary widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (Optional[float]): Longitude of the location. Defaults to None.</span>
<span class="sd">            lat (Optional[float]): Latitude of the location. Defaults to None.</span>
<span class="sd">            radius (float): Search radius for Mapillary images. Defaults to 0.00005.</span>
<span class="sd">            bbox (Optional[Union[str, List[float]]]): Bounding box for the search. Defaults to None.</span>
<span class="sd">            image_id (Optional[str]): ID of the Mapillary image. Defaults to None.</span>
<span class="sd">            style (str): Style of the Mapillary image. Can be &quot;classic&quot;, &quot;photo&quot;, and &quot;split&quot;. Defaults to &quot;classic&quot;.</span>
<span class="sd">            height (int): Height of the iframe. Defaults to 600.</span>
<span class="sd">            frame_border (int): Frame border of the iframe. Defaults to 0.</span>
<span class="sd">            link (bool): Whether to link the widget to map clicks. Defaults to True.</span>
<span class="sd">            container (bool): Whether to return the widget in a container. Defaults to True.</span>
<span class="sd">            column_widths (List[int]): Widths of the columns in the container. Defaults to [8, 1].</span>
<span class="sd">            **kwargs: Additional keyword arguments for the widget.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Union[widgets.HTML, v.Row]: The Mapillary widget or a container with the widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">image_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lon</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">lat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;center&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span><span class="p">:</span>
                    <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">center</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">lon</span> <span class="o">=</span> <span class="n">center</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
                        <span class="n">lat</span> <span class="o">=</span> <span class="n">center</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">image_ids</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">image_id</span> <span class="o">=</span> <span class="n">image_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">image_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_mapillary_image_widget</span><span class="p">(</span>
                <span class="n">image_id</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">frame_border</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">link</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
                <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
                <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
                <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span>
                    <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    &lt;iframe</span>
<span class="s2">                        src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                    &lt;/iframe&gt;</span>
<span class="s2">                    &quot;&quot;&quot;</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found.&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">container</span><span class="p">:</span>
            <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
                <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">],</span>
                <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
            <span class="p">)</span>
            <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
                <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget</span><span class="p">],</span>
                <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
            <span class="p">)</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">row</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">widget</span>

    <span class="k">def</span> <span class="nf">add_labels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
        <span class="n">text_anchor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span>
        <span class="n">text_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">min_zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a label layer to the map.</span>

<span class="sd">        This method adds a label layer to the map using the specified source and column for text values.</span>

<span class="sd">        Args:</span>
<span class="sd">            source (Union[str, Dict[str, Any]]): The data source for the labels. It can be a GeoJSON file path</span>
<span class="sd">                or a dictionary containing GeoJSON data.</span>
<span class="sd">            column (str): The column name in the source data to use for the label text.</span>
<span class="sd">            name (Optional[str]): The name of the label layer. If None, a random name is generated. Defaults to None.</span>
<span class="sd">            text_size (int): The size of the label text. Defaults to 14.</span>
<span class="sd">            text_anchor (str): The anchor position of the text. Can be &quot;center&quot;, &quot;left&quot;, &quot;right&quot;, etc. Defaults to &quot;center&quot;.</span>
<span class="sd">            text_color (str): The color of the label text. Defaults to &quot;black&quot;.</span>
<span class="sd">            min_zoom (Optional[float]): The minimum zoom level at which the labels are visible. Defaults to None.</span>
<span class="sd">            max_zoom (Optional[float]): The maximum zoom level at which the labels are visible. Defaults to None.</span>
<span class="sd">            layout (Optional[Dict[str, Any]]): Additional layout properties for the label layer. Defaults to None.</span>
<span class="sd">                For more information, refer to https://maplibre.org/maplibre-style-spec/layers/#symbol.</span>
<span class="sd">            paint (Optional[Dict[str, Any]]): Additional paint properties for the label layer. Defaults to None.</span>
<span class="sd">            before_id (Optional[str]): The ID of an existing layer before which the new layer should be inserted. Defaults to None.</span>
<span class="sd">            opacity (float): The opacity of the label layer. Defaults to 1.0.</span>
<span class="sd">            visible (bool): Whether the label layer is visible by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments to customize the label layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Labels&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_vector</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">source</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid source type. Use a GeoDataFrame, a file path to a GeoJSON file, or a dictionary.&quot;</span>
            <span class="p">)</span>

        <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;text-field&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
                <span class="s2">&quot;text-size&quot;</span><span class="p">:</span> <span class="n">text_size</span><span class="p">,</span>
                <span class="s2">&quot;text-anchor&quot;</span><span class="p">:</span> <span class="n">text_anchor</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;text-color&quot;</span><span class="p">:</span> <span class="n">text_color</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_name</span><span class="p">,</span>
            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="n">layout</span><span class="p">,</span>
            <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">paint</span><span class="p">,</span>
            <span class="s2">&quot;min_zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
            <span class="s2">&quot;max_zoom&quot;</span><span class="p">:</span> <span class="n">max_zoom</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
            <span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_roi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the first user-drawn ROI feature.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[dict]: The first user-drawn ROI feature or None if no features are drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features_created</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features_created</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_rois</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all user-drawn ROI features.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of all user-drawn ROI features.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span>

    <span class="k">def</span> <span class="nf">user_roi_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy).</span>

<span class="sd">        Args:</span>
<span class="sd">            decimals (int, optional): The number of decimals to round the coordinates to. Defaults to 4.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[list]: The bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy), or None if no ROI is drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">common</span><span class="o">.</span><span class="n">geometry_bounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the bounds of the map view state.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: A tuple of two tuples, each containing (lat, lng) coordinates for the southwest and northeast corners of the map view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">][</span><span class="s2">&quot;_sw&quot;</span><span class="p">]</span>
        <span class="n">ne</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">][</span><span class="s2">&quot;_ne&quot;</span><span class="p">]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">((</span><span class="n">sw</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="n">sw</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]),</span> <span class="p">(</span><span class="n">ne</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="n">ne</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">coords</span>

    <span class="k">def</span> <span class="nf">get_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets layer names as a list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of layer names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">layer_names</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets layer names as a list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of layer names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets source as a list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of sources.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
                    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">sources</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sources</span>

    <span class="k">def</span> <span class="nf">add_annotation_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
        <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
        <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-drawing&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an annotation widget to the map.</span>

<span class="sd">        This method creates a vector data widget for annotations and adds it to the map&#39;s sidebar.</span>

<span class="sd">        Args:</span>
<span class="sd">            properties (Optional[Dict[str, List[Any]]], optional): Properties of the annotation. Defaults to None.</span>
<span class="sd">            time_format (str, optional): Format for the timestamp. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">            out_dir (Optional[str], optional): Output directory for the annotation data. Defaults to None.</span>
<span class="sd">            filename_prefix (str, optional): Prefix for the filename of the annotation data. Defaults to &quot;&quot;.</span>
<span class="sd">            file_ext (str, optional): File extension for the annotation data. Defaults to &quot;geojson&quot;.</span>
<span class="sd">            add_mapillary (bool, optional): Whether to add Mapillary data. Defaults to False.</span>
<span class="sd">            style (str, optional): Style of the annotation. Defaults to &quot;photo&quot;.</span>
<span class="sd">            radius (float, optional): Radius of the annotation. Defaults to 0.00005.</span>
<span class="sd">            width (int, optional): Width of the annotation widget. Defaults to 300.</span>
<span class="sd">            height (int, optional): Height of the annotation widget. Defaults to 420.</span>
<span class="sd">            frame_border (int, optional): Border width of the annotation widget frame. Defaults to 0.</span>
<span class="sd">            download (bool, optional): Whether to allow downloading the annotation data. Defaults to True.</span>
<span class="sd">            name (str, optional): Name of the annotation widget. Defaults to None.</span>
<span class="sd">            paint (Dict[str, Any], optional): Paint properties for the annotation. Defaults to None.</span>
<span class="sd">            add_header (bool, optional): Whether to add a header to the annotation widget. Defaults to True.</span>
<span class="sd">            widget_icon (str, optional): Icon for the annotation widget. Defaults to &quot;mdi-drawing&quot;.</span>
<span class="sd">            close_icon (str, optional): Icon for closing the annotation widget. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str, optional): Label for the annotation widget. Defaults to &quot;Annotation&quot;.</span>
<span class="sd">            background_color (str, optional): Background color of the annotation widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            expanded (bool, optional): Whether the annotation widget is expanded by default. Defaults to True.</span>
<span class="sd">            callback (Callable, optional): A callback function to be called when the export button is clicked.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">create_vector_data</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span>
            <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span>
            <span class="n">time_format</span><span class="o">=</span><span class="n">time_format</span><span class="p">,</span>
            <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span>
            <span class="n">filename_prefix</span><span class="o">=</span><span class="n">filename_prefix</span><span class="p">,</span>
            <span class="n">file_ext</span><span class="o">=</span><span class="n">file_ext</span><span class="p">,</span>
            <span class="n">add_mapillary</span><span class="o">=</span><span class="n">add_mapillary</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">frame_border</span><span class="o">=</span><span class="n">frame_border</span><span class="p">,</span>
            <span class="n">download</span><span class="o">=</span><span class="n">download</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
            <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">return_sidebar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_date_filter_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">styles</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;startDate&quot;</span><span class="p">,</span>
        <span class="n">end_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;endDate&quot;</span><span class="p">,</span>
        <span class="n">date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">min_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
        <span class="n">interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-filter&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Date Filter&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the DateFilterWidget.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[Dict[str, Any]]): List of data sources.</span>
<span class="sd">            names (List[str], optional): List of names for the data sources. Defaults to None.</span>
<span class="sd">            styles (Dict[str, Any], optional): Dictionary of styles for the data sources. Defaults to None.</span>
<span class="sd">            start_date_col (str, optional): Name of the column containing the start date. Defaults to &quot;startDate&quot;.</span>
<span class="sd">            end_date_col (str, optional): Name of the column containing the end date. Defaults to &quot;endDate&quot;.</span>
<span class="sd">            date_col (str, optional): Name of the column containing the date. Defaults to None.</span>
<span class="sd">            date_format (str, optional): Format of the date. Defaults to &quot;%Y-%m-%d&quot;.</span>
<span class="sd">            min_date (str, optional): Minimum date. Defaults to None.</span>
<span class="sd">            max_date (str, optional): Maximum date. Defaults to None.</span>
<span class="sd">            file_index (int, optional): Index of the main file. Defaults to 0.</span>
<span class="sd">            group_col (str, optional): Name of the column containing the group. Defaults to None.</span>
<span class="sd">            freq (str, optional): Frequency of the date range. Defaults to &quot;D&quot;.</span>
<span class="sd">            unit (str, optional): Unit of the date. Defaults to &quot;ms&quot;.</span>
<span class="sd">            interval (int, optional): Interval of the date range. Defaults to 1.</span>
<span class="sd">            add_header (bool, optional): Whether to add a header to the widget. Defaults to True.</span>
<span class="sd">            widget_icon (str, optional): Icon of the widget. Defaults to &quot;mdi-filter&quot;.</span>
<span class="sd">            close_icon (str, optional): Icon of the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str, optional): Label of the widget. Defaults to &quot;Date Filter&quot;.</span>
<span class="sd">            background_color (str, optional): Background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            height (str, optional): Height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">DateFilterWidget</span><span class="p">(</span>
            <span class="n">sources</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span>
            <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
            <span class="n">styles</span><span class="o">=</span><span class="n">styles</span><span class="p">,</span>
            <span class="n">start_date_col</span><span class="o">=</span><span class="n">start_date_col</span><span class="p">,</span>
            <span class="n">end_date_col</span><span class="o">=</span><span class="n">end_date_col</span><span class="p">,</span>
            <span class="n">date_col</span><span class="o">=</span><span class="n">date_col</span><span class="p">,</span>
            <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
            <span class="n">min_date</span><span class="o">=</span><span class="n">min_date</span><span class="p">,</span>
            <span class="n">max_date</span><span class="o">=</span><span class="n">max_date</span><span class="p">,</span>
            <span class="n">file_index</span><span class="o">=</span><span class="n">file_index</span><span class="p">,</span>
            <span class="n">group_col</span><span class="o">=</span><span class="n">group_col</span><span class="p">,</span>
            <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
            <span class="n">map_widget</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_select_data_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">default_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
        <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;360px&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reset_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-folder&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Data Selection&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a select data widget to the map.</span>

<span class="sd">        This method creates a widget for selecting and uploading data to be added to a map.</span>
<span class="sd">        It includes a folder chooser, a file uploader, and buttons to apply or reset the selection.</span>

<span class="sd">        Args:</span>
<span class="sd">            default_path (str, optional): The default path for the folder chooser. Defaults to &quot;.&quot;.</span>
<span class="sd">            widget_width (str, optional): The width of the widget. Defaults to &quot;360px&quot;.</span>
<span class="sd">            callback (Optional[Callable[[str], None]], optional): A callback function to be</span>
<span class="sd">                called when data is applied. Defaults to None.</span>
<span class="sd">            reset_callback (Optional[Callable[[], None]], optional): A callback function to</span>
<span class="sd">                be called when the selection is reset. Defaults to None.</span>
<span class="sd">            add_header (bool, optional): Whether to add a header to the widget. Defaults to True.</span>
<span class="sd">            widget_icon (str, optional): The icon for the widget. Defaults to &quot;mdi-folder&quot;.</span>
<span class="sd">            close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str, optional): The label for the widget. Defaults to &quot;Data Selection&quot;.</span>
<span class="sd">            background_color (str, optional): The background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            height (str, optional): The height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">SelectDataWidget</span><span class="p">(</span>
            <span class="n">default_path</span><span class="o">=</span><span class="n">default_path</span><span class="p">,</span>
            <span class="n">widget_width</span><span class="o">=</span><span class="n">widget_width</span><span class="p">,</span>
            <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
            <span class="n">reset_callback</span><span class="o">=</span><span class="n">reset_callback</span><span class="p">,</span>
            <span class="n">map_widget</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_solara</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">map_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the widget to a Solara widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            map_only (bool, optional): Whether to only return the map widget. Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">reacton.ipyvuetify</span> <span class="k">as</span> <span class="nn">rv</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;solara is not installed. Please install it with `pip install solara`.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">map_only</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_stac_gui</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;STAC Search&quot;</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-search-web&quot;</span><span class="p">,</span>
        <span class="n">sidebar_width</span><span class="o">=</span><span class="s2">&quot;515px&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a STAC GUI to the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">stac_gui</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">stac_gui</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;maplibre&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="n">sidebar_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>

    <span class="k">def</span> <span class="nf">add_alphaearth_gui</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2017</span><span class="p">,</span>
        <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2024</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;AlphaEarth&quot;</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-earth&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a AlphaEarth GUI to the map.</span>
<span class="sd">        Earth Engine Dataset: https://developers.google.com/earth-engine/datasets/catalog/GOOGLE_SATELLITE_EMBEDDING_V1_ANNUAL</span>

<span class="sd">        Args:</span>
<span class="sd">            start_year (int, optional): The start year. Defaults to 2017.</span>
<span class="sd">            end_year (int, optional): The end year. Defaults to 2024.</span>
<span class="sd">            label (str, optional): The label of the widget. Defaults to &quot;AlphaEarth&quot;.</span>
<span class="sd">            widget_icon (str, optional): The icon of the widget. Defaults to &quot;mdi-earth&quot;.</span>
<span class="sd">            **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">ee</span>

        <span class="n">band_names</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;GOOGLE/SATELLITE_EMBEDDING/V1/ANNUAL&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
            <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
        <span class="n">year_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Year:&quot;</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">red_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A01&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Red:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
        <span class="p">)</span>

        <span class="n">green_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A02&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Green:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
        <span class="p">)</span>

        <span class="n">blue_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A03&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Blue:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
        <span class="p">)</span>

        <span class="n">min_max_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatRangeSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
            <span class="nb">min</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Min-Max:&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">layer_name_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer Name:&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">add_label_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Add labels on top&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
        <span class="p">)</span>

        <span class="n">terrain_exaggeration_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Terrain exaggeration:&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">apply_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Apply&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Apply changes&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">reset_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Reset to default&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the app&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_year</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="n">year</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
                <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">year_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_year</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">terrain_exaggeration_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_terrain</span><span class="p">(</span><span class="n">exaggeration</span><span class="o">=</span><span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">terrain_exaggeration_changed</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">apply_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">add_label_widget</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">before_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_symbol_layer_id</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">before_id</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">dataset</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;GOOGLE/SATELLITE_EMBEDDING/V1/ANNUAL&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">-01-01&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">-12-31&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">red_band</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">green_band</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">blue_band</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_ee_layer</span><span class="p">(</span>
                <span class="n">dataset</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_terrain</span><span class="p">(</span><span class="n">exaggeration</span><span class="o">=</span><span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">apply_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">apply_button_clicked</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">reset_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">year_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">2020</span>
            <span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]</span>
            <span class="n">red_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A01&quot;</span>
            <span class="n">green_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A02&quot;</span>
            <span class="n">blue_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A03&quot;</span>
            <span class="n">add_label_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">reset_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">reset_button_clicked</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">close_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="n">close_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_button_clicked</span><span class="p">)</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">year_slider</span><span class="p">,</span>
                <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">red_band</span><span class="p">,</span> <span class="n">green_band</span><span class="p">,</span> <span class="n">blue_band</span><span class="p">]),</span>
                <span class="n">min_max_slider</span><span class="p">,</span>
                <span class="n">terrain_exaggeration_slider</span><span class="p">,</span>
                <span class="n">add_label_widget</span><span class="p">,</span>
                <span class="n">layer_name_widget</span><span class="p">,</span>
                <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">apply_button</span><span class="p">,</span> <span class="n">reset_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_similarity_search</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">default_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2024</span><span class="p">,</span>
        <span class="n">default_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#0000ff&quot;</span><span class="p">,</span>
        <span class="n">default_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-map-search&quot;</span><span class="p">,</span>
        <span class="n">widget_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Similarity Search&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a similarity search widget to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            before_id: The ID of the layer to add the widget to.</span>
<span class="sd">            default_year: The default year to use for the widget. Defaults to 2024.</span>
<span class="sd">            default_color: The default color to use for the widget. Defaults to &quot;#0000ff&quot;.</span>
<span class="sd">            default_threshold: The default threshold to use for the widget. Defaults to 0.8.</span>
<span class="sd">            widget_icon: The icon for the widget. Defaults to &quot;mdi-map-search&quot;.</span>
<span class="sd">            widget_label: The label for the widget. Defaults to &quot;Similarity Search&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the add_to_sidebar method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.map_widgets</span> <span class="kn">import</span> <span class="n">SimilaritySearch</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">SimilaritySearch</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
            <span class="n">default_year</span><span class="o">=</span><span class="n">default_year</span><span class="p">,</span>
            <span class="n">default_color</span><span class="o">=</span><span class="n">default_color</span><span class="p">,</span>
            <span class="n">default_threshold</span><span class="o">=</span><span class="n">default_threshold</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">widget_label</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_time_slider</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">images</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">label_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
        <span class="n">slider_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
        <span class="n">button_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;45px&quot;</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Time Slider&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
        <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a time slider to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            images (dict, optional): The dictionary containing a set of images.</span>
<span class="sd">            labels (list, optional): The list of labels to be used for the time series. Defaults to None.</span>
<span class="sd">            time_interval (int, optional): Time interval in seconds. Defaults to 1.</span>
<span class="sd">            layer_name (str, optional): The name of the layer. Defaults to &quot;Image&quot;.</span>
<span class="sd">            zoom_to_layer (bool, optional): Whether to zoom to the extent of the layer. Defaults to False.</span>
<span class="sd">            label_width (str, optional): Width of the label. Defaults to &quot;150px&quot;.</span>
<span class="sd">            slider_width (str, optional): Width of the slider. Defaults to &quot;150px&quot;.</span>
<span class="sd">            button_width (str, optional): Width of the buttons. Defaults to &quot;45px&quot;.</span>
<span class="sd">            widget_icon (str, optional): The icon for the widget. Defaults to &quot;mdi-image&quot;.</span>
<span class="sd">            close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">            label (str, optional): The label for the widget. Defaults to &quot;Time Slider&quot;.</span>
<span class="sd">            background_color (str, optional): The background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">            height (str, optional): The height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">            expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments to be passed to the add_raster or add_cog_layer function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">TimeSliderWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">images</span><span class="p">,</span>
            <span class="n">labels</span><span class="p">,</span>
            <span class="n">time_interval</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">zoom_to_layer</span><span class="p">,</span>
            <span class="n">label_width</span><span class="p">,</span>
            <span class="n">slider_width</span><span class="p">,</span>
            <span class="n">button_width</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">observe_mapillary</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">html_widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">default_message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Observes the mapillary data and updates the html widget.</span>

<span class="sd">        Args:</span>
<span class="sd">            html_widget (widgets.HTML): The html widget to display the mapillary data.</span>
<span class="sd">            style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">                or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">            radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">                image. Defaults to 0.00005 degrees.</span>
<span class="sd">            height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">            frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">                Defaults to 0.</span>
<span class="sd">            default_message (str, optional): The message to display when no Mapillary image is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
            <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                &lt;iframe</span>
<span class="s2">                    src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                &lt;/iframe&gt;</span>
<span class="s2">                &quot;&quot;&quot;</span>
                <span class="n">html_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default_message</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span> <span class="o">=</span> <span class="n">log_lng_lat</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unobserve_mapillary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unobserves the mapillary street view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unobserve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_vector_editor</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
        <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
        <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="n">fit_bounds_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a widget-based interface for creating and managing vector data on a map.</span>

<span class="sd">        This function creates an interactive widget interface that allows users to draw features</span>
<span class="sd">        (points, lines, polygons) on a map, assign properties to these features, and export them</span>
<span class="sd">        as GeoJSON files. The interface includes a map, a sidebar for property management, and</span>
<span class="sd">        buttons for saving, exporting, and resetting the data.</span>

<span class="sd">        Args:</span>
<span class="sd">            m (Map, optional): An existing Map object. If not provided, a default map with</span>
<span class="sd">                basemaps and drawing controls will be created. Defaults to None.</span>
<span class="sd">            filename (str or gpd.GeoDataFrame): The path to a GeoJSON file or a GeoDataFrame</span>
<span class="sd">                containing the vector data to be edited. Defaults to None.</span>
<span class="sd">            properties (Dict[str, List[Any]], optional): A dictionary where keys are property names</span>
<span class="sd">                and values are lists of possible values for each property. These properties can be</span>
<span class="sd">                assigned to the drawn features. Defaults to None.</span>
<span class="sd">            time_format (str, optional): The format string for the timestamp used in the exported</span>
<span class="sd">                filename. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">            column_widths (Optional[List[int]], optional): A list of two integers specifying the</span>
<span class="sd">                relative widths of the map and sidebar columns. Defaults to (9, 3).</span>
<span class="sd">            map_height (str, optional): The height of the map widget. Defaults to &quot;600px&quot;.</span>
<span class="sd">            out_dir (str, optional): The directory where the exported GeoJSON files will be saved.</span>
<span class="sd">                If not provided, the current working directory is used. Defaults to None.</span>
<span class="sd">            filename_prefix (str, optional): A prefix to be added to the exported filename.</span>
<span class="sd">                Defaults to &quot;&quot;.</span>
<span class="sd">            file_ext (str, optional): The file extension for the exported file. Defaults to &quot;geojson&quot;.</span>
<span class="sd">            add_mapillary (bool, optional): Whether to add a Mapillary image widget that displays the</span>
<span class="sd">                nearest image to the clicked point on the map. Defaults to False.</span>
<span class="sd">            style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">                or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">            radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">                image. Defaults to 0.00005 degrees.</span>
<span class="sd">            width (int, optional): The width of the Mapillary image widget. Defaults to 300.</span>
<span class="sd">            height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">            frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">                Defaults to 0.</span>
<span class="sd">            controls (Optional[List[str]], optional): The drawing controls to be added to the map.</span>
<span class="sd">                Defaults to [&quot;point&quot;, &quot;polygon&quot;, &quot;line_string&quot;, &quot;trash&quot;].</span>
<span class="sd">            position (str, optional): The position of the drawing controls on the map. Defaults to &quot;top-right&quot;.</span>
<span class="sd">            **kwargs (Any): Additional keyword arguments that may be passed to the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

        <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">controls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;line_string&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.parquet&quot;</span><span class="p">,</span> <span class="s2">&quot;.pq&quot;</span><span class="p">,</span> <span class="s2">&quot;.geoparquet&quot;</span><span class="p">]:</span>
                <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filename must be a string, dict, or GeoDataFrame.&quot;</span><span class="p">)</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">properties</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">dtypes</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;int32&quot;</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;bool&quot;</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">columns</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]]</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span>
            <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="p">)</span>

        <span class="n">draw_features</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">draw_feature</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">prop</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">draw_features</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">draw_feature</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;draw_features&quot;</span><span class="p">,</span> <span class="n">draw_features</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span> <span class="o">=</span> <span class="n">geojson</span>

        <span class="c1"># Expand dropdown options to include values from the GeoJSON</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="c1"># Collect unique values from the loaded features</span>
                <span class="n">existing_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">feature_data</span> <span class="ow">in</span> <span class="n">draw_features</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">feature_data</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">feature_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">existing_values</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

                <span class="c1"># Merge existing values with provided options</span>
                <span class="n">options_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                <span class="n">merged_options</span> <span class="o">=</span> <span class="n">options_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">existing_values</span><span class="p">)</span>
                <span class="c1"># Convert back to list, maintaining order (original options first)</span>
                <span class="n">merged_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">merged_options</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">existing_values</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options_set</span><span class="p">:</span>
                        <span class="n">merged_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">merged_list</span>

        <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

        <span class="n">prop_widgets</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

        <span class="n">image_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                        <span class="n">options</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                        <span class="c1"># value=None,</span>
                        <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                        <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                    <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatText</span><span class="p">(</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                        <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                        <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>

        <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">feature_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                            <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
                            <span class="c1"># For dropdown widgets, only set value if it&#39;s in options</span>
                            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">prop_widget</span><span class="p">,</span> <span class="s2">&quot;options&quot;</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
                                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                    <span class="c1"># Fall back to first option if value not found</span>
                                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">tuple</span>
                    <span class="p">):</span>
                        <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
            <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                &lt;iframe</span>
<span class="s2">                    src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                &lt;/iframe&gt;</span>
<span class="s2">                &quot;&quot;&quot;</span>
                <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found.&quot;</span>

        <span class="k">if</span> <span class="n">add_mapillary</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

        <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
        <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
        <span class="p">)</span>
        <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
        <span class="p">)</span>
        <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">feature_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span>
                <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Feature saved.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Please select a feature to save.&quot;</span><span class="p">)</span>

        <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">out_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename_prefix</span><span class="si">}{</span><span class="n">current_time</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span>
                        <span class="s2">&quot;properties&quot;</span>
                    <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span>

            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
            <span class="p">)</span>
            <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_reset_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">description</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="k">if</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">tuple</span>
                    <span class="p">):</span>
                        <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">]</span>

        <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_click</span><span class="p">)</span>

        <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">prop_widgets</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
            <span class="n">output</span><span class="p">,</span>
            <span class="n">image_widget</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">sidebar_widget</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Vector Editor&quot;</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-shape-polygon-plus&quot;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets the bounds of the map view state.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple of two tuples, each containing (lat, lng) coordinates for the southwest and northeast corners of the map view.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.first_symbol_layer_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">first_symbol_layer_id</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.first_symbol_layer_id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the ID of the first symbol layer in the map's current style.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.layer_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">layer_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.layer_names" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets layer names as a list.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of layer names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.sidebar_widgets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sidebar_widgets</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.sidebar_widgets" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns a dictionary of widgets currently in the sidebar.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="ipywidgets.Widget">Widget</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, widgets.Widget]: A dictionary where keys are the labels of the widgets and values are the widgets themselves.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.source_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">source_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.source_names" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets source as a list.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of sources.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.user_roi" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">user_roi</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.user_roi" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets the first user-drawn ROI feature.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[dict]: The first user-drawn ROI feature or None if no features are drawn.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="leafmap.maplibregl.Map.user_rois" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">user_rois</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#leafmap.maplibregl.Map.user_rois" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets all user-drawn ROI features.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of all user-drawn ROI features.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;dark-matter&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;navigation&#39;</span><span class="p">:</span> <span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="s1">&#39;fullscreen&#39;</span><span class="p">:</span> <span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="s1">&#39;bottom-left&#39;</span><span class="p">,</span> <span class="s1">&#39;globe&#39;</span><span class="p">:</span> <span class="s1">&#39;top-right&#39;</span><span class="p">},</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mercator&#39;</span><span class="p">,</span> <span class="n">use_message_queue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_sidebar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_floating_sidebar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sidebar_visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sidebar_width</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">sidebar_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_manager_expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a Map object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>center</code>
            </td>
            <td>
                  <code><span title="tuple">tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The center of the map (lon, lat). Defaults
to (0, 20).</p>
              </div>
            </td>
            <td>
                  <code>(0, 20)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zoom</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zoom level of the map. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pitch</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pitch of the map. Measured in degrees
away from the plane of the screen (0-85) Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bearing</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The bearing of the map. Measured in degrees
counter-clockwise from north. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the map. It can be a string or a URL.
If it is a string, it must be one of the following: "dark-matter", "positron",
"carto-positron", "voyager", "positron-nolabels", "dark-matter-nolabels",
"voyager-nolabels", "demotiles", "liberty", "bright", or "positron2".
If a MapTiler API key is set, you can also use any of the MapTiler styles,
such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,
openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.
If it is a URL, it must point to a MapLibre style JSON. Defaults to "dark-matter".</p>
              </div>
            </td>
            <td>
                  <code>&#39;dark-matter&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;600px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>controls</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The controls and their positions on the
map. Defaults to {"fullscreen": "top-right", "scale": "bottom-left"}.</p>
              </div>
            </td>
            <td>
                  <code>{&#39;navigation&#39;: &#39;top-right&#39;, &#39;fullscreen&#39;: &#39;top-right&#39;, &#39;scale&#39;: &#39;bottom-left&#39;, &#39;globe&#39;: &#39;top-right&#39;}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>projection</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The projection of the map. It can be
"mercator" or "globe". Defaults to "mercator".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mercator&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_message_queue</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the message queue.
Defaults to None. If None, it will check the environment variable
"USE_MESSAGE_QUEUE". If it is set to "True", it will use the message queue, which
is needed to export the map to HTML. If it is set to "False", it will not use the message
queue, which is needed to display the map multiple times in the same notebook.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_sidebar</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a sidebar to the map.
Defaults to False. If True, the map will be displayed in a sidebar.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_floating_sidebar</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a floating sidebar to the map.
Defaults to True. If True, the map will be displayed in a floating sidebar.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar is visible. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the sidebar in pixels. Defaults to 360.</p>
              </div>
            </td>
            <td>
                  <code>360</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The arguments for the sidebar. It can
be a dictionary with the following keys: "sidebar_visible", "min_width",
"max_width", and "sidebar_content". Defaults to None. If None, it will
use the default values for the sidebar.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_manager_expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer manager is expanded. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the MapOptions class.
See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/
for more information.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">center</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
    <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;navigation&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;globe&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">projection</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mercator&quot;</span><span class="p">,</span>
    <span class="n">use_message_queue</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">add_floating_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sidebar_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
    <span class="n">sidebar_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_manager_expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Map object.</span>

<span class="sd">    Args:</span>
<span class="sd">        center (tuple, optional): The center of the map (lon, lat). Defaults</span>
<span class="sd">            to (0, 20).</span>
<span class="sd">        zoom (float, optional): The zoom level of the map. Defaults to 1.</span>
<span class="sd">        pitch (float, optional): The pitch of the map. Measured in degrees</span>
<span class="sd">            away from the plane of the screen (0-85) Defaults to 0.</span>
<span class="sd">        bearing (float, optional): The bearing of the map. Measured in degrees</span>
<span class="sd">            counter-clockwise from north. Defaults to 0.</span>
<span class="sd">        style (str, optional): The style of the map. It can be a string or a URL.</span>
<span class="sd">            If it is a string, it must be one of the following: &quot;dark-matter&quot;, &quot;positron&quot;,</span>
<span class="sd">            &quot;carto-positron&quot;, &quot;voyager&quot;, &quot;positron-nolabels&quot;, &quot;dark-matter-nolabels&quot;,</span>
<span class="sd">            &quot;voyager-nolabels&quot;, &quot;demotiles&quot;, &quot;liberty&quot;, &quot;bright&quot;, or &quot;positron2&quot;.</span>
<span class="sd">            If a MapTiler API key is set, you can also use any of the MapTiler styles,</span>
<span class="sd">            such as aquarelle, backdrop, basic, bright, dataviz, landscape, ocean,</span>
<span class="sd">            openstreetmap, outdoor, satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">            If it is a URL, it must point to a MapLibre style JSON. Defaults to &quot;dark-matter&quot;.</span>
<span class="sd">        height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">        controls (dict, optional): The controls and their positions on the</span>
<span class="sd">            map. Defaults to {&quot;fullscreen&quot;: &quot;top-right&quot;, &quot;scale&quot;: &quot;bottom-left&quot;}.</span>
<span class="sd">        projection (str, optional): The projection of the map. It can be</span>
<span class="sd">            &quot;mercator&quot; or &quot;globe&quot;. Defaults to &quot;mercator&quot;.</span>
<span class="sd">        use_message_queue (bool, optional): Whether to use the message queue.</span>
<span class="sd">            Defaults to None. If None, it will check the environment variable</span>
<span class="sd">            &quot;USE_MESSAGE_QUEUE&quot;. If it is set to &quot;True&quot;, it will use the message queue, which</span>
<span class="sd">            is needed to export the map to HTML. If it is set to &quot;False&quot;, it will not use the message</span>
<span class="sd">            queue, which is needed to display the map multiple times in the same notebook.</span>
<span class="sd">        add_sidebar (bool, optional): Whether to add a sidebar to the map.</span>
<span class="sd">            Defaults to False. If True, the map will be displayed in a sidebar.</span>
<span class="sd">        add_floating_sidebar (bool, optional): Whether to add a floating sidebar to the map.</span>
<span class="sd">            Defaults to True. If True, the map will be displayed in a floating sidebar.</span>
<span class="sd">        sidebar_visible (bool, optional): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">        sidebar_width (int, optional): The width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">        sidebar_args (dict, optional): The arguments for the sidebar. It can</span>
<span class="sd">            be a dictionary with the following keys: &quot;sidebar_visible&quot;, &quot;min_width&quot;,</span>
<span class="sd">            &quot;max_width&quot;, and &quot;sidebar_content&quot;. Defaults to None. If None, it will</span>
<span class="sd">            use the default values for the sidebar.</span>
<span class="sd">        layer_manager_expanded (bool, optional): Whether the layer manager is expanded. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the MapOptions class.</span>
<span class="sd">            See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/MapOptions/</span>
<span class="sd">            for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">carto_basemaps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;dark-matter&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron&quot;</span><span class="p">,</span>
        <span class="s2">&quot;voyager&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron-nolabels&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dark-matter-nolabels&quot;</span><span class="p">,</span>
        <span class="s2">&quot;voyager-nolabels&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">openfreemap_basemaps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;liberty&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bright&quot;</span><span class="p">,</span>
        <span class="s2">&quot;positron2&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;The provided style URL is invalid. Falling back to &#39;dark-matter&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;dark-matter&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">maptiler_3d_style</span><span class="p">(</span>
                <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;3d-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="n">exaggeration</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;exaggeration&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">tile_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tile_size&quot;</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span>
                <span class="n">hillshade</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hillshade&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;amazon-&quot;</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_amazon_style</span><span class="p">(</span>
                <span class="n">map_style</span><span class="o">=</span><span class="n">style</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;amazon-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="n">region</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="s2">&quot;us-east-1&quot;</span><span class="p">),</span>
                <span class="n">api_key</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">token</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;AWS_MAPS_API_KEY&quot;</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">openfreemap_basemaps</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;positron2&quot;</span><span class="p">:</span>
                <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;positron&quot;</span>
            <span class="n">style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.openfreemap.org/styles/</span><span class="si">{</span><span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;demotiles&quot;</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;https://demotiles.maplibre.org/style.json&quot;</span>
        <span class="k">elif</span> <span class="s2">&quot;background-&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">background</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">carto_basemaps</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">construct_carto_basemap_url</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">map_options</span> <span class="o">=</span> <span class="n">MapOptions</span><span class="p">(</span>
        <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span> <span class="n">pitch</span><span class="o">=</span><span class="n">pitch</span><span class="p">,</span> <span class="n">bearing</span><span class="o">=</span><span class="n">bearing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">map_options</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">use_message_queue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">use_message_queue</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;USE_MESSAGE_QUEUE&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">use_message_queue</span><span class="p">(</span><span class="n">use_message_queue</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">control</span><span class="p">,</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">controls</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">[</span><span class="n">control</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="s2">&quot;background&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">BACKGROUND</span><span class="p">),</span>
        <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span><span class="p">,</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="o">=</span> <span class="n">style</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">layer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">projection</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;globe&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_globe_control</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_projection</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                <span class="mi">10</span><span class="p">,</span>
                <span class="s2">&quot;vertical-perspective&quot;</span><span class="p">,</span>
                <span class="mi">12</span><span class="p">,</span>
                <span class="s2">&quot;mercator&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">sidebar_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sidebar_args</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s2">&quot;sidebar_visible&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
        <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
    <span class="k">if</span> <span class="s2">&quot;sidebar_width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sidebar_width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">sidebar_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sidebar_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
        <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
    <span class="k">if</span> <span class="s2">&quot;expanded&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sidebar_args</span><span class="p">:</span>
        <span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;expanded&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer_manager_expanded</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span> <span class="o">=</span> <span class="n">sidebar_args</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar_flag</span> <span class="o">=</span> <span class="n">add_floating_sidebar</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_widget</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">add_sidebar</span> <span class="ow">or</span> <span class="n">add_floating_sidebar</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ipython_display_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_patched_display</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a widget or layer to the map based on the type of obj.</p>
<p>If obj is a string and equals "NASA_OPERA", it adds a NASA OPERA data GUI widget to the sidebar.
Otherwise, it attempts to add obj as a layer to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The object to add to the map. Can be a string or any other type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the widget or layer constructor.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a widget or layer to the map based on the type of obj.</span>

<span class="sd">    If obj is a string and equals &quot;NASA_OPERA&quot;, it adds a NASA OPERA data GUI widget to the sidebar.</span>
<span class="sd">    Otherwise, it attempts to add obj as a layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (Union[str, Any]): The object to add to the map. Can be a string or any other type.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to pass to the widget or layer constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;NASA_OPERA&quot;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">nasa_opera_gui</span>

            <span class="n">widget</span> <span class="o">=</span> <span class="n">nasa_opera_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;maplibre&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-satellite-variant&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;NASA OPERA&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_3d_buildings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_3d_buildings</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;buildings&#39;</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="s1">&#39;royalblue&#39;</span><span class="p">,</span> <span class="s1">&#39;lightblue&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_3d_buildings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a 3D buildings layer to the map.</p>
<p>This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings' heights
are determined by the 'render_height' property, and their colors are interpolated based on specified values.
The layer is only visible from a certain zoom level, specified by the 'min_zoom' parameter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the 3D buildings layer. Defaults to "buildings".</p>
              </div>
            </td>
            <td>
                  <code>&#39;buildings&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_zoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</p>
              </div>
            </td>
            <td>
                  <code>15</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</p>
              </div>
            </td>
            <td>
                  <code>[0, 200, 400]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of colors corresponding to the 'values' list. Each color is applied to the
building height range defined by the 'values'. Defaults to ["lightgray", "royalblue", "lightblue"].</p>
              </div>
            </td>
            <td>
                  <code>[&#39;lightgray&#39;, &#39;royalblue&#39;, &#39;lightblue&#39;]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_layer method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the lengths of 'values' and 'colors' lists do not match.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4676</span>
<span class="normal">4677</span>
<span class="normal">4678</span>
<span class="normal">4679</span>
<span class="normal">4680</span>
<span class="normal">4681</span>
<span class="normal">4682</span>
<span class="normal">4683</span>
<span class="normal">4684</span>
<span class="normal">4685</span>
<span class="normal">4686</span>
<span class="normal">4687</span>
<span class="normal">4688</span>
<span class="normal">4689</span>
<span class="normal">4690</span>
<span class="normal">4691</span>
<span class="normal">4692</span>
<span class="normal">4693</span>
<span class="normal">4694</span>
<span class="normal">4695</span>
<span class="normal">4696</span>
<span class="normal">4697</span>
<span class="normal">4698</span>
<span class="normal">4699</span>
<span class="normal">4700</span>
<span class="normal">4701</span>
<span class="normal">4702</span>
<span class="normal">4703</span>
<span class="normal">4704</span>
<span class="normal">4705</span>
<span class="normal">4706</span>
<span class="normal">4707</span>
<span class="normal">4708</span>
<span class="normal">4709</span>
<span class="normal">4710</span>
<span class="normal">4711</span>
<span class="normal">4712</span>
<span class="normal">4713</span>
<span class="normal">4714</span>
<span class="normal">4715</span>
<span class="normal">4716</span>
<span class="normal">4717</span>
<span class="normal">4718</span>
<span class="normal">4719</span>
<span class="normal">4720</span>
<span class="normal">4721</span>
<span class="normal">4722</span>
<span class="normal">4723</span>
<span class="normal">4724</span>
<span class="normal">4725</span>
<span class="normal">4726</span>
<span class="normal">4727</span>
<span class="normal">4728</span>
<span class="normal">4729</span>
<span class="normal">4730</span>
<span class="normal">4731</span>
<span class="normal">4732</span>
<span class="normal">4733</span>
<span class="normal">4734</span>
<span class="normal">4735</span>
<span class="normal">4736</span>
<span class="normal">4737</span>
<span class="normal">4738</span>
<span class="normal">4739</span>
<span class="normal">4740</span>
<span class="normal">4741</span>
<span class="normal">4742</span>
<span class="normal">4743</span>
<span class="normal">4744</span>
<span class="normal">4745</span>
<span class="normal">4746</span>
<span class="normal">4747</span>
<span class="normal">4748</span>
<span class="normal">4749</span>
<span class="normal">4750</span>
<span class="normal">4751</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_3d_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
    <span class="n">min_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a 3D buildings layer to the map.</span>

<span class="sd">    This function creates and adds a 3D buildings layer to the map using fill-extrusion. The buildings&#39; heights</span>
<span class="sd">    are determined by the &#39;render_height&#39; property, and their colors are interpolated based on specified values.</span>
<span class="sd">    The layer is only visible from a certain zoom level, specified by the &#39;min_zoom&#39; parameter.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the 3D buildings layer. Defaults to &quot;buildings&quot;.</span>
<span class="sd">        min_zoom (int): The minimum zoom level at which the 3D buildings will start to be visible. Defaults to 15.</span>
<span class="sd">        values (List[int]): A list of height values (in meters) used for color interpolation. Defaults to [0, 200, 400].</span>
<span class="sd">        colors (List[str]): A list of colors corresponding to the &#39;values&#39; list. Each color is applied to the</span>
<span class="sd">            building height range defined by the &#39;values&#39;. Defaults to [&quot;lightgray&quot;, &quot;royalblue&quot;, &quot;lightblue&quot;].</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_layer method.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the lengths of &#39;values&#39; and &#39;colors&#39; lists do not match.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">MAPTILER_KEY</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/v3/tiles.json?key=</span><span class="si">{</span><span class="n">MAPTILER_KEY</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>

    <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min-zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
            <span class="p">]</span>
            <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
            <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
                <span class="mi">15</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="mi">16</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_height&quot;</span><span class="p">],</span>
            <span class="p">],</span>
            <span class="s2">&quot;fill-extrusion-base&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;case&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">],</span> <span class="mi">16</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;render_min_height&quot;</span><span class="p">],</span>
                <span class="mi">0</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;openmaptiles&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_alphaearth_gui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_alphaearth_gui</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="mi">2017</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2024</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;AlphaEarth&#39;</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-earth&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_alphaearth_gui" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a AlphaEarth GUI to the map.
Earth Engine Dataset: https://developers.google.com/earth-engine/datasets/catalog/GOOGLE_SATELLITE_EMBEDDING_V1_ANNUAL</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>start_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The start year. Defaults to 2017.</p>
              </div>
            </td>
            <td>
                  <code>2017</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The end year. Defaults to 2024.</p>
              </div>
            </td>
            <td>
                  <code>2024</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label of the widget. Defaults to "AlphaEarth".</p>
              </div>
            </td>
            <td>
                  <code>&#39;AlphaEarth&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon of the widget. Defaults to "mdi-earth".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-earth&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_to_sidebar method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6422</span>
<span class="normal">6423</span>
<span class="normal">6424</span>
<span class="normal">6425</span>
<span class="normal">6426</span>
<span class="normal">6427</span>
<span class="normal">6428</span>
<span class="normal">6429</span>
<span class="normal">6430</span>
<span class="normal">6431</span>
<span class="normal">6432</span>
<span class="normal">6433</span>
<span class="normal">6434</span>
<span class="normal">6435</span>
<span class="normal">6436</span>
<span class="normal">6437</span>
<span class="normal">6438</span>
<span class="normal">6439</span>
<span class="normal">6440</span>
<span class="normal">6441</span>
<span class="normal">6442</span>
<span class="normal">6443</span>
<span class="normal">6444</span>
<span class="normal">6445</span>
<span class="normal">6446</span>
<span class="normal">6447</span>
<span class="normal">6448</span>
<span class="normal">6449</span>
<span class="normal">6450</span>
<span class="normal">6451</span>
<span class="normal">6452</span>
<span class="normal">6453</span>
<span class="normal">6454</span>
<span class="normal">6455</span>
<span class="normal">6456</span>
<span class="normal">6457</span>
<span class="normal">6458</span>
<span class="normal">6459</span>
<span class="normal">6460</span>
<span class="normal">6461</span>
<span class="normal">6462</span>
<span class="normal">6463</span>
<span class="normal">6464</span>
<span class="normal">6465</span>
<span class="normal">6466</span>
<span class="normal">6467</span>
<span class="normal">6468</span>
<span class="normal">6469</span>
<span class="normal">6470</span>
<span class="normal">6471</span>
<span class="normal">6472</span>
<span class="normal">6473</span>
<span class="normal">6474</span>
<span class="normal">6475</span>
<span class="normal">6476</span>
<span class="normal">6477</span>
<span class="normal">6478</span>
<span class="normal">6479</span>
<span class="normal">6480</span>
<span class="normal">6481</span>
<span class="normal">6482</span>
<span class="normal">6483</span>
<span class="normal">6484</span>
<span class="normal">6485</span>
<span class="normal">6486</span>
<span class="normal">6487</span>
<span class="normal">6488</span>
<span class="normal">6489</span>
<span class="normal">6490</span>
<span class="normal">6491</span>
<span class="normal">6492</span>
<span class="normal">6493</span>
<span class="normal">6494</span>
<span class="normal">6495</span>
<span class="normal">6496</span>
<span class="normal">6497</span>
<span class="normal">6498</span>
<span class="normal">6499</span>
<span class="normal">6500</span>
<span class="normal">6501</span>
<span class="normal">6502</span>
<span class="normal">6503</span>
<span class="normal">6504</span>
<span class="normal">6505</span>
<span class="normal">6506</span>
<span class="normal">6507</span>
<span class="normal">6508</span>
<span class="normal">6509</span>
<span class="normal">6510</span>
<span class="normal">6511</span>
<span class="normal">6512</span>
<span class="normal">6513</span>
<span class="normal">6514</span>
<span class="normal">6515</span>
<span class="normal">6516</span>
<span class="normal">6517</span>
<span class="normal">6518</span>
<span class="normal">6519</span>
<span class="normal">6520</span>
<span class="normal">6521</span>
<span class="normal">6522</span>
<span class="normal">6523</span>
<span class="normal">6524</span>
<span class="normal">6525</span>
<span class="normal">6526</span>
<span class="normal">6527</span>
<span class="normal">6528</span>
<span class="normal">6529</span>
<span class="normal">6530</span>
<span class="normal">6531</span>
<span class="normal">6532</span>
<span class="normal">6533</span>
<span class="normal">6534</span>
<span class="normal">6535</span>
<span class="normal">6536</span>
<span class="normal">6537</span>
<span class="normal">6538</span>
<span class="normal">6539</span>
<span class="normal">6540</span>
<span class="normal">6541</span>
<span class="normal">6542</span>
<span class="normal">6543</span>
<span class="normal">6544</span>
<span class="normal">6545</span>
<span class="normal">6546</span>
<span class="normal">6547</span>
<span class="normal">6548</span>
<span class="normal">6549</span>
<span class="normal">6550</span>
<span class="normal">6551</span>
<span class="normal">6552</span>
<span class="normal">6553</span>
<span class="normal">6554</span>
<span class="normal">6555</span>
<span class="normal">6556</span>
<span class="normal">6557</span>
<span class="normal">6558</span>
<span class="normal">6559</span>
<span class="normal">6560</span>
<span class="normal">6561</span>
<span class="normal">6562</span>
<span class="normal">6563</span>
<span class="normal">6564</span>
<span class="normal">6565</span>
<span class="normal">6566</span>
<span class="normal">6567</span>
<span class="normal">6568</span>
<span class="normal">6569</span>
<span class="normal">6570</span>
<span class="normal">6571</span>
<span class="normal">6572</span>
<span class="normal">6573</span>
<span class="normal">6574</span>
<span class="normal">6575</span>
<span class="normal">6576</span>
<span class="normal">6577</span>
<span class="normal">6578</span>
<span class="normal">6579</span>
<span class="normal">6580</span>
<span class="normal">6581</span>
<span class="normal">6582</span>
<span class="normal">6583</span>
<span class="normal">6584</span>
<span class="normal">6585</span>
<span class="normal">6586</span>
<span class="normal">6587</span>
<span class="normal">6588</span>
<span class="normal">6589</span>
<span class="normal">6590</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_alphaearth_gui</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">start_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2017</span><span class="p">,</span>
    <span class="n">end_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2024</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;AlphaEarth&quot;</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-earth&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a AlphaEarth GUI to the map.</span>
<span class="sd">    Earth Engine Dataset: https://developers.google.com/earth-engine/datasets/catalog/GOOGLE_SATELLITE_EMBEDDING_V1_ANNUAL</span>

<span class="sd">    Args:</span>
<span class="sd">        start_year (int, optional): The start year. Defaults to 2017.</span>
<span class="sd">        end_year (int, optional): The end year. Defaults to 2024.</span>
<span class="sd">        label (str, optional): The label of the widget. Defaults to &quot;AlphaEarth&quot;.</span>
<span class="sd">        widget_icon (str, optional): The icon of the widget. Defaults to &quot;mdi-earth&quot;.</span>
<span class="sd">        **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">ee</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;GOOGLE/SATELLITE_EMBEDDING/V1/ANNUAL&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
        <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">year_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Year:&quot;</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">red_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A01&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Red:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
    <span class="p">)</span>

    <span class="n">green_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A02&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Green:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
    <span class="p">)</span>

    <span class="n">blue_band</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">band_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A03&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Blue:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
    <span class="p">)</span>

    <span class="n">min_max_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatRangeSlider</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
        <span class="nb">min</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Min-Max:&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">layer_name_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer Name:&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">add_label_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Add labels on top&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span>
    <span class="p">)</span>

    <span class="n">terrain_exaggeration_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Terrain exaggeration:&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">apply_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Apply&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Apply changes&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">reset_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Reset to default&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the app&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_year</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">year</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
            <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">year_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_year</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">terrain_exaggeration_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_terrain</span><span class="p">(</span><span class="n">exaggeration</span><span class="o">=</span><span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">terrain_exaggeration_changed</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_label_widget</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">before_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_symbol_layer_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">before_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">dataset</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;GOOGLE/SATELLITE_EMBEDDING/V1/ANNUAL&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">-01-01&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">-12-31&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">red_band</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">green_band</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">blue_band</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_ee_layer</span><span class="p">(</span>
            <span class="n">dataset</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_terrain</span><span class="p">(</span><span class="n">exaggeration</span><span class="o">=</span><span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">apply_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">apply_button_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">year_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">2020</span>
        <span class="n">terrain_exaggeration_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">min_max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]</span>
        <span class="n">red_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A01&quot;</span>
        <span class="n">green_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A02&quot;</span>
        <span class="n">blue_band</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;A03&quot;</span>
        <span class="n">add_label_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Embeddings </span><span class="si">{</span><span class="n">year_slider</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name_widget</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">reset_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">reset_button_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close_button_clicked</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

    <span class="n">close_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_button_clicked</span><span class="p">)</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">year_slider</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">red_band</span><span class="p">,</span> <span class="n">green_band</span><span class="p">,</span> <span class="n">blue_band</span><span class="p">]),</span>
            <span class="n">min_max_slider</span><span class="p">,</span>
            <span class="n">terrain_exaggeration_slider</span><span class="p">,</span>
            <span class="n">add_label_widget</span><span class="p">,</span>
            <span class="n">layer_name_widget</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">apply_button</span><span class="p">,</span> <span class="n">reset_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_annotation_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_annotation_widget</span><span class="p">(</span><span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">file_ext</span><span class="o">=</span><span class="s1">&#39;geojson&#39;</span><span class="p">,</span> <span class="n">add_mapillary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-drawing&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Annotation&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_annotation_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds an annotation widget to the map.</p>
<p>This method creates a vector data widget for annotations and adds it to the map's sidebar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Properties of the annotation. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format for the timestamp. Defaults to "%Y%m%dT%H%M%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>out_dir</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output directory for the annotation data. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename_prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prefix for the filename of the annotation data. Defaults to "".</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_ext</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File extension for the annotation data. Defaults to "geojson".</p>
              </div>
            </td>
            <td>
                  <code>&#39;geojson&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_mapillary</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add Mapillary data. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Style of the annotation. Defaults to "photo".</p>
              </div>
            </td>
            <td>
                  <code>&#39;photo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Radius of the annotation. Defaults to 0.00005.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the annotation widget. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>300</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the annotation widget. Defaults to 420.</p>
              </div>
            </td>
            <td>
                  <code>420</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Border width of the annotation widget frame. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to allow downloading the annotation data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the annotation widget. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Paint properties for the annotation. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a header to the annotation widget. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the annotation widget. Defaults to "mdi-drawing".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-drawing&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for closing the annotation widget. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label for the annotation widget. Defaults to "Annotation".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Annotation&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the annotation widget. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the annotation widget is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function to be called when the export button is clicked.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_to_sidebar method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6150</span>
<span class="normal">6151</span>
<span class="normal">6152</span>
<span class="normal">6153</span>
<span class="normal">6154</span>
<span class="normal">6155</span>
<span class="normal">6156</span>
<span class="normal">6157</span>
<span class="normal">6158</span>
<span class="normal">6159</span>
<span class="normal">6160</span>
<span class="normal">6161</span>
<span class="normal">6162</span>
<span class="normal">6163</span>
<span class="normal">6164</span>
<span class="normal">6165</span>
<span class="normal">6166</span>
<span class="normal">6167</span>
<span class="normal">6168</span>
<span class="normal">6169</span>
<span class="normal">6170</span>
<span class="normal">6171</span>
<span class="normal">6172</span>
<span class="normal">6173</span>
<span class="normal">6174</span>
<span class="normal">6175</span>
<span class="normal">6176</span>
<span class="normal">6177</span>
<span class="normal">6178</span>
<span class="normal">6179</span>
<span class="normal">6180</span>
<span class="normal">6181</span>
<span class="normal">6182</span>
<span class="normal">6183</span>
<span class="normal">6184</span>
<span class="normal">6185</span>
<span class="normal">6186</span>
<span class="normal">6187</span>
<span class="normal">6188</span>
<span class="normal">6189</span>
<span class="normal">6190</span>
<span class="normal">6191</span>
<span class="normal">6192</span>
<span class="normal">6193</span>
<span class="normal">6194</span>
<span class="normal">6195</span>
<span class="normal">6196</span>
<span class="normal">6197</span>
<span class="normal">6198</span>
<span class="normal">6199</span>
<span class="normal">6200</span>
<span class="normal">6201</span>
<span class="normal">6202</span>
<span class="normal">6203</span>
<span class="normal">6204</span>
<span class="normal">6205</span>
<span class="normal">6206</span>
<span class="normal">6207</span>
<span class="normal">6208</span>
<span class="normal">6209</span>
<span class="normal">6210</span>
<span class="normal">6211</span>
<span class="normal">6212</span>
<span class="normal">6213</span>
<span class="normal">6214</span>
<span class="normal">6215</span>
<span class="normal">6216</span>
<span class="normal">6217</span>
<span class="normal">6218</span>
<span class="normal">6219</span>
<span class="normal">6220</span>
<span class="normal">6221</span>
<span class="normal">6222</span>
<span class="normal">6223</span>
<span class="normal">6224</span>
<span class="normal">6225</span>
<span class="normal">6226</span>
<span class="normal">6227</span>
<span class="normal">6228</span>
<span class="normal">6229</span>
<span class="normal">6230</span>
<span class="normal">6231</span>
<span class="normal">6232</span>
<span class="normal">6233</span>
<span class="normal">6234</span>
<span class="normal">6235</span>
<span class="normal">6236</span>
<span class="normal">6237</span>
<span class="normal">6238</span>
<span class="normal">6239</span>
<span class="normal">6240</span>
<span class="normal">6241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_annotation_widget</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
    <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-drawing&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds an annotation widget to the map.</span>

<span class="sd">    This method creates a vector data widget for annotations and adds it to the map&#39;s sidebar.</span>

<span class="sd">    Args:</span>
<span class="sd">        properties (Optional[Dict[str, List[Any]]], optional): Properties of the annotation. Defaults to None.</span>
<span class="sd">        time_format (str, optional): Format for the timestamp. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">        out_dir (Optional[str], optional): Output directory for the annotation data. Defaults to None.</span>
<span class="sd">        filename_prefix (str, optional): Prefix for the filename of the annotation data. Defaults to &quot;&quot;.</span>
<span class="sd">        file_ext (str, optional): File extension for the annotation data. Defaults to &quot;geojson&quot;.</span>
<span class="sd">        add_mapillary (bool, optional): Whether to add Mapillary data. Defaults to False.</span>
<span class="sd">        style (str, optional): Style of the annotation. Defaults to &quot;photo&quot;.</span>
<span class="sd">        radius (float, optional): Radius of the annotation. Defaults to 0.00005.</span>
<span class="sd">        width (int, optional): Width of the annotation widget. Defaults to 300.</span>
<span class="sd">        height (int, optional): Height of the annotation widget. Defaults to 420.</span>
<span class="sd">        frame_border (int, optional): Border width of the annotation widget frame. Defaults to 0.</span>
<span class="sd">        download (bool, optional): Whether to allow downloading the annotation data. Defaults to True.</span>
<span class="sd">        name (str, optional): Name of the annotation widget. Defaults to None.</span>
<span class="sd">        paint (Dict[str, Any], optional): Paint properties for the annotation. Defaults to None.</span>
<span class="sd">        add_header (bool, optional): Whether to add a header to the annotation widget. Defaults to True.</span>
<span class="sd">        widget_icon (str, optional): Icon for the annotation widget. Defaults to &quot;mdi-drawing&quot;.</span>
<span class="sd">        close_icon (str, optional): Icon for closing the annotation widget. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str, optional): Label for the annotation widget. Defaults to &quot;Annotation&quot;.</span>
<span class="sd">        background_color (str, optional): Background color of the annotation widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        expanded (bool, optional): Whether the annotation widget is expanded by default. Defaults to True.</span>
<span class="sd">        callback (Callable, optional): A callback function to be called when the export button is clicked.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">create_vector_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span>
        <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span>
        <span class="n">time_format</span><span class="o">=</span><span class="n">time_format</span><span class="p">,</span>
        <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span>
        <span class="n">filename_prefix</span><span class="o">=</span><span class="n">filename_prefix</span><span class="p">,</span>
        <span class="n">file_ext</span><span class="o">=</span><span class="n">file_ext</span><span class="p">,</span>
        <span class="n">add_mapillary</span><span class="o">=</span><span class="n">add_mapillary</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">frame_border</span><span class="o">=</span><span class="n">frame_border</span><span class="p">,</span>
        <span class="n">download</span><span class="o">=</span><span class="n">download</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
        <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">return_sidebar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_arc_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_arc_layer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">src_lon</span><span class="p">,</span> <span class="n">src_lat</span><span class="p">,</span> <span class="n">dst_lon</span><span class="p">,</span> <span class="n">dst_lat</span><span class="p">,</span> <span class="n">src_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dst_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">layer_id</span><span class="o">=</span><span class="s1">&#39;arc_layer&#39;</span><span class="p">,</span> <span class="n">pickable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_arc_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a DeckGL ArcLayer to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pandas.DataFrame">DataFrame</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path or DataFrame containing the data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_lon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source longitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_lat</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source latitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_lon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination longitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_lat</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination latitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_color</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source color as an RGB list.</p>
              </div>
            </td>
            <td>
                  <code>[255, 0, 0]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_color</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination color as an RGB list.</p>
              </div>
            </td>
            <td>
                  <code>[255, 255, 0]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>line_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the lines.</p>
              </div>
            </td>
            <td>
                  <code>2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;arc_layer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pickable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is pickable.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tooltip content or list of columns. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments for the layer.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_arc_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
    <span class="n">src_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">dst_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;arc_layer&quot;</span><span class="p">,</span>
    <span class="n">pickable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a DeckGL ArcLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Union[str, pd.DataFrame]): The file path or DataFrame containing the data.</span>
<span class="sd">        src_lon (str): The source longitude column name.</span>
<span class="sd">        src_lat (str): The source latitude column name.</span>
<span class="sd">        dst_lon (str): The destination longitude column name.</span>
<span class="sd">        dst_lat (str): The destination latitude column name.</span>
<span class="sd">        src_color (List[int]): The source color as an RGB list.</span>
<span class="sd">        dst_color (List[int]): The destination color as an RGB list.</span>
<span class="sd">        line_width (int): The width of the lines.</span>
<span class="sd">        layer_id (str): The ID of the layer.</span>
<span class="sd">        pickable (bool): Whether the layer is pickable.</span>
<span class="sd">        tooltip (Optional[Union[str, List[str]]], optional): The tooltip content or list of columns. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional arguments for the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>

    <span class="n">arc_data</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;source_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">src_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">src_lat</span><span class="p">]],</span>
            <span class="s2">&quot;target_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">dst_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">dst_lat</span><span class="p">]],</span>
            <span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>  <span class="c1"># Include other columns</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="c1"># Generate tooltip template dynamically based on the columns</span>
    <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tooltip</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">tooltip</span>
    <span class="n">tooltip_content</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;&lt;b&gt;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">:&lt;/b&gt; </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">deck_arc_layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;@@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ArcLayer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">arc_data</span><span class="p">,</span>
        <span class="s2">&quot;getSourcePosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=source_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getTargetPosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=target_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getSourceColor&quot;</span><span class="p">:</span> <span class="n">src_color</span><span class="p">,</span>
        <span class="s2">&quot;getTargetColor&quot;</span><span class="p">:</span> <span class="n">dst_color</span><span class="p">,</span>
        <span class="s2">&quot;getWidth&quot;</span><span class="p">:</span> <span class="n">line_width</span><span class="p">,</span>
        <span class="s2">&quot;pickable&quot;</span><span class="p">:</span> <span class="n">pickable</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">deck_arc_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span>
        <span class="p">[</span><span class="n">deck_arc_layer</span><span class="p">],</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">{</span>
            <span class="n">layer_id</span><span class="p">:</span> <span class="n">tooltip_content</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_arrow" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_arrow</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">icon_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">minzoom</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Arrow&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_arrow" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds an arrow symbol to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source layer to which the arrow symbol will be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the arrow image.
Defaults to "https://assets.gishub.org/images/right-arrow.png".
Find more icons from https://www.veryicon.com.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>icon_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the icon. Defaults to 0.1.</p>
              </div>
            </td>
            <td>
                  <code>0.1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>minzoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum zoom level at which
the arrow symbol will be visible. Defaults to 19.</p>
              </div>
            </td>
            <td>
                  <code>19</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_symbol method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3398</span>
<span class="normal">3399</span>
<span class="normal">3400</span>
<span class="normal">3401</span>
<span class="normal">3402</span>
<span class="normal">3403</span>
<span class="normal">3404</span>
<span class="normal">3405</span>
<span class="normal">3406</span>
<span class="normal">3407</span>
<span class="normal">3408</span>
<span class="normal">3409</span>
<span class="normal">3410</span>
<span class="normal">3411</span>
<span class="normal">3412</span>
<span class="normal">3413</span>
<span class="normal">3414</span>
<span class="normal">3415</span>
<span class="normal">3416</span>
<span class="normal">3417</span>
<span class="normal">3418</span>
<span class="normal">3419</span>
<span class="normal">3420</span>
<span class="normal">3421</span>
<span class="normal">3422</span>
<span class="normal">3423</span>
<span class="normal">3424</span>
<span class="normal">3425</span>
<span class="normal">3426</span>
<span class="normal">3427</span>
<span class="normal">3428</span>
<span class="normal">3429</span>
<span class="normal">3430</span>
<span class="normal">3431</span>
<span class="normal">3432</span>
<span class="normal">3433</span>
<span class="normal">3434</span>
<span class="normal">3435</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Arrow&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds an arrow symbol to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The source layer to which the arrow symbol will be added.</span>
<span class="sd">        image (Optional[str], optional): The URL of the arrow image.</span>
<span class="sd">            Defaults to &quot;https://assets.gishub.org/images/right-arrow.png&quot;.</span>
<span class="sd">            Find more icons from https://www.veryicon.com.</span>
<span class="sd">        icon_size (int, optional): The size of the icon. Defaults to 0.1.</span>
<span class="sd">        minzoom (Optional[float], optional): The minimum zoom level at which</span>
<span class="sd">            the arrow symbol will be visible. Defaults to 19.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_symbol method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="s2">&quot;https://assets.gishub.org/images/right-arrow.png&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="n">icon_size</span><span class="p">,</span>
        <span class="n">minzoom</span><span class="o">=</span><span class="n">minzoom</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_basemap" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_basemap</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_basemap" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a basemap to the map.</p>
<p>This method adds a basemap to the map. The basemap can be a string from
predefined basemaps, an instance of xyzservices.TileProvider, or a key
from the basemaps dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>basemap</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="TileProvider">TileProvider</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The basemap to add. Can be
one of the predefined strings, an instance of xyzservices.TileProvider,
or a key from the basemaps dictionary. Defaults to None, which adds
the basemap widget.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the basemap. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the basemap is visible or not.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution text to display for the
basemap. If None, the attribution text is taken from the basemap
or the TileProvider. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the
RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the basemap is not one of the predefined strings,
not an instance of TileProvider, and not a key from the basemaps dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">basemap</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a basemap to the map.</span>

<span class="sd">    This method adds a basemap to the map. The basemap can be a string from</span>
<span class="sd">    predefined basemaps, an instance of xyzservices.TileProvider, or a key</span>
<span class="sd">    from the basemaps dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        basemap (str or TileProvider, optional): The basemap to add. Can be</span>
<span class="sd">            one of the predefined strings, an instance of xyzservices.TileProvider,</span>
<span class="sd">            or a key from the basemaps dictionary. Defaults to None, which adds</span>
<span class="sd">            the basemap widget.</span>
<span class="sd">        opacity (float, optional): The opacity of the basemap. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the basemap is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        attribution (str, optional): The attribution text to display for the</span>
<span class="sd">            basemap. If None, the attribution text is taken from the basemap</span>
<span class="sd">            or the TileProvider. Defaults to None.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">            RasterTileSource class. See https://bit.ly/4erD2MQ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the basemap is not one of the predefined strings,</span>
<span class="sd">            not an instance of TileProvider, and not a key from the basemaps dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">basemap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_basemap_widget</span><span class="p">()</span>

    <span class="n">map_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;ROADMAP&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Maps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SATELLITE&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
        <span class="s2">&quot;TERRAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Terrain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HYBRID&quot;</span><span class="p">:</span> <span class="s2">&quot;Google Hybrid&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span>
    <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">min_zoom</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">map_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_google_map</span><span class="p">(</span><span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">url</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">attribution</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">basemap</span> <span class="o">==</span> <span class="s2">&quot;amazon-satellite&quot;</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="s2">&quot;us-east-1&quot;</span><span class="p">)</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;AWS_MAPS_API_KEY&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://maps.geo.</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com/v2/tiles/raster.satellite/</span><span class="se">{{</span><span class="s2">z</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">x</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">y</span><span class="se">}}</span><span class="s2">?key=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;© Amazon&quot;</span>
    <span class="k">elif</span> <span class="n">basemap</span> <span class="o">==</span> <span class="s2">&quot;USGS.Imagery&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://basemap.nationalmap.gov/arcgis/services/USGSImageryOnly/MapServer/WMSServer?service=WMS&amp;request=GetMap&amp;layers=0&amp;styles=&amp;format=image</span><span class="si">%2F</span><span class="s2">png&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox={bbox-epsg-3857}&quot;</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot;© USGS&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;USGS.Imagery&quot;</span>
        <span class="k">if</span> <span class="n">before_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">before_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_symbol_layer_id</span>
    <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">attribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
            <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;min_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]:</span>
            <span class="n">min_zoom</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">][</span><span class="s2">&quot;min_zoom&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
        <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="p">],</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
        <span class="n">min_zoom</span><span class="o">=</span><span class="n">min_zoom</span><span class="p">,</span>
        <span class="c1"># tile_size=256,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;OpenStreetMap.Mapnik&quot;</span><span class="p">:</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="s2">&quot;OpenStreetMap&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_cog_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_cog_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_cog_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</p>
<p>This method adds a COG TileLayer to the map. The COG TileLayer is created
from the specified URL, and it is added to the map with the specified name,
attribution, opacity, visibility, and bands.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the COG tile layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use for the layer. If None, a
random name is generated. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use for the layer.
Defaults to ''.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible by default.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bands</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of bands to use for the layer.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodata</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The nodata value to use for the layer.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>titiler_endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The endpoint of the titiler service.
Defaults to "https://giswqs-titiler-endpoint.hf.space".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to adjust the viewport of
the map to fit the bounds of the layer. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arbitrary keyword arguments, including bidx, expression,
nodata, unscale, resampling, rescale, color_formula, colormap,
    colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/
and https://cogeotiff.github.io/rio-tiler/colormap/.
    To select a certain bands, use bidx=[1, 2, 3]. apply a
        rescaling to multiple bands, use something like
        <code>rescale=["164,223","130,211","99,212"]</code>.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>
        


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a Cloud Optimized Geotiff (COG) TileLayer to the map.</span>

<span class="sd">    This method adds a COG TileLayer to the map. The COG TileLayer is created</span>
<span class="sd">    from the specified URL, and it is added to the map with the specified name,</span>
<span class="sd">    attribution, opacity, visibility, and bands.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the COG tile layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. If None, a</span>
<span class="sd">            random name is generated. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        bands (list, optional): A list of bands to use for the layer.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        nodata (float, optional): The nodata value to use for the layer.</span>
<span class="sd">        titiler_endpoint (str, optional): The endpoint of the titiler service.</span>
<span class="sd">            Defaults to &quot;https://giswqs-titiler-endpoint.hf.space&quot;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of</span>
<span class="sd">            the map to fit the bounds of the layer. Defaults to True.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">            nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">                colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">            and https://cogeotiff.github.io/rio-tiler/colormap/.</span>
<span class="sd">                To select a certain bands, use bidx=[1, 2, 3]. apply a</span>
<span class="sd">                    rescaling to multiple bands, use something like</span>
<span class="sd">                    `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;COG_&quot;</span> <span class="o">+</span> <span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">&quot;vmin&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s2">&quot;vmax&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;vmin&quot;</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;vmax&quot;</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;rescale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">vmin</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">vmax</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_tile</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">tile_url</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_colorbar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_colorbar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">tick_size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="n">colorbar_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_colorbar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a colorbar to the map.</p>
<p>This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using
the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,
label, and orientation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the colorbar in inches. Defaults to 3.0.</p>
              </div>
            </td>
            <td>
                  <code>3.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the colorbar in inches. Defaults to 0.2.</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmin</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum value of the colorbar. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmax</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum value of the colorbar. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>palette</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of colors or a colormap name for the colorbar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vis_params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="float">float</span>, <span title="int">int</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Visualization parameters as a dictionary.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cmap</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matplotlib colormap name. Defaults to "gray".</p>
              </div>
            </td>
            <td>
                  <code>&#39;gray&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>discrete</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to create a discrete colorbar. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label for the colorbar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font size for the colorbar label. Defaults to 10.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_weight</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font weight for the colorbar label. Defaults to "normal".</p>
              </div>
            </td>
            <td>
                  <code>&#39;normal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tick_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font size for the colorbar tick labels. Defaults to 8.</p>
              </div>
            </td>
            <td>
                  <code>8</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_color</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color for the colorbar. Defaults to "white".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>orientation</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Orientation of the colorbar ("vertical" or "horizontal"). Defaults to "horizontal".</p>
              </div>
            </td>
            <td>
                  <code>&#39;horizontal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dpi</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resolution in dots per inch. If 'figure', uses the figure's dpi value. Defaults to "figure".</p>
              </div>
            </td>
            <td>
                  <code>&#39;figure&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>transparent</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the background is transparent. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Position of the colorbar on the map. Defaults to "bottom-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;bottom-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colorbar_args</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to the colorbar.
Can be colorbar_args={"ticks": list(range(0, 101, 10))}. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to matplotlib.pyplot.savefig().</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the generated colorbar image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4171</span>
<span class="normal">4172</span>
<span class="normal">4173</span>
<span class="normal">4174</span>
<span class="normal">4175</span>
<span class="normal">4176</span>
<span class="normal">4177</span>
<span class="normal">4178</span>
<span class="normal">4179</span>
<span class="normal">4180</span>
<span class="normal">4181</span>
<span class="normal">4182</span>
<span class="normal">4183</span>
<span class="normal">4184</span>
<span class="normal">4185</span>
<span class="normal">4186</span>
<span class="normal">4187</span>
<span class="normal">4188</span>
<span class="normal">4189</span>
<span class="normal">4190</span>
<span class="normal">4191</span>
<span class="normal">4192</span>
<span class="normal">4193</span>
<span class="normal">4194</span>
<span class="normal">4195</span>
<span class="normal">4196</span>
<span class="normal">4197</span>
<span class="normal">4198</span>
<span class="normal">4199</span>
<span class="normal">4200</span>
<span class="normal">4201</span>
<span class="normal">4202</span>
<span class="normal">4203</span>
<span class="normal">4204</span>
<span class="normal">4205</span>
<span class="normal">4206</span>
<span class="normal">4207</span>
<span class="normal">4208</span>
<span class="normal">4209</span>
<span class="normal">4210</span>
<span class="normal">4211</span>
<span class="normal">4212</span>
<span class="normal">4213</span>
<span class="normal">4214</span>
<span class="normal">4215</span>
<span class="normal">4216</span>
<span class="normal">4217</span>
<span class="normal">4218</span>
<span class="normal">4219</span>
<span class="normal">4220</span>
<span class="normal">4221</span>
<span class="normal">4222</span>
<span class="normal">4223</span>
<span class="normal">4224</span>
<span class="normal">4225</span>
<span class="normal">4226</span>
<span class="normal">4227</span>
<span class="normal">4228</span>
<span class="normal">4229</span>
<span class="normal">4230</span>
<span class="normal">4231</span>
<span class="normal">4232</span>
<span class="normal">4233</span>
<span class="normal">4234</span>
<span class="normal">4235</span>
<span class="normal">4236</span>
<span class="normal">4237</span>
<span class="normal">4238</span>
<span class="normal">4239</span>
<span class="normal">4240</span>
<span class="normal">4241</span>
<span class="normal">4242</span>
<span class="normal">4243</span>
<span class="normal">4244</span>
<span class="normal">4245</span>
<span class="normal">4246</span>
<span class="normal">4247</span>
<span class="normal">4248</span>
<span class="normal">4249</span>
<span class="normal">4250</span>
<span class="normal">4251</span>
<span class="normal">4252</span>
<span class="normal">4253</span>
<span class="normal">4254</span>
<span class="normal">4255</span>
<span class="normal">4256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
    <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="n">colorbar_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a colorbar to the map.</span>

<span class="sd">    This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">    the Map.add_html() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">    label, and orientation.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">        height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">        vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">        vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">        palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">        vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">        cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">        discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">        label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">        label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">        label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">        tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">        bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">        orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">        dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">        transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">        position (str): Position of the colorbar on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        colorbar_args (Optional[Dict[str, Any]]): Additional keyword arguments passed to the colorbar.</span>
<span class="sd">            Can be colorbar_args={&quot;ticks&quot;: list(range(0, 101, 10))}. Defaults to None.</span>
<span class="sd">        **kwargs: Additional keyword arguments passed to matplotlib.pyplot.savefig().</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Path to the generated colorbar image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
        <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

    <span class="k">if</span> <span class="n">colorbar_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colorbar_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">,</span>
        <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">colorbar_args</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_colorbar_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_colorbar_to_sidebar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">tick_size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-format-color-fill&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">header_label</span><span class="o">=</span><span class="s1">&#39;Colorbar&#39;</span><span class="p">,</span> <span class="n">header_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">header_height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_colorbar_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a colorbar to the sidebar.</p>
<p>This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using
the Map.add_html_to_sidebar() method. The colorbar can be customized in various ways including its size, color palette,
label, and orientation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the colorbar in inches. Defaults to 3.0.</p>
              </div>
            </td>
            <td>
                  <code>3.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the colorbar in inches. Defaults to 0.2.</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmin</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum value of the colorbar. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmax</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum value of the colorbar. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>palette</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of colors or a colormap name for the colorbar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vis_params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="float">float</span>, <span title="int">int</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Visualization parameters as a dictionary.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cmap</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matplotlib colormap name. Defaults to "gray".</p>
              </div>
            </td>
            <td>
                  <code>&#39;gray&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>discrete</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to create a discrete colorbar. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label for the colorbar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font size for the colorbar label. Defaults to 10.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_weight</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font weight for the colorbar label. Defaults to "normal".</p>
              </div>
            </td>
            <td>
                  <code>&#39;normal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tick_size</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font size for the colorbar tick labels. Defaults to 8.</p>
              </div>
            </td>
            <td>
                  <code>8</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_color</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color for the colorbar. Defaults to "white".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>orientation</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Orientation of the colorbar ("vertical" or "horizontal"). Defaults to "horizontal".</p>
              </div>
            </td>
            <td>
                  <code>&#39;horizontal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dpi</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resolution in dots per inch. If 'figure', uses the figure's dpi value. Defaults to "figure".</p>
              </div>
            </td>
            <td>
                  <code>&#39;figure&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>transparent</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the background is transparent. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a header to the colorbar. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-format-color-fill&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the generated colorbar image.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4258</span>
<span class="normal">4259</span>
<span class="normal">4260</span>
<span class="normal">4261</span>
<span class="normal">4262</span>
<span class="normal">4263</span>
<span class="normal">4264</span>
<span class="normal">4265</span>
<span class="normal">4266</span>
<span class="normal">4267</span>
<span class="normal">4268</span>
<span class="normal">4269</span>
<span class="normal">4270</span>
<span class="normal">4271</span>
<span class="normal">4272</span>
<span class="normal">4273</span>
<span class="normal">4274</span>
<span class="normal">4275</span>
<span class="normal">4276</span>
<span class="normal">4277</span>
<span class="normal">4278</span>
<span class="normal">4279</span>
<span class="normal">4280</span>
<span class="normal">4281</span>
<span class="normal">4282</span>
<span class="normal">4283</span>
<span class="normal">4284</span>
<span class="normal">4285</span>
<span class="normal">4286</span>
<span class="normal">4287</span>
<span class="normal">4288</span>
<span class="normal">4289</span>
<span class="normal">4290</span>
<span class="normal">4291</span>
<span class="normal">4292</span>
<span class="normal">4293</span>
<span class="normal">4294</span>
<span class="normal">4295</span>
<span class="normal">4296</span>
<span class="normal">4297</span>
<span class="normal">4298</span>
<span class="normal">4299</span>
<span class="normal">4300</span>
<span class="normal">4301</span>
<span class="normal">4302</span>
<span class="normal">4303</span>
<span class="normal">4304</span>
<span class="normal">4305</span>
<span class="normal">4306</span>
<span class="normal">4307</span>
<span class="normal">4308</span>
<span class="normal">4309</span>
<span class="normal">4310</span>
<span class="normal">4311</span>
<span class="normal">4312</span>
<span class="normal">4313</span>
<span class="normal">4314</span>
<span class="normal">4315</span>
<span class="normal">4316</span>
<span class="normal">4317</span>
<span class="normal">4318</span>
<span class="normal">4319</span>
<span class="normal">4320</span>
<span class="normal">4321</span>
<span class="normal">4322</span>
<span class="normal">4323</span>
<span class="normal">4324</span>
<span class="normal">4325</span>
<span class="normal">4326</span>
<span class="normal">4327</span>
<span class="normal">4328</span>
<span class="normal">4329</span>
<span class="normal">4330</span>
<span class="normal">4331</span>
<span class="normal">4332</span>
<span class="normal">4333</span>
<span class="normal">4334</span>
<span class="normal">4335</span>
<span class="normal">4336</span>
<span class="normal">4337</span>
<span class="normal">4338</span>
<span class="normal">4339</span>
<span class="normal">4340</span>
<span class="normal">4341</span>
<span class="normal">4342</span>
<span class="normal">4343</span>
<span class="normal">4344</span>
<span class="normal">4345</span>
<span class="normal">4346</span>
<span class="normal">4347</span>
<span class="normal">4348</span>
<span class="normal">4349</span>
<span class="normal">4350</span>
<span class="normal">4351</span>
<span class="normal">4352</span>
<span class="normal">4353</span>
<span class="normal">4354</span>
<span class="normal">4355</span>
<span class="normal">4356</span>
<span class="normal">4357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">vmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">palette</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">discrete</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">label_weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">tick_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">orientation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">dpi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span>
    <span class="n">transparent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-format-color-fill&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">header_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Colorbar&quot;</span><span class="p">,</span>
    <span class="n">header_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">header_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a colorbar to the sidebar.</span>

<span class="sd">    This function uses matplotlib to generate a colorbar, saves it as a PNG file, and adds it to the map using</span>
<span class="sd">    the Map.add_html_to_sidebar() method. The colorbar can be customized in various ways including its size, color palette,</span>
<span class="sd">    label, and orientation.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (Optional[float]): Width of the colorbar in inches. Defaults to 3.0.</span>
<span class="sd">        height (Optional[float]): Height of the colorbar in inches. Defaults to 0.2.</span>
<span class="sd">        vmin (Optional[float]): Minimum value of the colorbar. Defaults to 0.</span>
<span class="sd">        vmax (Optional[float]): Maximum value of the colorbar. Defaults to 1.0.</span>
<span class="sd">        palette (Optional[List[str]]): List of colors or a colormap name for the colorbar. Defaults to None.</span>
<span class="sd">        vis_params (Optional[Dict[str, Union[str, float, int]]]): Visualization parameters as a dictionary.</span>
<span class="sd">        cmap (Optional[str]): Matplotlib colormap name. Defaults to &quot;gray&quot;.</span>
<span class="sd">        discrete (Optional[bool]): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">        label (Optional[str]): Label for the colorbar. Defaults to None.</span>
<span class="sd">        label_size (Optional[int]): Font size for the colorbar label. Defaults to 10.</span>
<span class="sd">        label_weight (Optional[str]): Font weight for the colorbar label. Defaults to &quot;normal&quot;.</span>
<span class="sd">        tick_size (Optional[int]): Font size for the colorbar tick labels. Defaults to 8.</span>
<span class="sd">        bg_color (Optional[str]): Background color for the colorbar. Defaults to &quot;white&quot;.</span>
<span class="sd">        orientation (Optional[str]): Orientation of the colorbar (&quot;vertical&quot; or &quot;horizontal&quot;). Defaults to &quot;horizontal&quot;.</span>
<span class="sd">        dpi (Optional[Union[str, float]]): Resolution in dots per inch. If &#39;figure&#39;, uses the figure&#39;s dpi value. Defaults to &quot;figure&quot;.</span>
<span class="sd">        transparent (Optional[bool]): Whether the background is transparent. Defaults to False.</span>
<span class="sd">        add_header (bool): If True, adds a header to the colorbar. Defaults to True.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Path to the generated colorbar image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
        <span class="n">bg_color</span> <span class="o">=</span> <span class="s2">&quot;transparent&quot;</span>

    <span class="n">colorbar</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">save_colorbar</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="p">,</span>
        <span class="n">height</span><span class="p">,</span>
        <span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">label_size</span><span class="p">,</span>
        <span class="n">label_weight</span><span class="p">,</span>
        <span class="n">tick_size</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">,</span>
        <span class="n">transparent</span><span class="p">,</span>
        <span class="n">show_colorbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">colorbar</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
        <span class="n">html</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">header_label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">header_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">header_height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_control" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_control" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a control to the map.</p>
<p>This method adds a control to the map. The control can be one of the
    following: 'scale', 'fullscreen', 'geolocate', 'navigation', "attribution",
    and "draw". If the control is a string, it is converted to the
    corresponding control object. If the control is not a string, it is
    assumed to be a control object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>control</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="object">object</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The control to add to the map. Can be one
of the following: 'scale', 'fullscreen', 'geolocate', 'navigation',
 "attribution", and "draw".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the control. Defaults to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the control object.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the control is a string and is not one of the
following: 'scale', 'fullscreen', 'geolocate', 'navigation', "attribution".</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a control to the map.</span>

<span class="sd">    This method adds a control to the map. The control can be one of the</span>
<span class="sd">        following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;,</span>
<span class="sd">        and &quot;draw&quot;. If the control is a string, it is converted to the</span>
<span class="sd">        corresponding control object. If the control is not a string, it is</span>
<span class="sd">        assumed to be a control object.</span>

<span class="sd">    Args:</span>
<span class="sd">        control (str or object): The control to add to the map. Can be one</span>
<span class="sd">            of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;,</span>
<span class="sd">             &quot;attribution&quot;, and &quot;draw&quot;.</span>
<span class="sd">        position (str, optional): The position of the control. Defaults to &quot;top-right&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the control object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the control is a string and is not one of the</span>
<span class="sd">            following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, &quot;attribution&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">ScaleControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;fullscreen&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">FullscreenControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;geolocate&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">GeolocateControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;navigation&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">NavigationControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;attribution&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">AttributionControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;globe&quot;</span><span class="p">:</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">GlobeControl</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;draw&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;layers&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Control can only be one of the following: &#39;scale&#39;, &#39;fullscreen&#39;, &#39;geolocate&#39;, &#39;navigation&#39;, and &#39;draw&#39;.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;Quantiles&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extrude</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_data" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add vector data to the map with a variety of classification schemes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pandas.DataFrame">DataFrame</span> | <span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to classify.
It can be a filepath to a vector dataset, a pandas dataframe, or
a geopandas geodataframe.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column to classify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cmap</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a colormap recognized by matplotlib. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of colors to use for the classification. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of labels to use for the legend. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scheme</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of a choropleth classification scheme (requires mapclassify).
Name of a choropleth classification scheme (requires mapclassify).
A mapclassify.MapClassifier object will be used
under the hood. Supported are all schemes provided by mapclassify (e.g.
'BoxPlot', 'EqualInterval', 'FisherJenks', 'FisherJenksSampled',
'HeadTailBreaks', 'JenksCaspall', 'JenksCaspallForced',
'JenksCaspallSampled', 'MaxP', 'MaximumBreaks',
'NaturalBreaks', 'Quantiles', 'Percentiles', 'StdMean',
'UserDefined'). Arguments can be passed in classification_kwds.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Quantiles&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of classes (ignored if scheme is None or if
column is categorical). Default to 5.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_legend</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a legend to the map. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the legend. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the legend. Can be 'top-left',
'top-right', 'bottom-left', or 'bottom-right'. Defaults to 'bottom-right'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;bottom-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_kwds</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code>
or <code>matplotlib.pyplot.colorbar</code>. Defaults to None.
Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code> or
Additional accepted keywords when <code>scheme</code> is specified:
fmt : string
    A formatting specification for the bin edges of the classes in the
    legend. For example, to have no decimals: <code>{"fmt": "{:.0f}"}</code>.
labels : list-like
    A list of legend labels to override the auto-generated labblels.
    Needs to have the same number of elements as the number of
    classes (<code>k</code>).
interval : boolean (default False)
    An option to control brackets from mapclassify legend.
    If True, open/closed interval brackets are shown in the legend.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>classification_kwds</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments to pass to mapclassify.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_legend method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of layer to add. Can be 'circle', 'line', or 'fill'. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter to apply to the layer. If None,
no filter is applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. If None, a random name
is generated.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible or not.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the GeoJSON class, such as
fields, which can be a list of column names to be included in the popup.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5508</span>
<span class="normal">5509</span>
<span class="normal">5510</span>
<span class="normal">5511</span>
<span class="normal">5512</span>
<span class="normal">5513</span>
<span class="normal">5514</span>
<span class="normal">5515</span>
<span class="normal">5516</span>
<span class="normal">5517</span>
<span class="normal">5518</span>
<span class="normal">5519</span>
<span class="normal">5520</span>
<span class="normal">5521</span>
<span class="normal">5522</span>
<span class="normal">5523</span>
<span class="normal">5524</span>
<span class="normal">5525</span>
<span class="normal">5526</span>
<span class="normal">5527</span>
<span class="normal">5528</span>
<span class="normal">5529</span>
<span class="normal">5530</span>
<span class="normal">5531</span>
<span class="normal">5532</span>
<span class="normal">5533</span>
<span class="normal">5534</span>
<span class="normal">5535</span>
<span class="normal">5536</span>
<span class="normal">5537</span>
<span class="normal">5538</span>
<span class="normal">5539</span>
<span class="normal">5540</span>
<span class="normal">5541</span>
<span class="normal">5542</span>
<span class="normal">5543</span>
<span class="normal">5544</span>
<span class="normal">5545</span>
<span class="normal">5546</span>
<span class="normal">5547</span>
<span class="normal">5548</span>
<span class="normal">5549</span>
<span class="normal">5550</span>
<span class="normal">5551</span>
<span class="normal">5552</span>
<span class="normal">5553</span>
<span class="normal">5554</span>
<span class="normal">5555</span>
<span class="normal">5556</span>
<span class="normal">5557</span>
<span class="normal">5558</span>
<span class="normal">5559</span>
<span class="normal">5560</span>
<span class="normal">5561</span>
<span class="normal">5562</span>
<span class="normal">5563</span>
<span class="normal">5564</span>
<span class="normal">5565</span>
<span class="normal">5566</span>
<span class="normal">5567</span>
<span class="normal">5568</span>
<span class="normal">5569</span>
<span class="normal">5570</span>
<span class="normal">5571</span>
<span class="normal">5572</span>
<span class="normal">5573</span>
<span class="normal">5574</span>
<span class="normal">5575</span>
<span class="normal">5576</span>
<span class="normal">5577</span>
<span class="normal">5578</span>
<span class="normal">5579</span>
<span class="normal">5580</span>
<span class="normal">5581</span>
<span class="normal">5582</span>
<span class="normal">5583</span>
<span class="normal">5584</span>
<span class="normal">5585</span>
<span class="normal">5586</span>
<span class="normal">5587</span>
<span class="normal">5588</span>
<span class="normal">5589</span>
<span class="normal">5590</span>
<span class="normal">5591</span>
<span class="normal">5592</span>
<span class="normal">5593</span>
<span class="normal">5594</span>
<span class="normal">5595</span>
<span class="normal">5596</span>
<span class="normal">5597</span>
<span class="normal">5598</span>
<span class="normal">5599</span>
<span class="normal">5600</span>
<span class="normal">5601</span>
<span class="normal">5602</span>
<span class="normal">5603</span>
<span class="normal">5604</span>
<span class="normal">5605</span>
<span class="normal">5606</span>
<span class="normal">5607</span>
<span class="normal">5608</span>
<span class="normal">5609</span>
<span class="normal">5610</span>
<span class="normal">5611</span>
<span class="normal">5612</span>
<span class="normal">5613</span>
<span class="normal">5614</span>
<span class="normal">5615</span>
<span class="normal">5616</span>
<span class="normal">5617</span>
<span class="normal">5618</span>
<span class="normal">5619</span>
<span class="normal">5620</span>
<span class="normal">5621</span>
<span class="normal">5622</span>
<span class="normal">5623</span>
<span class="normal">5624</span>
<span class="normal">5625</span>
<span class="normal">5626</span>
<span class="normal">5627</span>
<span class="normal">5628</span>
<span class="normal">5629</span>
<span class="normal">5630</span>
<span class="normal">5631</span>
<span class="normal">5632</span>
<span class="normal">5633</span>
<span class="normal">5634</span>
<span class="normal">5635</span>
<span class="normal">5636</span>
<span class="normal">5637</span>
<span class="normal">5638</span>
<span class="normal">5639</span>
<span class="normal">5640</span>
<span class="normal">5641</span>
<span class="normal">5642</span>
<span class="normal">5643</span>
<span class="normal">5644</span>
<span class="normal">5645</span>
<span class="normal">5646</span>
<span class="normal">5647</span>
<span class="normal">5648</span>
<span class="normal">5649</span>
<span class="normal">5650</span>
<span class="normal">5651</span>
<span class="normal">5652</span>
<span class="normal">5653</span>
<span class="normal">5654</span>
<span class="normal">5655</span>
<span class="normal">5656</span>
<span class="normal">5657</span>
<span class="normal">5658</span>
<span class="normal">5659</span>
<span class="normal">5660</span>
<span class="normal">5661</span>
<span class="normal">5662</span>
<span class="normal">5663</span>
<span class="normal">5664</span>
<span class="normal">5665</span>
<span class="normal">5666</span>
<span class="normal">5667</span>
<span class="normal">5668</span>
<span class="normal">5669</span>
<span class="normal">5670</span>
<span class="normal">5671</span>
<span class="normal">5672</span>
<span class="normal">5673</span>
<span class="normal">5674</span>
<span class="normal">5675</span>
<span class="normal">5676</span>
<span class="normal">5677</span>
<span class="normal">5678</span>
<span class="normal">5679</span>
<span class="normal">5680</span>
<span class="normal">5681</span>
<span class="normal">5682</span>
<span class="normal">5683</span>
<span class="normal">5684</span>
<span class="normal">5685</span>
<span class="normal">5686</span>
<span class="normal">5687</span>
<span class="normal">5688</span>
<span class="normal">5689</span>
<span class="normal">5690</span>
<span class="normal">5691</span>
<span class="normal">5692</span>
<span class="normal">5693</span>
<span class="normal">5694</span>
<span class="normal">5695</span>
<span class="normal">5696</span>
<span class="normal">5697</span>
<span class="normal">5698</span>
<span class="normal">5699</span>
<span class="normal">5700</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="s2">&quot;gpd.GeoDataFrame&quot;</span><span class="p">],</span>
    <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">scheme</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">add_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_position</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="n">legend_kwds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">classification_kwds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extrude</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">scale_factor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add vector data to the map with a variety of classification schemes.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame | gpd.GeoDataFrame): The data to classify.</span>
<span class="sd">            It can be a filepath to a vector dataset, a pandas dataframe, or</span>
<span class="sd">            a geopandas geodataframe.</span>
<span class="sd">        column (str): The column to classify.</span>
<span class="sd">        cmap (str, optional): The name of a colormap recognized by matplotlib. Defaults to None.</span>
<span class="sd">        colors (list, optional): A list of colors to use for the classification. Defaults to None.</span>
<span class="sd">        labels (list, optional): A list of labels to use for the legend. Defaults to None.</span>
<span class="sd">        scheme (str, optional): Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            A mapclassify.MapClassifier object will be used</span>
<span class="sd">            under the hood. Supported are all schemes provided by mapclassify (e.g.</span>
<span class="sd">            &#39;BoxPlot&#39;, &#39;EqualInterval&#39;, &#39;FisherJenks&#39;, &#39;FisherJenksSampled&#39;,</span>
<span class="sd">            &#39;HeadTailBreaks&#39;, &#39;JenksCaspall&#39;, &#39;JenksCaspallForced&#39;,</span>
<span class="sd">            &#39;JenksCaspallSampled&#39;, &#39;MaxP&#39;, &#39;MaximumBreaks&#39;,</span>
<span class="sd">            &#39;NaturalBreaks&#39;, &#39;Quantiles&#39;, &#39;Percentiles&#39;, &#39;StdMean&#39;,</span>
<span class="sd">            &#39;UserDefined&#39;). Arguments can be passed in classification_kwds.</span>
<span class="sd">        k (int, optional): Number of classes (ignored if scheme is None or if</span>
<span class="sd">            column is categorical). Default to 5.</span>
<span class="sd">        add_legend (bool, optional): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">        legend_title (str, optional): The title of the legend. Defaults to None.</span>
<span class="sd">        legend_position (str, optional): The position of the legend. Can be &#39;top-left&#39;,</span>
<span class="sd">            &#39;top-right&#39;, &#39;bottom-left&#39;, or &#39;bottom-right&#39;. Defaults to &#39;bottom-right&#39;.</span>
<span class="sd">        legend_kwds (dict, optional): Keyword arguments to pass to :func:`matplotlib.pyplot.legend`</span>
<span class="sd">            or `matplotlib.pyplot.colorbar`. Defaults to None.</span>
<span class="sd">            Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or</span>
<span class="sd">            Additional accepted keywords when `scheme` is specified:</span>
<span class="sd">            fmt : string</span>
<span class="sd">                A formatting specification for the bin edges of the classes in the</span>
<span class="sd">                legend. For example, to have no decimals: ``{&quot;fmt&quot;: &quot;{:.0f}&quot;}``.</span>
<span class="sd">            labels : list-like</span>
<span class="sd">                A list of legend labels to override the auto-generated labblels.</span>
<span class="sd">                Needs to have the same number of elements as the number of</span>
<span class="sd">                classes (`k`).</span>
<span class="sd">            interval : boolean (default False)</span>
<span class="sd">                An option to control brackets from mapclassify legend.</span>
<span class="sd">                If True, open/closed interval brackets are shown in the legend.</span>
<span class="sd">        classification_kwds (dict, optional): Keyword arguments to pass to mapclassify.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        legend_args (dict, optional): Additional keyword arguments for the add_legend method. Defaults to None.</span>
<span class="sd">        layer_type (str, optional): The type of layer to add. Can be &#39;circle&#39;, &#39;line&#39;, or &#39;fill&#39;. Defaults to None.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the GeoJSON class, such as</span>
<span class="sd">            fields, which can be a list of column names to be included in the popup.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">gdf</span><span class="p">,</span> <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">classify</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
        <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
        <span class="n">legend_kwds</span><span class="o">=</span><span class="n">legend_kwds</span><span class="p">,</span>
        <span class="n">classification_kwds</span><span class="o">=</span><span class="n">classification_kwds</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">legend_title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_title</span> <span class="o">=</span> <span class="n">column</span>

    <span class="n">geom_type</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geom_type</span>

    <span class="k">if</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">:</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="p">}</span>
    <span class="k">elif</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;LineString&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">:</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
        <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s2">&quot;line-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
            <span class="p">}</span>
    <span class="k">elif</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span> <span class="ow">or</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">extrude</span><span class="p">:</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill-extrusion&quot;</span>
            <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Initialize the interpolate format</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
                    <span class="p">]</span>
                <span class="p">}</span>

                <span class="c1"># Parse the dictionary and append range and color values</span>
                <span class="k">for</span> <span class="n">range_str</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">legend_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="c1"># Extract the upper bound from the range string</span>
                    <span class="n">upper_bound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">range_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot; ]&quot;</span><span class="p">))</span>
                    <span class="c1"># Add to the formatted output</span>
                    <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">upper_bound</span><span class="p">,</span> <span class="n">color</span><span class="p">])</span>

                <span class="c1"># Scale down the extrusion height</span>
                <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                    <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
                <span class="p">]</span>

                <span class="c1"># Add scaled values dynamically</span>
                <span class="k">for</span> <span class="n">range_str</span> <span class="ow">in</span> <span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">upper_bound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">range_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot; ]&quot;</span><span class="p">))</span>
                    <span class="n">scaled_value</span> <span class="o">=</span> <span class="n">upper_bound</span> <span class="o">/</span> <span class="n">scale_factor</span>  <span class="c1"># Apply scaling</span>
                    <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">upper_bound</span><span class="p">,</span> <span class="n">scaled_value</span><span class="p">]</span>
                    <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
            <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
                    <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Geometry type not recognized.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
        <span class="n">gdf</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">,</span>
        <span class="n">paint</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">legend_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_args</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="n">legend_title</span><span class="p">,</span>
            <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">legend_position</span><span class="p">,</span>
            <span class="o">**</span><span class="n">legend_args</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_date_filter_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_date_filter_widget</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_date_col</span><span class="o">=</span><span class="s1">&#39;startDate&#39;</span><span class="p">,</span> <span class="n">end_date_col</span><span class="o">=</span><span class="s1">&#39;endDate&#39;</span><span class="p">,</span> <span class="n">date_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">min_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">group_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-filter&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Date Filter&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_date_filter_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the DateFilterWidget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sources</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of data sources.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of names for the data sources. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>styles</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of styles for the data sources. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the start date. Defaults to "startDate".</p>
              </div>
            </td>
            <td>
                  <code>&#39;startDate&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>end_date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the end date. Defaults to "endDate".</p>
              </div>
            </td>
            <td>
                  <code>&#39;endDate&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Format of the date. Defaults to "%Y-%m-%d".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y-%m-%d&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_date</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum date. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the main file. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>group_col</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column containing the group. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>freq</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frequency of the date range. Defaults to "D".</p>
              </div>
            </td>
            <td>
                  <code>&#39;D&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unit of the date. Defaults to "ms".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>interval</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Interval of the date range. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a header to the widget. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon of the widget. Defaults to "mdi-filter".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-filter&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon of the close button. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Label of the widget. Defaults to "Date Filter".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Date Filter&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the widget. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the widget. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the widget is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_to_sidebar method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6243</span>
<span class="normal">6244</span>
<span class="normal">6245</span>
<span class="normal">6246</span>
<span class="normal">6247</span>
<span class="normal">6248</span>
<span class="normal">6249</span>
<span class="normal">6250</span>
<span class="normal">6251</span>
<span class="normal">6252</span>
<span class="normal">6253</span>
<span class="normal">6254</span>
<span class="normal">6255</span>
<span class="normal">6256</span>
<span class="normal">6257</span>
<span class="normal">6258</span>
<span class="normal">6259</span>
<span class="normal">6260</span>
<span class="normal">6261</span>
<span class="normal">6262</span>
<span class="normal">6263</span>
<span class="normal">6264</span>
<span class="normal">6265</span>
<span class="normal">6266</span>
<span class="normal">6267</span>
<span class="normal">6268</span>
<span class="normal">6269</span>
<span class="normal">6270</span>
<span class="normal">6271</span>
<span class="normal">6272</span>
<span class="normal">6273</span>
<span class="normal">6274</span>
<span class="normal">6275</span>
<span class="normal">6276</span>
<span class="normal">6277</span>
<span class="normal">6278</span>
<span class="normal">6279</span>
<span class="normal">6280</span>
<span class="normal">6281</span>
<span class="normal">6282</span>
<span class="normal">6283</span>
<span class="normal">6284</span>
<span class="normal">6285</span>
<span class="normal">6286</span>
<span class="normal">6287</span>
<span class="normal">6288</span>
<span class="normal">6289</span>
<span class="normal">6290</span>
<span class="normal">6291</span>
<span class="normal">6292</span>
<span class="normal">6293</span>
<span class="normal">6294</span>
<span class="normal">6295</span>
<span class="normal">6296</span>
<span class="normal">6297</span>
<span class="normal">6298</span>
<span class="normal">6299</span>
<span class="normal">6300</span>
<span class="normal">6301</span>
<span class="normal">6302</span>
<span class="normal">6303</span>
<span class="normal">6304</span>
<span class="normal">6305</span>
<span class="normal">6306</span>
<span class="normal">6307</span>
<span class="normal">6308</span>
<span class="normal">6309</span>
<span class="normal">6310</span>
<span class="normal">6311</span>
<span class="normal">6312</span>
<span class="normal">6313</span>
<span class="normal">6314</span>
<span class="normal">6315</span>
<span class="normal">6316</span>
<span class="normal">6317</span>
<span class="normal">6318</span>
<span class="normal">6319</span>
<span class="normal">6320</span>
<span class="normal">6321</span>
<span class="normal">6322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_date_filter_widget</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">styles</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">start_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;startDate&quot;</span><span class="p">,</span>
    <span class="n">end_date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;endDate&quot;</span><span class="p">,</span>
    <span class="n">date_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">date_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">min_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">file_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="n">interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-filter&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Date Filter&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the DateFilterWidget.</span>

<span class="sd">    Args:</span>
<span class="sd">        sources (List[Dict[str, Any]]): List of data sources.</span>
<span class="sd">        names (List[str], optional): List of names for the data sources. Defaults to None.</span>
<span class="sd">        styles (Dict[str, Any], optional): Dictionary of styles for the data sources. Defaults to None.</span>
<span class="sd">        start_date_col (str, optional): Name of the column containing the start date. Defaults to &quot;startDate&quot;.</span>
<span class="sd">        end_date_col (str, optional): Name of the column containing the end date. Defaults to &quot;endDate&quot;.</span>
<span class="sd">        date_col (str, optional): Name of the column containing the date. Defaults to None.</span>
<span class="sd">        date_format (str, optional): Format of the date. Defaults to &quot;%Y-%m-%d&quot;.</span>
<span class="sd">        min_date (str, optional): Minimum date. Defaults to None.</span>
<span class="sd">        max_date (str, optional): Maximum date. Defaults to None.</span>
<span class="sd">        file_index (int, optional): Index of the main file. Defaults to 0.</span>
<span class="sd">        group_col (str, optional): Name of the column containing the group. Defaults to None.</span>
<span class="sd">        freq (str, optional): Frequency of the date range. Defaults to &quot;D&quot;.</span>
<span class="sd">        unit (str, optional): Unit of the date. Defaults to &quot;ms&quot;.</span>
<span class="sd">        interval (int, optional): Interval of the date range. Defaults to 1.</span>
<span class="sd">        add_header (bool, optional): Whether to add a header to the widget. Defaults to True.</span>
<span class="sd">        widget_icon (str, optional): Icon of the widget. Defaults to &quot;mdi-filter&quot;.</span>
<span class="sd">        close_icon (str, optional): Icon of the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str, optional): Label of the widget. Defaults to &quot;Date Filter&quot;.</span>
<span class="sd">        background_color (str, optional): Background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        height (str, optional): Height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">DateFilterWidget</span><span class="p">(</span>
        <span class="n">sources</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span>
        <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
        <span class="n">styles</span><span class="o">=</span><span class="n">styles</span><span class="p">,</span>
        <span class="n">start_date_col</span><span class="o">=</span><span class="n">start_date_col</span><span class="p">,</span>
        <span class="n">end_date_col</span><span class="o">=</span><span class="n">end_date_col</span><span class="p">,</span>
        <span class="n">date_col</span><span class="o">=</span><span class="n">date_col</span><span class="p">,</span>
        <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">,</span>
        <span class="n">min_date</span><span class="o">=</span><span class="n">min_date</span><span class="p">,</span>
        <span class="n">max_date</span><span class="o">=</span><span class="n">max_date</span><span class="p">,</span>
        <span class="n">file_index</span><span class="o">=</span><span class="n">file_index</span><span class="p">,</span>
        <span class="n">group_col</span><span class="o">=</span><span class="n">group_col</span><span class="p">,</span>
        <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
        <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
        <span class="n">map_widget</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_deck_layers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_deck_layers" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add Deck.GL layers to the layer stack</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layers</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries containing the Deck.GL layers to be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Either a single mustache template string applied to all layers
or a dictionary where keys are layer ids and values are mustache template strings.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of column names to be used for the tooltip.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_deck_layers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Deck.GL layers to the layer stack</span>

<span class="sd">    Args:</span>
<span class="sd">        layers (list[dict]): A list of dictionaries containing the Deck.GL layers to be added.</span>
<span class="sd">        tooltip (str | dict): Either a single mustache template string applied to all layers</span>
<span class="sd">            or a dictionary where keys are layer ids and values are mustache template strings.</span>
<span class="sd">        columns (list[str]): A list of column names to be used for the tooltip.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;&lt;b&gt;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">:&lt;/b&gt; </span><span class="se">{{{{</span><span class="s2"> </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> </span><span class="se">}}}}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_deck_initialized&quot;</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_deck_initialized&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="n">layers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="n">tooltip</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Deck-&quot;</span> <span class="o">+</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;@@type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;getFillColor&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">),</span>
            <span class="c1"># &quot;tooltip&quot;: tooltip.get(layer[&quot;id&quot;], None),</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_draw_control" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_draw_control</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_draw_control" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a drawing control to the map.</p>
<p>This method enables users to add interactive drawing controls to the map,
allowing for the creation, editing, and deletion of geometric shapes on
the map. The options, position, and initial GeoJSON can be customized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration options for the
drawing control. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>controls</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The drawing controls to enable.
Can be one or more of the following: 'polygon', 'line_string',
'point', 'trash', 'combine_features', 'uncombine_features'.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the control on the map. Defaults
to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>geojson</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial GeoJSON data to load
into the drawing control. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the
drawing control.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a drawing control to the map.</span>

<span class="sd">    This method enables users to add interactive drawing controls to the map,</span>
<span class="sd">    allowing for the creation, editing, and deletion of geometric shapes on</span>
<span class="sd">    the map. The options, position, and initial GeoJSON can be customized.</span>

<span class="sd">    Args:</span>
<span class="sd">        options (Optional[Dict[str, Any]]): Configuration options for the</span>
<span class="sd">            drawing control. Defaults to None.</span>
<span class="sd">        controls (Optional[Dict[str, Any]]): The drawing controls to enable.</span>
<span class="sd">            Can be one or more of the following: &#39;polygon&#39;, &#39;line_string&#39;,</span>
<span class="sd">            &#39;point&#39;, &#39;trash&#39;, &#39;combine_features&#39;, &#39;uncombine_features&#39;.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        position (str): The position of the control on the map. Defaults</span>
<span class="sd">            to &quot;top-right&quot;.</span>
<span class="sd">        geojson (Optional[Dict[str, Any]]): Initial GeoJSON data to load</span>
<span class="sd">            into the drawing control. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">            drawing control.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">maplibre.plugins</span> <span class="kn">import</span> <span class="n">MapboxDrawControls</span><span class="p">,</span> <span class="n">MapboxDrawOptions</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;line_string&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;line_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;trash&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;trash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;combine_features&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;combine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">control</span> <span class="o">==</span> <span class="s2">&quot;uncombine_features&quot;</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s2">&quot;uncombine_features&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">options</span> <span class="o">=</span> <span class="n">MapboxDrawOptions</span><span class="p">(</span>
            <span class="n">display_controls_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">controls</span><span class="o">=</span><span class="n">MapboxDrawControls</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_mapbox_draw</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">[</span><span class="s2">&quot;draw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_ee_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_ee_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">asset_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;Google Earth Engine&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ee_initialize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_ee_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a Google Earth Engine tile layer to the map based on the tile layer URL from
    https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ee_object</code>
            </td>
            <td>
                  <code><span title="object">object</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Earth Engine object to display.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vis_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Visualization parameters. For example, {'min': 0, 'max': 100}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the tile layer. If not provided,
the asset ID will be used. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>asset_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the Earth Engine asset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the tile layer (0 to 1).
Default is 1.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution text to be displayed.
Default is "Google Earth Engine".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Google Earth Engine&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the tile layer should be shown on
the map. Default is True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ee_initialize</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to initialize the Earth Engine
account. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the underlying
<code>add_tile_layer</code> method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">asset_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Google Earth Engine&quot;</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ee_initialize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a Google Earth Engine tile layer to the map based on the tile layer URL from</span>
<span class="sd">        https://github.com/opengeos/ee-tile-layers/blob/main/datasets.tsv.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The Earth Engine object to display.</span>
<span class="sd">        vis_params (dict): Visualization parameters. For example, {&#39;min&#39;: 0, &#39;max&#39;: 100}.</span>
<span class="sd">        name (str, optional): The name of the tile layer. If not provided,</span>
<span class="sd">            the asset ID will be used. Default is None.</span>
<span class="sd">        asset_id (str): The ID of the Earth Engine asset.</span>
<span class="sd">        opacity (float, optional): The opacity of the tile layer (0 to 1).</span>
<span class="sd">            Default is 1.</span>
<span class="sd">        attribution (str, optional): The attribution text to be displayed.</span>
<span class="sd">            Default is &quot;Google Earth Engine&quot;.</span>
<span class="sd">        visible (bool, optional): Whether the tile layer should be shown on</span>
<span class="sd">            the map. Default is True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        ee_initialize (bool, optional): Whether to initialize the Earth Engine</span>
<span class="sd">            account. Default is False.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">            `add_tile_layer` method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">asset_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
            <span class="s2">&quot;https://raw.githubusercontent.com/opengeos/ee-tile-layers/main/datasets.tsv&quot;</span><span class="p">,</span>
            <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">asset_id</span>

        <span class="k">if</span> <span class="n">asset_id</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset_id</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                <span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">asset_id</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ee_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">get_ee_tile_url</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The provided EE tile layer </span><span class="si">{</span><span class="n">ee_object</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                <span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">geemap</span>
                <span class="kn">from</span> <span class="nn">geemap.ee_tile_layers</span> <span class="kn">import</span> <span class="n">_get_tile_url_format</span>

                <span class="k">if</span> <span class="n">ee_initialize</span><span class="p">:</span>
                    <span class="n">geemap</span><span class="o">.</span><span class="n">ee_initialize</span><span class="p">()</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">_get_tile_url_format</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;EE Layer&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
                    <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Please install the `geemap` package to use the `add_ee_layer` function.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_floating_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_floating_sidebar</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-left&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;370px&#39;</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="s1">&#39;80vh&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sidebar_visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sidebar_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_floating_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a floating sidebar panel overlaid on the map with a toggle button.</p>
<p>This method creates a floating sidebar that appears as an overlay on the map canvas.
The sidebar includes a toggle button to show/hide it, along with the layer manager
and any additional content you specify.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Position on the map. Can be "top-right", "top-left",
"bottom-right", or "bottom-left". Defaults to "top-left".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-left&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the sidebar (e.g., "370px", "25%"). Defaults to "370px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;370px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum height of the sidebar (e.g., "80vh", "500px").
Defaults to "80vh".</p>
              </div>
            </td>
            <td>
                  <code>&#39;80vh&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer manager starts expanded. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar content is initially visible.
Defaults to False. The toggle button is always visible.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_content</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional widgets to include
in the sidebar. Defaults to None (only layer manager).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to LayerManagerWidget.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.Widget: A widget containing the map with the floating sidebar overlay.
Display this instead of the map object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>m = leafmap.Map()
m.add_basemap("Esri.WorldImagery")
widget = m.add_floating_sidebar(position="top-left", width="360px")
widget  # Display the returned widget</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4412</span>
<span class="normal">4413</span>
<span class="normal">4414</span>
<span class="normal">4415</span>
<span class="normal">4416</span>
<span class="normal">4417</span>
<span class="normal">4418</span>
<span class="normal">4419</span>
<span class="normal">4420</span>
<span class="normal">4421</span>
<span class="normal">4422</span>
<span class="normal">4423</span>
<span class="normal">4424</span>
<span class="normal">4425</span>
<span class="normal">4426</span>
<span class="normal">4427</span>
<span class="normal">4428</span>
<span class="normal">4429</span>
<span class="normal">4430</span>
<span class="normal">4431</span>
<span class="normal">4432</span>
<span class="normal">4433</span>
<span class="normal">4434</span>
<span class="normal">4435</span>
<span class="normal">4436</span>
<span class="normal">4437</span>
<span class="normal">4438</span>
<span class="normal">4439</span>
<span class="normal">4440</span>
<span class="normal">4441</span>
<span class="normal">4442</span>
<span class="normal">4443</span>
<span class="normal">4444</span>
<span class="normal">4445</span>
<span class="normal">4446</span>
<span class="normal">4447</span>
<span class="normal">4448</span>
<span class="normal">4449</span>
<span class="normal">4450</span>
<span class="normal">4451</span>
<span class="normal">4452</span>
<span class="normal">4453</span>
<span class="normal">4454</span>
<span class="normal">4455</span>
<span class="normal">4456</span>
<span class="normal">4457</span>
<span class="normal">4458</span>
<span class="normal">4459</span>
<span class="normal">4460</span>
<span class="normal">4461</span>
<span class="normal">4462</span>
<span class="normal">4463</span>
<span class="normal">4464</span>
<span class="normal">4465</span>
<span class="normal">4466</span>
<span class="normal">4467</span>
<span class="normal">4468</span>
<span class="normal">4469</span>
<span class="normal">4470</span>
<span class="normal">4471</span>
<span class="normal">4472</span>
<span class="normal">4473</span>
<span class="normal">4474</span>
<span class="normal">4475</span>
<span class="normal">4476</span>
<span class="normal">4477</span>
<span class="normal">4478</span>
<span class="normal">4479</span>
<span class="normal">4480</span>
<span class="normal">4481</span>
<span class="normal">4482</span>
<span class="normal">4483</span>
<span class="normal">4484</span>
<span class="normal">4485</span>
<span class="normal">4486</span>
<span class="normal">4487</span>
<span class="normal">4488</span>
<span class="normal">4489</span>
<span class="normal">4490</span>
<span class="normal">4491</span>
<span class="normal">4492</span>
<span class="normal">4493</span>
<span class="normal">4494</span>
<span class="normal">4495</span>
<span class="normal">4496</span>
<span class="normal">4497</span>
<span class="normal">4498</span>
<span class="normal">4499</span>
<span class="normal">4500</span>
<span class="normal">4501</span>
<span class="normal">4502</span>
<span class="normal">4503</span>
<span class="normal">4504</span>
<span class="normal">4505</span>
<span class="normal">4506</span>
<span class="normal">4507</span>
<span class="normal">4508</span>
<span class="normal">4509</span>
<span class="normal">4510</span>
<span class="normal">4511</span>
<span class="normal">4512</span>
<span class="normal">4513</span>
<span class="normal">4514</span>
<span class="normal">4515</span>
<span class="normal">4516</span>
<span class="normal">4517</span>
<span class="normal">4518</span>
<span class="normal">4519</span>
<span class="normal">4520</span>
<span class="normal">4521</span>
<span class="normal">4522</span>
<span class="normal">4523</span>
<span class="normal">4524</span>
<span class="normal">4525</span>
<span class="normal">4526</span>
<span class="normal">4527</span>
<span class="normal">4528</span>
<span class="normal">4529</span>
<span class="normal">4530</span>
<span class="normal">4531</span>
<span class="normal">4532</span>
<span class="normal">4533</span>
<span class="normal">4534</span>
<span class="normal">4535</span>
<span class="normal">4536</span>
<span class="normal">4537</span>
<span class="normal">4538</span>
<span class="normal">4539</span>
<span class="normal">4540</span>
<span class="normal">4541</span>
<span class="normal">4542</span>
<span class="normal">4543</span>
<span class="normal">4544</span>
<span class="normal">4545</span>
<span class="normal">4546</span>
<span class="normal">4547</span>
<span class="normal">4548</span>
<span class="normal">4549</span>
<span class="normal">4550</span>
<span class="normal">4551</span>
<span class="normal">4552</span>
<span class="normal">4553</span>
<span class="normal">4554</span>
<span class="normal">4555</span>
<span class="normal">4556</span>
<span class="normal">4557</span>
<span class="normal">4558</span>
<span class="normal">4559</span>
<span class="normal">4560</span>
<span class="normal">4561</span>
<span class="normal">4562</span>
<span class="normal">4563</span>
<span class="normal">4564</span>
<span class="normal">4565</span>
<span class="normal">4566</span>
<span class="normal">4567</span>
<span class="normal">4568</span>
<span class="normal">4569</span>
<span class="normal">4570</span>
<span class="normal">4571</span>
<span class="normal">4572</span>
<span class="normal">4573</span>
<span class="normal">4574</span>
<span class="normal">4575</span>
<span class="normal">4576</span>
<span class="normal">4577</span>
<span class="normal">4578</span>
<span class="normal">4579</span>
<span class="normal">4580</span>
<span class="normal">4581</span>
<span class="normal">4582</span>
<span class="normal">4583</span>
<span class="normal">4584</span>
<span class="normal">4585</span>
<span class="normal">4586</span>
<span class="normal">4587</span>
<span class="normal">4588</span>
<span class="normal">4589</span>
<span class="normal">4590</span>
<span class="normal">4591</span>
<span class="normal">4592</span>
<span class="normal">4593</span>
<span class="normal">4594</span>
<span class="normal">4595</span>
<span class="normal">4596</span>
<span class="normal">4597</span>
<span class="normal">4598</span>
<span class="normal">4599</span>
<span class="normal">4600</span>
<span class="normal">4601</span>
<span class="normal">4602</span>
<span class="normal">4603</span>
<span class="normal">4604</span>
<span class="normal">4605</span>
<span class="normal">4606</span>
<span class="normal">4607</span>
<span class="normal">4608</span>
<span class="normal">4609</span>
<span class="normal">4610</span>
<span class="normal">4611</span>
<span class="normal">4612</span>
<span class="normal">4613</span>
<span class="normal">4614</span>
<span class="normal">4615</span>
<span class="normal">4616</span>
<span class="normal">4617</span>
<span class="normal">4618</span>
<span class="normal">4619</span>
<span class="normal">4620</span>
<span class="normal">4621</span>
<span class="normal">4622</span>
<span class="normal">4623</span>
<span class="normal">4624</span>
<span class="normal">4625</span>
<span class="normal">4626</span>
<span class="normal">4627</span>
<span class="normal">4628</span>
<span class="normal">4629</span>
<span class="normal">4630</span>
<span class="normal">4631</span>
<span class="normal">4632</span>
<span class="normal">4633</span>
<span class="normal">4634</span>
<span class="normal">4635</span>
<span class="normal">4636</span>
<span class="normal">4637</span>
<span class="normal">4638</span>
<span class="normal">4639</span>
<span class="normal">4640</span>
<span class="normal">4641</span>
<span class="normal">4642</span>
<span class="normal">4643</span>
<span class="normal">4644</span>
<span class="normal">4645</span>
<span class="normal">4646</span>
<span class="normal">4647</span>
<span class="normal">4648</span>
<span class="normal">4649</span>
<span class="normal">4650</span>
<span class="normal">4651</span>
<span class="normal">4652</span>
<span class="normal">4653</span>
<span class="normal">4654</span>
<span class="normal">4655</span>
<span class="normal">4656</span>
<span class="normal">4657</span>
<span class="normal">4658</span>
<span class="normal">4659</span>
<span class="normal">4660</span>
<span class="normal">4661</span>
<span class="normal">4662</span>
<span class="normal">4663</span>
<span class="normal">4664</span>
<span class="normal">4665</span>
<span class="normal">4666</span>
<span class="normal">4667</span>
<span class="normal">4668</span>
<span class="normal">4669</span>
<span class="normal">4670</span>
<span class="normal">4671</span>
<span class="normal">4672</span>
<span class="normal">4673</span>
<span class="normal">4674</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_floating_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;370px&quot;</span><span class="p">,</span>
    <span class="n">max_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;80vh&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;widgets.Widget&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a floating sidebar panel overlaid on the map with a toggle button.</span>

<span class="sd">    This method creates a floating sidebar that appears as an overlay on the map canvas.</span>
<span class="sd">    The sidebar includes a toggle button to show/hide it, along with the layer manager</span>
<span class="sd">    and any additional content you specify.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str): Position on the map. Can be &quot;top-right&quot;, &quot;top-left&quot;,</span>
<span class="sd">            &quot;bottom-right&quot;, or &quot;bottom-left&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">        width (str): Width of the sidebar (e.g., &quot;370px&quot;, &quot;25%&quot;). Defaults to &quot;370px&quot;.</span>
<span class="sd">        max_height (str): Maximum height of the sidebar (e.g., &quot;80vh&quot;, &quot;500px&quot;).</span>
<span class="sd">            Defaults to &quot;80vh&quot;.</span>
<span class="sd">        expanded (bool): Whether the layer manager starts expanded. Defaults to True.</span>
<span class="sd">        sidebar_visible (bool): Whether the sidebar content is initially visible.</span>
<span class="sd">            Defaults to False. The toggle button is always visible.</span>
<span class="sd">        sidebar_content (Optional[List[widgets.Widget]]): Additional widgets to include</span>
<span class="sd">            in the sidebar. Defaults to None (only layer manager).</span>
<span class="sd">        **kwargs: Additional keyword arguments passed to LayerManagerWidget.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.Widget: A widget containing the map with the floating sidebar overlay.</span>
<span class="sd">            Display this instead of the map object.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; m = leafmap.Map()</span>
<span class="sd">        &gt;&gt;&gt; m.add_basemap(&quot;Esri.WorldImagery&quot;)</span>
<span class="sd">        &gt;&gt;&gt; widget = m.add_floating_sidebar(position=&quot;top-left&quot;, width=&quot;360px&quot;)</span>
<span class="sd">        &gt;&gt;&gt; widget  # Display the returned widget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Position styles mapping</span>
    <span class="n">position_styles</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;top-right&quot;</span><span class="p">:</span> <span class="s2">&quot;top: 10px; right: 10px;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-left&quot;</span><span class="p">:</span> <span class="s2">&quot;top: 10px; left: 10px;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-right&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom: 50px; right: 10px;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-left&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom: 50px; left: 10px;&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">pos_style</span> <span class="o">=</span> <span class="n">position_styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">position_styles</span><span class="p">[</span><span class="s2">&quot;top-left&quot;</span><span class="p">])</span>

    <span class="c1"># Create layer manager if it doesn&#39;t exist</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Initialize floating sidebar state</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_floating_sidebar_widgets&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Create sidebar content list</span>
    <span class="n">content_widgets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">sidebar_content</span><span class="p">:</span>
        <span class="n">content_widgets</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sidebar_content</span><span class="p">)</span>

    <span class="c1"># Create main sidebar box with layer manager and additional content</span>
    <span class="n">main_sidebar_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="n">content_widgets</span><span class="p">)</span>

    <span class="c1"># Create toggle button</span>
    <span class="n">toggle_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-chevron-left&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;mdi-chevron-right&quot;</span><span class="p">],</span>
        <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">toggle_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">toggle_icon</span><span class="p">],</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 22px; height: 22px; min-width: 22px; padding: 0;&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Create settings/wrench button</span>
    <span class="n">settings_icon</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mdi-wrench&quot;</span><span class="p">],</span> <span class="n">small</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">settings_btn</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Btn</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">settings_icon</span><span class="p">],</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;width: 22px; height: 22px; min-width: 22px; padding: 0;&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Create header row with toggle and settings buttons</span>
    <span class="n">header_row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0 pa-0 d-flex justify-space-between align-center mb-1&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">toggle_btn</span><span class="p">,</span> <span class="n">settings_btn</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="c1"># State tracking for sidebar visibility</span>
    <span class="k">class</span> <span class="nc">SidebarState</span><span class="p">:</span>
        <span class="n">visible</span> <span class="o">=</span> <span class="n">sidebar_visible</span>
        <span class="n">settings_visible</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Convert width string to number for calculation</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="n">width_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">):</span>
            <span class="c1"># Assume parent container is 1440px wide if not available</span>
            <span class="n">parent_width</span> <span class="o">=</span> <span class="mi">1440</span>
            <span class="n">percent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">width_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parent_width</span> <span class="o">*</span> <span class="n">percent</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">width_num</span> <span class="o">=</span> <span class="mi">360</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">width_num</span> <span class="o">=</span> <span class="mi">360</span>

    <span class="c1"># Create width adjustment slider</span>
    <span class="n">width_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">width_num</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Width:&quot;</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Width change handler</span>
    <span class="k">def</span> <span class="nf">on_width_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">new_width</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                position: absolute;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                width: </span><span class="si">{</span><span class="n">new_width</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">                max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                overflow-y: auto;</span>
<span class="s2">                overflow-x: hidden;</span>
<span class="s2">                z-index: 1000;</span>
<span class="s2">                background-color: white;</span>
<span class="s2">                border-radius: 4px;</span>
<span class="s2">            &quot;&quot;&quot;</span>

    <span class="n">width_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_width_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="c1"># Create settings widget wrapped in CustomWidget for proper header</span>
    <span class="n">settings_widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
        <span class="n">width_slider</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-cog&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sidebar Settings&quot;</span><span class="p">,</span>
        <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Settings button handler - toggle settings widget visibility</span>
    <span class="k">def</span> <span class="nf">on_settings_click</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span>
        <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">settings_visible</span><span class="p">:</span>
            <span class="c1"># Add settings widget to floating sidebar content box</span>
            <span class="k">if</span> <span class="n">settings_widget</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">settings_widget</span><span class="p">,</span>
                <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Remove settings widget from floating sidebar content box</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="n">child</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
                <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">settings_widget</span>
            <span class="p">)</span>

    <span class="n">settings_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">on_settings_click</span><span class="p">)</span>

    <span class="c1"># Combine main sidebar with dynamic content box for layer settings and other widgets</span>
    <span class="n">sidebar_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">main_sidebar_box</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Toggle function</span>
    <span class="k">def</span> <span class="nf">toggle_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span>
        <span class="n">toggle_icon</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;mdi-chevron-left&quot;</span> <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span> <span class="k">else</span> <span class="s2">&quot;mdi-chevron-right&quot;</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">SidebarState</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="c1"># Show sidebar content</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">header_row</span><span class="p">,</span> <span class="n">sidebar_box</span><span class="p">]</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;pa-2 ma-0&quot;</span>
            <span class="n">current_width</span> <span class="o">=</span> <span class="n">width_slider</span><span class="o">.</span><span class="n">value</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                position: absolute;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                width: </span><span class="si">{</span><span class="n">current_width</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">                max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                overflow-y: auto;</span>
<span class="s2">                overflow-x: hidden;</span>
<span class="s2">                z-index: 1000;</span>
<span class="s2">                background-color: white;</span>
<span class="s2">                border-radius: 4px;</span>
<span class="s2">            &quot;&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Hide sidebar content, only show toggle button</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">toggle_btn</span><span class="p">]</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;ma-0&quot;</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">style_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                position: absolute;</span>
<span class="s2">                </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">                width: auto;</span>
<span class="s2">                height: auto;</span>
<span class="s2">                max-height: none;</span>
<span class="s2">                overflow: visible;</span>
<span class="s2">                z-index: 1000;</span>
<span class="s2">                background-color: white;</span>
<span class="s2">                border-radius: 4px;</span>
<span class="s2">                padding: 4px;</span>
<span class="s2">            &quot;&quot;&quot;</span>

    <span class="n">toggle_btn</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">toggle_sidebar</span><span class="p">)</span>

    <span class="c1"># Create floating overlay container</span>
    <span class="n">initial_children</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span><span class="n">header_row</span><span class="p">,</span> <span class="n">sidebar_box</span><span class="p">]</span> <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="p">[</span><span class="n">toggle_btn</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">sidebar_visible</span><span class="p">:</span>
        <span class="n">initial_style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            position: absolute;</span>
<span class="s2">            </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">            width: </span><span class="si">{</span><span class="n">width_num</span><span class="si">}</span><span class="s2">px;</span>
<span class="s2">            max-height: </span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">            overflow-y: auto;</span>
<span class="s2">            overflow-x: hidden;</span>
<span class="s2">            z-index: 1000;</span>
<span class="s2">            background-color: white;</span>
<span class="s2">            border-radius: 4px;</span>
<span class="s2">        &quot;&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">initial_style</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            position: absolute;</span>
<span class="s2">            </span><span class="si">{</span><span class="n">pos_style</span><span class="si">}</span>
<span class="s2">            width: auto;</span>
<span class="s2">            height: auto;</span>
<span class="s2">            max-height: none;</span>
<span class="s2">            overflow: visible;</span>
<span class="s2">            z-index: 1000;</span>
<span class="s2">            background-color: white;</span>
<span class="s2">            border-radius: 4px;</span>
<span class="s2">            padding: 4px;</span>
<span class="s2">        &quot;&quot;&quot;</span>

    <span class="n">overlay</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Card</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;ma-0&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">sidebar_visible</span> <span class="k">else</span> <span class="s2">&quot;pa-2 ma-0&quot;</span><span class="p">,</span>
        <span class="n">elevation</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">flat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="n">initial_style</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="n">initial_children</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Create wrapper with the map and overlay</span>
    <span class="n">wrapper</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Html</span><span class="p">(</span>
        <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;div&quot;</span><span class="p">,</span>
        <span class="n">style_</span><span class="o">=</span><span class="s2">&quot;position: relative; width: 100%; height: 100%;&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">overlay</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_gdf" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_gdf" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a vector layer to the map.</p>
<p>This method adds a GeoDataFrame to the map as a vector layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The GeoDataFrame to add to the map.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the layer. If None, the type
is inferred from the GeoJSON data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter to apply to the layer. If None,
no filter is applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. If None, a random name
is generated.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible or not.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data is not a URL or a GeoJSON dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf</span><span class="p">:</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">,</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a vector layer to the map.</span>

<span class="sd">    This method adds a GeoDataFrame to the map as a vector layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (gpd.GeoDataFrame): The GeoDataFrame to add to the map.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a GeoDataFrame.&quot;</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_geojson" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_geojson</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">fit_bounds_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_geojson" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a GeoJSON layer to the map.</p>
<p>This method adds a GeoJSON layer to the map. The GeoJSON data can be a
URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it
is used as the key to store the layer in the layer dictionary. Otherwise,
a random name is generated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The GeoJSON data. This can be a URL to a GeoJSON
file or a GeoJSON dictionary.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the layer. It can be one of
the following: 'circle', 'fill', 'fill-extrusion', 'line', 'symbol',
'raster', 'background', 'heatmap', 'hillshade'. If None, the type
is inferred from the GeoJSON data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter to apply to the layer. If None,
no filter is applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. If None, a random name
is generated.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible or not.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options for fitting the bounds.
See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions
for more information.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.
See https://maplibre.org/maplibre-style-spec/layers/ for more info.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data is not a URL or a GeoJSON dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">fit_bounds_options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a GeoJSON layer to the map.</span>

<span class="sd">    This method adds a GeoJSON layer to the map. The GeoJSON data can be a</span>
<span class="sd">    URL to a GeoJSON file or a GeoJSON dictionary. If a name is provided, it</span>
<span class="sd">    is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">    a random name is generated.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | dict): The GeoJSON data. This can be a URL to a GeoJSON</span>
<span class="sd">            file or a GeoJSON dictionary.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. It can be one of</span>
<span class="sd">            the following: &#39;circle&#39;, &#39;fill&#39;, &#39;fill-extrusion&#39;, &#39;line&#39;, &#39;symbol&#39;,</span>
<span class="sd">            &#39;raster&#39;, &#39;background&#39;, &#39;heatmap&#39;, &#39;hillshade&#39;. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        fit_bounds_options (dict, optional): Additional options for fitting the bounds.</span>
<span class="sd">            See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions</span>
<span class="sd">            for more information.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://maplibre.org/maplibre-style-spec/layers/ for more info.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">geom_type</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
            <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">GeoJSONSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">source_args</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a URL or a GeoJSON dictionary.&quot;</span><span class="p">)</span>

    <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;GeoJSON&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;features&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">geom_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPoint&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;LineString&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">geom_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span>
                <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                    <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="p">}</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
        <span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span> <span class="ow">and</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">paint</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span> <span class="ow">in</span> <span class="n">paint</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_globe_control" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_globe_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_globe_control" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a globe control to the map.</p>
<p>This method adds a globe control to the map, allowing users to switch
between 2D and 3D views. The position of the control can be customized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the control on the map. Defaults
to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the
globe control.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_globe_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a globe control to the map.</span>

<span class="sd">    This method adds a globe control to the map, allowing users to switch</span>
<span class="sd">    between 2D and 3D views. The position of the control can be customized.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str): The position of the control on the map. Defaults</span>
<span class="sd">            to &quot;top-right&quot;.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to be passed to the</span>
<span class="sd">            globe control.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;globe&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">GlobeControl</span><span class="p">(),</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_gps_trace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_gps_trace</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">circle_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;#ffffff&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;GPS Trace&#39;</span><span class="p">,</span> <span class="n">add_line</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_draw_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">draw_control_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_gps_trace" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a GPS trace to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>x</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name for the x coordinates. Defaults to None,
which assumes the x coordinates are in the "longitude", "lon", or "x" column.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name for the y coordinates. Defaults to None,
which assumes the y coordinates are in the "latitude", "lat", or "y" column.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of columns to include in the GeoDataFrame. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_column</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name to use for coloring the GPS trace points. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colormap</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The colormap for the GPS trace. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius of the GPS trace points. Defaults to 5.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>circle_color</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color of the GPS trace points. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stroke_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stroke color of the GPS trace points. Defaults to "#ffffff".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#ffffff&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the GPS trace points. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint properties for the GPS trace points. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the GPS trace layer. Defaults to "GPS Trace".</p>
              </div>
            </td>
            <td>
                  <code>&#39;GPS Trace&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_line</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a line connecting the GPS trace points. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sort_column</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name to sort the points before connecting them as a line. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>line_args</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_gdf method for the line layer. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_draw_control</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a draw control to the map. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>draw_control_args</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_draw_control method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_legend</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a legend to the map. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_args</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_legend method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_geojson method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5332</span>
<span class="normal">5333</span>
<span class="normal">5334</span>
<span class="normal">5335</span>
<span class="normal">5336</span>
<span class="normal">5337</span>
<span class="normal">5338</span>
<span class="normal">5339</span>
<span class="normal">5340</span>
<span class="normal">5341</span>
<span class="normal">5342</span>
<span class="normal">5343</span>
<span class="normal">5344</span>
<span class="normal">5345</span>
<span class="normal">5346</span>
<span class="normal">5347</span>
<span class="normal">5348</span>
<span class="normal">5349</span>
<span class="normal">5350</span>
<span class="normal">5351</span>
<span class="normal">5352</span>
<span class="normal">5353</span>
<span class="normal">5354</span>
<span class="normal">5355</span>
<span class="normal">5356</span>
<span class="normal">5357</span>
<span class="normal">5358</span>
<span class="normal">5359</span>
<span class="normal">5360</span>
<span class="normal">5361</span>
<span class="normal">5362</span>
<span class="normal">5363</span>
<span class="normal">5364</span>
<span class="normal">5365</span>
<span class="normal">5366</span>
<span class="normal">5367</span>
<span class="normal">5368</span>
<span class="normal">5369</span>
<span class="normal">5370</span>
<span class="normal">5371</span>
<span class="normal">5372</span>
<span class="normal">5373</span>
<span class="normal">5374</span>
<span class="normal">5375</span>
<span class="normal">5376</span>
<span class="normal">5377</span>
<span class="normal">5378</span>
<span class="normal">5379</span>
<span class="normal">5380</span>
<span class="normal">5381</span>
<span class="normal">5382</span>
<span class="normal">5383</span>
<span class="normal">5384</span>
<span class="normal">5385</span>
<span class="normal">5386</span>
<span class="normal">5387</span>
<span class="normal">5388</span>
<span class="normal">5389</span>
<span class="normal">5390</span>
<span class="normal">5391</span>
<span class="normal">5392</span>
<span class="normal">5393</span>
<span class="normal">5394</span>
<span class="normal">5395</span>
<span class="normal">5396</span>
<span class="normal">5397</span>
<span class="normal">5398</span>
<span class="normal">5399</span>
<span class="normal">5400</span>
<span class="normal">5401</span>
<span class="normal">5402</span>
<span class="normal">5403</span>
<span class="normal">5404</span>
<span class="normal">5405</span>
<span class="normal">5406</span>
<span class="normal">5407</span>
<span class="normal">5408</span>
<span class="normal">5409</span>
<span class="normal">5410</span>
<span class="normal">5411</span>
<span class="normal">5412</span>
<span class="normal">5413</span>
<span class="normal">5414</span>
<span class="normal">5415</span>
<span class="normal">5416</span>
<span class="normal">5417</span>
<span class="normal">5418</span>
<span class="normal">5419</span>
<span class="normal">5420</span>
<span class="normal">5421</span>
<span class="normal">5422</span>
<span class="normal">5423</span>
<span class="normal">5424</span>
<span class="normal">5425</span>
<span class="normal">5426</span>
<span class="normal">5427</span>
<span class="normal">5428</span>
<span class="normal">5429</span>
<span class="normal">5430</span>
<span class="normal">5431</span>
<span class="normal">5432</span>
<span class="normal">5433</span>
<span class="normal">5434</span>
<span class="normal">5435</span>
<span class="normal">5436</span>
<span class="normal">5437</span>
<span class="normal">5438</span>
<span class="normal">5439</span>
<span class="normal">5440</span>
<span class="normal">5441</span>
<span class="normal">5442</span>
<span class="normal">5443</span>
<span class="normal">5444</span>
<span class="normal">5445</span>
<span class="normal">5446</span>
<span class="normal">5447</span>
<span class="normal">5448</span>
<span class="normal">5449</span>
<span class="normal">5450</span>
<span class="normal">5451</span>
<span class="normal">5452</span>
<span class="normal">5453</span>
<span class="normal">5454</span>
<span class="normal">5455</span>
<span class="normal">5456</span>
<span class="normal">5457</span>
<span class="normal">5458</span>
<span class="normal">5459</span>
<span class="normal">5460</span>
<span class="normal">5461</span>
<span class="normal">5462</span>
<span class="normal">5463</span>
<span class="normal">5464</span>
<span class="normal">5465</span>
<span class="normal">5466</span>
<span class="normal">5467</span>
<span class="normal">5468</span>
<span class="normal">5469</span>
<span class="normal">5470</span>
<span class="normal">5471</span>
<span class="normal">5472</span>
<span class="normal">5473</span>
<span class="normal">5474</span>
<span class="normal">5475</span>
<span class="normal">5476</span>
<span class="normal">5477</span>
<span class="normal">5478</span>
<span class="normal">5479</span>
<span class="normal">5480</span>
<span class="normal">5481</span>
<span class="normal">5482</span>
<span class="normal">5483</span>
<span class="normal">5484</span>
<span class="normal">5485</span>
<span class="normal">5486</span>
<span class="normal">5487</span>
<span class="normal">5488</span>
<span class="normal">5489</span>
<span class="normal">5490</span>
<span class="normal">5491</span>
<span class="normal">5492</span>
<span class="normal">5493</span>
<span class="normal">5494</span>
<span class="normal">5495</span>
<span class="normal">5496</span>
<span class="normal">5497</span>
<span class="normal">5498</span>
<span class="normal">5499</span>
<span class="normal">5500</span>
<span class="normal">5501</span>
<span class="normal">5502</span>
<span class="normal">5503</span>
<span class="normal">5504</span>
<span class="normal">5505</span>
<span class="normal">5506</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_gps_trace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">circle_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
    <span class="n">add_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">sort_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">line_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_draw_control</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">draw_control_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">legend_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a GPS trace to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Union[str, List[Dict[str, Any]]]): The GPS trace data. It can be a GeoJSON file path or a list of coordinates.</span>
<span class="sd">        x (str, optional): The column name for the x coordinates. Defaults to None,</span>
<span class="sd">            which assumes the x coordinates are in the &quot;longitude&quot;, &quot;lon&quot;, or &quot;x&quot; column.</span>
<span class="sd">        y (str, optional): The column name for the y coordinates. Defaults to None,</span>
<span class="sd">            which assumes the y coordinates are in the &quot;latitude&quot;, &quot;lat&quot;, or &quot;y&quot; column.</span>
<span class="sd">        columns (Optional[List[str]], optional): The list of columns to include in the GeoDataFrame. Defaults to None.</span>
<span class="sd">        ann_column (Optional[str], optional): The column name to use for coloring the GPS trace points. Defaults to None.</span>
<span class="sd">        colormap (Optional[Dict[str, str]], optional): The colormap for the GPS trace. Defaults to None.</span>
<span class="sd">        radius (int, optional): The radius of the GPS trace points. Defaults to 5.</span>
<span class="sd">        circle_color (Optional[Union[str, List[Any]]], optional): The color of the GPS trace points. Defaults to None.</span>
<span class="sd">        stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;#ffffff&quot;.</span>
<span class="sd">        opacity (float, optional): The opacity of the GPS trace points. Defaults to 1.0.</span>
<span class="sd">        paint (Optional[Dict[str, Any]], optional): The paint properties for the GPS trace points. Defaults to None.</span>
<span class="sd">        name (str, optional): The name of the GPS trace layer. Defaults to &quot;GPS Trace&quot;.</span>
<span class="sd">        add_line (bool, optional): If True, adds a line connecting the GPS trace points. Defaults to True.</span>
<span class="sd">        sort_column (Optional[str], optional): The column name to sort the points before connecting them as a line. Defaults to None.</span>
<span class="sd">        line_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_gdf method for the line layer. Defaults to None.</span>
<span class="sd">        add_draw_control (bool, optional): If True, adds a draw control to the map. Defaults to True.</span>
<span class="sd">        draw_control_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_draw_control method. Defaults to None.</span>
<span class="sd">        add_legend (bool, optional): If True, adds a legend to the map. Defaults to True.</span>
<span class="sd">        legend_args (Optional[Dict[str, Any]], optional): Additional keyword arguments for the add_legend method. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

    <span class="k">if</span> <span class="n">add_draw_control</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">draw_control_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">draw_control_args</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;controls&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">],</span>
                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span><span class="o">**</span><span class="n">draw_control_args</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tmp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_tmp.csv&quot;</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
        <span class="c1"># If the temporary file exists, read the annotations from it</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">)</span>
            <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid data type. Use a GeoDataFrame or a file path to a CSV file.&quot;</span>
        <span class="p">)</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gps_trace&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_line</span><span class="p">:</span>
        <span class="n">line_gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">connect_points_as_line</span><span class="p">(</span>
            <span class="n">gdf</span><span class="p">,</span> <span class="n">sort_column</span><span class="o">=</span><span class="n">sort_column</span><span class="p">,</span> <span class="n">single_line</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">line_gdf</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFF00&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">legend_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_args</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;legend_dict&quot;</span><span class="p">:</span> <span class="n">colormap</span><span class="p">,</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="o">**</span><span class="n">legend_args</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">)</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="p">):</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">ann_column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;annotation&quot;</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">ann_column</span> <span class="o">=</span> <span class="s2">&quot;annotation&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Please specify the ann_column parameter or add an &#39;annotation&#39; column to the GeoDataFrame.&quot;</span>
            <span class="p">)</span>

    <span class="n">ann_column_edited</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ann_column</span><span class="si">}</span><span class="s2">_edited&quot;</span>
    <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ann_column</span><span class="p">,</span>
            <span class="n">ann_column_edited</span><span class="p">,</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">if</span> <span class="n">ann_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ann_column</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ann_column_edited</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ann_column_edited</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
        <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;gdf&quot;</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">circle_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">circle_color</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;match&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;to-string&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">ann_column_edited</span><span class="p">]],</span>
        <span class="p">]</span>
        <span class="c1"># Add the color matches from the colormap</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">circle_color</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">color</span><span class="p">])</span>

        <span class="c1"># Add the default color</span>
        <span class="n">circle_color</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;#CCCCCC&quot;</span><span class="p">)</span>  <span class="c1"># Default color if annotation does not match</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="n">radius</span><span class="p">,</span>
            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="n">circle_color</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">stroke_color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">circle_color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paint</span><span class="p">[</span><span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stroke_color</span>

    <span class="k">if</span> <span class="n">line_gdf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line_args</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span><span class="n">line_gdf</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">line_args</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;fit_bounds_options&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fit_bounds_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_html" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_html" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add HTML content to the map.</p>
<p>This method allows for the addition of arbitrary HTML content to the map, which can be used to display
custom information or controls. The background color and position of the HTML content can be customized.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>html</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTML content to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the HTML content. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the HTML content on the map. Can be one of "top-left",
"top-right", "bottom-left", "bottom-right". Defaults to "bottom-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;bottom-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for future use.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3862</span>
<span class="normal">3863</span>
<span class="normal">3864</span>
<span class="normal">3865</span>
<span class="normal">3866</span>
<span class="normal">3867</span>
<span class="normal">3868</span>
<span class="normal">3869</span>
<span class="normal">3870</span>
<span class="normal">3871</span>
<span class="normal">3872</span>
<span class="normal">3873</span>
<span class="normal">3874</span>
<span class="normal">3875</span>
<span class="normal">3876</span>
<span class="normal">3877</span>
<span class="normal">3878</span>
<span class="normal">3879</span>
<span class="normal">3880</span>
<span class="normal">3881</span>
<span class="normal">3882</span>
<span class="normal">3883</span>
<span class="normal">3884</span>
<span class="normal">3885</span>
<span class="normal">3886</span>
<span class="normal">3887</span>
<span class="normal">3888</span>
<span class="normal">3889</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add HTML content to the map.</span>

<span class="sd">    This method allows for the addition of arbitrary HTML content to the map, which can be used to display</span>
<span class="sd">    custom information or controls. The background color and position of the HTML content can be customized.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): The HTML content to add.</span>
<span class="sd">        bg_color (str, optional): The background color of the HTML content. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        position (str, optional): The position of the HTML content on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">            &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_html_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_html_to_sidebar</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-language-html5&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;HTML&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_html_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add HTML content to the map.</p>
<p>This method allows for the addition of arbitrary HTML content to the sidebar, which can be used to display
custom information or controls.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>html</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTML content to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-language-html5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;HTML&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3891</span>
<span class="normal">3892</span>
<span class="normal">3893</span>
<span class="normal">3894</span>
<span class="normal">3895</span>
<span class="normal">3896</span>
<span class="normal">3897</span>
<span class="normal">3898</span>
<span class="normal">3899</span>
<span class="normal">3900</span>
<span class="normal">3901</span>
<span class="normal">3902</span>
<span class="normal">3903</span>
<span class="normal">3904</span>
<span class="normal">3905</span>
<span class="normal">3906</span>
<span class="normal">3907</span>
<span class="normal">3908</span>
<span class="normal">3909</span>
<span class="normal">3910</span>
<span class="normal">3911</span>
<span class="normal">3912</span>
<span class="normal">3913</span>
<span class="normal">3914</span>
<span class="normal">3915</span>
<span class="normal">3916</span>
<span class="normal">3917</span>
<span class="normal">3918</span>
<span class="normal">3919</span>
<span class="normal">3920</span>
<span class="normal">3921</span>
<span class="normal">3922</span>
<span class="normal">3923</span>
<span class="normal">3924</span>
<span class="normal">3925</span>
<span class="normal">3926</span>
<span class="normal">3927</span>
<span class="normal">3928</span>
<span class="normal">3929</span>
<span class="normal">3930</span>
<span class="normal">3931</span>
<span class="normal">3932</span>
<span class="normal">3933</span>
<span class="normal">3934</span>
<span class="normal">3935</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_html_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-language-html5&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;HTML&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add HTML content to the map.</span>

<span class="sd">    This method allows for the addition of arbitrary HTML content to the sidebar, which can be used to display</span>
<span class="sd">    custom information or controls.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): The HTML content to add.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if an HTML string contains local images and convert them to base64.</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_html_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_image</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">icon_size</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_image" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add an image to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer ID of the image.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>, <span title="leafmap.leafmap.np.ndarray">ndarray</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL or local file path to
the image, or a dictionary containing image data, or a numpy
array representing the image.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the image. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the image. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinates</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The longitude and latitude
coordinates to place the image.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the image. Defaults to None.
Can be one of 'top-right', 'top-left', 'bottom-right', 'bottom-left'.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>icon_size</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the icon. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3160</span>
<span class="normal">3161</span>
<span class="normal">3162</span>
<span class="normal">3163</span>
<span class="normal">3164</span>
<span class="normal">3165</span>
<span class="normal">3166</span>
<span class="normal">3167</span>
<span class="normal">3168</span>
<span class="normal">3169</span>
<span class="normal">3170</span>
<span class="normal">3171</span>
<span class="normal">3172</span>
<span class="normal">3173</span>
<span class="normal">3174</span>
<span class="normal">3175</span>
<span class="normal">3176</span>
<span class="normal">3177</span>
<span class="normal">3178</span>
<span class="normal">3179</span>
<span class="normal">3180</span>
<span class="normal">3181</span>
<span class="normal">3182</span>
<span class="normal">3183</span>
<span class="normal">3184</span>
<span class="normal">3185</span>
<span class="normal">3186</span>
<span class="normal">3187</span>
<span class="normal">3188</span>
<span class="normal">3189</span>
<span class="normal">3190</span>
<span class="normal">3191</span>
<span class="normal">3192</span>
<span class="normal">3193</span>
<span class="normal">3194</span>
<span class="normal">3195</span>
<span class="normal">3196</span>
<span class="normal">3197</span>
<span class="normal">3198</span>
<span class="normal">3199</span>
<span class="normal">3200</span>
<span class="normal">3201</span>
<span class="normal">3202</span>
<span class="normal">3203</span>
<span class="normal">3204</span>
<span class="normal">3205</span>
<span class="normal">3206</span>
<span class="normal">3207</span>
<span class="normal">3208</span>
<span class="normal">3209</span>
<span class="normal">3210</span>
<span class="normal">3211</span>
<span class="normal">3212</span>
<span class="normal">3213</span>
<span class="normal">3214</span>
<span class="normal">3215</span>
<span class="normal">3216</span>
<span class="normal">3217</span>
<span class="normal">3218</span>
<span class="normal">3219</span>
<span class="normal">3220</span>
<span class="normal">3221</span>
<span class="normal">3222</span>
<span class="normal">3223</span>
<span class="normal">3224</span>
<span class="normal">3225</span>
<span class="normal">3226</span>
<span class="normal">3227</span>
<span class="normal">3228</span>
<span class="normal">3229</span>
<span class="normal">3230</span>
<span class="normal">3231</span>
<span class="normal">3232</span>
<span class="normal">3233</span>
<span class="normal">3234</span>
<span class="normal">3235</span>
<span class="normal">3236</span>
<span class="normal">3237</span>
<span class="normal">3238</span>
<span class="normal">3239</span>
<span class="normal">3240</span>
<span class="normal">3241</span>
<span class="normal">3242</span>
<span class="normal">3243</span>
<span class="normal">3244</span>
<span class="normal">3245</span>
<span class="normal">3246</span>
<span class="normal">3247</span>
<span class="normal">3248</span>
<span class="normal">3249</span>
<span class="normal">3250</span>
<span class="normal">3251</span>
<span class="normal">3252</span>
<span class="normal">3253</span>
<span class="normal">3254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">icon_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The layer ID of the image.</span>
<span class="sd">        image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">            the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">            array representing the image.</span>
<span class="sd">        width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">        height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">        coordinates (List[float], optional): The longitude and latitude</span>
<span class="sd">            coordinates to place the image.</span>
<span class="sd">        position (str, optional): The position of the image. Defaults to None.</span>
<span class="sd">            Can be one of &#39;top-right&#39;, &#39;top-left&#39;, &#39;bottom-right&#39;, &#39;bottom-left&#39;.</span>
<span class="sd">        icon_size (float, optional): The size of the icon. Defaults to 1.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span>

    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="n">image</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">image_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span>
                <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The image must be a URL, a local file path, or a numpy array.&quot;</span>
            <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;addImage&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">image_dict</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">coordinates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
                <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
                            <span class="p">},</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                <span class="p">},</span>
            <span class="p">}</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;image_point&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_points&quot;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;symbol&quot;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image_point&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-image&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;icon-size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">icon_size</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_image_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_image_to_sidebar</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-image&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">header_height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_image_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add an image to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer ID of the image.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>, <span title="leafmap.leafmap.np.ndarray">ndarray</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL or local file path to
the image, or a dictionary containing image data, or a numpy
array representing the image.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the image. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the image. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>header_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3256</span>
<span class="normal">3257</span>
<span class="normal">3258</span>
<span class="normal">3259</span>
<span class="normal">3260</span>
<span class="normal">3261</span>
<span class="normal">3262</span>
<span class="normal">3263</span>
<span class="normal">3264</span>
<span class="normal">3265</span>
<span class="normal">3266</span>
<span class="normal">3267</span>
<span class="normal">3268</span>
<span class="normal">3269</span>
<span class="normal">3270</span>
<span class="normal">3271</span>
<span class="normal">3272</span>
<span class="normal">3273</span>
<span class="normal">3274</span>
<span class="normal">3275</span>
<span class="normal">3276</span>
<span class="normal">3277</span>
<span class="normal">3278</span>
<span class="normal">3279</span>
<span class="normal">3280</span>
<span class="normal">3281</span>
<span class="normal">3282</span>
<span class="normal">3283</span>
<span class="normal">3284</span>
<span class="normal">3285</span>
<span class="normal">3286</span>
<span class="normal">3287</span>
<span class="normal">3288</span>
<span class="normal">3289</span>
<span class="normal">3290</span>
<span class="normal">3291</span>
<span class="normal">3292</span>
<span class="normal">3293</span>
<span class="normal">3294</span>
<span class="normal">3295</span>
<span class="normal">3296</span>
<span class="normal">3297</span>
<span class="normal">3298</span>
<span class="normal">3299</span>
<span class="normal">3300</span>
<span class="normal">3301</span>
<span class="normal">3302</span>
<span class="normal">3303</span>
<span class="normal">3304</span>
<span class="normal">3305</span>
<span class="normal">3306</span>
<span class="normal">3307</span>
<span class="normal">3308</span>
<span class="normal">3309</span>
<span class="normal">3310</span>
<span class="normal">3311</span>
<span class="normal">3312</span>
<span class="normal">3313</span>
<span class="normal">3314</span>
<span class="normal">3315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_image_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">header_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The layer ID of the image.</span>
<span class="sd">        image (Union[str, Dict, np.ndarray]): The URL or local file path to</span>
<span class="sd">            the image, or a dictionary containing image data, or a numpy</span>
<span class="sd">            array representing the image.</span>
<span class="sd">        width (int, optional): The width of the image. Defaults to None.</span>
<span class="sd">        height (int, optional): The height of the image. Defaults to None.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        header_height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; &quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px; &quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">; &quot;</span>

    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s1">&quot; style=&quot;</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
        <span class="n">html</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">header_height</span><span class="o">=</span><span class="n">header_height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_labels</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">text_anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_labels" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a label layer to the map.</p>
<p>This method adds a label layer to the map using the specified source and column for text values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data source for the labels. It can be a GeoJSON file path
or a dictionary containing GeoJSON data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column name in the source data to use for the label text.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the label layer. If None, a random name is generated. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the label text. Defaults to 14.</p>
              </div>
            </td>
            <td>
                  <code>14</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text_anchor</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The anchor position of the text. Can be "center", "left", "right", etc. Defaults to "center".</p>
              </div>
            </td>
            <td>
                  <code>&#39;center&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>text_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color of the label text. Defaults to "black".</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_zoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum zoom level at which the labels are visible. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_zoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum zoom level at which the labels are visible. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layout</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional layout properties for the label layer. Defaults to None.
For more information, refer to https://maplibre.org/maplibre-style-spec/layers/#symbol.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional paint properties for the label layer. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which the new layer should be inserted. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the label layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the label layer is visible by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to customize the label layer.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5971</span>
<span class="normal">5972</span>
<span class="normal">5973</span>
<span class="normal">5974</span>
<span class="normal">5975</span>
<span class="normal">5976</span>
<span class="normal">5977</span>
<span class="normal">5978</span>
<span class="normal">5979</span>
<span class="normal">5980</span>
<span class="normal">5981</span>
<span class="normal">5982</span>
<span class="normal">5983</span>
<span class="normal">5984</span>
<span class="normal">5985</span>
<span class="normal">5986</span>
<span class="normal">5987</span>
<span class="normal">5988</span>
<span class="normal">5989</span>
<span class="normal">5990</span>
<span class="normal">5991</span>
<span class="normal">5992</span>
<span class="normal">5993</span>
<span class="normal">5994</span>
<span class="normal">5995</span>
<span class="normal">5996</span>
<span class="normal">5997</span>
<span class="normal">5998</span>
<span class="normal">5999</span>
<span class="normal">6000</span>
<span class="normal">6001</span>
<span class="normal">6002</span>
<span class="normal">6003</span>
<span class="normal">6004</span>
<span class="normal">6005</span>
<span class="normal">6006</span>
<span class="normal">6007</span>
<span class="normal">6008</span>
<span class="normal">6009</span>
<span class="normal">6010</span>
<span class="normal">6011</span>
<span class="normal">6012</span>
<span class="normal">6013</span>
<span class="normal">6014</span>
<span class="normal">6015</span>
<span class="normal">6016</span>
<span class="normal">6017</span>
<span class="normal">6018</span>
<span class="normal">6019</span>
<span class="normal">6020</span>
<span class="normal">6021</span>
<span class="normal">6022</span>
<span class="normal">6023</span>
<span class="normal">6024</span>
<span class="normal">6025</span>
<span class="normal">6026</span>
<span class="normal">6027</span>
<span class="normal">6028</span>
<span class="normal">6029</span>
<span class="normal">6030</span>
<span class="normal">6031</span>
<span class="normal">6032</span>
<span class="normal">6033</span>
<span class="normal">6034</span>
<span class="normal">6035</span>
<span class="normal">6036</span>
<span class="normal">6037</span>
<span class="normal">6038</span>
<span class="normal">6039</span>
<span class="normal">6040</span>
<span class="normal">6041</span>
<span class="normal">6042</span>
<span class="normal">6043</span>
<span class="normal">6044</span>
<span class="normal">6045</span>
<span class="normal">6046</span>
<span class="normal">6047</span>
<span class="normal">6048</span>
<span class="normal">6049</span>
<span class="normal">6050</span>
<span class="normal">6051</span>
<span class="normal">6052</span>
<span class="normal">6053</span>
<span class="normal">6054</span>
<span class="normal">6055</span>
<span class="normal">6056</span>
<span class="normal">6057</span>
<span class="normal">6058</span>
<span class="normal">6059</span>
<span class="normal">6060</span>
<span class="normal">6061</span>
<span class="normal">6062</span>
<span class="normal">6063</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_labels</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">text_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
    <span class="n">text_anchor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span>
    <span class="n">text_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">min_zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a label layer to the map.</span>

<span class="sd">    This method adds a label layer to the map using the specified source and column for text values.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (Union[str, Dict[str, Any]]): The data source for the labels. It can be a GeoJSON file path</span>
<span class="sd">            or a dictionary containing GeoJSON data.</span>
<span class="sd">        column (str): The column name in the source data to use for the label text.</span>
<span class="sd">        name (Optional[str]): The name of the label layer. If None, a random name is generated. Defaults to None.</span>
<span class="sd">        text_size (int): The size of the label text. Defaults to 14.</span>
<span class="sd">        text_anchor (str): The anchor position of the text. Can be &quot;center&quot;, &quot;left&quot;, &quot;right&quot;, etc. Defaults to &quot;center&quot;.</span>
<span class="sd">        text_color (str): The color of the label text. Defaults to &quot;black&quot;.</span>
<span class="sd">        min_zoom (Optional[float]): The minimum zoom level at which the labels are visible. Defaults to None.</span>
<span class="sd">        max_zoom (Optional[float]): The maximum zoom level at which the labels are visible. Defaults to None.</span>
<span class="sd">        layout (Optional[Dict[str, Any]]): Additional layout properties for the label layer. Defaults to None.</span>
<span class="sd">            For more information, refer to https://maplibre.org/maplibre-style-spec/layers/#symbol.</span>
<span class="sd">        paint (Optional[Dict[str, Any]]): Additional paint properties for the label layer. Defaults to None.</span>
<span class="sd">        before_id (Optional[str]): The ID of an existing layer before which the new layer should be inserted. Defaults to None.</span>
<span class="sd">        opacity (float): The opacity of the label layer. Defaults to 1.0.</span>
<span class="sd">        visible (bool): Whether the label layer is visible by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to customize the label layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Labels&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_vector</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">source</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid source type. Use a GeoDataFrame, a file path to a GeoJSON file, or a dictionary.&quot;</span>
        <span class="p">)</span>

    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;text-field&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">],</span>
            <span class="s2">&quot;text-size&quot;</span><span class="p">:</span> <span class="n">text_size</span><span class="p">,</span>
            <span class="s2">&quot;text-anchor&quot;</span><span class="p">:</span> <span class="n">text_anchor</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;text-color&quot;</span><span class="p">:</span> <span class="n">text_color</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_name</span><span class="p">,</span>
        <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="n">layout</span><span class="p">,</span>
        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">paint</span><span class="p">,</span>
        <span class="s2">&quot;min_zoom&quot;</span><span class="p">:</span> <span class="n">min_zoom</span><span class="p">,</span>
        <span class="s2">&quot;max_zoom&quot;</span><span class="p">:</span> <span class="n">max_zoom</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
        <span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="n">visible</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a layer to the map.</p>
<p>This method adds a layer to the map. If a name is provided, it is used
    as the key to store the layer in the layer dictionary. Otherwise,
    the layer's ID is used as the key. If a before_id is provided, the
    layer is inserted before the layer with that ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer</code>
            </td>
            <td>
                  <code><span title="maplibre.Layer">Layer</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer object to add to the map.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use as the key to store the layer
in the layer dictionary. If None, the layer's ID is used as the key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible by default.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the function will return the
original name even if it exists in the list. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer</span><span class="p">:</span> <span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a layer to the map.</span>

<span class="sd">    This method adds a layer to the map. If a name is provided, it is used</span>
<span class="sd">        as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">        the layer&#39;s ID is used as the key. If a before_id is provided, the</span>
<span class="sd">        layer is inserted before the layer with that ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer (Layer): The layer object to add to the map.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        name (str, optional): The name to use as the key to store the layer</span>
<span class="sd">            in the layer dictionary. If None, the layer&#39;s ID is used as the key.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible by default.</span>
<span class="sd">        overwrite (bool, optional): If True, the function will return the</span>
<span class="sd">            original name even if it exists in the list. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;minzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;min-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;minzoom&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;maxzoom&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;max-zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_top_level_hyphens</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">id</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">(),</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="ow">and</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">paint</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">paint</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;layer&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
        <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">opacity</span><span class="p">,</span>
        <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="n">visible</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_layer_control" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_layer_control</span><span class="p">(</span><span class="n">layer_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-left&#39;</span><span class="p">,</span> <span class="n">bg_layers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_layer_control" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a layer control to the map.</p>
<p>This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility
of specified layers. The appearance and functionality of the layer control can be customized with parameters
such as theme, CSS styling, and position on the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_ids</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of layer IDs to include in the control. If None, all layers
in the map will be included. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>theme</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The theme for the layer switcher control. Can be "default" or other custom themes. Defaults to "default".</p>
              </div>
            </td>
            <td>
                  <code>&#39;default&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>css_text</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Custom CSS text for styling the layer control. If None, a default style will be applied.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the layer control on the map. Can be "top-left", "top-right", "bottom-left",
or "bottom-right". Defaults to "top-left".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-left&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_layers</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, background layers will be included in the control. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4359</span>
<span class="normal">4360</span>
<span class="normal">4361</span>
<span class="normal">4362</span>
<span class="normal">4363</span>
<span class="normal">4364</span>
<span class="normal">4365</span>
<span class="normal">4366</span>
<span class="normal">4367</span>
<span class="normal">4368</span>
<span class="normal">4369</span>
<span class="normal">4370</span>
<span class="normal">4371</span>
<span class="normal">4372</span>
<span class="normal">4373</span>
<span class="normal">4374</span>
<span class="normal">4375</span>
<span class="normal">4376</span>
<span class="normal">4377</span>
<span class="normal">4378</span>
<span class="normal">4379</span>
<span class="normal">4380</span>
<span class="normal">4381</span>
<span class="normal">4382</span>
<span class="normal">4383</span>
<span class="normal">4384</span>
<span class="normal">4385</span>
<span class="normal">4386</span>
<span class="normal">4387</span>
<span class="normal">4388</span>
<span class="normal">4389</span>
<span class="normal">4390</span>
<span class="normal">4391</span>
<span class="normal">4392</span>
<span class="normal">4393</span>
<span class="normal">4394</span>
<span class="normal">4395</span>
<span class="normal">4396</span>
<span class="normal">4397</span>
<span class="normal">4398</span>
<span class="normal">4399</span>
<span class="normal">4400</span>
<span class="normal">4401</span>
<span class="normal">4402</span>
<span class="normal">4403</span>
<span class="normal">4404</span>
<span class="normal">4405</span>
<span class="normal">4406</span>
<span class="normal">4407</span>
<span class="normal">4408</span>
<span class="normal">4409</span>
<span class="normal">4410</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">css_text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
    <span class="n">bg_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a layer control to the map.</span>

<span class="sd">    This function creates and adds a layer switcher control to the map, allowing users to toggle the visibility</span>
<span class="sd">    of specified layers. The appearance and functionality of the layer control can be customized with parameters</span>
<span class="sd">    such as theme, CSS styling, and position on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_ids (Optional[List[str]]): A list of layer IDs to include in the control. If None, all layers</span>
<span class="sd">            in the map will be included. Defaults to None.</span>
<span class="sd">        theme (str): The theme for the layer switcher control. Can be &quot;default&quot; or other custom themes. Defaults to &quot;default&quot;.</span>
<span class="sd">        css_text (Optional[str]): Custom CSS text for styling the layer control. If None, a default style will be applied.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        position (str): The position of the layer control on the map. Can be &quot;top-left&quot;, &quot;top-right&quot;, &quot;bottom-left&quot;,</span>
<span class="sd">            or &quot;bottom-right&quot;. Defaults to &quot;top-left&quot;.</span>
<span class="sd">        bg_layers (bool): If True, background layers will be included in the control. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">LayerSwitcherControl</span>

    <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
            <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bg_layers</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">bg_layers</span> <span class="o">+</span> <span class="n">layer_ids</span>
    <span class="k">elif</span> <span class="n">bg_layers</span><span class="p">:</span>
        <span class="n">background_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">layer_ids</span> <span class="o">=</span> <span class="n">background_ids</span> <span class="o">+</span> <span class="n">layer_ids</span>

    <span class="k">if</span> <span class="n">css_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">css_text</span> <span class="o">=</span> <span class="s2">&quot;padding: 5px; border: 1px solid darkgrey; border-radius: 4px;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">LayerSwitcherControl</span><span class="p">(</span>
            <span class="n">layer_ids</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="n">theme</span><span class="p">,</span>
            <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_legend" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape_type</span><span class="o">=</span><span class="s1">&#39;rectangle&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_legend" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a legend to the map.</p>
<p>This method allows for the addition of a legend to the map. The legend can be customized with a title,
labels, colors, and more. A built-in legend can also be specified.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the legend. Defaults to "Legend".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Legend&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_dict</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with legend items as keys and colors as values.
If provided, <code>labels</code> and <code>colors</code> will be ignored. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of legend labels. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of colors corresponding to the labels. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fontsize</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The font size of the legend text. Defaults to 15.</p>
              </div>
            </td>
            <td>
                  <code>15</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the legend. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the legend on the map. Can be one of "top-left",
"top-right", "bottom-left", "bottom-right". Defaults to "bottom-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;bottom-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>builtin_legend</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a built-in legend to use. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>shape_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shape type of the legend items. Can be one of "rectangle", "circle", or "line".</p>
              </div>
            </td>
            <td>
                  <code>&#39;rectangle&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="int">int</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for future use.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3937</span>
<span class="normal">3938</span>
<span class="normal">3939</span>
<span class="normal">3940</span>
<span class="normal">3941</span>
<span class="normal">3942</span>
<span class="normal">3943</span>
<span class="normal">3944</span>
<span class="normal">3945</span>
<span class="normal">3946</span>
<span class="normal">3947</span>
<span class="normal">3948</span>
<span class="normal">3949</span>
<span class="normal">3950</span>
<span class="normal">3951</span>
<span class="normal">3952</span>
<span class="normal">3953</span>
<span class="normal">3954</span>
<span class="normal">3955</span>
<span class="normal">3956</span>
<span class="normal">3957</span>
<span class="normal">3958</span>
<span class="normal">3959</span>
<span class="normal">3960</span>
<span class="normal">3961</span>
<span class="normal">3962</span>
<span class="normal">3963</span>
<span class="normal">3964</span>
<span class="normal">3965</span>
<span class="normal">3966</span>
<span class="normal">3967</span>
<span class="normal">3968</span>
<span class="normal">3969</span>
<span class="normal">3970</span>
<span class="normal">3971</span>
<span class="normal">3972</span>
<span class="normal">3973</span>
<span class="normal">3974</span>
<span class="normal">3975</span>
<span class="normal">3976</span>
<span class="normal">3977</span>
<span class="normal">3978</span>
<span class="normal">3979</span>
<span class="normal">3980</span>
<span class="normal">3981</span>
<span class="normal">3982</span>
<span class="normal">3983</span>
<span class="normal">3984</span>
<span class="normal">3985</span>
<span class="normal">3986</span>
<span class="normal">3987</span>
<span class="normal">3988</span>
<span class="normal">3989</span>
<span class="normal">3990</span>
<span class="normal">3991</span>
<span class="normal">3992</span>
<span class="normal">3993</span>
<span class="normal">3994</span>
<span class="normal">3995</span>
<span class="normal">3996</span>
<span class="normal">3997</span>
<span class="normal">3998</span>
<span class="normal">3999</span>
<span class="normal">4000</span>
<span class="normal">4001</span>
<span class="normal">4002</span>
<span class="normal">4003</span>
<span class="normal">4004</span>
<span class="normal">4005</span>
<span class="normal">4006</span>
<span class="normal">4007</span>
<span class="normal">4008</span>
<span class="normal">4009</span>
<span class="normal">4010</span>
<span class="normal">4011</span>
<span class="normal">4012</span>
<span class="normal">4013</span>
<span class="normal">4014</span>
<span class="normal">4015</span>
<span class="normal">4016</span>
<span class="normal">4017</span>
<span class="normal">4018</span>
<span class="normal">4019</span>
<span class="normal">4020</span>
<span class="normal">4021</span>
<span class="normal">4022</span>
<span class="normal">4023</span>
<span class="normal">4024</span>
<span class="normal">4025</span>
<span class="normal">4026</span>
<span class="normal">4027</span>
<span class="normal">4028</span>
<span class="normal">4029</span>
<span class="normal">4030</span>
<span class="normal">4031</span>
<span class="normal">4032</span>
<span class="normal">4033</span>
<span class="normal">4034</span>
<span class="normal">4035</span>
<span class="normal">4036</span>
<span class="normal">4037</span>
<span class="normal">4038</span>
<span class="normal">4039</span>
<span class="normal">4040</span>
<span class="normal">4041</span>
<span class="normal">4042</span>
<span class="normal">4043</span>
<span class="normal">4044</span>
<span class="normal">4045</span>
<span class="normal">4046</span>
<span class="normal">4047</span>
<span class="normal">4048</span>
<span class="normal">4049</span>
<span class="normal">4050</span>
<span class="normal">4051</span>
<span class="normal">4052</span>
<span class="normal">4053</span>
<span class="normal">4054</span>
<span class="normal">4055</span>
<span class="normal">4056</span>
<span class="normal">4057</span>
<span class="normal">4058</span>
<span class="normal">4059</span>
<span class="normal">4060</span>
<span class="normal">4061</span>
<span class="normal">4062</span>
<span class="normal">4063</span>
<span class="normal">4064</span>
<span class="normal">4065</span>
<span class="normal">4066</span>
<span class="normal">4067</span>
<span class="normal">4068</span>
<span class="normal">4069</span>
<span class="normal">4070</span>
<span class="normal">4071</span>
<span class="normal">4072</span>
<span class="normal">4073</span>
<span class="normal">4074</span>
<span class="normal">4075</span>
<span class="normal">4076</span>
<span class="normal">4077</span>
<span class="normal">4078</span>
<span class="normal">4079</span>
<span class="normal">4080</span>
<span class="normal">4081</span>
<span class="normal">4082</span>
<span class="normal">4083</span>
<span class="normal">4084</span>
<span class="normal">4085</span>
<span class="normal">4086</span>
<span class="normal">4087</span>
<span class="normal">4088</span>
<span class="normal">4089</span>
<span class="normal">4090</span>
<span class="normal">4091</span>
<span class="normal">4092</span>
<span class="normal">4093</span>
<span class="normal">4094</span>
<span class="normal">4095</span>
<span class="normal">4096</span>
<span class="normal">4097</span>
<span class="normal">4098</span>
<span class="normal">4099</span>
<span class="normal">4100</span>
<span class="normal">4101</span>
<span class="normal">4102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a legend to the map.</span>

<span class="sd">    This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">    labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">        legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">            If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">        labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">        colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">        fontsize (int, optional): The font size of the legend text. Defaults to 15.</span>
<span class="sd">        bg_color (str, optional): The background color of the legend. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        position (str, optional): The position of the legend on the map. Can be one of &quot;top-left&quot;,</span>
<span class="sd">            &quot;top-right&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">        shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">importlib.resources</span>

    <span class="kn">from</span> <span class="nn">.legends</span> <span class="kn">import</span> <span class="n">builtin_legends</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">importlib</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;leafmap&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;leafmap.py&quot;</span><span class="p">)</span>
    <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s2">&quot;data/template/legend.html&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend template does not exist.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;One&quot;</span><span class="p">,</span> <span class="s2">&quot;Two&quot;</span><span class="p">,</span> <span class="s2">&quot;Three&quot;</span><span class="p">,</span> <span class="s2">&quot;Four&quot;</span><span class="p">,</span> <span class="s2">&quot;etc&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend colors must be a list of tuples.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend keys and values must be the same length.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The legend dict must be a dictionary.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;top-left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The position must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Legend&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span>
        <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;      &lt;li&gt;&lt;span style=&#39;background:</span><span class="si">{}</span><span class="s2">;&#39;&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">color</span><span class="p">,</span> <span class="n">key</span>
        <span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
    <span class="n">legend_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;width: 30px&quot;</span><span class="p">,</span> <span class="s2">&quot;width: 16px&quot;</span><span class="p">)</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;border: 1px solid #999;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;border-radius: 50%;</span><span class="se">\n</span><span class="s2">      border: 1px solid #999;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
        <span class="n">legend_text</span> <span class="o">=</span> <span class="n">legend_text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;height: 16px&quot;</span><span class="p">,</span> <span class="s2">&quot;height: 3px&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span>
        <span class="n">legend_text</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_legend_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_legend_to_sidebar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shape_type</span><span class="o">=</span><span class="s1">&#39;rectangle&#39;</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-view-sequential&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_legend_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a legend to the map.</p>
<p>This method allows for the addition of a legend to the map. The legend can be customized with a title,
labels, colors, and more. A built-in legend can also be specified.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the legend. Defaults to "Legend".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Legend&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>legend_dict</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with legend items as keys and colors as values.
If provided, <code>labels</code> and <code>colors</code> will be ignored. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of legend labels. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of colors corresponding to the labels. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>builtin_legend</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of a built-in legend to use. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>shape_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shape type of the legend items. Can be one of "rectangle", "circle", or "line".</p>
              </div>
            </td>
            <td>
                  <code>&#39;rectangle&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a header to the legend. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the legend widget. Defaults to "mdi-view-sequential".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-view-sequential&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the close button. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label for the legend widget. Defaults to "Legend".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Legend&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the legend widget. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the legend widget. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the legend widget is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for future use.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4104</span>
<span class="normal">4105</span>
<span class="normal">4106</span>
<span class="normal">4107</span>
<span class="normal">4108</span>
<span class="normal">4109</span>
<span class="normal">4110</span>
<span class="normal">4111</span>
<span class="normal">4112</span>
<span class="normal">4113</span>
<span class="normal">4114</span>
<span class="normal">4115</span>
<span class="normal">4116</span>
<span class="normal">4117</span>
<span class="normal">4118</span>
<span class="normal">4119</span>
<span class="normal">4120</span>
<span class="normal">4121</span>
<span class="normal">4122</span>
<span class="normal">4123</span>
<span class="normal">4124</span>
<span class="normal">4125</span>
<span class="normal">4126</span>
<span class="normal">4127</span>
<span class="normal">4128</span>
<span class="normal">4129</span>
<span class="normal">4130</span>
<span class="normal">4131</span>
<span class="normal">4132</span>
<span class="normal">4133</span>
<span class="normal">4134</span>
<span class="normal">4135</span>
<span class="normal">4136</span>
<span class="normal">4137</span>
<span class="normal">4138</span>
<span class="normal">4139</span>
<span class="normal">4140</span>
<span class="normal">4141</span>
<span class="normal">4142</span>
<span class="normal">4143</span>
<span class="normal">4144</span>
<span class="normal">4145</span>
<span class="normal">4146</span>
<span class="normal">4147</span>
<span class="normal">4148</span>
<span class="normal">4149</span>
<span class="normal">4150</span>
<span class="normal">4151</span>
<span class="normal">4152</span>
<span class="normal">4153</span>
<span class="normal">4154</span>
<span class="normal">4155</span>
<span class="normal">4156</span>
<span class="normal">4157</span>
<span class="normal">4158</span>
<span class="normal">4159</span>
<span class="normal">4160</span>
<span class="normal">4161</span>
<span class="normal">4162</span>
<span class="normal">4163</span>
<span class="normal">4164</span>
<span class="normal">4165</span>
<span class="normal">4166</span>
<span class="normal">4167</span>
<span class="normal">4168</span>
<span class="normal">4169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-view-sequential&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a legend to the map.</span>

<span class="sd">    This method allows for the addition of a legend to the map. The legend can be customized with a title,</span>
<span class="sd">    labels, colors, and more. A built-in legend can also be specified.</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str, optional): The title of the legend. Defaults to &quot;Legend&quot;.</span>
<span class="sd">        legend_dict (Optional[Dict[str, str]], optional): A dictionary with legend items as keys and colors as values.</span>
<span class="sd">            If provided, `labels` and `colors` will be ignored. Defaults to None.</span>
<span class="sd">        labels (Optional[List[str]], optional): A list of legend labels. Defaults to None.</span>
<span class="sd">        colors (Optional[List[str]], optional): A list of colors corresponding to the labels. Defaults to None.</span>
<span class="sd">        builtin_legend (Optional[str], optional): The name of a built-in legend to use. Defaults to None.</span>
<span class="sd">        shape_type (str, optional): The shape type of the legend items. Can be one of &quot;rectangle&quot;, &quot;circle&quot;, or &quot;line&quot;.</span>
<span class="sd">        add_header (bool, optional): If True, adds a header to the legend. Defaults to True.</span>
<span class="sd">        widget_icon (str, optional): The icon for the legend widget. Defaults to &quot;mdi-view-sequential&quot;.</span>
<span class="sd">        close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str, optional): The label for the legend widget. Defaults to &quot;Legend&quot;.</span>
<span class="sd">        background_color (str, optional): The background color of the legend widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        height (str, optional): The height of the legend widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool, optional): If True, the legend widget is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments for future use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.map_widgets</span> <span class="kn">import</span> <span class="n">Legend</span>

    <span class="n">legend</span> <span class="o">=</span> <span class="n">Legend</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">,</span>
        <span class="n">keys</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">builtin_legend</span><span class="o">=</span><span class="n">builtin_legend</span><span class="p">,</span>
        <span class="n">shape_type</span><span class="o">=</span><span class="n">shape_type</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">legend</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_mapillary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_mapillary</span><span class="p">(</span><span class="n">minzoom</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">maxzoom</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">sequence_lyr_name</span><span class="o">=</span><span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="n">image_lyr_name</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sequence_paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_minzoom</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span> <span class="n">add_popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">access_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_to_sidebar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">default_message</span><span class="o">=</span><span class="s1">&#39;No Mapillary image found&#39;</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-image&#39;</span><span class="p">,</span> <span class="n">widget_label</span><span class="o">=</span><span class="s1">&#39;Mapillary StreetView&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_mapillary" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds Mapillary layers to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>minzoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum zoom level for the Mapillary tiles. Defaults to 6.</p>
              </div>
            </td>
            <td>
                  <code>6</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>maxzoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum zoom level for the Mapillary tiles. Defaults to 14.</p>
              </div>
            </td>
            <td>
                  <code>14</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sequence_lyr_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the sequence layer. Defaults to "sequence".</p>
              </div>
            </td>
            <td>
                  <code>&#39;sequence&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_lyr_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the image layer. Defaults to "image".</p>
              </div>
            </td>
            <td>
                  <code>&#39;image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer to insert the new layer before. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sequence_paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Paint properties for the sequence layer. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Paint properties for the image layer. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_minzoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum zoom level for the image layer. Defaults to 17.</p>
              </div>
            </td>
            <td>
                  <code>17</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_popup</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add popups to the layers. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>access_token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Access token for Mapillary API. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Opacity of the Mapillary layers. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the Mapillary layers are visible. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no access token is provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5702</span>
<span class="normal">5703</span>
<span class="normal">5704</span>
<span class="normal">5705</span>
<span class="normal">5706</span>
<span class="normal">5707</span>
<span class="normal">5708</span>
<span class="normal">5709</span>
<span class="normal">5710</span>
<span class="normal">5711</span>
<span class="normal">5712</span>
<span class="normal">5713</span>
<span class="normal">5714</span>
<span class="normal">5715</span>
<span class="normal">5716</span>
<span class="normal">5717</span>
<span class="normal">5718</span>
<span class="normal">5719</span>
<span class="normal">5720</span>
<span class="normal">5721</span>
<span class="normal">5722</span>
<span class="normal">5723</span>
<span class="normal">5724</span>
<span class="normal">5725</span>
<span class="normal">5726</span>
<span class="normal">5727</span>
<span class="normal">5728</span>
<span class="normal">5729</span>
<span class="normal">5730</span>
<span class="normal">5731</span>
<span class="normal">5732</span>
<span class="normal">5733</span>
<span class="normal">5734</span>
<span class="normal">5735</span>
<span class="normal">5736</span>
<span class="normal">5737</span>
<span class="normal">5738</span>
<span class="normal">5739</span>
<span class="normal">5740</span>
<span class="normal">5741</span>
<span class="normal">5742</span>
<span class="normal">5743</span>
<span class="normal">5744</span>
<span class="normal">5745</span>
<span class="normal">5746</span>
<span class="normal">5747</span>
<span class="normal">5748</span>
<span class="normal">5749</span>
<span class="normal">5750</span>
<span class="normal">5751</span>
<span class="normal">5752</span>
<span class="normal">5753</span>
<span class="normal">5754</span>
<span class="normal">5755</span>
<span class="normal">5756</span>
<span class="normal">5757</span>
<span class="normal">5758</span>
<span class="normal">5759</span>
<span class="normal">5760</span>
<span class="normal">5761</span>
<span class="normal">5762</span>
<span class="normal">5763</span>
<span class="normal">5764</span>
<span class="normal">5765</span>
<span class="normal">5766</span>
<span class="normal">5767</span>
<span class="normal">5768</span>
<span class="normal">5769</span>
<span class="normal">5770</span>
<span class="normal">5771</span>
<span class="normal">5772</span>
<span class="normal">5773</span>
<span class="normal">5774</span>
<span class="normal">5775</span>
<span class="normal">5776</span>
<span class="normal">5777</span>
<span class="normal">5778</span>
<span class="normal">5779</span>
<span class="normal">5780</span>
<span class="normal">5781</span>
<span class="normal">5782</span>
<span class="normal">5783</span>
<span class="normal">5784</span>
<span class="normal">5785</span>
<span class="normal">5786</span>
<span class="normal">5787</span>
<span class="normal">5788</span>
<span class="normal">5789</span>
<span class="normal">5790</span>
<span class="normal">5791</span>
<span class="normal">5792</span>
<span class="normal">5793</span>
<span class="normal">5794</span>
<span class="normal">5795</span>
<span class="normal">5796</span>
<span class="normal">5797</span>
<span class="normal">5798</span>
<span class="normal">5799</span>
<span class="normal">5800</span>
<span class="normal">5801</span>
<span class="normal">5802</span>
<span class="normal">5803</span>
<span class="normal">5804</span>
<span class="normal">5805</span>
<span class="normal">5806</span>
<span class="normal">5807</span>
<span class="normal">5808</span>
<span class="normal">5809</span>
<span class="normal">5810</span>
<span class="normal">5811</span>
<span class="normal">5812</span>
<span class="normal">5813</span>
<span class="normal">5814</span>
<span class="normal">5815</span>
<span class="normal">5816</span>
<span class="normal">5817</span>
<span class="normal">5818</span>
<span class="normal">5819</span>
<span class="normal">5820</span>
<span class="normal">5821</span>
<span class="normal">5822</span>
<span class="normal">5823</span>
<span class="normal">5824</span>
<span class="normal">5825</span>
<span class="normal">5826</span>
<span class="normal">5827</span>
<span class="normal">5828</span>
<span class="normal">5829</span>
<span class="normal">5830</span>
<span class="normal">5831</span>
<span class="normal">5832</span>
<span class="normal">5833</span>
<span class="normal">5834</span>
<span class="normal">5835</span>
<span class="normal">5836</span>
<span class="normal">5837</span>
<span class="normal">5838</span>
<span class="normal">5839</span>
<span class="normal">5840</span>
<span class="normal">5841</span>
<span class="normal">5842</span>
<span class="normal">5843</span>
<span class="normal">5844</span>
<span class="normal">5845</span>
<span class="normal">5846</span>
<span class="normal">5847</span>
<span class="normal">5848</span>
<span class="normal">5849</span>
<span class="normal">5850</span>
<span class="normal">5851</span>
<span class="normal">5852</span>
<span class="normal">5853</span>
<span class="normal">5854</span>
<span class="normal">5855</span>
<span class="normal">5856</span>
<span class="normal">5857</span>
<span class="normal">5858</span>
<span class="normal">5859</span>
<span class="normal">5860</span>
<span class="normal">5861</span>
<span class="normal">5862</span>
<span class="normal">5863</span>
<span class="normal">5864</span>
<span class="normal">5865</span>
<span class="normal">5866</span>
<span class="normal">5867</span>
<span class="normal">5868</span>
<span class="normal">5869</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_mapillary</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">minzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">maxzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
    <span class="n">sequence_lyr_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
    <span class="n">image_lyr_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sequence_paint</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image_paint</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image_minzoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
    <span class="n">add_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">access_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">add_to_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">default_message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found&quot;</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
    <span class="n">widget_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Mapillary StreetView&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds Mapillary layers to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        minzoom (int): Minimum zoom level for the Mapillary tiles. Defaults to 6.</span>
<span class="sd">        maxzoom (int): Maximum zoom level for the Mapillary tiles. Defaults to 14.</span>
<span class="sd">        sequence_lyr_name (str): Name of the sequence layer. Defaults to &quot;sequence&quot;.</span>
<span class="sd">        image_lyr_name (str): Name of the image layer. Defaults to &quot;image&quot;.</span>
<span class="sd">        before_id (str): The ID of an existing layer to insert the new layer before. Defaults to None.</span>
<span class="sd">        sequence_paint (dict, optional): Paint properties for the sequence layer. Defaults to None.</span>
<span class="sd">        image_paint (dict, optional): Paint properties for the image layer. Defaults to None.</span>
<span class="sd">        image_minzoom (int): Minimum zoom level for the image layer. Defaults to 17.</span>
<span class="sd">        add_popup (bool): Whether to add popups to the layers. Defaults to True.</span>
<span class="sd">        access_token (str, optional): Access token for Mapillary API. Defaults to None.</span>
<span class="sd">        opacity (float): Opacity of the Mapillary layers. Defaults to 1.0.</span>
<span class="sd">        visible (bool): Whether the Mapillary layers are visible. Defaults to True.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If no access token is provided.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPILLARY_API_KEY&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;An access token is required to use Mapillary.&quot;</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://tiles.mapillary.com/maps/vtp/mly1_public/2/</span><span class="se">{{</span><span class="s2">z</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">x</span><span class="se">}}</span><span class="s2">/</span><span class="se">{{</span><span class="s2">y</span><span class="se">}}</span><span class="s2">?access_token=</span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">url</span><span class="p">],</span>
        <span class="s2">&quot;minzoom&quot;</span><span class="p">:</span> <span class="n">minzoom</span><span class="p">,</span>
        <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="n">maxzoom</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;mapillary&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sequence_paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sequence_paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;line-opacity&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
            <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#35AF6D&quot;</span><span class="p">,</span>
            <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">if</span> <span class="n">image_paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">image_paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">sequence_lyr</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">sequence_lyr_name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;mapillary&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
        <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;line-cap&quot;</span><span class="p">:</span> <span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="s2">&quot;line-join&quot;</span><span class="p">:</span> <span class="s2">&quot;round&quot;</span><span class="p">},</span>
        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">sequence_paint</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">image_lyr</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">image_lyr_name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;mapillary&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">image_paint</span><span class="p">,</span>
        <span class="s2">&quot;minzoom&quot;</span><span class="p">:</span> <span class="n">image_minzoom</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
        <span class="n">sequence_lyr</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">sequence_lyr_name</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
        <span class="n">image_lyr</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">image_lyr_name</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">add_popup</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">sequence_lyr_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">image_lyr_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_to_sidebar</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">widget_label</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
            <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span>
                <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                &lt;iframe</span>
<span class="s2">                    src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                &lt;/iframe&gt;</span>
<span class="s2">                &quot;&quot;&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default_message</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span> <span class="o">=</span> <span class="n">log_lng_lat</span>

        <span class="k">def</span> <span class="nf">_on_panel_toggle</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Click on the map to view Mapillary StreetView&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unobserve_mapillary</span><span class="p">()</span>

        <span class="c1"># Get the widget from the appropriate sidebar type</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
            <span class="c1"># Floating sidebar</span>
            <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">widget_label</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Container sidebar</span>
            <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">widget_label</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">sidebar_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">_on_panel_toggle</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;v_model&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_marker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lng_lat</span><span class="o">=</span><span class="p">[],</span> <span class="n">popup</span><span class="o">=</span><span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span></code>

<a href="#leafmap.maplibregl.Map.add_marker" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a marker to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>marker</code>
            </td>
            <td>
                  <code><span title="maplibre.controls.Marker">Marker</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A Marker object. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lng_lat</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Union">Union</span>[<span title="float">float</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of two floats
representing the longitude and latitude of the marker.</p>
              </div>
            </td>
            <td>
                  <code>[]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>popup</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text to display in a popup when
the marker is clicked. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of options to
customize the marker. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3025</span>
<span class="normal">3026</span>
<span class="normal">3027</span>
<span class="normal">3028</span>
<span class="normal">3029</span>
<span class="normal">3030</span>
<span class="normal">3031</span>
<span class="normal">3032</span>
<span class="normal">3033</span>
<span class="normal">3034</span>
<span class="normal">3035</span>
<span class="normal">3036</span>
<span class="normal">3037</span>
<span class="normal">3038</span>
<span class="normal">3039</span>
<span class="normal">3040</span>
<span class="normal">3041</span>
<span class="normal">3042</span>
<span class="normal">3043</span>
<span class="normal">3044</span>
<span class="normal">3045</span>
<span class="normal">3046</span>
<span class="normal">3047</span>
<span class="normal">3048</span>
<span class="normal">3049</span>
<span class="normal">3050</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">marker</span><span class="p">:</span> <span class="n">Marker</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lng_lat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">popup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a marker to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        marker (Marker, optional): A Marker object. Defaults to None.</span>
<span class="sd">        lng_lat (List[Union[float, float]]): A list of two floats</span>
<span class="sd">            representing the longitude and latitude of the marker.</span>
<span class="sd">        popup (Optional[str], optional): The text to display in a popup when</span>
<span class="sd">            the marker is clicked. Defaults to None.</span>
<span class="sd">        options (Optional[Dict], optional): A dictionary of options to</span>
<span class="sd">            customize the marker. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">lng_lat</span><span class="o">=</span><span class="n">lng_lat</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_nlcd" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_nlcd</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_nlcd" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds National Land Cover Database (NLCD) data to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>years</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of years to add. It can be any of 1985-2023. Defaults to [2023].</p>
              </div>
            </td>
            <td>
                  <code>[2023]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_legend</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a legend to the map. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_cog_layer method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5279</span>
<span class="normal">5280</span>
<span class="normal">5281</span>
<span class="normal">5282</span>
<span class="normal">5283</span>
<span class="normal">5284</span>
<span class="normal">5285</span>
<span class="normal">5286</span>
<span class="normal">5287</span>
<span class="normal">5288</span>
<span class="normal">5289</span>
<span class="normal">5290</span>
<span class="normal">5291</span>
<span class="normal">5292</span>
<span class="normal">5293</span>
<span class="normal">5294</span>
<span class="normal">5295</span>
<span class="normal">5296</span>
<span class="normal">5297</span>
<span class="normal">5298</span>
<span class="normal">5299</span>
<span class="normal">5300</span>
<span class="normal">5301</span>
<span class="normal">5302</span>
<span class="normal">5303</span>
<span class="normal">5304</span>
<span class="normal">5305</span>
<span class="normal">5306</span>
<span class="normal">5307</span>
<span class="normal">5308</span>
<span class="normal">5309</span>
<span class="normal">5310</span>
<span class="normal">5311</span>
<span class="normal">5312</span>
<span class="normal">5313</span>
<span class="normal">5314</span>
<span class="normal">5315</span>
<span class="normal">5316</span>
<span class="normal">5317</span>
<span class="normal">5318</span>
<span class="normal">5319</span>
<span class="normal">5320</span>
<span class="normal">5321</span>
<span class="normal">5322</span>
<span class="normal">5323</span>
<span class="normal">5324</span>
<span class="normal">5325</span>
<span class="normal">5326</span>
<span class="normal">5327</span>
<span class="normal">5328</span>
<span class="normal">5329</span>
<span class="normal">5330</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_nlcd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">years</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2023</span><span class="p">],</span> <span class="n">add_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds National Land Cover Database (NLCD) data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        years (list): A list of years to add. It can be any of 1985-2023. Defaults to [2023].</span>
<span class="sd">        add_legend (bool): Whether to add a legend to the map. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_cog_layer method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_years</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1985</span><span class="p">,</span> <span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;https://s3-us-west-2.amazonaws.com/mrlc/Annual_NLCD_LndCov_</span><span class="si">{}</span><span class="s2">_CU_C1V0.tif&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;colormap&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;11&quot;</span><span class="p">:</span> <span class="s2">&quot;#466b9f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;12&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1def8&quot;</span><span class="p">,</span>
            <span class="s2">&quot;21&quot;</span><span class="p">:</span> <span class="s2">&quot;#dec5c5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;22&quot;</span><span class="p">:</span> <span class="s2">&quot;#d99282&quot;</span><span class="p">,</span>
            <span class="s2">&quot;23&quot;</span><span class="p">:</span> <span class="s2">&quot;#eb0000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;24&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab0000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;31&quot;</span><span class="p">:</span> <span class="s2">&quot;#b3ac9f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;41&quot;</span><span class="p">:</span> <span class="s2">&quot;#68ab5f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;42&quot;</span><span class="p">:</span> <span class="s2">&quot;#1c5f2c&quot;</span><span class="p">,</span>
            <span class="s2">&quot;43&quot;</span><span class="p">:</span> <span class="s2">&quot;#b5c58f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;51&quot;</span><span class="p">:</span> <span class="s2">&quot;#af963c&quot;</span><span class="p">,</span>
            <span class="s2">&quot;52&quot;</span><span class="p">:</span> <span class="s2">&quot;#ccb879&quot;</span><span class="p">,</span>
            <span class="s2">&quot;71&quot;</span><span class="p">:</span> <span class="s2">&quot;#dfdfc2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;72&quot;</span><span class="p">:</span> <span class="s2">&quot;#d1d182&quot;</span><span class="p">,</span>
            <span class="s2">&quot;73&quot;</span><span class="p">:</span> <span class="s2">&quot;#a3cc51&quot;</span><span class="p">,</span>
            <span class="s2">&quot;74&quot;</span><span class="p">:</span> <span class="s2">&quot;#82ba9e&quot;</span><span class="p">,</span>
            <span class="s2">&quot;81&quot;</span><span class="p">:</span> <span class="s2">&quot;#dcd939&quot;</span><span class="p">,</span>
            <span class="s2">&quot;82&quot;</span><span class="p">:</span> <span class="s2">&quot;#ab6c28&quot;</span><span class="p">,</span>
            <span class="s2">&quot;90&quot;</span><span class="p">:</span> <span class="s2">&quot;#b8d9eb&quot;</span><span class="p">,</span>
            <span class="s2">&quot;95&quot;</span><span class="p">:</span> <span class="s2">&quot;#6c9fb8&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">year</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_years</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Year must be one of </span><span class="si">{</span><span class="n">allowed_years</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="n">year_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span><span class="n">year_url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;NLCD </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;NLCD Land Cover Type&quot;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="s2">&quot;NLCD&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_nwi_basemap" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_nwi_basemap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;NWI Wetlands&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;USFWS&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_nwi_basemap" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a NWI Wetlands basemap to the map.</p>
<p>This method adds a NWI Wetlands basemap to the map. The NWI Wetlands basemap is created from
    the specified URL, and it is added to the map with the specified
    name, attribution, visibility, and tile size.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use for the layer. Defaults to
'NWI Wetlands'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;NWI Wetlands&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the tiles in the layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;image/png&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use for the layer.
Defaults to ''.</p>
              </div>
            </td>
            <td>
                  <code>&#39;USFWS&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible by
default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the tiles in the layer.
Defaults to 256.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.
See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_nwi_basemap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;NWI Wetlands&quot;</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;USFWS&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a NWI Wetlands basemap to the map.</span>

<span class="sd">    This method adds a NWI Wetlands basemap to the map. The NWI Wetlands basemap is created from</span>
<span class="sd">        the specified URL, and it is added to the map with the specified</span>
<span class="sd">        name, attribution, visibility, and tile size.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">            &#39;NWI Wetlands&#39;.</span>
<span class="sd">        format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">            Defaults to 256.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://fwspublicservices.wim.usgs.gov/wetlandsmapservice/services/Wetlands/MapServer/WMSServer&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_wms_layer</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_overture_3d_buildings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_overture_3d_buildings</span><span class="p">(</span><span class="n">release</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_overture_3d_buildings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add 3D buildings from Overture Maps to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>release</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The release date of the Overture Maps data.
Defaults to the latest release. For more info, see
https://github.com/OvertureMaps/overture-tiles.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style dictionary for
the buildings. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of height values for
color interpolation. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colors</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of colors corresponding
to the height values. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the buildings layer is visible.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the buildings layer.
Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show tooltips on the buildings.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>template</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The template for the tooltip. It can be
"simple" or "all". Defaults to "simple".</p>
              </div>
            </td>
            <td>
                  <code>&#39;simple&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to fit the map bounds to the
buildings layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the length of values and colors lists are not the same.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4753</span>
<span class="normal">4754</span>
<span class="normal">4755</span>
<span class="normal">4756</span>
<span class="normal">4757</span>
<span class="normal">4758</span>
<span class="normal">4759</span>
<span class="normal">4760</span>
<span class="normal">4761</span>
<span class="normal">4762</span>
<span class="normal">4763</span>
<span class="normal">4764</span>
<span class="normal">4765</span>
<span class="normal">4766</span>
<span class="normal">4767</span>
<span class="normal">4768</span>
<span class="normal">4769</span>
<span class="normal">4770</span>
<span class="normal">4771</span>
<span class="normal">4772</span>
<span class="normal">4773</span>
<span class="normal">4774</span>
<span class="normal">4775</span>
<span class="normal">4776</span>
<span class="normal">4777</span>
<span class="normal">4778</span>
<span class="normal">4779</span>
<span class="normal">4780</span>
<span class="normal">4781</span>
<span class="normal">4782</span>
<span class="normal">4783</span>
<span class="normal">4784</span>
<span class="normal">4785</span>
<span class="normal">4786</span>
<span class="normal">4787</span>
<span class="normal">4788</span>
<span class="normal">4789</span>
<span class="normal">4790</span>
<span class="normal">4791</span>
<span class="normal">4792</span>
<span class="normal">4793</span>
<span class="normal">4794</span>
<span class="normal">4795</span>
<span class="normal">4796</span>
<span class="normal">4797</span>
<span class="normal">4798</span>
<span class="normal">4799</span>
<span class="normal">4800</span>
<span class="normal">4801</span>
<span class="normal">4802</span>
<span class="normal">4803</span>
<span class="normal">4804</span>
<span class="normal">4805</span>
<span class="normal">4806</span>
<span class="normal">4807</span>
<span class="normal">4808</span>
<span class="normal">4809</span>
<span class="normal">4810</span>
<span class="normal">4811</span>
<span class="normal">4812</span>
<span class="normal">4813</span>
<span class="normal">4814</span>
<span class="normal">4815</span>
<span class="normal">4816</span>
<span class="normal">4817</span>
<span class="normal">4818</span>
<span class="normal">4819</span>
<span class="normal">4820</span>
<span class="normal">4821</span>
<span class="normal">4822</span>
<span class="normal">4823</span>
<span class="normal">4824</span>
<span class="normal">4825</span>
<span class="normal">4826</span>
<span class="normal">4827</span>
<span class="normal">4828</span>
<span class="normal">4829</span>
<span class="normal">4830</span>
<span class="normal">4831</span>
<span class="normal">4832</span>
<span class="normal">4833</span>
<span class="normal">4834</span>
<span class="normal">4835</span>
<span class="normal">4836</span>
<span class="normal">4837</span>
<span class="normal">4838</span>
<span class="normal">4839</span>
<span class="normal">4840</span>
<span class="normal">4841</span>
<span class="normal">4842</span>
<span class="normal">4843</span>
<span class="normal">4844</span>
<span class="normal">4845</span>
<span class="normal">4846</span>
<span class="normal">4847</span>
<span class="normal">4848</span>
<span class="normal">4849</span>
<span class="normal">4850</span>
<span class="normal">4851</span>
<span class="normal">4852</span>
<span class="normal">4853</span>
<span class="normal">4854</span>
<span class="normal">4855</span>
<span class="normal">4856</span>
<span class="normal">4857</span>
<span class="normal">4858</span>
<span class="normal">4859</span>
<span class="normal">4860</span>
<span class="normal">4861</span>
<span class="normal">4862</span>
<span class="normal">4863</span>
<span class="normal">4864</span>
<span class="normal">4865</span>
<span class="normal">4866</span>
<span class="normal">4867</span>
<span class="normal">4868</span>
<span class="normal">4869</span>
<span class="normal">4870</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_3d_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add 3D buildings from Overture Maps to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (Optional[str], optional): The release date of the Overture Maps data.</span>
<span class="sd">            Defaults to the latest release. For more info, see</span>
<span class="sd">            https://github.com/OvertureMaps/overture-tiles.</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the buildings. Defaults to None.</span>
<span class="sd">        values (Optional[List[int]], optional): List of height values for</span>
<span class="sd">            color interpolation. Defaults to None.</span>
<span class="sd">        colors (Optional[List[str]], optional): List of colors corresponding</span>
<span class="sd">            to the height values. Defaults to None.</span>
<span class="sd">        visible (bool, optional): Whether the buildings layer is visible.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the buildings layer.</span>
<span class="sd">            Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the buildings.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        template (str, optional): The template for the tooltip. It can be</span>
<span class="sd">            &quot;simple&quot; or &quot;all&quot;. Defaults to &quot;simple&quot;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            buildings layer. Defaults to False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the length of values and colors lists are not the same.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

    <span class="k">if</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;simple&quot;</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Name: {{@name}}&lt;br&gt;Subtype: {{subtype}}&lt;br&gt;Class: {{class}}&lt;br&gt;Height: {{height}}&quot;</span>
    <span class="k">elif</span> <span class="n">template</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;royalblue&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The values and colors must have the same length.&quot;</span><span class="p">)</span>
        <span class="n">value_color_pairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">value_color_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="mi">0</span><span class="p">,</span>
                    <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="p">]</span>
                        <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                        <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building-part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill-extrusion&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="mi">0</span><span class="p">,</span>
                    <span class="p">],</span>  <span class="c1"># only show buildings with height info</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-extrusion-color&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span>
                            <span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">],</span>
                            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span>
                        <span class="p">]</span>
                        <span class="o">+</span> <span class="n">value_color_pairs</span><span class="p">,</span>
                        <span class="s2">&quot;fill-extrusion-height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_overture_buildings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_overture_buildings</span><span class="p">(</span><span class="n">release</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_overture_buildings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add Overture Maps data to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>release</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The release date of the data. Defaults to
"2024-12-18". For more info, see https://github.com/OvertureMaps/overture-tiles</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style dictionary for
the data. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the data. It can be "line" or "fill".</p>
              </div>
            </td>
            <td>
                  <code>&#39;line&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the data layer is visible. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the data layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show tooltips on the data.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to fit the map bounds to the
data layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the paint properties.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5116</span>
<span class="normal">5117</span>
<span class="normal">5118</span>
<span class="normal">5119</span>
<span class="normal">5120</span>
<span class="normal">5121</span>
<span class="normal">5122</span>
<span class="normal">5123</span>
<span class="normal">5124</span>
<span class="normal">5125</span>
<span class="normal">5126</span>
<span class="normal">5127</span>
<span class="normal">5128</span>
<span class="normal">5129</span>
<span class="normal">5130</span>
<span class="normal">5131</span>
<span class="normal">5132</span>
<span class="normal">5133</span>
<span class="normal">5134</span>
<span class="normal">5135</span>
<span class="normal">5136</span>
<span class="normal">5137</span>
<span class="normal">5138</span>
<span class="normal">5139</span>
<span class="normal">5140</span>
<span class="normal">5141</span>
<span class="normal">5142</span>
<span class="normal">5143</span>
<span class="normal">5144</span>
<span class="normal">5145</span>
<span class="normal">5146</span>
<span class="normal">5147</span>
<span class="normal">5148</span>
<span class="normal">5149</span>
<span class="normal">5150</span>
<span class="normal">5151</span>
<span class="normal">5152</span>
<span class="normal">5153</span>
<span class="normal">5154</span>
<span class="normal">5155</span>
<span class="normal">5156</span>
<span class="normal">5157</span>
<span class="normal">5158</span>
<span class="normal">5159</span>
<span class="normal">5160</span>
<span class="normal">5161</span>
<span class="normal">5162</span>
<span class="normal">5163</span>
<span class="normal">5164</span>
<span class="normal">5165</span>
<span class="normal">5166</span>
<span class="normal">5167</span>
<span class="normal">5168</span>
<span class="normal">5169</span>
<span class="normal">5170</span>
<span class="normal">5171</span>
<span class="normal">5172</span>
<span class="normal">5173</span>
<span class="normal">5174</span>
<span class="normal">5175</span>
<span class="normal">5176</span>
<span class="normal">5177</span>
<span class="normal">5178</span>
<span class="normal">5179</span>
<span class="normal">5180</span>
<span class="normal">5181</span>
<span class="normal">5182</span>
<span class="normal">5183</span>
<span class="normal">5184</span>
<span class="normal">5185</span>
<span class="normal">5186</span>
<span class="normal">5187</span>
<span class="normal">5188</span>
<span class="normal">5189</span>
<span class="normal">5190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_buildings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">            &quot;2024-12-18&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the data. Defaults to None.</span>
<span class="sd">        type (str, optional): The type of the data. It can be &quot;line&quot; or &quot;fill&quot;.</span>
<span class="sd">        visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            data layer. Defaults to False.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the paint properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/buildings.pmtiles&quot;</span>

    <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;line-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;line-width&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="s2">&quot;line-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;line-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;fill-color&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#6ea299&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;fill-opacity&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_overture_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_overture_data</span><span class="p">(</span><span class="n">release</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;buildings&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_overture_data" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add Overture Maps data to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>release</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The release date of the data. Defaults to
"2024-12-28". For more info, see https://github.com/OvertureMaps/overture-tiles</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>theme</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The theme of the data. It can be one of the following:
"addresses", "base", "buildings", "divisions", "places", "transportation".
Defaults to "buildings".</p>
              </div>
            </td>
            <td>
                  <code>&#39;buildings&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style dictionary for
the data. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the data layer is visible. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the data layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show tooltips on the data.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to fit the map bounds to the
data layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_pmtiles method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the theme is not one of the allowed themes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4872</span>
<span class="normal">4873</span>
<span class="normal">4874</span>
<span class="normal">4875</span>
<span class="normal">4876</span>
<span class="normal">4877</span>
<span class="normal">4878</span>
<span class="normal">4879</span>
<span class="normal">4880</span>
<span class="normal">4881</span>
<span class="normal">4882</span>
<span class="normal">4883</span>
<span class="normal">4884</span>
<span class="normal">4885</span>
<span class="normal">4886</span>
<span class="normal">4887</span>
<span class="normal">4888</span>
<span class="normal">4889</span>
<span class="normal">4890</span>
<span class="normal">4891</span>
<span class="normal">4892</span>
<span class="normal">4893</span>
<span class="normal">4894</span>
<span class="normal">4895</span>
<span class="normal">4896</span>
<span class="normal">4897</span>
<span class="normal">4898</span>
<span class="normal">4899</span>
<span class="normal">4900</span>
<span class="normal">4901</span>
<span class="normal">4902</span>
<span class="normal">4903</span>
<span class="normal">4904</span>
<span class="normal">4905</span>
<span class="normal">4906</span>
<span class="normal">4907</span>
<span class="normal">4908</span>
<span class="normal">4909</span>
<span class="normal">4910</span>
<span class="normal">4911</span>
<span class="normal">4912</span>
<span class="normal">4913</span>
<span class="normal">4914</span>
<span class="normal">4915</span>
<span class="normal">4916</span>
<span class="normal">4917</span>
<span class="normal">4918</span>
<span class="normal">4919</span>
<span class="normal">4920</span>
<span class="normal">4921</span>
<span class="normal">4922</span>
<span class="normal">4923</span>
<span class="normal">4924</span>
<span class="normal">4925</span>
<span class="normal">4926</span>
<span class="normal">4927</span>
<span class="normal">4928</span>
<span class="normal">4929</span>
<span class="normal">4930</span>
<span class="normal">4931</span>
<span class="normal">4932</span>
<span class="normal">4933</span>
<span class="normal">4934</span>
<span class="normal">4935</span>
<span class="normal">4936</span>
<span class="normal">4937</span>
<span class="normal">4938</span>
<span class="normal">4939</span>
<span class="normal">4940</span>
<span class="normal">4941</span>
<span class="normal">4942</span>
<span class="normal">4943</span>
<span class="normal">4944</span>
<span class="normal">4945</span>
<span class="normal">4946</span>
<span class="normal">4947</span>
<span class="normal">4948</span>
<span class="normal">4949</span>
<span class="normal">4950</span>
<span class="normal">4951</span>
<span class="normal">4952</span>
<span class="normal">4953</span>
<span class="normal">4954</span>
<span class="normal">4955</span>
<span class="normal">4956</span>
<span class="normal">4957</span>
<span class="normal">4958</span>
<span class="normal">4959</span>
<span class="normal">4960</span>
<span class="normal">4961</span>
<span class="normal">4962</span>
<span class="normal">4963</span>
<span class="normal">4964</span>
<span class="normal">4965</span>
<span class="normal">4966</span>
<span class="normal">4967</span>
<span class="normal">4968</span>
<span class="normal">4969</span>
<span class="normal">4970</span>
<span class="normal">4971</span>
<span class="normal">4972</span>
<span class="normal">4973</span>
<span class="normal">4974</span>
<span class="normal">4975</span>
<span class="normal">4976</span>
<span class="normal">4977</span>
<span class="normal">4978</span>
<span class="normal">4979</span>
<span class="normal">4980</span>
<span class="normal">4981</span>
<span class="normal">4982</span>
<span class="normal">4983</span>
<span class="normal">4984</span>
<span class="normal">4985</span>
<span class="normal">4986</span>
<span class="normal">4987</span>
<span class="normal">4988</span>
<span class="normal">4989</span>
<span class="normal">4990</span>
<span class="normal">4991</span>
<span class="normal">4992</span>
<span class="normal">4993</span>
<span class="normal">4994</span>
<span class="normal">4995</span>
<span class="normal">4996</span>
<span class="normal">4997</span>
<span class="normal">4998</span>
<span class="normal">4999</span>
<span class="normal">5000</span>
<span class="normal">5001</span>
<span class="normal">5002</span>
<span class="normal">5003</span>
<span class="normal">5004</span>
<span class="normal">5005</span>
<span class="normal">5006</span>
<span class="normal">5007</span>
<span class="normal">5008</span>
<span class="normal">5009</span>
<span class="normal">5010</span>
<span class="normal">5011</span>
<span class="normal">5012</span>
<span class="normal">5013</span>
<span class="normal">5014</span>
<span class="normal">5015</span>
<span class="normal">5016</span>
<span class="normal">5017</span>
<span class="normal">5018</span>
<span class="normal">5019</span>
<span class="normal">5020</span>
<span class="normal">5021</span>
<span class="normal">5022</span>
<span class="normal">5023</span>
<span class="normal">5024</span>
<span class="normal">5025</span>
<span class="normal">5026</span>
<span class="normal">5027</span>
<span class="normal">5028</span>
<span class="normal">5029</span>
<span class="normal">5030</span>
<span class="normal">5031</span>
<span class="normal">5032</span>
<span class="normal">5033</span>
<span class="normal">5034</span>
<span class="normal">5035</span>
<span class="normal">5036</span>
<span class="normal">5037</span>
<span class="normal">5038</span>
<span class="normal">5039</span>
<span class="normal">5040</span>
<span class="normal">5041</span>
<span class="normal">5042</span>
<span class="normal">5043</span>
<span class="normal">5044</span>
<span class="normal">5045</span>
<span class="normal">5046</span>
<span class="normal">5047</span>
<span class="normal">5048</span>
<span class="normal">5049</span>
<span class="normal">5050</span>
<span class="normal">5051</span>
<span class="normal">5052</span>
<span class="normal">5053</span>
<span class="normal">5054</span>
<span class="normal">5055</span>
<span class="normal">5056</span>
<span class="normal">5057</span>
<span class="normal">5058</span>
<span class="normal">5059</span>
<span class="normal">5060</span>
<span class="normal">5061</span>
<span class="normal">5062</span>
<span class="normal">5063</span>
<span class="normal">5064</span>
<span class="normal">5065</span>
<span class="normal">5066</span>
<span class="normal">5067</span>
<span class="normal">5068</span>
<span class="normal">5069</span>
<span class="normal">5070</span>
<span class="normal">5071</span>
<span class="normal">5072</span>
<span class="normal">5073</span>
<span class="normal">5074</span>
<span class="normal">5075</span>
<span class="normal">5076</span>
<span class="normal">5077</span>
<span class="normal">5078</span>
<span class="normal">5079</span>
<span class="normal">5080</span>
<span class="normal">5081</span>
<span class="normal">5082</span>
<span class="normal">5083</span>
<span class="normal">5084</span>
<span class="normal">5085</span>
<span class="normal">5086</span>
<span class="normal">5087</span>
<span class="normal">5088</span>
<span class="normal">5089</span>
<span class="normal">5090</span>
<span class="normal">5091</span>
<span class="normal">5092</span>
<span class="normal">5093</span>
<span class="normal">5094</span>
<span class="normal">5095</span>
<span class="normal">5096</span>
<span class="normal">5097</span>
<span class="normal">5098</span>
<span class="normal">5099</span>
<span class="normal">5100</span>
<span class="normal">5101</span>
<span class="normal">5102</span>
<span class="normal">5103</span>
<span class="normal">5104</span>
<span class="normal">5105</span>
<span class="normal">5106</span>
<span class="normal">5107</span>
<span class="normal">5108</span>
<span class="normal">5109</span>
<span class="normal">5110</span>
<span class="normal">5111</span>
<span class="normal">5112</span>
<span class="normal">5113</span>
<span class="normal">5114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_overture_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add Overture Maps data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        release (str, optional): The release date of the data. Defaults to</span>
<span class="sd">            &quot;2024-12-28&quot;. For more info, see https://github.com/OvertureMaps/overture-tiles</span>
<span class="sd">        theme (str, optional): The theme of the data. It can be one of the following:</span>
<span class="sd">            &quot;addresses&quot;, &quot;base&quot;, &quot;buildings&quot;, &quot;divisions&quot;, &quot;places&quot;, &quot;transportation&quot;.</span>
<span class="sd">            Defaults to &quot;buildings&quot;.</span>
<span class="sd">        style (Optional[Dict[str, Any]], optional): The style dictionary for</span>
<span class="sd">            the data. Defaults to None.</span>
<span class="sd">        visible (bool, optional): Whether the data layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the data layer. Defaults to 1.0.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the data.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to fit the map bounds to the</span>
<span class="sd">            data layer. Defaults to False.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the add_pmtiles method.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the theme is not one of the allowed themes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">release</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">release</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_overture_latest_release</span><span class="p">()</span>

    <span class="n">allowed_themes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
        <span class="s2">&quot;base&quot;</span><span class="p">,</span>
        <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;places&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">theme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_themes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The theme must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_themes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">styles</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Address&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;addresses&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Infrastructure&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;infrastructure&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8DD3C7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_cover&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_cover&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Land_use&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;land_use&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FB8072&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#80B1D3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;buildings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#6ea299&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;building_part&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#fdfdb2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;divisions&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_area&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_area&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFFB3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                        <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Division_boundary&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;divisions&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;division_boundary&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#BEBADA&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;places&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Place&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;places&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;place&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;transportation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Segment&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;segment&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Connector&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;transportation&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;connector&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://overturemaps-tiles-us-west-2-beta.s3.amazonaws.com/</span><span class="si">{</span><span class="n">release</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">theme</span><span class="si">}</span><span class="s2">.pmtiles&quot;</span>
    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_pmtiles</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_pmtiles" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_pmtiles</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">exclude_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;PMTiles&#39;</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_pmtiles" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a PMTiles layer to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the PMTiles file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The CSS style to apply to the layer. Defaults to None.
See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be shown initially. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_mask</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to exclude the mask layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to show tooltips on the layer. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The properties to use for the tooltips. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>template</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The template to use for the tooltips. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use for the layer. Defaults to 'PMTiles'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;PMTiles&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to zoom to the layer extent. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the PMTilesLayer constructor.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2935</span>
<span class="normal">2936</span>
<span class="normal">2937</span>
<span class="normal">2938</span>
<span class="normal">2939</span>
<span class="normal">2940</span>
<span class="normal">2941</span>
<span class="normal">2942</span>
<span class="normal">2943</span>
<span class="normal">2944</span>
<span class="normal">2945</span>
<span class="normal">2946</span>
<span class="normal">2947</span>
<span class="normal">2948</span>
<span class="normal">2949</span>
<span class="normal">2950</span>
<span class="normal">2951</span>
<span class="normal">2952</span>
<span class="normal">2953</span>
<span class="normal">2954</span>
<span class="normal">2955</span>
<span class="normal">2956</span>
<span class="normal">2957</span>
<span class="normal">2958</span>
<span class="normal">2959</span>
<span class="normal">2960</span>
<span class="normal">2961</span>
<span class="normal">2962</span>
<span class="normal">2963</span>
<span class="normal">2964</span>
<span class="normal">2965</span>
<span class="normal">2966</span>
<span class="normal">2967</span>
<span class="normal">2968</span>
<span class="normal">2969</span>
<span class="normal">2970</span>
<span class="normal">2971</span>
<span class="normal">2972</span>
<span class="normal">2973</span>
<span class="normal">2974</span>
<span class="normal">2975</span>
<span class="normal">2976</span>
<span class="normal">2977</span>
<span class="normal">2978</span>
<span class="normal">2979</span>
<span class="normal">2980</span>
<span class="normal">2981</span>
<span class="normal">2982</span>
<span class="normal">2983</span>
<span class="normal">2984</span>
<span class="normal">2985</span>
<span class="normal">2986</span>
<span class="normal">2987</span>
<span class="normal">2988</span>
<span class="normal">2989</span>
<span class="normal">2990</span>
<span class="normal">2991</span>
<span class="normal">2992</span>
<span class="normal">2993</span>
<span class="normal">2994</span>
<span class="normal">2995</span>
<span class="normal">2996</span>
<span class="normal">2997</span>
<span class="normal">2998</span>
<span class="normal">2999</span>
<span class="normal">3000</span>
<span class="normal">3001</span>
<span class="normal">3002</span>
<span class="normal">3003</span>
<span class="normal">3004</span>
<span class="normal">3005</span>
<span class="normal">3006</span>
<span class="normal">3007</span>
<span class="normal">3008</span>
<span class="normal">3009</span>
<span class="normal">3010</span>
<span class="normal">3011</span>
<span class="normal">3012</span>
<span class="normal">3013</span>
<span class="normal">3014</span>
<span class="normal">3015</span>
<span class="normal">3016</span>
<span class="normal">3017</span>
<span class="normal">3018</span>
<span class="normal">3019</span>
<span class="normal">3020</span>
<span class="normal">3021</span>
<span class="normal">3022</span>
<span class="normal">3023</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_pmtiles</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">exclude_mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;PMTiles&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a PMTiles layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the PMTiles file.</span>
<span class="sd">        style (dict, optional): The CSS style to apply to the layer. Defaults to None.</span>
<span class="sd">            See https://docs.mapbox.com/style-spec/reference/layers/ for more info.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be shown initially. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        exclude_mask (bool, optional): Whether to exclude the mask layer. Defaults to False.</span>
<span class="sd">        tooltip (bool, optional): Whether to show tooltips on the layer. Defaults to True.</span>
<span class="sd">        properties (dict, optional): The properties to use for the tooltips. Defaults to None.</span>
<span class="sd">        template (str, optional): The template to use for the tooltips. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer. Defaults to &#39;PMTiles&#39;.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to zoom to the layer extent. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the PMTilesLayer constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>

        <span class="n">pmtiles_source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;pmtiles://</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="n">attribution</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_style</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;sources&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">style</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">pmtiles_source</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_hyphens_in_keys</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]:</span>

            <span class="k">if</span> <span class="n">exclude_mask</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source_layer&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mask&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">])</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">opacity</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">tooltip</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tooltip</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">properties</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">pmtiles_metadata</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_raster" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_raster</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Raster&#39;</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cors_all&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_raster" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add a local raster dataset to the map.
    If you are using this function in JupyterHub on a remote server
    (e.g., Binder, Microsoft Planetary Computer) and if the raster
    does not render properly, try installing jupyter-server-proxy using
    <code>pip install jupyter-server-proxy</code>, then running the following code
    before calling this function. For more info, see https://bit.ly/3JbmF93.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;
</code></pre></div></td></tr></table></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the GeoTIFF file or the URL of the Cloud
Optimized GeoTIFF.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>indexes</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The band(s) to use. Band indexing starts
at 1. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colormap</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the colormap from <code>matplotlib</code>
to use when plotting a single band.
See https://matplotlib.org/stable/gallery/color/colormap_reference.html.
Default is greyscale.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmin</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum value to use when colormapping
the palette when plotting a single band. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>vmax</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum value to use when colormapping
the palette when plotting a single band. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodata</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value from the band to use to interpret
as not valid data. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer name to use. Defaults to 'Raster'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Raster&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer id to insert the layer before. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to zoom to the extent of the
layer. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>array_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments to pass to
<code>array_to_memory_file</code> when reading the raster. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>client_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments to pass to
localtileserver.TileClient. Defaults to { "cors_all": False }.</p>
              </div>
            </td>
            <td>
                  <code>{&#39;cors_all&#39;: True}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the underlying
<code>add_tile_layer</code> method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2311</span>
<span class="normal">2312</span>
<span class="normal">2313</span>
<span class="normal">2314</span>
<span class="normal">2315</span>
<span class="normal">2316</span>
<span class="normal">2317</span>
<span class="normal">2318</span>
<span class="normal">2319</span>
<span class="normal">2320</span>
<span class="normal">2321</span>
<span class="normal">2322</span>
<span class="normal">2323</span>
<span class="normal">2324</span>
<span class="normal">2325</span>
<span class="normal">2326</span>
<span class="normal">2327</span>
<span class="normal">2328</span>
<span class="normal">2329</span>
<span class="normal">2330</span>
<span class="normal">2331</span>
<span class="normal">2332</span>
<span class="normal">2333</span>
<span class="normal">2334</span>
<span class="normal">2335</span>
<span class="normal">2336</span>
<span class="normal">2337</span>
<span class="normal">2338</span>
<span class="normal">2339</span>
<span class="normal">2340</span>
<span class="normal">2341</span>
<span class="normal">2342</span>
<span class="normal">2343</span>
<span class="normal">2344</span>
<span class="normal">2345</span>
<span class="normal">2346</span>
<span class="normal">2347</span>
<span class="normal">2348</span>
<span class="normal">2349</span>
<span class="normal">2350</span>
<span class="normal">2351</span>
<span class="normal">2352</span>
<span class="normal">2353</span>
<span class="normal">2354</span>
<span class="normal">2355</span>
<span class="normal">2356</span>
<span class="normal">2357</span>
<span class="normal">2358</span>
<span class="normal">2359</span>
<span class="normal">2360</span>
<span class="normal">2361</span>
<span class="normal">2362</span>
<span class="normal">2363</span>
<span class="normal">2364</span>
<span class="normal">2365</span>
<span class="normal">2366</span>
<span class="normal">2367</span>
<span class="normal">2368</span>
<span class="normal">2369</span>
<span class="normal">2370</span>
<span class="normal">2371</span>
<span class="normal">2372</span>
<span class="normal">2373</span>
<span class="normal">2374</span>
<span class="normal">2375</span>
<span class="normal">2376</span>
<span class="normal">2377</span>
<span class="normal">2378</span>
<span class="normal">2379</span>
<span class="normal">2380</span>
<span class="normal">2381</span>
<span class="normal">2382</span>
<span class="normal">2383</span>
<span class="normal">2384</span>
<span class="normal">2385</span>
<span class="normal">2386</span>
<span class="normal">2387</span>
<span class="normal">2388</span>
<span class="normal">2389</span>
<span class="normal">2390</span>
<span class="normal">2391</span>
<span class="normal">2392</span>
<span class="normal">2393</span>
<span class="normal">2394</span>
<span class="normal">2395</span>
<span class="normal">2396</span>
<span class="normal">2397</span>
<span class="normal">2398</span>
<span class="normal">2399</span>
<span class="normal">2400</span>
<span class="normal">2401</span>
<span class="normal">2402</span>
<span class="normal">2403</span>
<span class="normal">2404</span>
<span class="normal">2405</span>
<span class="normal">2406</span>
<span class="normal">2407</span>
<span class="normal">2408</span>
<span class="normal">2409</span>
<span class="normal">2410</span>
<span class="normal">2411</span>
<span class="normal">2412</span>
<span class="normal">2413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;cors_all&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server</span>
<span class="sd">        (e.g., Binder, Microsoft Planetary Computer) and if the raster</span>
<span class="sd">        does not render properly, try installing jupyter-server-proxy using</span>
<span class="sd">        `pip install jupyter-server-proxy`, then running the following code</span>
<span class="sd">        before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The path to the GeoTIFF file or the URL of the Cloud</span>
<span class="sd">            Optimized GeoTIFF.</span>
<span class="sd">        indexes (int, optional): The band(s) to use. Band indexing starts</span>
<span class="sd">            at 1. Defaults to None.</span>
<span class="sd">        colormap (str, optional): The name of the colormap from `matplotlib`</span>
<span class="sd">            to use when plotting a single band.</span>
<span class="sd">            See https://matplotlib.org/stable/gallery/color/colormap_reference.html.</span>
<span class="sd">            Default is greyscale.</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping</span>
<span class="sd">            the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping</span>
<span class="sd">            the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret</span>
<span class="sd">            as not valid data. Defaults to None.</span>
<span class="sd">        name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">        before_id (str, optional): The layer id to insert the layer before. Defaults to None.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to zoom to the extent of the</span>
<span class="sd">            layer. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        array_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">            `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">        client_args (dict, optional): Additional arguments to pass to</span>
<span class="sd">            localtileserver.TileClient. Defaults to { &quot;cors_all&quot;: False }.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the underlying</span>
<span class="sd">            `add_tile_layer` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

    <span class="k">if</span> <span class="s2">&quot;zoom_to_layer&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fit_bounds</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;zoom_to_layer&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;layer_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;layer_name&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_local_tile_url</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">client_args</span><span class="o">=</span><span class="n">client_args</span><span class="p">,</span>
        <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span>
    <span class="c1"># [minx, miny, maxx, maxy]</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_search_control" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_search_control</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collapsed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_search_control" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a search control to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the control on the map. Defaults to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key for the search control. Defaults to None.
If not provided, it will be retrieved from the environment variable MAPTILER_KEY.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>collapsed</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the control is collapsed. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the search control.
See https://eoda-dev.github.io/py-maplibregl/api/controls/#maplibre.controls.MapTilerGeocodingControl</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_search_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">collapsed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a search control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str): The position of the control on the map. Defaults to &quot;top-right&quot;.</span>
<span class="sd">        api_key (str): The API key for the search control. Defaults to None.</span>
<span class="sd">            If not provided, it will be retrieved from the environment variable MAPTILER_KEY.</span>
<span class="sd">        collapsed (bool): Whether the control is collapsed. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the search control.</span>
<span class="sd">            See https://eoda-dev.github.io/py-maplibregl/api/controls/#maplibre.controls.MapTilerGeocodingControl</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">MapTilerGeocodingControl</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;An MapTiler API key is required. Please set the MAPTILER_KEY environment variable.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

    <span class="n">control</span> <span class="o">=</span> <span class="n">MapTilerGeocodingControl</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">collapsed</span><span class="o">=</span><span class="n">collapsed</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_select_data_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_select_data_widget</span><span class="p">(</span><span class="n">default_path</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">widget_width</span><span class="o">=</span><span class="s1">&#39;360px&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reset_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-folder&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data Selection&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_select_data_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a select data widget to the map.</p>
<p>This method creates a widget for selecting and uploading data to be added to a map.
It includes a folder chooser, a file uploader, and buttons to apply or reset the selection.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>default_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default path for the folder chooser. Defaults to ".".</p>
              </div>
            </td>
            <td>
                  <code>&#39;.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the widget. Defaults to "360px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;360px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[<span title="str">str</span>], None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function to be
called when data is applied. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reset_callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[], None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function to
be called when the selection is reset. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a header to the widget. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the widget. Defaults to "mdi-folder".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-folder&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the close button. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label for the widget. Defaults to "Data Selection".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Data Selection&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the widget. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the widget. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the widget is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the add_to_sidebar method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6324</span>
<span class="normal">6325</span>
<span class="normal">6326</span>
<span class="normal">6327</span>
<span class="normal">6328</span>
<span class="normal">6329</span>
<span class="normal">6330</span>
<span class="normal">6331</span>
<span class="normal">6332</span>
<span class="normal">6333</span>
<span class="normal">6334</span>
<span class="normal">6335</span>
<span class="normal">6336</span>
<span class="normal">6337</span>
<span class="normal">6338</span>
<span class="normal">6339</span>
<span class="normal">6340</span>
<span class="normal">6341</span>
<span class="normal">6342</span>
<span class="normal">6343</span>
<span class="normal">6344</span>
<span class="normal">6345</span>
<span class="normal">6346</span>
<span class="normal">6347</span>
<span class="normal">6348</span>
<span class="normal">6349</span>
<span class="normal">6350</span>
<span class="normal">6351</span>
<span class="normal">6352</span>
<span class="normal">6353</span>
<span class="normal">6354</span>
<span class="normal">6355</span>
<span class="normal">6356</span>
<span class="normal">6357</span>
<span class="normal">6358</span>
<span class="normal">6359</span>
<span class="normal">6360</span>
<span class="normal">6361</span>
<span class="normal">6362</span>
<span class="normal">6363</span>
<span class="normal">6364</span>
<span class="normal">6365</span>
<span class="normal">6366</span>
<span class="normal">6367</span>
<span class="normal">6368</span>
<span class="normal">6369</span>
<span class="normal">6370</span>
<span class="normal">6371</span>
<span class="normal">6372</span>
<span class="normal">6373</span>
<span class="normal">6374</span>
<span class="normal">6375</span>
<span class="normal">6376</span>
<span class="normal">6377</span>
<span class="normal">6378</span>
<span class="normal">6379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_select_data_widget</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">default_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
    <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;360px&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">reset_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-folder&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Data Selection&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a select data widget to the map.</span>

<span class="sd">    This method creates a widget for selecting and uploading data to be added to a map.</span>
<span class="sd">    It includes a folder chooser, a file uploader, and buttons to apply or reset the selection.</span>

<span class="sd">    Args:</span>
<span class="sd">        default_path (str, optional): The default path for the folder chooser. Defaults to &quot;.&quot;.</span>
<span class="sd">        widget_width (str, optional): The width of the widget. Defaults to &quot;360px&quot;.</span>
<span class="sd">        callback (Optional[Callable[[str], None]], optional): A callback function to be</span>
<span class="sd">            called when data is applied. Defaults to None.</span>
<span class="sd">        reset_callback (Optional[Callable[[], None]], optional): A callback function to</span>
<span class="sd">            be called when the selection is reset. Defaults to None.</span>
<span class="sd">        add_header (bool, optional): Whether to add a header to the widget. Defaults to True.</span>
<span class="sd">        widget_icon (str, optional): The icon for the widget. Defaults to &quot;mdi-folder&quot;.</span>
<span class="sd">        close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str, optional): The label for the widget. Defaults to &quot;Data Selection&quot;.</span>
<span class="sd">        background_color (str, optional): The background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        height (str, optional): The height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any, optional): Additional keyword arguments for the add_to_sidebar method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">SelectDataWidget</span><span class="p">(</span>
        <span class="n">default_path</span><span class="o">=</span><span class="n">default_path</span><span class="p">,</span>
        <span class="n">widget_width</span><span class="o">=</span><span class="n">widget_width</span><span class="p">,</span>
        <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
        <span class="n">reset_callback</span><span class="o">=</span><span class="n">reset_callback</span><span class="p">,</span>
        <span class="n">map_widget</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_similarity_search" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_similarity_search</span><span class="p">(</span><span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_year</span><span class="o">=</span><span class="mi">2024</span><span class="p">,</span> <span class="n">default_color</span><span class="o">=</span><span class="s1">&#39;#0000ff&#39;</span><span class="p">,</span> <span class="n">default_threshold</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-map-search&#39;</span><span class="p">,</span> <span class="n">widget_label</span><span class="o">=</span><span class="s1">&#39;Similarity Search&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_similarity_search" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a similarity search widget to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer to add the widget to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_year</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default year to use for the widget. Defaults to 2024.</p>
              </div>
            </td>
            <td>
                  <code>2024</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default color to use for the widget. Defaults to "#0000ff".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#0000ff&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_threshold</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default threshold to use for the widget. Defaults to 0.8.</p>
              </div>
            </td>
            <td>
                  <code>0.8</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the widget. Defaults to "mdi-map-search".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-map-search&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label for the widget. Defaults to "Similarity Search".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Similarity Search&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the add_to_sidebar method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6592</span>
<span class="normal">6593</span>
<span class="normal">6594</span>
<span class="normal">6595</span>
<span class="normal">6596</span>
<span class="normal">6597</span>
<span class="normal">6598</span>
<span class="normal">6599</span>
<span class="normal">6600</span>
<span class="normal">6601</span>
<span class="normal">6602</span>
<span class="normal">6603</span>
<span class="normal">6604</span>
<span class="normal">6605</span>
<span class="normal">6606</span>
<span class="normal">6607</span>
<span class="normal">6608</span>
<span class="normal">6609</span>
<span class="normal">6610</span>
<span class="normal">6611</span>
<span class="normal">6612</span>
<span class="normal">6613</span>
<span class="normal">6614</span>
<span class="normal">6615</span>
<span class="normal">6616</span>
<span class="normal">6617</span>
<span class="normal">6618</span>
<span class="normal">6619</span>
<span class="normal">6620</span>
<span class="normal">6621</span>
<span class="normal">6622</span>
<span class="normal">6623</span>
<span class="normal">6624</span>
<span class="normal">6625</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_similarity_search</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">default_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2024</span><span class="p">,</span>
    <span class="n">default_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#0000ff&quot;</span><span class="p">,</span>
    <span class="n">default_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-map-search&quot;</span><span class="p">,</span>
    <span class="n">widget_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Similarity Search&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a similarity search widget to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        before_id: The ID of the layer to add the widget to.</span>
<span class="sd">        default_year: The default year to use for the widget. Defaults to 2024.</span>
<span class="sd">        default_color: The default color to use for the widget. Defaults to &quot;#0000ff&quot;.</span>
<span class="sd">        default_threshold: The default threshold to use for the widget. Defaults to 0.8.</span>
<span class="sd">        widget_icon: The icon for the widget. Defaults to &quot;mdi-map-search&quot;.</span>
<span class="sd">        widget_label: The label for the widget. Defaults to &quot;Similarity Search&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the add_to_sidebar method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.map_widgets</span> <span class="kn">import</span> <span class="n">SimilaritySearch</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">SimilaritySearch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">default_year</span><span class="o">=</span><span class="n">default_year</span><span class="p">,</span>
        <span class="n">default_color</span><span class="o">=</span><span class="n">default_color</span><span class="p">,</span>
        <span class="n">default_threshold</span><span class="o">=</span><span class="n">default_threshold</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">widget_label</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_source</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_source" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a source to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source data. .</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a source to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The ID of the source.</span>
<span class="sd">        source (str or dict): The source data. .</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_stac_gui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_stac_gui</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;STAC Search&#39;</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-search-web&#39;</span><span class="p">,</span> <span class="n">sidebar_width</span><span class="o">=</span><span class="s1">&#39;515px&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_stac_gui" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a STAC GUI to the map.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6404</span>
<span class="normal">6405</span>
<span class="normal">6406</span>
<span class="normal">6407</span>
<span class="normal">6408</span>
<span class="normal">6409</span>
<span class="normal">6410</span>
<span class="normal">6411</span>
<span class="normal">6412</span>
<span class="normal">6413</span>
<span class="normal">6414</span>
<span class="normal">6415</span>
<span class="normal">6416</span>
<span class="normal">6417</span>
<span class="normal">6418</span>
<span class="normal">6419</span>
<span class="normal">6420</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_stac_gui</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;STAC Search&quot;</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-search-web&quot;</span><span class="p">,</span>
    <span class="n">sidebar_width</span><span class="o">=</span><span class="s2">&quot;515px&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a STAC GUI to the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">stac_gui</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">stac_gui</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;maplibre&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="n">sidebar_width</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sidebar_width</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_stac_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_stac_layer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;STAC Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_stac_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a STAC TileLayer to the map.</p>
<p>This method adds a STAC TileLayer to the map. The STAC TileLayer is
created from the specified URL, collection, item, assets, and bands, and
it is added to the map with the specified name, attribution, opacity,
visibility, and fit bounds.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>collection</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Microsoft Planetary Computer STAC
collection ID, e.g., landsat-8-c2-l2. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>item</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Microsoft Planetary Computer STAC item ID, e.g.,
LC08_L2SP_047027_20201204_02_T1. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>assets</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Microsoft Planetary Computer STAC asset ID,
e.g., ["SR_B7", "SR_B5", "SR_B4"]. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bands</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of band names, e.g.,
["SR_B7", "SR_B5", "SR_B4"]. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodata</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The nodata value to use for the layer.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>titiler_endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>TiTiler endpoint, e.g., "https://giswqs-titiler-endpoint.hf.space",
"https://planetarycomputer.microsoft.com/api/data/v1",
"planetary-computer", "pc". Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layer name to use for the layer. Defaults to 'STAC Layer'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;STAC Layer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use. Defaults to ''.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A flag indicating whether the layer should
be on by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A flag indicating whether the map should
be zoomed to the layer extent. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arbitrary keyword arguments, including bidx, expression,
nodata, unscale, resampling, rescale, color_formula, colormap,
colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/
and https://cogeotiff.github.io/rio-tiler/colormap/. To select
a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple
bands, use something like <code>rescale=["164,223","130,211","99,212"]</code>.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span>
<span class="normal">2285</span>
<span class="normal">2286</span>
<span class="normal">2287</span>
<span class="normal">2288</span>
<span class="normal">2289</span>
<span class="normal">2290</span>
<span class="normal">2291</span>
<span class="normal">2292</span>
<span class="normal">2293</span>
<span class="normal">2294</span>
<span class="normal">2295</span>
<span class="normal">2296</span>
<span class="normal">2297</span>
<span class="normal">2298</span>
<span class="normal">2299</span>
<span class="normal">2300</span>
<span class="normal">2301</span>
<span class="normal">2302</span>
<span class="normal">2303</span>
<span class="normal">2304</span>
<span class="normal">2305</span>
<span class="normal">2306</span>
<span class="normal">2307</span>
<span class="normal">2308</span>
<span class="normal">2309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a STAC TileLayer to the map.</span>

<span class="sd">    This method adds a STAC TileLayer to the map. The STAC TileLayer is</span>
<span class="sd">    created from the specified URL, collection, item, assets, and bands, and</span>
<span class="sd">    it is added to the map with the specified name, attribution, opacity,</span>
<span class="sd">    visibility, and fit bounds.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): HTTP URL to a STAC item, e.g., https://bit.ly/3VlttGm.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        collection (str, optional): The Microsoft Planetary Computer STAC</span>
<span class="sd">            collection ID, e.g., landsat-8-c2-l2. Defaults to None.</span>
<span class="sd">        item (str, optional): The Microsoft Planetary Computer STAC item ID, e.g.,</span>
<span class="sd">            LC08_L2SP_047027_20201204_02_T1. Defaults to None.</span>
<span class="sd">        assets (str | list, optional): The Microsoft Planetary Computer STAC asset ID,</span>
<span class="sd">            e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">        bands (list, optional): A list of band names, e.g.,</span>
<span class="sd">            [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]. Defaults to None.</span>
<span class="sd">        nodata (int | float, optional): The nodata value to use for the layer.</span>
<span class="sd">        titiler_endpoint (str, optional): TiTiler endpoint, e.g., &quot;https://giswqs-titiler-endpoint.hf.space&quot;,</span>
<span class="sd">            &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;,</span>
<span class="sd">            &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        visible (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">            be on by default. Defaults to True.</span>
<span class="sd">        fit_bounds (bool, optional): A flag indicating whether the map should</span>
<span class="sd">            be zoomed to the layer extent. Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Arbitrary keyword arguments, including bidx, expression,</span>
<span class="sd">            nodata, unscale, resampling, rescale, color_formula, colormap,</span>
<span class="sd">            colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/</span>
<span class="sd">            and https://cogeotiff.github.io/rio-tiler/colormap/. To select</span>
<span class="sd">            a certain bands, use bidx=[1, 2, 3]. apply a rescaling to multiple</span>
<span class="sd">            bands, use something like `rescale=[&quot;164,223&quot;,&quot;130,211&quot;,&quot;99,212&quot;]`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;colormap_name&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colormap_name&quot;</span><span class="p">)</span>

    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_tile</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">collection</span><span class="p">,</span>
        <span class="n">item</span><span class="p">,</span>
        <span class="n">assets</span><span class="p">,</span>
        <span class="n">bands</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">tile_url</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">fit_bounds</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_symbol" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_symbol</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">icon_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">symbol_placement</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">minzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Symbols&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_symbol" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a symbol to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source of the symbol.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL or local file path to the image. Default to the arrow image.
at https://assets.gishub.org/images/right-arrow.png.
Find more icons from https://www.veryicon.com.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>icon_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the symbol. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>symbol_placement</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The placement of the symbol. Defaults to "line".</p>
              </div>
            </td>
            <td>
                  <code>&#39;line&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>minzoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The minimum zoom level for the symbol. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>maxzoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum zoom level for the symbol. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A filter to apply to the symbol. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the symbol layer. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Symbols&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the layer layout.
For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3317</span>
<span class="normal">3318</span>
<span class="normal">3319</span>
<span class="normal">3320</span>
<span class="normal">3321</span>
<span class="normal">3322</span>
<span class="normal">3323</span>
<span class="normal">3324</span>
<span class="normal">3325</span>
<span class="normal">3326</span>
<span class="normal">3327</span>
<span class="normal">3328</span>
<span class="normal">3329</span>
<span class="normal">3330</span>
<span class="normal">3331</span>
<span class="normal">3332</span>
<span class="normal">3333</span>
<span class="normal">3334</span>
<span class="normal">3335</span>
<span class="normal">3336</span>
<span class="normal">3337</span>
<span class="normal">3338</span>
<span class="normal">3339</span>
<span class="normal">3340</span>
<span class="normal">3341</span>
<span class="normal">3342</span>
<span class="normal">3343</span>
<span class="normal">3344</span>
<span class="normal">3345</span>
<span class="normal">3346</span>
<span class="normal">3347</span>
<span class="normal">3348</span>
<span class="normal">3349</span>
<span class="normal">3350</span>
<span class="normal">3351</span>
<span class="normal">3352</span>
<span class="normal">3353</span>
<span class="normal">3354</span>
<span class="normal">3355</span>
<span class="normal">3356</span>
<span class="normal">3357</span>
<span class="normal">3358</span>
<span class="normal">3359</span>
<span class="normal">3360</span>
<span class="normal">3361</span>
<span class="normal">3362</span>
<span class="normal">3363</span>
<span class="normal">3364</span>
<span class="normal">3365</span>
<span class="normal">3366</span>
<span class="normal">3367</span>
<span class="normal">3368</span>
<span class="normal">3369</span>
<span class="normal">3370</span>
<span class="normal">3371</span>
<span class="normal">3372</span>
<span class="normal">3373</span>
<span class="normal">3374</span>
<span class="normal">3375</span>
<span class="normal">3376</span>
<span class="normal">3377</span>
<span class="normal">3378</span>
<span class="normal">3379</span>
<span class="normal">3380</span>
<span class="normal">3381</span>
<span class="normal">3382</span>
<span class="normal">3383</span>
<span class="normal">3384</span>
<span class="normal">3385</span>
<span class="normal">3386</span>
<span class="normal">3387</span>
<span class="normal">3388</span>
<span class="normal">3389</span>
<span class="normal">3390</span>
<span class="normal">3391</span>
<span class="normal">3392</span>
<span class="normal">3393</span>
<span class="normal">3394</span>
<span class="normal">3395</span>
<span class="normal">3396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_symbol</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">icon_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">symbol_placement</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
    <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Symbols&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a symbol to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (Union[str, Dict]): The source of the symbol.</span>
<span class="sd">        image (str): The URL or local file path to the image. Default to the arrow image.</span>
<span class="sd">            at https://assets.gishub.org/images/right-arrow.png.</span>
<span class="sd">            Find more icons from https://www.veryicon.com.</span>
<span class="sd">        icon_size (int, optional): The size of the symbol. Defaults to 1.</span>
<span class="sd">        symbol_placement (str, optional): The placement of the symbol. Defaults to &quot;line&quot;.</span>
<span class="sd">        minzoom (Optional[float], optional): The minimum zoom level for the symbol. Defaults to None.</span>
<span class="sd">        maxzoom (Optional[float], optional): The maximum zoom level for the symbol. Defaults to None.</span>
<span class="sd">        filter (Optional[Any], optional): A filter to apply to the symbol. Defaults to None.</span>
<span class="sd">        name (Optional[str], optional): The name of the symbol layer. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to pass to the layer layout.</span>
<span class="sd">            For more info, see https://maplibre.org/maplibre-style-spec/layers/#symbol</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">image_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">common</span><span class="o">.</span><span class="n">random_string</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_image</span><span class="p">(</span><span class="n">image_id</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">source</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
        <span class="k">elif</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">source</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
            <span class="n">geojson_source</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">}</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span>
                <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">geojson_source</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
        <span class="n">geojson_source</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">geojson_source</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The source must be a string or a dictionary.&quot;</span><span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_name</span><span class="p">,</span>
        <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;icon-image&quot;</span><span class="p">:</span> <span class="n">image_id</span><span class="p">,</span>
            <span class="s2">&quot;icon-size&quot;</span><span class="p">:</span> <span class="n">icon_size</span><span class="p">,</span>
            <span class="s2">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="n">symbol_placement</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
    <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>
    <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>

    <span class="n">kwargs</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">replace_underscores_in_keys</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottom-right&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_text" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds text to the map with customizable styling.</p>
<p>This method allows adding a text widget to the map with various styling options such as font size, color,
background color, and more. The text's appearance can be further customized using additional CSS properties
passed through kwargs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text to add to the map.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fontsize</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The font size of the text. Defaults to 20.</p>
              </div>
            </td>
            <td>
                  <code>20</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fontcolor</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color of the text. Defaults to "black".</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bold</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the text will be bold. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>padding</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The padding around the text. Defaults to "5px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;5px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bg_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the text widget. Defaults to "white".
To make the background transparent, set this to "transparent".
To make the background half transparent, set this to "rgba(255, 255, 255, 0.5)".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>border_radius</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The border radius of the text widget. Defaults to "5px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;5px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the text widget on the map. Defaults to "bottom-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;bottom-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional CSS properties to apply to the text widget.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3769</span>
<span class="normal">3770</span>
<span class="normal">3771</span>
<span class="normal">3772</span>
<span class="normal">3773</span>
<span class="normal">3774</span>
<span class="normal">3775</span>
<span class="normal">3776</span>
<span class="normal">3777</span>
<span class="normal">3778</span>
<span class="normal">3779</span>
<span class="normal">3780</span>
<span class="normal">3781</span>
<span class="normal">3782</span>
<span class="normal">3783</span>
<span class="normal">3784</span>
<span class="normal">3785</span>
<span class="normal">3786</span>
<span class="normal">3787</span>
<span class="normal">3788</span>
<span class="normal">3789</span>
<span class="normal">3790</span>
<span class="normal">3791</span>
<span class="normal">3792</span>
<span class="normal">3793</span>
<span class="normal">3794</span>
<span class="normal">3795</span>
<span class="normal">3796</span>
<span class="normal">3797</span>
<span class="normal">3798</span>
<span class="normal">3799</span>
<span class="normal">3800</span>
<span class="normal">3801</span>
<span class="normal">3802</span>
<span class="normal">3803</span>
<span class="normal">3804</span>
<span class="normal">3805</span>
<span class="normal">3806</span>
<span class="normal">3807</span>
<span class="normal">3808</span>
<span class="normal">3809</span>
<span class="normal">3810</span>
<span class="normal">3811</span>
<span class="normal">3812</span>
<span class="normal">3813</span>
<span class="normal">3814</span>
<span class="normal">3815</span>
<span class="normal">3816</span>
<span class="normal">3817</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="n">fontcolor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">bold</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">padding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">border_radius</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom-right&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds text to the map with customizable styling.</span>

<span class="sd">    This method allows adding a text widget to the map with various styling options such as font size, color,</span>
<span class="sd">    background color, and more. The text&#39;s appearance can be further customized using additional CSS properties</span>
<span class="sd">    passed through kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The text to add to the map.</span>
<span class="sd">        fontsize (int, optional): The font size of the text. Defaults to 20.</span>
<span class="sd">        fontcolor (str, optional): The color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">        bold (bool, optional): If True, the text will be bold. Defaults to False.</span>
<span class="sd">        padding (str, optional): The padding around the text. Defaults to &quot;5px&quot;.</span>
<span class="sd">        bg_color (str, optional): The background color of the text widget. Defaults to &quot;white&quot;.</span>
<span class="sd">            To make the background transparent, set this to &quot;transparent&quot;.</span>
<span class="sd">            To make the background half transparent, set this to &quot;rgba(255, 255, 255, 0.5)&quot;.</span>
<span class="sd">        border_radius (str, optional): The border radius of the text widget. Defaults to &quot;5px&quot;.</span>
<span class="sd">        position (str, optional): The position of the text widget on the map. Defaults to &quot;bottom-right&quot;.</span>
<span class="sd">        **kwargs (Any): Additional CSS properties to apply to the text widget.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">maplibre.controls</span> <span class="kn">import</span> <span class="n">InfoBoxControl</span>

    <span class="k">if</span> <span class="n">bg_color</span> <span class="o">==</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">and</span> <span class="s2">&quot;box-shadow&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;box-shadow&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

    <span class="n">css_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">    font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">; padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">    background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">; border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">css_text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">;&quot;</span>

    <span class="n">control</span> <span class="o">=</span> <span class="n">InfoBoxControl</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">css_text</span><span class="o">=</span><span class="n">css_text</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_text_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_text_to_sidebar</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-format-text&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Text&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_text_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds text to the sidebar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text to add to the sidebar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-format-text&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Text&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3819</span>
<span class="normal">3820</span>
<span class="normal">3821</span>
<span class="normal">3822</span>
<span class="normal">3823</span>
<span class="normal">3824</span>
<span class="normal">3825</span>
<span class="normal">3826</span>
<span class="normal">3827</span>
<span class="normal">3828</span>
<span class="normal">3829</span>
<span class="normal">3830</span>
<span class="normal">3831</span>
<span class="normal">3832</span>
<span class="normal">3833</span>
<span class="normal">3834</span>
<span class="normal">3835</span>
<span class="normal">3836</span>
<span class="normal">3837</span>
<span class="normal">3838</span>
<span class="normal">3839</span>
<span class="normal">3840</span>
<span class="normal">3841</span>
<span class="normal">3842</span>
<span class="normal">3843</span>
<span class="normal">3844</span>
<span class="normal">3845</span>
<span class="normal">3846</span>
<span class="normal">3847</span>
<span class="normal">3848</span>
<span class="normal">3849</span>
<span class="normal">3850</span>
<span class="normal">3851</span>
<span class="normal">3852</span>
<span class="normal">3853</span>
<span class="normal">3854</span>
<span class="normal">3855</span>
<span class="normal">3856</span>
<span class="normal">3857</span>
<span class="normal">3858</span>
<span class="normal">3859</span>
<span class="normal">3860</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_text_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-format-text&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds text to the sidebar.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The text to add to the sidebar.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">widget_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">widget_args</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">widget_args</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_tile_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tile Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_tile_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a TileLayer to the map.</p>
<p>This method adds a TileLayer to the map. The TileLayer is created from
    the specified URL, and it is added to the map with the specified
    name, attribution, visibility, and tile size.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the tile layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use for the layer. Defaults to '
Tile Layer'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Tile Layer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use for the layer.
Defaults to ''.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible by
default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the tiles in the layer.
Defaults to 256.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the RasterTileSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.
See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Tile Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a TileLayer to the map.</span>

<span class="sd">    This method adds a TileLayer to the map. The TileLayer is created from</span>
<span class="sd">        the specified URL, and it is added to the map with the specified</span>
<span class="sd">        name, attribution, visibility, and tile size.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the tile layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. Defaults to &#39;</span>
<span class="sd">            Tile Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">            Defaults to 256.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the RasterTileSource class.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="n">raster_source</span> <span class="o">=</span> <span class="n">RasterTileSource</span><span class="p">(</span>
        <span class="n">tiles</span><span class="o">=</span><span class="p">[</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()],</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
        <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">raster_source</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">LayerType</span><span class="o">.</span><span class="n">RASTER</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_time_slider" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_time_slider</span><span class="p">(</span><span class="n">images</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="s1">&#39;150px&#39;</span><span class="p">,</span> <span class="n">slider_width</span><span class="o">=</span><span class="s1">&#39;150px&#39;</span><span class="p">,</span> <span class="n">button_width</span><span class="o">=</span><span class="s1">&#39;45px&#39;</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-image&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Time Slider&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_time_slider" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a time slider to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>images</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary containing a set of images.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of labels to be used for the time series. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_interval</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time interval in seconds. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. Defaults to "Image".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zoom_to_layer</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to zoom to the extent of the layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the label. Defaults to "150px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;150px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slider_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the slider. Defaults to "150px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;150px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>button_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the buttons. Defaults to "45px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;45px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the widget. Defaults to "mdi-image".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The icon for the close button. Defaults to "mdi-close".</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The label for the widget. Defaults to "Time Slider".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Time Slider&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The background color of the widget. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the widget. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the widget is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the add_raster or add_cog_layer function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6627</span>
<span class="normal">6628</span>
<span class="normal">6629</span>
<span class="normal">6630</span>
<span class="normal">6631</span>
<span class="normal">6632</span>
<span class="normal">6633</span>
<span class="normal">6634</span>
<span class="normal">6635</span>
<span class="normal">6636</span>
<span class="normal">6637</span>
<span class="normal">6638</span>
<span class="normal">6639</span>
<span class="normal">6640</span>
<span class="normal">6641</span>
<span class="normal">6642</span>
<span class="normal">6643</span>
<span class="normal">6644</span>
<span class="normal">6645</span>
<span class="normal">6646</span>
<span class="normal">6647</span>
<span class="normal">6648</span>
<span class="normal">6649</span>
<span class="normal">6650</span>
<span class="normal">6651</span>
<span class="normal">6652</span>
<span class="normal">6653</span>
<span class="normal">6654</span>
<span class="normal">6655</span>
<span class="normal">6656</span>
<span class="normal">6657</span>
<span class="normal">6658</span>
<span class="normal">6659</span>
<span class="normal">6660</span>
<span class="normal">6661</span>
<span class="normal">6662</span>
<span class="normal">6663</span>
<span class="normal">6664</span>
<span class="normal">6665</span>
<span class="normal">6666</span>
<span class="normal">6667</span>
<span class="normal">6668</span>
<span class="normal">6669</span>
<span class="normal">6670</span>
<span class="normal">6671</span>
<span class="normal">6672</span>
<span class="normal">6673</span>
<span class="normal">6674</span>
<span class="normal">6675</span>
<span class="normal">6676</span>
<span class="normal">6677</span>
<span class="normal">6678</span>
<span class="normal">6679</span>
<span class="normal">6680</span>
<span class="normal">6681</span>
<span class="normal">6682</span>
<span class="normal">6683</span>
<span class="normal">6684</span>
<span class="normal">6685</span>
<span class="normal">6686</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_time_slider</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">images</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">label_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
    <span class="n">slider_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
    <span class="n">button_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;45px&quot;</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
    <span class="n">zoom_to_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-image&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Time Slider&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a time slider to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        images (dict, optional): The dictionary containing a set of images.</span>
<span class="sd">        labels (list, optional): The list of labels to be used for the time series. Defaults to None.</span>
<span class="sd">        time_interval (int, optional): Time interval in seconds. Defaults to 1.</span>
<span class="sd">        layer_name (str, optional): The name of the layer. Defaults to &quot;Image&quot;.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the extent of the layer. Defaults to False.</span>
<span class="sd">        label_width (str, optional): Width of the label. Defaults to &quot;150px&quot;.</span>
<span class="sd">        slider_width (str, optional): Width of the slider. Defaults to &quot;150px&quot;.</span>
<span class="sd">        button_width (str, optional): Width of the buttons. Defaults to &quot;45px&quot;.</span>
<span class="sd">        widget_icon (str, optional): The icon for the widget. Defaults to &quot;mdi-image&quot;.</span>
<span class="sd">        close_icon (str, optional): The icon for the close button. Defaults to &quot;mdi-close&quot;.</span>
<span class="sd">        label (str, optional): The label for the widget. Defaults to &quot;Time Slider&quot;.</span>
<span class="sd">        background_color (str, optional): The background color of the widget. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        height (str, optional): The height of the widget. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool, optional): Whether the widget is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the add_raster or add_cog_layer function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">TimeSliderWidget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">images</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">,</span>
        <span class="n">time_interval</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="p">,</span>
        <span class="n">label_width</span><span class="p">,</span>
        <span class="n">slider_width</span><span class="p">,</span>
        <span class="n">button_width</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">widget</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_to_map_container" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_to_map_container</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_to_map_container" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Append one or more widgets beneath the map (in insertion order).</p>
<p>This method adds widgets to the map container while ensuring the sidebar
remains visible and properly positioned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*items</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="ipywidgets.Widget">Widget</span>, <span title="typing.Iterable">Iterable</span>[<span title="ipywidgets.Widget">Widget</span>], None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One or more widgets to add beneath the map. Can be individual
   widgets or iterables of widgets. None values are ignored.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>import ipywidgets as widgets
m = leafmap.Map()
button = widgets.Button(description="Click me")
slider = widgets.IntSlider(value=5, min=0, max=10)
m.add_to_map_container(button, slider)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_map_container</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append one or more widgets beneath the map (in insertion order).</span>

<span class="sd">    This method adds widgets to the map container while ensuring the sidebar</span>
<span class="sd">    remains visible and properly positioned.</span>

<span class="sd">    Args:</span>
<span class="sd">        *items: One or more widgets to add beneath the map. Can be individual</span>
<span class="sd">               widgets or iterables of widgets. None values are ignored.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; import ipywidgets as widgets</span>
<span class="sd">        &gt;&gt;&gt; m = leafmap.Map()</span>
<span class="sd">        &gt;&gt;&gt; button = widgets.Button(description=&quot;Click me&quot;)</span>
<span class="sd">        &gt;&gt;&gt; slider = widgets.IntSlider(value=5, min=0, max=10)</span>
<span class="sd">        &gt;&gt;&gt; m.add_to_map_container(button, slider)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_to_map_container</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_to_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-tools&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;My Tools&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Appends a widget to the sidebar content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="ipywidgets.Widget">Widget</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial widget(s) to display in the content box.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;My Tools&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-tools&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Tools&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends a widget to the sidebar content.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (Optional[Union[widgets.Widget, List[widgets.Widget]]]): Initial widget(s) to display in the content box.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize floating sidebar state if needed and we&#39;re using floating sidebar</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;add_floating_sidebar_flag&quot;</span><span class="p">)</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_floating_sidebar_flag</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Check if floating sidebar is being used</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
        <span class="c1"># Handle floating sidebar case</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">CustomWidget</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
                <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
                <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">widget</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Handle regular container sidebar case</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
            <span class="n">widget</span><span class="p">,</span>
            <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
            <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
            <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_vector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_vector</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_vector" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a vector layer to the map.</p>
<p>This method adds a vector layer to the map. The vector data can be a
URL or local file path to a vector file. If a name is provided, it
is used as the key to store the layer in the layer dictionary. Otherwise,
a random name is generated.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The vector data. This can be a URL or local file
path to a vector file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the layer. If None, the type
is inferred from the GeoJSON data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The filter to apply to the layer. If None,
no filter is applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint properties to apply to the layer.
If None, no paint properties are applied.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. If None, a random name
is generated.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fit_bounds</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to adjust the viewport of the
map to fit the bounds of the GeoJSON data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is visible or not.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the GeoJSONSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data is not a URL or a GeoJSON dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fit_bounds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a vector layer to the map.</span>

<span class="sd">    This method adds a vector layer to the map. The vector data can be a</span>
<span class="sd">    URL or local file path to a vector file. If a name is provided, it</span>
<span class="sd">    is used as the key to store the layer in the layer dictionary. Otherwise,</span>
<span class="sd">    a random name is generated.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | dict): The vector data. This can be a URL or local file</span>
<span class="sd">            path to a vector file.</span>
<span class="sd">        layer_type (str, optional): The type of the layer. If None, the type</span>
<span class="sd">            is inferred from the GeoJSON data.</span>
<span class="sd">        filter (dict, optional): The filter to apply to the layer. If None,</span>
<span class="sd">            no filter is applied.</span>
<span class="sd">        paint (dict, optional): The paint properties to apply to the layer.</span>
<span class="sd">            If None, no paint properties are applied.</span>
<span class="sd">        name (str, optional): The name of the layer. If None, a random name</span>
<span class="sd">            is generated.</span>
<span class="sd">        fit_bounds (bool, optional): Whether to adjust the viewport of the</span>
<span class="sd">            map to fit the bounds of the GeoJSON data. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the GeoJSONSource class.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the data is not a URL or a GeoJSON dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">layer_type</span><span class="o">=</span><span class="n">layer_type</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_vector_editor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_vector_editor</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">file_ext</span><span class="o">=</span><span class="s1">&#39;geojson&#39;</span><span class="p">,</span> <span class="n">add_mapillary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_vector_editor" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generates a widget-based interface for creating and managing vector data on a map.</p>
<p>This function creates an interactive widget interface that allows users to draw features
(points, lines, polygons) on a map, assign properties to these features, and export them
as GeoJSON files. The interface includes a map, a sidebar for property management, and
buttons for saving, exporting, and resetting the data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>m</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An existing Map object. If not provided, a default map with
basemaps and drawing controls will be created. Defaults to None.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to a GeoJSON file or a GeoDataFrame
containing the vector data to be edited. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where keys are property names
and values are lists of possible values for each property. These properties can be
assigned to the drawn features. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format string for the timestamp used in the exported
filename. Defaults to "%Y%m%dT%H%M%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of two integers specifying the
relative widths of the map and sidebar columns. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map widget. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>out_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory where the exported GeoJSON files will be saved.
If not provided, the current working directory is used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename_prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A prefix to be added to the exported filename.
Defaults to "".</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_ext</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file extension for the exported file. Defaults to "geojson".</p>
              </div>
            </td>
            <td>
                  <code>&#39;geojson&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_mapillary</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a Mapillary image widget that displays the
nearest image to the clicked point on the map. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the Mapillary image widget. Can be "classic", "photo",
or "split". Defaults to "photo".</p>
              </div>
            </td>
            <td>
                  <code>&#39;photo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius (in degrees) used to search for the nearest Mapillary
image. Defaults to 0.00005 degrees.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the Mapillary image widget. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>300</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the Mapillary image widget. Defaults to 420.</p>
              </div>
            </td>
            <td>
                  <code>420</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the frame border for the Mapillary image widget.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>controls</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The drawing controls to be added to the map.
Defaults to ["point", "polygon", "line_string", "trash"].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the drawing controls on the map. Defaults to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that may be passed to the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6740</span>
<span class="normal">6741</span>
<span class="normal">6742</span>
<span class="normal">6743</span>
<span class="normal">6744</span>
<span class="normal">6745</span>
<span class="normal">6746</span>
<span class="normal">6747</span>
<span class="normal">6748</span>
<span class="normal">6749</span>
<span class="normal">6750</span>
<span class="normal">6751</span>
<span class="normal">6752</span>
<span class="normal">6753</span>
<span class="normal">6754</span>
<span class="normal">6755</span>
<span class="normal">6756</span>
<span class="normal">6757</span>
<span class="normal">6758</span>
<span class="normal">6759</span>
<span class="normal">6760</span>
<span class="normal">6761</span>
<span class="normal">6762</span>
<span class="normal">6763</span>
<span class="normal">6764</span>
<span class="normal">6765</span>
<span class="normal">6766</span>
<span class="normal">6767</span>
<span class="normal">6768</span>
<span class="normal">6769</span>
<span class="normal">6770</span>
<span class="normal">6771</span>
<span class="normal">6772</span>
<span class="normal">6773</span>
<span class="normal">6774</span>
<span class="normal">6775</span>
<span class="normal">6776</span>
<span class="normal">6777</span>
<span class="normal">6778</span>
<span class="normal">6779</span>
<span class="normal">6780</span>
<span class="normal">6781</span>
<span class="normal">6782</span>
<span class="normal">6783</span>
<span class="normal">6784</span>
<span class="normal">6785</span>
<span class="normal">6786</span>
<span class="normal">6787</span>
<span class="normal">6788</span>
<span class="normal">6789</span>
<span class="normal">6790</span>
<span class="normal">6791</span>
<span class="normal">6792</span>
<span class="normal">6793</span>
<span class="normal">6794</span>
<span class="normal">6795</span>
<span class="normal">6796</span>
<span class="normal">6797</span>
<span class="normal">6798</span>
<span class="normal">6799</span>
<span class="normal">6800</span>
<span class="normal">6801</span>
<span class="normal">6802</span>
<span class="normal">6803</span>
<span class="normal">6804</span>
<span class="normal">6805</span>
<span class="normal">6806</span>
<span class="normal">6807</span>
<span class="normal">6808</span>
<span class="normal">6809</span>
<span class="normal">6810</span>
<span class="normal">6811</span>
<span class="normal">6812</span>
<span class="normal">6813</span>
<span class="normal">6814</span>
<span class="normal">6815</span>
<span class="normal">6816</span>
<span class="normal">6817</span>
<span class="normal">6818</span>
<span class="normal">6819</span>
<span class="normal">6820</span>
<span class="normal">6821</span>
<span class="normal">6822</span>
<span class="normal">6823</span>
<span class="normal">6824</span>
<span class="normal">6825</span>
<span class="normal">6826</span>
<span class="normal">6827</span>
<span class="normal">6828</span>
<span class="normal">6829</span>
<span class="normal">6830</span>
<span class="normal">6831</span>
<span class="normal">6832</span>
<span class="normal">6833</span>
<span class="normal">6834</span>
<span class="normal">6835</span>
<span class="normal">6836</span>
<span class="normal">6837</span>
<span class="normal">6838</span>
<span class="normal">6839</span>
<span class="normal">6840</span>
<span class="normal">6841</span>
<span class="normal">6842</span>
<span class="normal">6843</span>
<span class="normal">6844</span>
<span class="normal">6845</span>
<span class="normal">6846</span>
<span class="normal">6847</span>
<span class="normal">6848</span>
<span class="normal">6849</span>
<span class="normal">6850</span>
<span class="normal">6851</span>
<span class="normal">6852</span>
<span class="normal">6853</span>
<span class="normal">6854</span>
<span class="normal">6855</span>
<span class="normal">6856</span>
<span class="normal">6857</span>
<span class="normal">6858</span>
<span class="normal">6859</span>
<span class="normal">6860</span>
<span class="normal">6861</span>
<span class="normal">6862</span>
<span class="normal">6863</span>
<span class="normal">6864</span>
<span class="normal">6865</span>
<span class="normal">6866</span>
<span class="normal">6867</span>
<span class="normal">6868</span>
<span class="normal">6869</span>
<span class="normal">6870</span>
<span class="normal">6871</span>
<span class="normal">6872</span>
<span class="normal">6873</span>
<span class="normal">6874</span>
<span class="normal">6875</span>
<span class="normal">6876</span>
<span class="normal">6877</span>
<span class="normal">6878</span>
<span class="normal">6879</span>
<span class="normal">6880</span>
<span class="normal">6881</span>
<span class="normal">6882</span>
<span class="normal">6883</span>
<span class="normal">6884</span>
<span class="normal">6885</span>
<span class="normal">6886</span>
<span class="normal">6887</span>
<span class="normal">6888</span>
<span class="normal">6889</span>
<span class="normal">6890</span>
<span class="normal">6891</span>
<span class="normal">6892</span>
<span class="normal">6893</span>
<span class="normal">6894</span>
<span class="normal">6895</span>
<span class="normal">6896</span>
<span class="normal">6897</span>
<span class="normal">6898</span>
<span class="normal">6899</span>
<span class="normal">6900</span>
<span class="normal">6901</span>
<span class="normal">6902</span>
<span class="normal">6903</span>
<span class="normal">6904</span>
<span class="normal">6905</span>
<span class="normal">6906</span>
<span class="normal">6907</span>
<span class="normal">6908</span>
<span class="normal">6909</span>
<span class="normal">6910</span>
<span class="normal">6911</span>
<span class="normal">6912</span>
<span class="normal">6913</span>
<span class="normal">6914</span>
<span class="normal">6915</span>
<span class="normal">6916</span>
<span class="normal">6917</span>
<span class="normal">6918</span>
<span class="normal">6919</span>
<span class="normal">6920</span>
<span class="normal">6921</span>
<span class="normal">6922</span>
<span class="normal">6923</span>
<span class="normal">6924</span>
<span class="normal">6925</span>
<span class="normal">6926</span>
<span class="normal">6927</span>
<span class="normal">6928</span>
<span class="normal">6929</span>
<span class="normal">6930</span>
<span class="normal">6931</span>
<span class="normal">6932</span>
<span class="normal">6933</span>
<span class="normal">6934</span>
<span class="normal">6935</span>
<span class="normal">6936</span>
<span class="normal">6937</span>
<span class="normal">6938</span>
<span class="normal">6939</span>
<span class="normal">6940</span>
<span class="normal">6941</span>
<span class="normal">6942</span>
<span class="normal">6943</span>
<span class="normal">6944</span>
<span class="normal">6945</span>
<span class="normal">6946</span>
<span class="normal">6947</span>
<span class="normal">6948</span>
<span class="normal">6949</span>
<span class="normal">6950</span>
<span class="normal">6951</span>
<span class="normal">6952</span>
<span class="normal">6953</span>
<span class="normal">6954</span>
<span class="normal">6955</span>
<span class="normal">6956</span>
<span class="normal">6957</span>
<span class="normal">6958</span>
<span class="normal">6959</span>
<span class="normal">6960</span>
<span class="normal">6961</span>
<span class="normal">6962</span>
<span class="normal">6963</span>
<span class="normal">6964</span>
<span class="normal">6965</span>
<span class="normal">6966</span>
<span class="normal">6967</span>
<span class="normal">6968</span>
<span class="normal">6969</span>
<span class="normal">6970</span>
<span class="normal">6971</span>
<span class="normal">6972</span>
<span class="normal">6973</span>
<span class="normal">6974</span>
<span class="normal">6975</span>
<span class="normal">6976</span>
<span class="normal">6977</span>
<span class="normal">6978</span>
<span class="normal">6979</span>
<span class="normal">6980</span>
<span class="normal">6981</span>
<span class="normal">6982</span>
<span class="normal">6983</span>
<span class="normal">6984</span>
<span class="normal">6985</span>
<span class="normal">6986</span>
<span class="normal">6987</span>
<span class="normal">6988</span>
<span class="normal">6989</span>
<span class="normal">6990</span>
<span class="normal">6991</span>
<span class="normal">6992</span>
<span class="normal">6993</span>
<span class="normal">6994</span>
<span class="normal">6995</span>
<span class="normal">6996</span>
<span class="normal">6997</span>
<span class="normal">6998</span>
<span class="normal">6999</span>
<span class="normal">7000</span>
<span class="normal">7001</span>
<span class="normal">7002</span>
<span class="normal">7003</span>
<span class="normal">7004</span>
<span class="normal">7005</span>
<span class="normal">7006</span>
<span class="normal">7007</span>
<span class="normal">7008</span>
<span class="normal">7009</span>
<span class="normal">7010</span>
<span class="normal">7011</span>
<span class="normal">7012</span>
<span class="normal">7013</span>
<span class="normal">7014</span>
<span class="normal">7015</span>
<span class="normal">7016</span>
<span class="normal">7017</span>
<span class="normal">7018</span>
<span class="normal">7019</span>
<span class="normal">7020</span>
<span class="normal">7021</span>
<span class="normal">7022</span>
<span class="normal">7023</span>
<span class="normal">7024</span>
<span class="normal">7025</span>
<span class="normal">7026</span>
<span class="normal">7027</span>
<span class="normal">7028</span>
<span class="normal">7029</span>
<span class="normal">7030</span>
<span class="normal">7031</span>
<span class="normal">7032</span>
<span class="normal">7033</span>
<span class="normal">7034</span>
<span class="normal">7035</span>
<span class="normal">7036</span>
<span class="normal">7037</span>
<span class="normal">7038</span>
<span class="normal">7039</span>
<span class="normal">7040</span>
<span class="normal">7041</span>
<span class="normal">7042</span>
<span class="normal">7043</span>
<span class="normal">7044</span>
<span class="normal">7045</span>
<span class="normal">7046</span>
<span class="normal">7047</span>
<span class="normal">7048</span>
<span class="normal">7049</span>
<span class="normal">7050</span>
<span class="normal">7051</span>
<span class="normal">7052</span>
<span class="normal">7053</span>
<span class="normal">7054</span>
<span class="normal">7055</span>
<span class="normal">7056</span>
<span class="normal">7057</span>
<span class="normal">7058</span>
<span class="normal">7059</span>
<span class="normal">7060</span>
<span class="normal">7061</span>
<span class="normal">7062</span>
<span class="normal">7063</span>
<span class="normal">7064</span>
<span class="normal">7065</span>
<span class="normal">7066</span>
<span class="normal">7067</span>
<span class="normal">7068</span>
<span class="normal">7069</span>
<span class="normal">7070</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_vector_editor</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
    <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a widget-based interface for creating and managing vector data on a map.</span>

<span class="sd">    This function creates an interactive widget interface that allows users to draw features</span>
<span class="sd">    (points, lines, polygons) on a map, assign properties to these features, and export them</span>
<span class="sd">    as GeoJSON files. The interface includes a map, a sidebar for property management, and</span>
<span class="sd">    buttons for saving, exporting, and resetting the data.</span>

<span class="sd">    Args:</span>
<span class="sd">        m (Map, optional): An existing Map object. If not provided, a default map with</span>
<span class="sd">            basemaps and drawing controls will be created. Defaults to None.</span>
<span class="sd">        filename (str or gpd.GeoDataFrame): The path to a GeoJSON file or a GeoDataFrame</span>
<span class="sd">            containing the vector data to be edited. Defaults to None.</span>
<span class="sd">        properties (Dict[str, List[Any]], optional): A dictionary where keys are property names</span>
<span class="sd">            and values are lists of possible values for each property. These properties can be</span>
<span class="sd">            assigned to the drawn features. Defaults to None.</span>
<span class="sd">        time_format (str, optional): The format string for the timestamp used in the exported</span>
<span class="sd">            filename. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): A list of two integers specifying the</span>
<span class="sd">            relative widths of the map and sidebar columns. Defaults to (9, 3).</span>
<span class="sd">        map_height (str, optional): The height of the map widget. Defaults to &quot;600px&quot;.</span>
<span class="sd">        out_dir (str, optional): The directory where the exported GeoJSON files will be saved.</span>
<span class="sd">            If not provided, the current working directory is used. Defaults to None.</span>
<span class="sd">        filename_prefix (str, optional): A prefix to be added to the exported filename.</span>
<span class="sd">            Defaults to &quot;&quot;.</span>
<span class="sd">        file_ext (str, optional): The file extension for the exported file. Defaults to &quot;geojson&quot;.</span>
<span class="sd">        add_mapillary (bool, optional): Whether to add a Mapillary image widget that displays the</span>
<span class="sd">            nearest image to the clicked point on the map. Defaults to False.</span>
<span class="sd">        style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">            or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">        radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">            image. Defaults to 0.00005 degrees.</span>
<span class="sd">        width (int, optional): The width of the Mapillary image widget. Defaults to 300.</span>
<span class="sd">        height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">        frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">        controls (Optional[List[str]], optional): The drawing controls to be added to the map.</span>
<span class="sd">            Defaults to [&quot;point&quot;, &quot;polygon&quot;, &quot;line_string&quot;, &quot;trash&quot;].</span>
<span class="sd">        position (str, optional): The position of the drawing controls on the map. Defaults to &quot;top-right&quot;.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments that may be passed to the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">controls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;line_string&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.parquet&quot;</span><span class="p">,</span> <span class="s2">&quot;.pq&quot;</span><span class="p">,</span> <span class="s2">&quot;.geoparquet&quot;</span><span class="p">]:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filename must be a string, dict, or GeoDataFrame.&quot;</span><span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dtypes</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;int32&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;bool&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]]</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span>
        <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="p">)</span>

    <span class="n">draw_features</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">draw_feature</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">prop</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">draw_features</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">draw_feature</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;draw_features&quot;</span><span class="p">,</span> <span class="n">draw_features</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span> <span class="o">=</span> <span class="n">geojson</span>

    <span class="c1"># Expand dropdown options to include values from the GeoJSON</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="c1"># Collect unique values from the loaded features</span>
            <span class="n">existing_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">feature_data</span> <span class="ow">in</span> <span class="n">draw_features</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">feature_data</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">feature_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">existing_values</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

            <span class="c1"># Merge existing values with provided options</span>
            <span class="n">options_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">merged_options</span> <span class="o">=</span> <span class="n">options_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">existing_values</span><span class="p">)</span>
            <span class="c1"># Convert back to list, maintaining order (original options first)</span>
            <span class="n">merged_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">merged_options</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">existing_values</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options_set</span><span class="p">:</span>
                    <span class="n">merged_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">merged_list</span>

    <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">prop_widgets</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">image_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                    <span class="n">options</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="c1"># value=None,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">feature_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
                        <span class="c1"># For dropdown widgets, only set value if it&#39;s in options</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">prop_widget</span><span class="p">,</span> <span class="s2">&quot;options&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                                <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
                            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1"># Fall back to first option if value not found</span>
                                <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">tuple</span>
                <span class="p">):</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
        <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            &lt;iframe</span>
<span class="s2">                src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">            &lt;/iframe&gt;</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found.&quot;</span>

    <span class="k">if</span> <span class="n">add_mapillary</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Feature saved.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Please select a feature to save.&quot;</span><span class="p">)</span>

    <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">out_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename_prefix</span><span class="si">}{</span><span class="n">current_time</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span>
                    <span class="s2">&quot;properties&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
        <span class="p">)</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
            <span class="k">if</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">tuple</span>
                <span class="p">):</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">]</span>

    <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_click</span><span class="p">)</span>

    <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">prop_widgets</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
        <span class="n">output</span><span class="p">,</span>
        <span class="n">image_widget</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_to_sidebar</span><span class="p">(</span>
        <span class="n">sidebar_widget</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Vector Editor&quot;</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;mdi-shape-polygon-plus&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_vector_tile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_vector_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">,</span> <span class="n">layer_type</span><span class="o">=</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="n">source_layer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxzoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">add_popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_vector_tile" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a vector tile layer to the map.</p>
<p>This method adds a vector tile layer to the map using a vector tile source.
Vector tiles are a data format for efficiently storing and transmitting
vector map data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL template for the vector tiles. Should contain {z}, {x},
and {y} placeholders for tile coordinates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer within the vector tile source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of layer to create. Can be 'fill',
'line', 'symbol', 'circle', etc. Defaults to 'fill'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;fill&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_layer</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the source layer within the
vector tiles. If None, uses layer_id.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use for the layer. If None, uses layer_id.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Paint properties for the layer. If None, uses
default styling based on layer_type.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layout</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Layout properties for the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter expression for the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>minzoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum zoom level for the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>maxzoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum zoom level for the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible by default.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_popup</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a popup to the layer. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which the
new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to the
vector tile source.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with
the same name. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to the Layer class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>m = Map()
m.add_vector_tile(
...     url="https://api.maptiler.com/tiles/contours/tiles.json?key={api_key}",
...     layer_id="contour-lines",
...     layer_type="line",
...     source_layer="contour",
...     paint={"line-color": "#ff69b4", "line-width": 1}
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_vector_tile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">layer_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
    <span class="n">source_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">minzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">maxzoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">add_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a vector tile layer to the map.</span>

<span class="sd">    This method adds a vector tile layer to the map using a vector tile source.</span>
<span class="sd">    Vector tiles are a data format for efficiently storing and transmitting</span>
<span class="sd">    vector map data.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL template for the vector tiles. Should contain {z}, {x},</span>
<span class="sd">            and {y} placeholders for tile coordinates.</span>
<span class="sd">        layer_id (str): The ID of the layer within the vector tile source.</span>
<span class="sd">        layer_type (str, optional): The type of layer to create. Can be &#39;fill&#39;,</span>
<span class="sd">            &#39;line&#39;, &#39;symbol&#39;, &#39;circle&#39;, etc. Defaults to &#39;fill&#39;.</span>
<span class="sd">        source_layer (str, optional): The name of the source layer within the</span>
<span class="sd">            vector tiles. If None, uses layer_id.</span>
<span class="sd">        name (str, optional): The name to use for the layer. If None, uses layer_id.</span>
<span class="sd">        paint (dict, optional): Paint properties for the layer. If None, uses</span>
<span class="sd">            default styling based on layer_type.</span>
<span class="sd">        layout (dict, optional): Layout properties for the layer.</span>
<span class="sd">        filter (dict, optional): Filter expression for the layer.</span>
<span class="sd">        minzoom (int, optional): Minimum zoom level for the layer.</span>
<span class="sd">        maxzoom (int, optional): Maximum zoom level for the layer.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by default.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        add_popup (bool, optional): Whether to add a popup to the layer. Defaults to True.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which the</span>
<span class="sd">            new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments passed to the</span>
<span class="sd">            vector tile source.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with</span>
<span class="sd">            the same name. Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments passed to the Layer class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; m = Map()</span>
<span class="sd">        &gt;&gt;&gt; m.add_vector_tile(</span>
<span class="sd">        ...     url=&quot;https://api.maptiler.com/tiles/contours/tiles.json?key={api_key}&quot;,</span>
<span class="sd">        ...     layer_id=&quot;contour-lines&quot;,</span>
<span class="sd">        ...     layer_type=&quot;line&quot;,</span>
<span class="sd">        ...     source_layer=&quot;contour&quot;,</span>
<span class="sd">        ...     paint={&quot;line-color&quot;: &quot;#ff69b4&quot;, &quot;line-width&quot;: 1}</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer_id</span>

    <span class="k">if</span> <span class="n">source_layer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">source_layer</span> <span class="o">=</span> <span class="n">layer_id</span>

    <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Create vector tile source</span>
    <span class="n">vector_source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># If URL doesn&#39;t contain tiles.json, assume it&#39;s a direct tile URL template</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;tiles.json&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;</span><span class="si">{z}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
        <span class="n">vector_source</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vector&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">url</span><span class="p">],</span>
            <span class="o">**</span><span class="n">source_args</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">source_name</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">,</span> <span class="n">vector_source</span><span class="p">)</span>

    <span class="c1"># Set default paint properties based on layer type</span>
    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;fill-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fill-opacity&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                <span class="s2">&quot;fill-outline-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span> <span class="s2">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;circle&quot;</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
            <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;text-halo-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#ffffff&quot;</span><span class="p">,</span>
                <span class="s2">&quot;text-halo-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="c1"># Build layer configuration</span>
    <span class="n">layer_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">layer_type</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">vector_source</span><span class="p">,</span>
        <span class="s2">&quot;source-layer&quot;</span><span class="p">:</span> <span class="n">source_layer</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">paint</span>
    <span class="k">if</span> <span class="n">layout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layout</span>
    <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">filter</span>
    <span class="k">if</span> <span class="n">minzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;minzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minzoom</span>
    <span class="k">if</span> <span class="n">maxzoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_config</span><span class="p">[</span><span class="s2">&quot;maxzoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxzoom</span>

    <span class="c1"># Add any additional kwargs</span>
    <span class="n">layer_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span>
        <span class="n">layer_config</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">add_popup</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_popup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_video" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_video</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="n">layer_id</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_video" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a video layer to the map.</p>
<p>This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates
that the video should cover. The video will be stretched and fitted into the specified coordinates.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>urls</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A single video URL or a list of video URLs. These URLs must be accessible
from the client's location.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinates</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.List">List</span>[<span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of four coordinates in [longitude, latitude] format, specifying
the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID for the video layer. Defaults to "video".</p>
              </div>
            </td>
            <td>
                  <code>&#39;video&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer to insert the new layer before. If None, the layer
will be added on top. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5192</span>
<span class="normal">5193</span>
<span class="normal">5194</span>
<span class="normal">5195</span>
<span class="normal">5196</span>
<span class="normal">5197</span>
<span class="normal">5198</span>
<span class="normal">5199</span>
<span class="normal">5200</span>
<span class="normal">5201</span>
<span class="normal">5202</span>
<span class="normal">5203</span>
<span class="normal">5204</span>
<span class="normal">5205</span>
<span class="normal">5206</span>
<span class="normal">5207</span>
<span class="normal">5208</span>
<span class="normal">5209</span>
<span class="normal">5210</span>
<span class="normal">5211</span>
<span class="normal">5212</span>
<span class="normal">5213</span>
<span class="normal">5214</span>
<span class="normal">5215</span>
<span class="normal">5216</span>
<span class="normal">5217</span>
<span class="normal">5218</span>
<span class="normal">5219</span>
<span class="normal">5220</span>
<span class="normal">5221</span>
<span class="normal">5222</span>
<span class="normal">5223</span>
<span class="normal">5224</span>
<span class="normal">5225</span>
<span class="normal">5226</span>
<span class="normal">5227</span>
<span class="normal">5228</span>
<span class="normal">5229</span>
<span class="normal">5230</span>
<span class="normal">5231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_video</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">urls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a video layer to the map.</span>

<span class="sd">    This method allows embedding a video into the map by specifying the video URLs and the geographical coordinates</span>
<span class="sd">    that the video should cover. The video will be stretched and fitted into the specified coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        urls (Union[str, List[str]]): A single video URL or a list of video URLs. These URLs must be accessible</span>
<span class="sd">            from the client&#39;s location.</span>
<span class="sd">        coordinates (List[List[float]]): A list of four coordinates in [longitude, latitude] format, specifying</span>
<span class="sd">            the corners of the video. The coordinates order should be top-left, top-right, bottom-right, bottom-left.</span>
<span class="sd">        layer_id (str): The ID for the video layer. Defaults to &quot;video&quot;.</span>
<span class="sd">        before_id (Optional[str]): The ID of an existing layer to insert the new layer before. If None, the layer</span>
<span class="sd">            will be added on top. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">urls</span><span class="p">]</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span>
        <span class="s2">&quot;urls&quot;</span><span class="p">:</span> <span class="n">urls</span><span class="p">,</span>
        <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="n">coordinates</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s2">&quot;video_source&quot;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;video_source&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_video_to_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_video_to_sidebar</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;mdi-video&#39;</span><span class="p">,</span> <span class="n">close_icon</span><span class="o">=</span><span class="s1">&#39;mdi-close&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Video&#39;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;#f5f5f5&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;40px&#39;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_video_to_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a video to the sidebar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>src</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the video to be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the video in pixels. Defaults to 600.</p>
              </div>
            </td>
            <td>
                  <code>600</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_header</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, adds a header to the video. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-video&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_icon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</p>
              </div>
            </td>
            <td>
                  <code>&#39;mdi-close&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>background_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Background color of the header. Defaults to "#f5f5f5".</p>
              </div>
            </td>
            <td>
                  <code>&#39;#f5f5f5&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text label for the header. Defaults to "My Tools".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Video&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the header. Defaults to "40px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;40px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the panel is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the parent class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5233</span>
<span class="normal">5234</span>
<span class="normal">5235</span>
<span class="normal">5236</span>
<span class="normal">5237</span>
<span class="normal">5238</span>
<span class="normal">5239</span>
<span class="normal">5240</span>
<span class="normal">5241</span>
<span class="normal">5242</span>
<span class="normal">5243</span>
<span class="normal">5244</span>
<span class="normal">5245</span>
<span class="normal">5246</span>
<span class="normal">5247</span>
<span class="normal">5248</span>
<span class="normal">5249</span>
<span class="normal">5250</span>
<span class="normal">5251</span>
<span class="normal">5252</span>
<span class="normal">5253</span>
<span class="normal">5254</span>
<span class="normal">5255</span>
<span class="normal">5256</span>
<span class="normal">5257</span>
<span class="normal">5258</span>
<span class="normal">5259</span>
<span class="normal">5260</span>
<span class="normal">5261</span>
<span class="normal">5262</span>
<span class="normal">5263</span>
<span class="normal">5264</span>
<span class="normal">5265</span>
<span class="normal">5266</span>
<span class="normal">5267</span>
<span class="normal">5268</span>
<span class="normal">5269</span>
<span class="normal">5270</span>
<span class="normal">5271</span>
<span class="normal">5272</span>
<span class="normal">5273</span>
<span class="normal">5274</span>
<span class="normal">5275</span>
<span class="normal">5276</span>
<span class="normal">5277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_video_to_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">src</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-video&quot;</span><span class="p">,</span>
    <span class="n">close_icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mdi-close&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Video&quot;</span><span class="p">,</span>
    <span class="n">background_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#f5f5f5&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;40px&quot;</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a video to the sidebar.</span>

<span class="sd">    Args:</span>
<span class="sd">        src (str): The URL of the video to be added.</span>
<span class="sd">        width (int): Width of the video in pixels. Defaults to 600.</span>
<span class="sd">        add_header (bool): If True, adds a header to the video. Defaults to True.</span>
<span class="sd">        widget_icon (str): Icon for the header. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        close_icon (str): Icon for the close button. See https://pictogrammers.github.io/@mdi/font/2.0.46/ for available icons.</span>
<span class="sd">        background_color (str): Background color of the header. Defaults to &quot;#f5f5f5&quot;.</span>
<span class="sd">        label (str): Text label for the header. Defaults to &quot;My Tools&quot;.</span>
<span class="sd">        height (str): Height of the header. Defaults to &quot;40px&quot;.</span>
<span class="sd">        expanded (bool): Whether the panel is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments for the parent class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">video_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;video width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot; controls&gt;</span>
<span class="s2">    &lt;source src=&quot;</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s2">&quot; type=&quot;video/mp4&quot;&gt;</span>
<span class="s2">    Your browser does not support the video tag.</span>
<span class="s2">    &lt;/video&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_html_to_sidebar</span><span class="p">(</span>
        <span class="n">video_html</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="n">add_header</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="n">widget_icon</span><span class="p">,</span>
        <span class="n">close_icon</span><span class="o">=</span><span class="n">close_icon</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="n">background_color</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
        <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.add_wms_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_wms_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;WMS Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">before_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.add_wms_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adds a WMS layer to the map.</p>
<p>This method adds a WMS layer to the map. The WMS  is created from
    the specified URL, and it is added to the map with the specified
    name, attribution, visibility, and tile size.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the tile layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layers</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layers to include in the WMS request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the tiles in the layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;image/png&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to use for the layer. Defaults to
'WMS Layer'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;WMS Layer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribution to use for the layer.
Defaults to ''.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer should be visible by
default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the tiles in the layer.
Defaults to 256.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>before_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of an existing layer before which
the new layer should be inserted.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_args</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are
passed to the RasterTileSource class.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite an existing layer with the same name.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the Layer class.
See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">layers</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;WMS Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">before_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_args</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a WMS layer to the map.</span>

<span class="sd">    This method adds a WMS layer to the map. The WMS  is created from</span>
<span class="sd">        the specified URL, and it is added to the map with the specified</span>
<span class="sd">        name, attribution, visibility, and tile size.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the tile layer.</span>
<span class="sd">        layers (str): The layers to include in the WMS request.</span>
<span class="sd">        format (str, optional): The format of the tiles in the layer.</span>
<span class="sd">        name (str, optional): The name to use for the layer. Defaults to</span>
<span class="sd">            &#39;WMS Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use for the layer.</span>
<span class="sd">            Defaults to &#39;&#39;.</span>
<span class="sd">        visible (bool, optional): Whether the layer should be visible by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles in the layer.</span>
<span class="sd">            Defaults to 256.</span>
<span class="sd">        before_id (str, optional): The ID of an existing layer before which</span>
<span class="sd">            the new layer should be inserted.</span>
<span class="sd">        source_args (dict, optional): Additional keyword arguments that are</span>
<span class="sd">            passed to the RasterTileSource class.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite an existing layer with the same name.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the Layer class.</span>
<span class="sd">            See https://eodagmbh.github.io/py-maplibregl/api/layer/ for more information.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">?service=WMS&amp;request=GetMap&amp;layers=</span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&amp;styles=&amp;format=</span><span class="si">{</span><span class="nb">format</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">%2F</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&amp;transparent=true&amp;version=1.1.1&amp;height=256&amp;width=256&amp;srs=EPSG%3A3857&amp;bbox=</span><span class="se">{{</span><span class="s2">bbox-epsg-3857</span><span class="se">}}</span><span class="s2">&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">tile_size</span><span class="o">=</span><span class="n">tile_size</span><span class="p">,</span>
        <span class="n">before_id</span><span class="o">=</span><span class="n">before_id</span><span class="p">,</span>
        <span class="n">source_args</span><span class="o">=</span><span class="n">source_args</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.create_container" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_container</span><span class="p">(</span><span class="n">sidebar_visible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.create_container" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates a container widget for the map with an optional sidebar.</p>
<p>This method initializes a <code>LayerManagerWidget</code> and a <code>Container</code> widget to display the map
alongside a sidebar. The sidebar can be customized with visibility, width, and additional content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar is visible. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum width of the sidebar in pixels. Defaults to 360.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum width of the sidebar in pixels. Defaults to 360.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expanded</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the <code>LayerManagerWidget</code> is expanded by default. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments passed to the <code>Container</code> widget.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipyvuetify.Container">Container</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>v.Container: The created container widget with the map and sidebar.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_container</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">expanded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span><span class="o">.</span><span class="n">Container</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a container widget for the map with an optional sidebar.</span>

<span class="sd">    This method initializes a `LayerManagerWidget` and a `Container` widget to display the map</span>
<span class="sd">    alongside a sidebar. The sidebar can be customized with visibility, width, and additional content.</span>

<span class="sd">    Args:</span>
<span class="sd">        sidebar_visible (bool): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">        min_width (int): Minimum width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">        max_width (int): Maximum width of the sidebar in pixels. Defaults to 360.</span>
<span class="sd">        expanded (bool): Whether the `LayerManagerWidget` is expanded by default. Defaults to True.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments passed to the `Container` widget.</span>

<span class="sd">    Returns:</span>
<span class="sd">        v.Container: The created container widget with the map and sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">sidebar_visible</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sidebar_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sidebar_visible&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">min_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">min_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_width&quot;</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">expanded</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">expanded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expanded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="o">=</span> <span class="n">LayerManagerWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="n">expanded</span><span class="p">)</span>

    <span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">(</span>
        <span class="n">host_map</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
        <span class="n">sidebar_content</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="p">],</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">container</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">sidebar_widgets</span><span class="p">[</span><span class="s2">&quot;Layers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span>
    <span class="k">return</span> <span class="n">container</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.create_mapillary_widget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_mapillary_widget</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;classic&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">560</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.create_mapillary_widget" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates a Mapillary widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lon</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitude of the location. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lat</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Latitude of the location. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Search radius for Mapillary images. Defaults to 0.00005.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bbox</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="float">float</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bounding box for the search. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>image_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the Mapillary image. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Style of the Mapillary image. Can be "classic", "photo", and "split". Defaults to "classic".</p>
              </div>
            </td>
            <td>
                  <code>&#39;classic&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the iframe. Defaults to 600.</p>
              </div>
            </td>
            <td>
                  <code>600</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frame border of the iframe. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>link</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to link the widget to map clicks. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>container</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to return the widget in a container. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Widths of the columns in the container. Defaults to [8, 1].</p>
              </div>
            </td>
            <td>
                  <code>[8, 1]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments for the widget.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="ipywidgets.HTML">HTML</span>, <span title="ipyvuetify.Row">Row</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Union[widgets.HTML, v.Row]: The Mapillary widget or a container with the widget.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5871</span>
<span class="normal">5872</span>
<span class="normal">5873</span>
<span class="normal">5874</span>
<span class="normal">5875</span>
<span class="normal">5876</span>
<span class="normal">5877</span>
<span class="normal">5878</span>
<span class="normal">5879</span>
<span class="normal">5880</span>
<span class="normal">5881</span>
<span class="normal">5882</span>
<span class="normal">5883</span>
<span class="normal">5884</span>
<span class="normal">5885</span>
<span class="normal">5886</span>
<span class="normal">5887</span>
<span class="normal">5888</span>
<span class="normal">5889</span>
<span class="normal">5890</span>
<span class="normal">5891</span>
<span class="normal">5892</span>
<span class="normal">5893</span>
<span class="normal">5894</span>
<span class="normal">5895</span>
<span class="normal">5896</span>
<span class="normal">5897</span>
<span class="normal">5898</span>
<span class="normal">5899</span>
<span class="normal">5900</span>
<span class="normal">5901</span>
<span class="normal">5902</span>
<span class="normal">5903</span>
<span class="normal">5904</span>
<span class="normal">5905</span>
<span class="normal">5906</span>
<span class="normal">5907</span>
<span class="normal">5908</span>
<span class="normal">5909</span>
<span class="normal">5910</span>
<span class="normal">5911</span>
<span class="normal">5912</span>
<span class="normal">5913</span>
<span class="normal">5914</span>
<span class="normal">5915</span>
<span class="normal">5916</span>
<span class="normal">5917</span>
<span class="normal">5918</span>
<span class="normal">5919</span>
<span class="normal">5920</span>
<span class="normal">5921</span>
<span class="normal">5922</span>
<span class="normal">5923</span>
<span class="normal">5924</span>
<span class="normal">5925</span>
<span class="normal">5926</span>
<span class="normal">5927</span>
<span class="normal">5928</span>
<span class="normal">5929</span>
<span class="normal">5930</span>
<span class="normal">5931</span>
<span class="normal">5932</span>
<span class="normal">5933</span>
<span class="normal">5934</span>
<span class="normal">5935</span>
<span class="normal">5936</span>
<span class="normal">5937</span>
<span class="normal">5938</span>
<span class="normal">5939</span>
<span class="normal">5940</span>
<span class="normal">5941</span>
<span class="normal">5942</span>
<span class="normal">5943</span>
<span class="normal">5944</span>
<span class="normal">5945</span>
<span class="normal">5946</span>
<span class="normal">5947</span>
<span class="normal">5948</span>
<span class="normal">5949</span>
<span class="normal">5950</span>
<span class="normal">5951</span>
<span class="normal">5952</span>
<span class="normal">5953</span>
<span class="normal">5954</span>
<span class="normal">5955</span>
<span class="normal">5956</span>
<span class="normal">5957</span>
<span class="normal">5958</span>
<span class="normal">5959</span>
<span class="normal">5960</span>
<span class="normal">5961</span>
<span class="normal">5962</span>
<span class="normal">5963</span>
<span class="normal">5964</span>
<span class="normal">5965</span>
<span class="normal">5966</span>
<span class="normal">5967</span>
<span class="normal">5968</span>
<span class="normal">5969</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_mapillary_widget</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">bbox</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">image_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">560</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">link</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">container</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a Mapillary widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (Optional[float]): Longitude of the location. Defaults to None.</span>
<span class="sd">        lat (Optional[float]): Latitude of the location. Defaults to None.</span>
<span class="sd">        radius (float): Search radius for Mapillary images. Defaults to 0.00005.</span>
<span class="sd">        bbox (Optional[Union[str, List[float]]]): Bounding box for the search. Defaults to None.</span>
<span class="sd">        image_id (Optional[str]): ID of the Mapillary image. Defaults to None.</span>
<span class="sd">        style (str): Style of the Mapillary image. Can be &quot;classic&quot;, &quot;photo&quot;, and &quot;split&quot;. Defaults to &quot;classic&quot;.</span>
<span class="sd">        height (int): Height of the iframe. Defaults to 600.</span>
<span class="sd">        frame_border (int): Frame border of the iframe. Defaults to 0.</span>
<span class="sd">        link (bool): Whether to link the widget to map clicks. Defaults to True.</span>
<span class="sd">        container (bool): Whether to return the widget in a container. Defaults to True.</span>
<span class="sd">        column_widths (List[int]): Widths of the columns in the container. Defaults to [8, 1].</span>
<span class="sd">        **kwargs: Additional keyword arguments for the widget.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Union[widgets.HTML, v.Row]: The Mapillary widget or a container with the widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">image_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">lon</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">lat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;center&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span><span class="p">:</span>
                <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_state</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">center</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">lon</span> <span class="o">=</span> <span class="n">center</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
                    <span class="n">lat</span> <span class="o">=</span> <span class="n">center</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">image_ids</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">image_id</span> <span class="o">=</span> <span class="n">image_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">image_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_mapillary_image_widget</span><span class="p">(</span>
            <span class="n">image_id</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">frame_border</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">link</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
            <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span>
                <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                &lt;iframe</span>
<span class="s2">                    src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">                &lt;/iframe&gt;</span>
<span class="s2">                &quot;&quot;&quot;</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found.&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">container</span><span class="p">:</span>
        <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">],</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
        <span class="p">)</span>
        <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget</span><span class="p">],</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
        <span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">row</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.find_first_symbol_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_first_symbol_layer</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Map.find_first_symbol_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Find the first symbol layer in the map's current style.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[Dict]: The first symbol layer as a dictionary if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3745</span>
<span class="normal">3746</span>
<span class="normal">3747</span>
<span class="normal">3748</span>
<span class="normal">3749</span>
<span class="normal">3750</span>
<span class="normal">3751</span>
<span class="normal">3752</span>
<span class="normal">3753</span>
<span class="normal">3754</span>
<span class="normal">3755</span>
<span class="normal">3756</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find_first_symbol_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the first symbol layer in the map&#39;s current style.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict]: The first symbol layer as a dictionary if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.find_style_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_style_layer</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.find_style_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Searches for a style layer in the map's current style by its ID and returns it if found.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the style layer to find.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[Dict]: The style layer as a dictionary if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3711</span>
<span class="normal">3712</span>
<span class="normal">3713</span>
<span class="normal">3714</span>
<span class="normal">3715</span>
<span class="normal">3716</span>
<span class="normal">3717</span>
<span class="normal">3718</span>
<span class="normal">3719</span>
<span class="normal">3720</span>
<span class="normal">3721</span>
<span class="normal">3722</span>
<span class="normal">3723</span>
<span class="normal">3724</span>
<span class="normal">3725</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find_style_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Searches for a style layer in the map&#39;s current style by its ID and returns it if found.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The ID of the style layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict]: The style layer as a dictionary if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.fit_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.fit_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Adjusts the viewport of the map to fit the specified geographical bounds
    in the format of [[lon_min, lat_min], [lon_max, lat_max]] or
    [lon_min, lat_min, lon_max, lat_max].</p>
<p>This method adjusts the viewport of the map so that the specified geographical bounds
are visible in the viewport. The bounds are specified as a list of two points,
where each point is a list of two numbers representing the longitude and latitude.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bounds</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of two points representing the geographical bounds that
        should be visible in the viewport. Each point is a list of two
        numbers representing the longitude and latitude. For example,
        [[32.958984, -5.353521],[43.50585, 5.615985]]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options for fitting the bounds.
See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions/.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_bounds</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjusts the viewport of the map to fit the specified geographical bounds</span>
<span class="sd">        in the format of [[lon_min, lat_min], [lon_max, lat_max]] or</span>
<span class="sd">        [lon_min, lat_min, lon_max, lat_max].</span>

<span class="sd">    This method adjusts the viewport of the map so that the specified geographical bounds</span>
<span class="sd">    are visible in the viewport. The bounds are specified as a list of two points,</span>
<span class="sd">    where each point is a list of two numbers representing the longitude and latitude.</span>

<span class="sd">    Args:</span>
<span class="sd">        bounds (list): A list of two points representing the geographical bounds that</span>
<span class="sd">                    should be visible in the viewport. Each point is a list of two</span>
<span class="sd">                    numbers representing the longitude and latitude. For example,</span>
<span class="sd">                    [[32.958984, -5.353521],[43.50585, 5.615985]]</span>
<span class="sd">        options (dict, optional): Additional options for fitting the bounds.</span>
<span class="sd">            See https://maplibre.org/maplibre-gl-js/docs/API/type-aliases/FitBoundsOptions/.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">bounds</span><span class="p">):</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span>

    <span class="n">options</span><span class="p">[</span><span class="s2">&quot;animate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;animate&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;fitBounds&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.fly_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fly_to</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">essential</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.fly_to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Makes the map fly to a specified location.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lon</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The longitude of the location to fly to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lat</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latitude of the location to fly to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zoom</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zoom level to use when flying
to the location. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>speed</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The speed of the fly animation.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>essential</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the flyTo animation is considered
essential and not affected by prefers-reduced-motion. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the flyTo function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3052</span>
<span class="normal">3053</span>
<span class="normal">3054</span>
<span class="normal">3055</span>
<span class="normal">3056</span>
<span class="normal">3057</span>
<span class="normal">3058</span>
<span class="normal">3059</span>
<span class="normal">3060</span>
<span class="normal">3061</span>
<span class="normal">3062</span>
<span class="normal">3063</span>
<span class="normal">3064</span>
<span class="normal">3065</span>
<span class="normal">3066</span>
<span class="normal">3067</span>
<span class="normal">3068</span>
<span class="normal">3069</span>
<span class="normal">3070</span>
<span class="normal">3071</span>
<span class="normal">3072</span>
<span class="normal">3073</span>
<span class="normal">3074</span>
<span class="normal">3075</span>
<span class="normal">3076</span>
<span class="normal">3077</span>
<span class="normal">3078</span>
<span class="normal">3079</span>
<span class="normal">3080</span>
<span class="normal">3081</span>
<span class="normal">3082</span>
<span class="normal">3083</span>
<span class="normal">3084</span>
<span class="normal">3085</span>
<span class="normal">3086</span>
<span class="normal">3087</span>
<span class="normal">3088</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fly_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">speed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">essential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes the map fly to a specified location.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the location to fly to.</span>
<span class="sd">        lat (float): The latitude of the location to fly to.</span>
<span class="sd">        zoom (Optional[float], optional): The zoom level to use when flying</span>
<span class="sd">            to the location. Defaults to None.</span>
<span class="sd">        speed (Optional[float], optional): The speed of the fly animation.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        essential (bool, optional): Whether the flyTo animation is considered</span>
<span class="sd">            essential and not affected by prefers-reduced-motion. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the flyTo function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zoom</span>
    <span class="k">if</span> <span class="n">speed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed</span>
    <span class="k">if</span> <span class="n">essential</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;essential&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">essential</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;flyTo&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.get_deck_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.get_deck_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get a Deck.GL layer from the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_deck_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a Deck.GL layer from the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_id (str): The ID of the layer to get.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deck_layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">deck_layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">layer_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.get_layer_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_layer_names</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Map.get_layer_names" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets layer names as a list.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of layer names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6112</span>
<span class="normal">6113</span>
<span class="normal">6114</span>
<span class="normal">6115</span>
<span class="normal">6116</span>
<span class="normal">6117</span>
<span class="normal">6118</span>
<span class="normal">6119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets layer names as a list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of layer names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">layer_names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.get_style" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_style</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Map.get_style" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the style of the map.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dict</code></td>            <td>
                  <code><span title="typing.Dict">Dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the map.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3671</span>
<span class="normal">3672</span>
<span class="normal">3673</span>
<span class="normal">3674</span>
<span class="normal">3675</span>
<span class="normal">3676</span>
<span class="normal">3677</span>
<span class="normal">3678</span>
<span class="normal">3679</span>
<span class="normal">3680</span>
<span class="normal">3681</span>
<span class="normal">3682</span>
<span class="normal">3683</span>
<span class="normal">3684</span>
<span class="normal">3685</span>
<span class="normal">3686</span>
<span class="normal">3687</span>
<span class="normal">3688</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the style of the map.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict: The style of the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">)</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">style</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.get_style_layers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_style_layers</span><span class="p">(</span><span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.get_style_layers" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Get the names of the basemap layers.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[str]: The names of the basemap layers.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3690</span>
<span class="normal">3691</span>
<span class="normal">3692</span>
<span class="normal">3693</span>
<span class="normal">3694</span>
<span class="normal">3695</span>
<span class="normal">3696</span>
<span class="normal">3697</span>
<span class="normal">3698</span>
<span class="normal">3699</span>
<span class="normal">3700</span>
<span class="normal">3701</span>
<span class="normal">3702</span>
<span class="normal">3703</span>
<span class="normal">3704</span>
<span class="normal">3705</span>
<span class="normal">3706</span>
<span class="normal">3707</span>
<span class="normal">3708</span>
<span class="normal">3709</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_style_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">return_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the names of the basemap layers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: The names of the basemap layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;layers&quot;</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">return_ids</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">sorted</span><span class="p">:</span>
                <span class="n">ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">ids</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layers</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.jump_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">jump_to</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.jump_to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Jumps the map to a specified location.</p>
<p>This function jumps the map to the specified location with the specified options.
Additional keyword arguments can be provided to control the jump. For more information,
see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options to control the jump. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to control the jump.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3576</span>
<span class="normal">3577</span>
<span class="normal">3578</span>
<span class="normal">3579</span>
<span class="normal">3580</span>
<span class="normal">3581</span>
<span class="normal">3582</span>
<span class="normal">3583</span>
<span class="normal">3584</span>
<span class="normal">3585</span>
<span class="normal">3586</span>
<span class="normal">3587</span>
<span class="normal">3588</span>
<span class="normal">3589</span>
<span class="normal">3590</span>
<span class="normal">3591</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">jump_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Jumps the map to a specified location.</span>

<span class="sd">    This function jumps the map to the specified location with the specified options.</span>
<span class="sd">    Additional keyword arguments can be provided to control the jump. For more information,</span>
<span class="sd">    see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#jumpto</span>

<span class="sd">    Args:</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the jump. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the jump.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;jumpTo&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.layer_interact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">layer_interact</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.layer_interact" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a layer widget for changing the visibility and opacity of a layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ipywidgets.Widget: The layer widget.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2642</span>
<span class="normal">2643</span>
<span class="normal">2644</span>
<span class="normal">2645</span>
<span class="normal">2646</span>
<span class="normal">2647</span>
<span class="normal">2648</span>
<span class="normal">2649</span>
<span class="normal">2650</span>
<span class="normal">2651</span>
<span class="normal">2652</span>
<span class="normal">2653</span>
<span class="normal">2654</span>
<span class="normal">2655</span>
<span class="normal">2656</span>
<span class="normal">2657</span>
<span class="normal">2658</span>
<span class="normal">2659</span>
<span class="normal">2660</span>
<span class="normal">2661</span>
<span class="normal">2662</span>
<span class="normal">2663</span>
<span class="normal">2664</span>
<span class="normal">2665</span>
<span class="normal">2666</span>
<span class="normal">2667</span>
<span class="normal">2668</span>
<span class="normal">2669</span>
<span class="normal">2670</span>
<span class="normal">2671</span>
<span class="normal">2672</span>
<span class="normal">2673</span>
<span class="normal">2674</span>
<span class="normal">2675</span>
<span class="normal">2676</span>
<span class="normal">2677</span>
<span class="normal">2678</span>
<span class="normal">2679</span>
<span class="normal">2680</span>
<span class="normal">2681</span>
<span class="normal">2682</span>
<span class="normal">2683</span>
<span class="normal">2684</span>
<span class="normal">2685</span>
<span class="normal">2686</span>
<span class="normal">2687</span>
<span class="normal">2688</span>
<span class="normal">2689</span>
<span class="normal">2690</span>
<span class="normal">2691</span>
<span class="normal">2692</span>
<span class="normal">2693</span>
<span class="normal">2694</span>
<span class="normal">2695</span>
<span class="normal">2696</span>
<span class="normal">2697</span>
<span class="normal">2698</span>
<span class="normal">2699</span>
<span class="normal">2700</span>
<span class="normal">2701</span>
<span class="normal">2702</span>
<span class="normal">2703</span>
<span class="normal">2704</span>
<span class="normal">2705</span>
<span class="normal">2706</span>
<span class="normal">2707</span>
<span class="normal">2708</span>
<span class="normal">2709</span>
<span class="normal">2710</span>
<span class="normal">2711</span>
<span class="normal">2712</span>
<span class="normal">2713</span>
<span class="normal">2714</span>
<span class="normal">2715</span>
<span class="normal">2716</span>
<span class="normal">2717</span>
<span class="normal">2718</span>
<span class="normal">2719</span>
<span class="normal">2720</span>
<span class="normal">2721</span>
<span class="normal">2722</span>
<span class="normal">2723</span>
<span class="normal">2724</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidgets.Widget: The layer widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">layer_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">layer_names</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">layer_names</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
        <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
        <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

    <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
        <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_opacity</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hbox</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.observe_mapillary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">observe_mapillary</span><span class="p">(</span><span class="n">html_widget</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">default_message</span><span class="o">=</span><span class="s1">&#39;No Mapillary image found&#39;</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.observe_mapillary" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Observes the mapillary data and updates the html widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>html_widget</code>
            </td>
            <td>
                  <code><span title="ipywidgets.HTML">HTML</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The html widget to display the mapillary data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the Mapillary image widget. Can be "classic", "photo",
or "split". Defaults to "photo".</p>
              </div>
            </td>
            <td>
                  <code>&#39;photo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius (in degrees) used to search for the nearest Mapillary
image. Defaults to 0.00005 degrees.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the Mapillary image widget. Defaults to 420.</p>
              </div>
            </td>
            <td>
                  <code>420</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the frame border for the Mapillary image widget.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message to display when no Mapillary image is found.</p>
              </div>
            </td>
            <td>
                  <code>&#39;No Mapillary image found&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6688</span>
<span class="normal">6689</span>
<span class="normal">6690</span>
<span class="normal">6691</span>
<span class="normal">6692</span>
<span class="normal">6693</span>
<span class="normal">6694</span>
<span class="normal">6695</span>
<span class="normal">6696</span>
<span class="normal">6697</span>
<span class="normal">6698</span>
<span class="normal">6699</span>
<span class="normal">6700</span>
<span class="normal">6701</span>
<span class="normal">6702</span>
<span class="normal">6703</span>
<span class="normal">6704</span>
<span class="normal">6705</span>
<span class="normal">6706</span>
<span class="normal">6707</span>
<span class="normal">6708</span>
<span class="normal">6709</span>
<span class="normal">6710</span>
<span class="normal">6711</span>
<span class="normal">6712</span>
<span class="normal">6713</span>
<span class="normal">6714</span>
<span class="normal">6715</span>
<span class="normal">6716</span>
<span class="normal">6717</span>
<span class="normal">6718</span>
<span class="normal">6719</span>
<span class="normal">6720</span>
<span class="normal">6721</span>
<span class="normal">6722</span>
<span class="normal">6723</span>
<span class="normal">6724</span>
<span class="normal">6725</span>
<span class="normal">6726</span>
<span class="normal">6727</span>
<span class="normal">6728</span>
<span class="normal">6729</span>
<span class="normal">6730</span>
<span class="normal">6731</span>
<span class="normal">6732</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">observe_mapillary</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">html_widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">default_message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Observes the mapillary data and updates the html widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        html_widget (widgets.HTML): The html widget to display the mapillary data.</span>
<span class="sd">        style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">            or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">        radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">            image. Defaults to 0.00005 degrees.</span>
<span class="sd">        height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">        frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">        default_message (str, optional): The message to display when no Mapillary image is found.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
        <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            &lt;iframe</span>
<span class="s2">                src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">            &lt;/iframe&gt;</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">html_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default_message</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span> <span class="o">=</span> <span class="n">log_lng_lat</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.open_geojson" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">open_geojson</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.open_geojson" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates a file uploader widget to upload a GeoJSON file. When a file is
uploaded, it is written to a temporary file and added to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_geojson method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.FileUpload">FileUpload</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.FileUpload: The file uploader widget.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3506</span>
<span class="normal">3507</span>
<span class="normal">3508</span>
<span class="normal">3509</span>
<span class="normal">3510</span>
<span class="normal">3511</span>
<span class="normal">3512</span>
<span class="normal">3513</span>
<span class="normal">3514</span>
<span class="normal">3515</span>
<span class="normal">3516</span>
<span class="normal">3517</span>
<span class="normal">3518</span>
<span class="normal">3519</span>
<span class="normal">3520</span>
<span class="normal">3521</span>
<span class="normal">3522</span>
<span class="normal">3523</span>
<span class="normal">3524</span>
<span class="normal">3525</span>
<span class="normal">3526</span>
<span class="normal">3527</span>
<span class="normal">3528</span>
<span class="normal">3529</span>
<span class="normal">3530</span>
<span class="normal">3531</span>
<span class="normal">3532</span>
<span class="normal">3533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a file uploader widget to upload a GeoJSON file. When a file is</span>
<span class="sd">    uploaded, it is written to a temporary file and added to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the add_geojson method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.FileUpload: The file uploader widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
        <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span>  <span class="c1"># Accept GeoJSON files</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Only single file upload</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Open GeoJSON&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="n">temp_file</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">uploader</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.pan_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pan_to</span><span class="p">(</span><span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.pan_to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Pans the map to a specified location.</p>
<p>This function pans the map to the specified longitude and latitude coordinates.
Additional options and keyword arguments can be provided to control the panning.
For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lnglat</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The longitude and latitude coordinates to pan to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options to control the panning. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to control the panning.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3535</span>
<span class="normal">3536</span>
<span class="normal">3537</span>
<span class="normal">3538</span>
<span class="normal">3539</span>
<span class="normal">3540</span>
<span class="normal">3541</span>
<span class="normal">3542</span>
<span class="normal">3543</span>
<span class="normal">3544</span>
<span class="normal">3545</span>
<span class="normal">3546</span>
<span class="normal">3547</span>
<span class="normal">3548</span>
<span class="normal">3549</span>
<span class="normal">3550</span>
<span class="normal">3551</span>
<span class="normal">3552</span>
<span class="normal">3553</span>
<span class="normal">3554</span>
<span class="normal">3555</span>
<span class="normal">3556</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pan_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lnglat</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pans the map to a specified location.</span>

<span class="sd">    This function pans the map to the specified longitude and latitude coordinates.</span>
<span class="sd">    Additional options and keyword arguments can be provided to control the panning.</span>
<span class="sd">    For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#panto</span>

<span class="sd">    Args:</span>
<span class="sd">        lnglat (List[float, float]): The longitude and latitude coordinates to pan to.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the panning. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the panning.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;panTo&quot;</span><span class="p">,</span> <span class="n">lnglat</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.remove_deck_layers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_deck_layers</span><span class="p">(</span><span class="n">layer_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.remove_deck_layers" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Remove a list of Deck.GL layers from the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_ids</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of layer IDs to remove.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tooltip for the remaining layers.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_deck_layers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">layer_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tooltip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove a list of Deck.GL layers from the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_ids (List[str]): A list of layer IDs to remove.</span>
<span class="sd">        tooltip (bool): Tooltip for the remaining layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tooltip</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">deck_layers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">deck_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">layer_type</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Deck&quot;</span><span class="p">):</span>
            <span class="n">deck_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">deck_layer_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">layer_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">([])</span>
        <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="n">deck_layer_ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">remaining_layers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">remaining_layer_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">layer_id</span> <span class="ow">in</span> <span class="n">deck_layer_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
                <span class="n">remaining_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">])</span>
                <span class="n">remaining_layer_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="n">remaining_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span> <span class="o">=</span> <span class="n">remaining_layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span> <span class="o">=</span> <span class="n">remaining_layer_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span> <span class="o">=</span> <span class="n">tooltip</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.remove_from_sidebar" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.remove_from_sidebar" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes a widget from the sidebar content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>widget</code>
            </td>
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The widget to remove from the sidebar.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the widget to remove from the sidebar.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_from_sidebar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">:</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a widget from the sidebar content.</span>

<span class="sd">    Args:</span>
<span class="sd">        widget (widgets.Widget): The widget to remove from the sidebar.</span>
<span class="sd">        name (str): The name of the widget to remove from the sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if floating sidebar is being used</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;floating_sidebar_content_box&quot;</span><span class="p">):</span>
        <span class="c1"># Handle floating sidebar case</span>
        <span class="n">key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">widget</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_floating_sidebar_widgets</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="n">child</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">floating_sidebar_content_box</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="n">widget</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle regular container sidebar case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">remove_from_sidebar</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.remove_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_layer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.remove_layer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes a layer from the map.</p>
<p>This method removes a layer from the map using the layer's name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer to remove.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a layer from the map.</span>

<span class="sd">    This method removes a layer from the map using the layer&#39;s name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer to remove.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">layer</span> <span class="ow">and</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Deck&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_deck_layers</span><span class="p">(</span><span class="n">layer_ids</span><span class="o">=</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">return</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeLayer&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="n">Layer</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">):</span>
                <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_manager</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.remove_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_source</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.remove_source" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Removes a source from the map.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes a source from the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;removeSource&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.remove_terrain" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_terrain</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Map.remove_terrain" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Remove terrain visualization from the map.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_terrain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove terrain visualization from the map.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.rotate_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rotate_to</span><span class="p">(</span><span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.rotate_to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Rotate the map to a specified bearing.</p>
<p>This function rotates the map to a specified bearing. The bearing is specified in degrees
counter-clockwise from true north. If the bearing is not specified, the map will rotate to
true north. Additional options and keyword arguments can be provided to control the rotation.
For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bearing</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The bearing to rotate to, in degrees counter-clockwise from true north.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options to control the rotation. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to control the rotation.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3485</span>
<span class="normal">3486</span>
<span class="normal">3487</span>
<span class="normal">3488</span>
<span class="normal">3489</span>
<span class="normal">3490</span>
<span class="normal">3491</span>
<span class="normal">3492</span>
<span class="normal">3493</span>
<span class="normal">3494</span>
<span class="normal">3495</span>
<span class="normal">3496</span>
<span class="normal">3497</span>
<span class="normal">3498</span>
<span class="normal">3499</span>
<span class="normal">3500</span>
<span class="normal">3501</span>
<span class="normal">3502</span>
<span class="normal">3503</span>
<span class="normal">3504</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rotate_to</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">bearing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotate the map to a specified bearing.</span>

<span class="sd">    This function rotates the map to a specified bearing. The bearing is specified in degrees</span>
<span class="sd">    counter-clockwise from true north. If the bearing is not specified, the map will rotate to</span>
<span class="sd">    true north. Additional options and keyword arguments can be provided to control the rotation.</span>
<span class="sd">    For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#rotateto</span>

<span class="sd">    Args:</span>
<span class="sd">        bearing (float): The bearing to rotate to, in degrees counter-clockwise from true north.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the rotation. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the rotation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;rotateTo&quot;</span><span class="p">,</span> <span class="n">bearing</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.save_draw_features" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_draw_features</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.save_draw_features" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Saves the drawn features to a file.</p>
<p>This method saves all features created with the drawing control to a
specified file in GeoJSON format. If there are no features to save, the
file will not be created.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filepath</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file where the GeoJSON data will be saved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to json.dump for custom serialization.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the feature collection is empty.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the drawn features to a file.</span>

<span class="sd">    This method saves all features created with the drawing control to a</span>
<span class="sd">    specified file in GeoJSON format. If there are no features to save, the</span>
<span class="sd">    file will not be created.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath (str): The path to the file where the GeoJSON data will be saved.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to be passed to json.dump for custom serialization.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the feature collection is empty.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">json</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are no features to save.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_center" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_center" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the center of the map.</p>
<p>This method sets the center of the map to the specified longitude and latitude.
If a zoom level is provided, it also sets the zoom level of the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lon</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The longitude of the center of the map.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lat</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latitude of the center of the map.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zoom level of the map. If None, the zoom
level is not changed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the center of the map.</span>

<span class="sd">    This method sets the center of the map to the specified longitude and latitude.</span>
<span class="sd">    If a zoom level is provided, it also sets the zoom level of the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center of the map.</span>
<span class="sd">        lat (float): The latitude of the center of the map.</span>
<span class="sd">        zoom (int, optional): The zoom level of the map. If None, the zoom</span>
<span class="sd">            level is not changed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setCenter&quot;</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_color" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_color</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_color" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the color of a layer.</p>
<p>This method sets the color of the specified layer to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2550</span>
<span class="normal">2551</span>
<span class="normal">2552</span>
<span class="normal">2553</span>
<span class="normal">2554</span>
<span class="normal">2555</span>
<span class="normal">2556</span>
<span class="normal">2557</span>
<span class="normal">2558</span>
<span class="normal">2559</span>
<span class="normal">2560</span>
<span class="normal">2561</span>
<span class="normal">2562</span>
<span class="normal">2563</span>
<span class="normal">2564</span>
<span class="normal">2565</span>
<span class="normal">2566</span>
<span class="normal">2567</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the color of a layer.</span>

<span class="sd">    This method sets the color of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        color (str): The color value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">color</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_data</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_data" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the data for a source.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to set for the source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the data for a source.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The ID of the source.</span>
<span class="sd">        data (str or dict): The data to set for the source.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
    <span class="k">elif</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Source </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_deck_layer_opacity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_deck_layer_opacity</span><span class="p">(</span><span class="n">layer_id</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_deck_layer_opacity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the opacity of a Deck.GL layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer to set the opacity of.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_deck_layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the opacity of a Deck.GL layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_id (str): The ID of the layer to set the opacity of.</span>
<span class="sd">        opacity (float): The opacity of the layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
    <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
    <span class="n">deck_layer</span><span class="p">[</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_deck_layer_properties" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_deck_layer_properties</span><span class="p">(</span><span class="n">layer_id</span><span class="p">,</span> <span class="n">properties</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_deck_layer_properties" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the properties of a Deck.GL layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer to set the properties of.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The properties to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_deck_layer_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">properties</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the properties of a Deck.GL layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_id (str): The ID of the layer to set the properties of.</span>
<span class="sd">        properties (dict): The properties to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
    <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
    <span class="n">deck_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_deck_layer_property" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_deck_layer_property</span><span class="p">(</span><span class="n">layer_id</span><span class="p">,</span> <span class="nb">property</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_deck_layer_property" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the property of a Deck.GL layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer to set the property of.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>property</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The property to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value of the property.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_deck_layer_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">property</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the property of a Deck.GL layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_id (str): The ID of the layer to set the property of.</span>
<span class="sd">        property (str): The property to set.</span>
<span class="sd">        value (Any): The value of the property.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deck_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deck_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
    <span class="n">deck_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">deck_layer</span><span class="p">)</span>
    <span class="n">deck_layer</span><span class="p">[</span><span class="nb">property</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">[</span><span class="n">deck_layer_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">deck_layer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">layer_id</span><span class="p">][</span><span class="nb">property</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layers</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_tooltips</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_layout_property" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_layout_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_layout_property" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the layout property of a layer.</p>
<p>This method sets the layout property of the specified layer to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prop</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The layout property to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2529</span>
<span class="normal">2530</span>
<span class="normal">2531</span>
<span class="normal">2532</span>
<span class="normal">2533</span>
<span class="normal">2534</span>
<span class="normal">2535</span>
<span class="normal">2536</span>
<span class="normal">2537</span>
<span class="normal">2538</span>
<span class="normal">2539</span>
<span class="normal">2540</span>
<span class="normal">2541</span>
<span class="normal">2542</span>
<span class="normal">2543</span>
<span class="normal">2544</span>
<span class="normal">2545</span>
<span class="normal">2546</span>
<span class="normal">2547</span>
<span class="normal">2548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_layout_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the layout property of a layer.</span>

<span class="sd">    This method sets the layout property of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        prop (str): The layout property to set.</span>
<span class="sd">        value (Any): The value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_opacity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_opacity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the opacity of a layer.</p>
<p>This method sets the opacity of the specified layer to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>opacity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opacity value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2569</span>
<span class="normal">2570</span>
<span class="normal">2571</span>
<span class="normal">2572</span>
<span class="normal">2573</span>
<span class="normal">2574</span>
<span class="normal">2575</span>
<span class="normal">2576</span>
<span class="normal">2577</span>
<span class="normal">2578</span>
<span class="normal">2579</span>
<span class="normal">2580</span>
<span class="normal">2581</span>
<span class="normal">2582</span>
<span class="normal">2583</span>
<span class="normal">2584</span>
<span class="normal">2585</span>
<span class="normal">2586</span>
<span class="normal">2587</span>
<span class="normal">2588</span>
<span class="normal">2589</span>
<span class="normal">2590</span>
<span class="normal">2591</span>
<span class="normal">2592</span>
<span class="normal">2593</span>
<span class="normal">2594</span>
<span class="normal">2595</span>
<span class="normal">2596</span>
<span class="normal">2597</span>
<span class="normal">2598</span>
<span class="normal">2599</span>
<span class="normal">2600</span>
<span class="normal">2601</span>
<span class="normal">2602</span>
<span class="normal">2603</span>
<span class="normal">2604</span>
<span class="normal">2605</span>
<span class="normal">2606</span>
<span class="normal">2607</span>
<span class="normal">2608</span>
<span class="normal">2609</span>
<span class="normal">2610</span>
<span class="normal">2611</span>
<span class="normal">2612</span>
<span class="normal">2613</span>
<span class="normal">2614</span>
<span class="normal">2615</span>
<span class="normal">2616</span>
<span class="normal">2617</span>
<span class="normal">2618</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the opacity of a layer.</span>

<span class="sd">    This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        opacity (float): The opacity value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">layer_type</span> <span class="o">!=</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
                    <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="s2">&quot;icon-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="s2">&quot;text-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deck_layer_ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_deck_layer_opacity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="n">Layer</span><span class="p">):</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;layer&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">layer_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="n">prop_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">if</span> <span class="n">layer_type</span> <span class="o">!=</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="c1"># if layer_type == &quot;circle&quot;:</span>
        <span class="c1">#     super().set_paint_property(name, &quot;circle-stroke-opacity&quot;, opacity)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;icon-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;text-opacity&quot;</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_paint_property" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_paint_property" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the paint property of a layer.</p>
<p>This method sets the opacity of the specified layer to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prop</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The paint property to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2506</span>
<span class="normal">2507</span>
<span class="normal">2508</span>
<span class="normal">2509</span>
<span class="normal">2510</span>
<span class="normal">2511</span>
<span class="normal">2512</span>
<span class="normal">2513</span>
<span class="normal">2514</span>
<span class="normal">2515</span>
<span class="normal">2516</span>
<span class="normal">2517</span>
<span class="normal">2518</span>
<span class="normal">2519</span>
<span class="normal">2520</span>
<span class="normal">2521</span>
<span class="normal">2522</span>
<span class="normal">2523</span>
<span class="normal">2524</span>
<span class="normal">2525</span>
<span class="normal">2526</span>
<span class="normal">2527</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_paint_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the paint property of a layer.</span>

<span class="sd">    This method sets the opacity of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        prop (str): The paint property to set.</span>
<span class="sd">        value (Any): The value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;opacity&quot;</span> <span class="ow">in</span> <span class="n">prop</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;opacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;paint&quot;</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;paint&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_pitch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_pitch</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_pitch" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the pitch of the map.</p>
<p>This function sets the pitch of the map to the specified value. The pitch is the
angle of the camera measured in degrees where 0 is looking straight down, and 60 is
looking towards the horizon. Additional keyword arguments can be provided to control
the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pitch</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pitch value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to control the pitch.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3558</span>
<span class="normal">3559</span>
<span class="normal">3560</span>
<span class="normal">3561</span>
<span class="normal">3562</span>
<span class="normal">3563</span>
<span class="normal">3564</span>
<span class="normal">3565</span>
<span class="normal">3566</span>
<span class="normal">3567</span>
<span class="normal">3568</span>
<span class="normal">3569</span>
<span class="normal">3570</span>
<span class="normal">3571</span>
<span class="normal">3572</span>
<span class="normal">3573</span>
<span class="normal">3574</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_pitch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pitch</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the pitch of the map.</span>

<span class="sd">    This function sets the pitch of the map to the specified value. The pitch is the</span>
<span class="sd">    angle of the camera measured in degrees where 0 is looking straight down, and 60 is</span>
<span class="sd">    looking towards the horizon. Additional keyword arguments can be provided to control</span>
<span class="sd">    the pitch. For more information, see https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#setpitch</span>

<span class="sd">    Args:</span>
<span class="sd">        pitch (float): The pitch value to set.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the pitch.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setPitch&quot;</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_sidebar_content" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_sidebar_content" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Replaces all content in the sidebar (except the toggle button).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="ipywidgets.VBox">VBox</span>, <span title="typing.List">List</span>[<span title="ipywidgets.Widget">Widget</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content for the sidebar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_sidebar_content</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces all content in the sidebar (except the toggle button).</span>

<span class="sd">    Args:</span>
<span class="sd">        content (Union[widgets.VBox, List[widgets.Widget]]): The new content for the sidebar.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">set_sidebar_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_sidebar_width" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_sidebar_width" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Dynamically updates the sidebar's minimum and maximum width.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>min_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New minimum width in pixels. If None, keep current.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New maximum width in pixels. If None, keep current.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_sidebar_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically updates the sidebar&#39;s minimum and maximum width.</span>

<span class="sd">    Args:</span>
<span class="sd">        min_width (int, optional): New minimum width in pixels. If None, keep current.</span>
<span class="sd">        max_width (int, optional): New maximum width in pixels. If None, keep current.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">set_sidebar_width</span><span class="p">(</span><span class="n">min_width</span><span class="p">,</span> <span class="n">max_width</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sidebar_args</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_terrain" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_terrain</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;https://elevation-tiles-prod.s3.amazonaws.com/terrarium/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,</span> <span class="n">exaggeration</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;terrarium&#39;</span><span class="p">,</span> <span class="n">source_id</span><span class="o">=</span><span class="s1">&#39;terrain-dem&#39;</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_terrain" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Add terrain visualization to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL template for terrain tiles. Defaults to AWS elevation tiles.</p>
              </div>
            </td>
            <td>
                  <code>&#39;https://elevation-tiles-prod.s3.amazonaws.com/terrarium/{z}/{x}/{y}.png&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exaggeration</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Terrain exaggeration factor. Defaults to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tile size in pixels. Defaults to 256.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>encoding</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Encoding for the terrain tiles. Defaults to "terrarium".</p>
              </div>
            </td>
            <td>
                  <code>&#39;terrarium&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>source_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique identifier for the terrain source. Defaults to "terrain-dem".</p>
              </div>
            </td>
            <td>
                  <code>&#39;terrain-dem&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_terrain</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://elevation-tiles-prod.s3.amazonaws.com/terrarium/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&quot;</span><span class="p">,</span>
    <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
    <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;terrarium&quot;</span><span class="p">,</span>
    <span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;terrain-dem&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add terrain visualization to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: URL template for terrain tiles. Defaults to AWS elevation tiles.</span>
<span class="sd">        exaggeration: Terrain exaggeration factor. Defaults to 1.0.</span>
<span class="sd">        tile_size: Tile size in pixels. Defaults to 256.</span>
<span class="sd">        encoding: Encoding for the terrain tiles. Defaults to &quot;terrarium&quot;.</span>
<span class="sd">        source_id: Unique identifier for the terrain source. Defaults to &quot;terrain-dem&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Add terrain source</span>
    <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
        <span class="n">source_id</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">source</span><span class="p">],</span>
            <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="n">encoding</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># Set terrain on the map</span>
    <span class="n">terrain_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source_id</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">}</span>

    <span class="c1"># Store terrain configuration in persistent state</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setTerrain&quot;</span><span class="p">,</span> <span class="n">terrain_config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_visibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_visibility" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the visibility of a layer.</p>
<p>This method sets the visibility of the specified layer to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The visibility value to set.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2620</span>
<span class="normal">2621</span>
<span class="normal">2622</span>
<span class="normal">2623</span>
<span class="normal">2624</span>
<span class="normal">2625</span>
<span class="normal">2626</span>
<span class="normal">2627</span>
<span class="normal">2628</span>
<span class="normal">2629</span>
<span class="normal">2630</span>
<span class="normal">2631</span>
<span class="normal">2632</span>
<span class="normal">2633</span>
<span class="normal">2634</span>
<span class="normal">2635</span>
<span class="normal">2636</span>
<span class="normal">2637</span>
<span class="normal">2638</span>
<span class="normal">2639</span>
<span class="normal">2640</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the visibility of a layer.</span>

<span class="sd">    This method sets the visibility of the specified layer to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">        visible (bool): The visibility value to set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style_layers</span><span class="p">():</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">layer</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">visible</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_visibility</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;visible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">visible</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.set_zoom" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_zoom</span><span class="p">(</span><span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.set_zoom" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the zoom level of the map.</p>
<p>This method sets the zoom level of the map to the specified value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>zoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zoom level of the map.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the zoom level of the map.</span>

<span class="sd">    This method sets the zoom level of the map to the specified value.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int): The zoom level of the map.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;setZoom&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.show" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show</span><span class="p">(</span><span class="n">sidebar_visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span> <span class="n">sidebar_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.show" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Displays the map with an optional sidebar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_visible</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the sidebar is visible. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum width of the sidebar in pixels. Defaults to 250.</p>
              </div>
            </td>
            <td>
                  <code>360</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum width of the sidebar in pixels. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>360</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sidebar_content</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content to display in the sidebar. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sidebar_visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">min_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>
    <span class="n">sidebar_content</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays the map with an optional sidebar.</span>

<span class="sd">    Args:</span>
<span class="sd">        sidebar_visible (bool): Whether the sidebar is visible. Defaults to False.</span>
<span class="sd">        min_width (int): Minimum width of the sidebar in pixels. Defaults to 250.</span>
<span class="sd">        max_width (int): Maximum width of the sidebar in pixels. Defaults to 300.</span>
<span class="sd">        sidebar_content (Optional[Any]): Content to display in the sidebar. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Container</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sidebar_visible</span><span class="o">=</span><span class="n">sidebar_visible</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
        <span class="n">sidebar_content</span><span class="o">=</span><span class="n">sidebar_content</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.style_layer_interact" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">style_layer_interact</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.style_layer_interact" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a layer widget for changing the visibility and opacity of a style layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The is of the layer.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.Widget">Widget</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ipywidgets.Widget: The layer widget.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2726</span>
<span class="normal">2727</span>
<span class="normal">2728</span>
<span class="normal">2729</span>
<span class="normal">2730</span>
<span class="normal">2731</span>
<span class="normal">2732</span>
<span class="normal">2733</span>
<span class="normal">2734</span>
<span class="normal">2735</span>
<span class="normal">2736</span>
<span class="normal">2737</span>
<span class="normal">2738</span>
<span class="normal">2739</span>
<span class="normal">2740</span>
<span class="normal">2741</span>
<span class="normal">2742</span>
<span class="normal">2743</span>
<span class="normal">2744</span>
<span class="normal">2745</span>
<span class="normal">2746</span>
<span class="normal">2747</span>
<span class="normal">2748</span>
<span class="normal">2749</span>
<span class="normal">2750</span>
<span class="normal">2751</span>
<span class="normal">2752</span>
<span class="normal">2753</span>
<span class="normal">2754</span>
<span class="normal">2755</span>
<span class="normal">2756</span>
<span class="normal">2757</span>
<span class="normal">2758</span>
<span class="normal">2759</span>
<span class="normal">2760</span>
<span class="normal">2761</span>
<span class="normal">2762</span>
<span class="normal">2763</span>
<span class="normal">2764</span>
<span class="normal">2765</span>
<span class="normal">2766</span>
<span class="normal">2767</span>
<span class="normal">2768</span>
<span class="normal">2769</span>
<span class="normal">2770</span>
<span class="normal">2771</span>
<span class="normal">2772</span>
<span class="normal">2773</span>
<span class="normal">2774</span>
<span class="normal">2775</span>
<span class="normal">2776</span>
<span class="normal">2777</span>
<span class="normal">2778</span>
<span class="normal">2779</span>
<span class="normal">2780</span>
<span class="normal">2781</span>
<span class="normal">2782</span>
<span class="normal">2783</span>
<span class="normal">2784</span>
<span class="normal">2785</span>
<span class="normal">2786</span>
<span class="normal">2787</span>
<span class="normal">2788</span>
<span class="normal">2789</span>
<span class="normal">2790</span>
<span class="normal">2791</span>
<span class="normal">2792</span>
<span class="normal">2793</span>
<span class="normal">2794</span>
<span class="normal">2795</span>
<span class="normal">2796</span>
<span class="normal">2797</span>
<span class="normal">2798</span>
<span class="normal">2799</span>
<span class="normal">2800</span>
<span class="normal">2801</span>
<span class="normal">2802</span>
<span class="normal">2803</span>
<span class="normal">2804</span>
<span class="normal">2805</span>
<span class="normal">2806</span>
<span class="normal">2807</span>
<span class="normal">2808</span>
<span class="normal">2809</span>
<span class="normal">2810</span>
<span class="normal">2811</span>
<span class="normal">2812</span>
<span class="normal">2813</span>
<span class="normal">2814</span>
<span class="normal">2815</span>
<span class="normal">2816</span>
<span class="normal">2817</span>
<span class="normal">2818</span>
<span class="normal">2819</span>
<span class="normal">2820</span>
<span class="normal">2821</span>
<span class="normal">2822</span>
<span class="normal">2823</span>
<span class="normal">2824</span>
<span class="normal">2825</span>
<span class="normal">2826</span>
<span class="normal">2827</span>
<span class="normal">2828</span>
<span class="normal">2829</span>
<span class="normal">2830</span>
<span class="normal">2831</span>
<span class="normal">2832</span>
<span class="normal">2833</span>
<span class="normal">2834</span>
<span class="normal">2835</span>
<span class="normal">2836</span>
<span class="normal">2837</span>
<span class="normal">2838</span>
<span class="normal">2839</span>
<span class="normal">2840</span>
<span class="normal">2841</span>
<span class="normal">2842</span>
<span class="normal">2843</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">style_layer_interact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Widget</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a layer widget for changing the visibility and opacity of a style layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str): The is of the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidgets.Widget: The layer widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">layer_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">layer_ids</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">layer_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_ids</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
    <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">}</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">layer_ids</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Layer&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
        <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">visibility</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">opacity_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Opacity&quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_rgb</span><span class="p">(</span><span class="n">rgba_string</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>

        <span class="c1"># Extracting the RGB values using regex</span>
        <span class="n">rgb_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">rgba_string</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">rgb_tuple</span>

    <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">color_picker</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ColorPicker</span><span class="p">(</span>
        <span class="n">concise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">color_picker_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>

    <span class="n">color_picker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">color_picker_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">hbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="p">,</span> <span class="n">color_picker</span><span class="p">],</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">dropdown_event</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">change</span><span class="o">.</span><span class="n">new</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">layer_type</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>

        <span class="n">visibility</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visibility</span> <span class="o">==</span> <span class="s2">&quot;visible&quot;</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">visibility</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">visibility</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">opacity</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;paint&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-color&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;rgba&quot;</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">extract_rgb</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">color</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">color</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
            <span class="n">color_picker</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">dropdown_event</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_layer</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_property</span><span class="p">(</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span> <span class="k">if</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;none&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_paint_property</span><span class="p">(</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">-opacity&quot;</span><span class="p">,</span> <span class="n">opacity_slider</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>

    <span class="n">checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">opacity_slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_layer</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hbox</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.to_html" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_html</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Awesome Map&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">replace_key</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">remove_port</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.to_html" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Render the map to an HTML page.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>output</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The output HTML file. If None, the HTML content
is returned as a string. Defaults</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the HTML page. Defaults to 'My Awesome Map'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;My Awesome Map&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the map. Defaults to '100%'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;100%&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map. Defaults to '100%'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;100%&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>replace_key</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to replace the API key in the HTML.
If True, the API key is replaced with the public API key.
The API key is read from the environment variable <code>MAPTILER_KEY</code>.
The public API key is read from the environment variable <code>MAPTILER_KEY_PUBLIC</code>.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remove_port</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to remove the port number from the HTML.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>preview</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to preview the HTML file in a web browser.
Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overwrite</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to overwrite the output file if it already exists.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that are passed to the
<code>maplibre.ipywidget.MapWidget.to_html()</code> method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTML content of the map.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2415</span>
<span class="normal">2416</span>
<span class="normal">2417</span>
<span class="normal">2418</span>
<span class="normal">2419</span>
<span class="normal">2420</span>
<span class="normal">2421</span>
<span class="normal">2422</span>
<span class="normal">2423</span>
<span class="normal">2424</span>
<span class="normal">2425</span>
<span class="normal">2426</span>
<span class="normal">2427</span>
<span class="normal">2428</span>
<span class="normal">2429</span>
<span class="normal">2430</span>
<span class="normal">2431</span>
<span class="normal">2432</span>
<span class="normal">2433</span>
<span class="normal">2434</span>
<span class="normal">2435</span>
<span class="normal">2436</span>
<span class="normal">2437</span>
<span class="normal">2438</span>
<span class="normal">2439</span>
<span class="normal">2440</span>
<span class="normal">2441</span>
<span class="normal">2442</span>
<span class="normal">2443</span>
<span class="normal">2444</span>
<span class="normal">2445</span>
<span class="normal">2446</span>
<span class="normal">2447</span>
<span class="normal">2448</span>
<span class="normal">2449</span>
<span class="normal">2450</span>
<span class="normal">2451</span>
<span class="normal">2452</span>
<span class="normal">2453</span>
<span class="normal">2454</span>
<span class="normal">2455</span>
<span class="normal">2456</span>
<span class="normal">2457</span>
<span class="normal">2458</span>
<span class="normal">2459</span>
<span class="normal">2460</span>
<span class="normal">2461</span>
<span class="normal">2462</span>
<span class="normal">2463</span>
<span class="normal">2464</span>
<span class="normal">2465</span>
<span class="normal">2466</span>
<span class="normal">2467</span>
<span class="normal">2468</span>
<span class="normal">2469</span>
<span class="normal">2470</span>
<span class="normal">2471</span>
<span class="normal">2472</span>
<span class="normal">2473</span>
<span class="normal">2474</span>
<span class="normal">2475</span>
<span class="normal">2476</span>
<span class="normal">2477</span>
<span class="normal">2478</span>
<span class="normal">2479</span>
<span class="normal">2480</span>
<span class="normal">2481</span>
<span class="normal">2482</span>
<span class="normal">2483</span>
<span class="normal">2484</span>
<span class="normal">2485</span>
<span class="normal">2486</span>
<span class="normal">2487</span>
<span class="normal">2488</span>
<span class="normal">2489</span>
<span class="normal">2490</span>
<span class="normal">2491</span>
<span class="normal">2492</span>
<span class="normal">2493</span>
<span class="normal">2494</span>
<span class="normal">2495</span>
<span class="normal">2496</span>
<span class="normal">2497</span>
<span class="normal">2498</span>
<span class="normal">2499</span>
<span class="normal">2500</span>
<span class="normal">2501</span>
<span class="normal">2502</span>
<span class="normal">2503</span>
<span class="normal">2504</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;My Awesome Map&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">,</span>
    <span class="n">replace_key</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">remove_port</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Render the map to an HTML page.</span>

<span class="sd">    Args:</span>
<span class="sd">        output (str, optional): The output HTML file. If None, the HTML content</span>
<span class="sd">            is returned as a string. Defaults</span>
<span class="sd">        title (str, optional): The title of the HTML page. Defaults to &#39;My Awesome Map&#39;.</span>
<span class="sd">        width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">        height (str, optional): The height of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">        replace_key (bool, optional): Whether to replace the API key in the HTML.</span>
<span class="sd">            If True, the API key is replaced with the public API key.</span>
<span class="sd">            The API key is read from the environment variable `MAPTILER_KEY`.</span>
<span class="sd">            The public API key is read from the environment variable `MAPTILER_KEY_PUBLIC`.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        remove_port (bool, optional): Whether to remove the port number from the HTML.</span>
<span class="sd">        preview (bool, optional): Whether to preview the HTML file in a web browser.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        overwrite (bool, optional): Whether to overwrite the output file if it already exists.</span>
<span class="sd">        **kwargs: Additional keyword arguments that are passed to the</span>
<span class="sd">            `maplibre.ipywidget.MapWidget.to_html()` method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The HTML content of the map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">height</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">px&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">px&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;style&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;style&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">style_before</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="n">style_after</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;html, body {height: 100%; margin: 0; padding: 0;} #pymaplibregl {width: 100%; height: &quot;&quot;&quot;</span>
            <span class="o">+</span> <span class="n">height</span>
            <span class="o">+</span> <span class="s2">&quot;&quot;&quot;;}</span><span class="se">\n</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">style_before</span><span class="p">,</span> <span class="n">style_after</span><span class="p">)</span>

        <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;width: 100%; height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">div_after</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

        <span class="n">div_before</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div id=&quot;pymaplibregl&quot; style=&quot;height: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">;&quot;&gt;&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">div_before</span><span class="p">,</span> <span class="n">div_after</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">replace_key</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPTILER_REPLACE_KEY&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">key_before</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>
        <span class="n">key_after</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY_PUBLIC&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key_after</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">key_before</span><span class="p">,</span> <span class="n">key_after</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">remove_port</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">remove_port_from_string</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;MAPLIBRE_OUTPUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">glob</span>

            <span class="n">num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;*.html&quot;</span><span class="p">)))</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">preview</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">webbrowser</span>

            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">html</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.to_solara" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_solara</span><span class="p">(</span><span class="n">map_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.to_solara" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Converts the widget to a Solara widget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>map_only</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to only return the map widget. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6381</span>
<span class="normal">6382</span>
<span class="normal">6383</span>
<span class="normal">6384</span>
<span class="normal">6385</span>
<span class="normal">6386</span>
<span class="normal">6387</span>
<span class="normal">6388</span>
<span class="normal">6389</span>
<span class="normal">6390</span>
<span class="normal">6391</span>
<span class="normal">6392</span>
<span class="normal">6393</span>
<span class="normal">6394</span>
<span class="normal">6395</span>
<span class="normal">6396</span>
<span class="normal">6397</span>
<span class="normal">6398</span>
<span class="normal">6399</span>
<span class="normal">6400</span>
<span class="normal">6401</span>
<span class="normal">6402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_solara</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">map_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the widget to a Solara widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        map_only (bool, optional): Whether to only return the map widget. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">reacton.ipyvuetify</span> <span class="k">as</span> <span class="nn">rv</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;solara is not installed. Please install it with `pip install solara`.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">map_only</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_container</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rv</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.to_streamlit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_streamlit</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.to_streamlit" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Convert the map to a Streamlit component.</p>
<p>This function converts the map to a Streamlit component by encoding the
HTML representation of the map as base64 and embedding it in an iframe.
The width, height, and scrolling parameters control the appearance of
the iframe.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the iframe. If None, the width
will be determined by Streamlit.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the iframe. Default is 600.</p>
              </div>
            </td>
            <td>
                  <code>600</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scrolling</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the iframe should be scrollable.
Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments to pass to the Streamlit iframe
function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Streamlit component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is an error in creating the Streamlit component.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3437</span>
<span class="normal">3438</span>
<span class="normal">3439</span>
<span class="normal">3440</span>
<span class="normal">3441</span>
<span class="normal">3442</span>
<span class="normal">3443</span>
<span class="normal">3444</span>
<span class="normal">3445</span>
<span class="normal">3446</span>
<span class="normal">3447</span>
<span class="normal">3448</span>
<span class="normal">3449</span>
<span class="normal">3450</span>
<span class="normal">3451</span>
<span class="normal">3452</span>
<span class="normal">3453</span>
<span class="normal">3454</span>
<span class="normal">3455</span>
<span class="normal">3456</span>
<span class="normal">3457</span>
<span class="normal">3458</span>
<span class="normal">3459</span>
<span class="normal">3460</span>
<span class="normal">3461</span>
<span class="normal">3462</span>
<span class="normal">3463</span>
<span class="normal">3464</span>
<span class="normal">3465</span>
<span class="normal">3466</span>
<span class="normal">3467</span>
<span class="normal">3468</span>
<span class="normal">3469</span>
<span class="normal">3470</span>
<span class="normal">3471</span>
<span class="normal">3472</span>
<span class="normal">3473</span>
<span class="normal">3474</span>
<span class="normal">3475</span>
<span class="normal">3476</span>
<span class="normal">3477</span>
<span class="normal">3478</span>
<span class="normal">3479</span>
<span class="normal">3480</span>
<span class="normal">3481</span>
<span class="normal">3482</span>
<span class="normal">3483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
    <span class="n">scrolling</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the map to a Streamlit component.</span>

<span class="sd">    This function converts the map to a Streamlit component by encoding the</span>
<span class="sd">    HTML representation of the map as base64 and embedding it in an iframe.</span>
<span class="sd">    The width, height, and scrolling parameters control the appearance of</span>
<span class="sd">    the iframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (Optional[int]): The width of the iframe. If None, the width</span>
<span class="sd">            will be determined by Streamlit.</span>
<span class="sd">        height (Optional[int]): The height of the iframe. Default is 600.</span>
<span class="sd">        scrolling (Optional[bool]): Whether the iframe should be scrollable.</span>
<span class="sd">            Default is False.</span>
<span class="sd">        **kwargs (Any): Additional arguments to pass to the Streamlit iframe</span>
<span class="sd">            function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The Streamlit component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If there is an error in creating the Streamlit component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">base64</span>

        <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>  <span class="c1"># pylint: disable=E0401</span>

        <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">raw_html</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">iframe</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;data:text/html;base64,</span><span class="si">{</span><span class="n">raw_html</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.unobserve_mapillary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unobserve_mapillary</span><span class="p">()</span></code>

<a href="#leafmap.maplibregl.Map.unobserve_mapillary" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Unobserves the mapillary street view.</p>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6734</span>
<span class="normal">6735</span>
<span class="normal">6736</span>
<span class="normal">6737</span>
<span class="normal">6738</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">unobserve_mapillary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unobserves the mapillary street view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unobserve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mapillary_function</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.user_roi_bounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">user_roi_bounds</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.user_roi_bounds" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Gets the bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>decimals</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of decimals to round the coordinates to. Defaults to 4.</p>
              </div>
            </td>
            <td>
                  <code>4</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="list">list</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[list]: The bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy), or None if no ROI is drawn.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6086</span>
<span class="normal">6087</span>
<span class="normal">6088</span>
<span class="normal">6089</span>
<span class="normal">6090</span>
<span class="normal">6091</span>
<span class="normal">6092</span>
<span class="normal">6093</span>
<span class="normal">6094</span>
<span class="normal">6095</span>
<span class="normal">6096</span>
<span class="normal">6097</span>
<span class="normal">6098</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">user_roi_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy).</span>

<span class="sd">    Args:</span>
<span class="sd">        decimals (int, optional): The number of decimals to round the coordinates to. Defaults to 4.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[list]: The bounds of the user drawn ROI as a tuple of (minx, miny, maxx, maxy), or None if no ROI is drawn.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">common</span><span class="o">.</span><span class="n">geometry_bounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.Map.zoom_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">zoom_to</span><span class="p">(</span><span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.Map.zoom_to" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Zooms the map to a specified zoom level.</p>
<p>This function zooms the map to the specified zoom level. Additional options and keyword
arguments can be provided to control the zoom. For more information, see
https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>zoom</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zoom level to zoom to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>options</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional options to control the zoom. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to control the zoom.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3727</span>
<span class="normal">3728</span>
<span class="normal">3729</span>
<span class="normal">3730</span>
<span class="normal">3731</span>
<span class="normal">3732</span>
<span class="normal">3733</span>
<span class="normal">3734</span>
<span class="normal">3735</span>
<span class="normal">3736</span>
<span class="normal">3737</span>
<span class="normal">3738</span>
<span class="normal">3739</span>
<span class="normal">3740</span>
<span class="normal">3741</span>
<span class="normal">3742</span>
<span class="normal">3743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Zooms the map to a specified zoom level.</span>

<span class="sd">    This function zooms the map to the specified zoom level. Additional options and keyword</span>
<span class="sd">    arguments can be provided to control the zoom. For more information, see</span>
<span class="sd">    https://maplibre.org/maplibre-gl-js/docs/API/classes/Map/#zoomto</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (float): The zoom level to zoom to.</span>
<span class="sd">        options (Dict[str, Any], optional): Additional options to control the zoom. Defaults to {}.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments to control the zoom.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_call</span><span class="p">(</span><span class="s2">&quot;zoomTo&quot;</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="leafmap.maplibregl.SelectDataWidget" class="doc doc-heading">
            <code>SelectDataWidget</code>


<a href="#leafmap.maplibregl.SelectDataWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ipywidgets.VBox">VBox</span></code></p>


        <p>A widget for selecting and uploading data to be added to a map.</p>
<p>This widget allows users to select a folder or upload files to be added to a map.
It includes a folder chooser, a file uploader, and buttons to apply or reset the selection.</p>








              <details class="quote">
                <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10208</span>
<span class="normal">10209</span>
<span class="normal">10210</span>
<span class="normal">10211</span>
<span class="normal">10212</span>
<span class="normal">10213</span>
<span class="normal">10214</span>
<span class="normal">10215</span>
<span class="normal">10216</span>
<span class="normal">10217</span>
<span class="normal">10218</span>
<span class="normal">10219</span>
<span class="normal">10220</span>
<span class="normal">10221</span>
<span class="normal">10222</span>
<span class="normal">10223</span>
<span class="normal">10224</span>
<span class="normal">10225</span>
<span class="normal">10226</span>
<span class="normal">10227</span>
<span class="normal">10228</span>
<span class="normal">10229</span>
<span class="normal">10230</span>
<span class="normal">10231</span>
<span class="normal">10232</span>
<span class="normal">10233</span>
<span class="normal">10234</span>
<span class="normal">10235</span>
<span class="normal">10236</span>
<span class="normal">10237</span>
<span class="normal">10238</span>
<span class="normal">10239</span>
<span class="normal">10240</span>
<span class="normal">10241</span>
<span class="normal">10242</span>
<span class="normal">10243</span>
<span class="normal">10244</span>
<span class="normal">10245</span>
<span class="normal">10246</span>
<span class="normal">10247</span>
<span class="normal">10248</span>
<span class="normal">10249</span>
<span class="normal">10250</span>
<span class="normal">10251</span>
<span class="normal">10252</span>
<span class="normal">10253</span>
<span class="normal">10254</span>
<span class="normal">10255</span>
<span class="normal">10256</span>
<span class="normal">10257</span>
<span class="normal">10258</span>
<span class="normal">10259</span>
<span class="normal">10260</span>
<span class="normal">10261</span>
<span class="normal">10262</span>
<span class="normal">10263</span>
<span class="normal">10264</span>
<span class="normal">10265</span>
<span class="normal">10266</span>
<span class="normal">10267</span>
<span class="normal">10268</span>
<span class="normal">10269</span>
<span class="normal">10270</span>
<span class="normal">10271</span>
<span class="normal">10272</span>
<span class="normal">10273</span>
<span class="normal">10274</span>
<span class="normal">10275</span>
<span class="normal">10276</span>
<span class="normal">10277</span>
<span class="normal">10278</span>
<span class="normal">10279</span>
<span class="normal">10280</span>
<span class="normal">10281</span>
<span class="normal">10282</span>
<span class="normal">10283</span>
<span class="normal">10284</span>
<span class="normal">10285</span>
<span class="normal">10286</span>
<span class="normal">10287</span>
<span class="normal">10288</span>
<span class="normal">10289</span>
<span class="normal">10290</span>
<span class="normal">10291</span>
<span class="normal">10292</span>
<span class="normal">10293</span>
<span class="normal">10294</span>
<span class="normal">10295</span>
<span class="normal">10296</span>
<span class="normal">10297</span>
<span class="normal">10298</span>
<span class="normal">10299</span>
<span class="normal">10300</span>
<span class="normal">10301</span>
<span class="normal">10302</span>
<span class="normal">10303</span>
<span class="normal">10304</span>
<span class="normal">10305</span>
<span class="normal">10306</span>
<span class="normal">10307</span>
<span class="normal">10308</span>
<span class="normal">10309</span>
<span class="normal">10310</span>
<span class="normal">10311</span>
<span class="normal">10312</span>
<span class="normal">10313</span>
<span class="normal">10314</span>
<span class="normal">10315</span>
<span class="normal">10316</span>
<span class="normal">10317</span>
<span class="normal">10318</span>
<span class="normal">10319</span>
<span class="normal">10320</span>
<span class="normal">10321</span>
<span class="normal">10322</span>
<span class="normal">10323</span>
<span class="normal">10324</span>
<span class="normal">10325</span>
<span class="normal">10326</span>
<span class="normal">10327</span>
<span class="normal">10328</span>
<span class="normal">10329</span>
<span class="normal">10330</span>
<span class="normal">10331</span>
<span class="normal">10332</span>
<span class="normal">10333</span>
<span class="normal">10334</span>
<span class="normal">10335</span>
<span class="normal">10336</span>
<span class="normal">10337</span>
<span class="normal">10338</span>
<span class="normal">10339</span>
<span class="normal">10340</span>
<span class="normal">10341</span>
<span class="normal">10342</span>
<span class="normal">10343</span>
<span class="normal">10344</span>
<span class="normal">10345</span>
<span class="normal">10346</span>
<span class="normal">10347</span>
<span class="normal">10348</span>
<span class="normal">10349</span>
<span class="normal">10350</span>
<span class="normal">10351</span>
<span class="normal">10352</span>
<span class="normal">10353</span>
<span class="normal">10354</span>
<span class="normal">10355</span>
<span class="normal">10356</span>
<span class="normal">10357</span>
<span class="normal">10358</span>
<span class="normal">10359</span>
<span class="normal">10360</span>
<span class="normal">10361</span>
<span class="normal">10362</span>
<span class="normal">10363</span>
<span class="normal">10364</span>
<span class="normal">10365</span>
<span class="normal">10366</span>
<span class="normal">10367</span>
<span class="normal">10368</span>
<span class="normal">10369</span>
<span class="normal">10370</span>
<span class="normal">10371</span>
<span class="normal">10372</span>
<span class="normal">10373</span>
<span class="normal">10374</span>
<span class="normal">10375</span>
<span class="normal">10376</span>
<span class="normal">10377</span>
<span class="normal">10378</span>
<span class="normal">10379</span>
<span class="normal">10380</span>
<span class="normal">10381</span>
<span class="normal">10382</span>
<span class="normal">10383</span>
<span class="normal">10384</span>
<span class="normal">10385</span>
<span class="normal">10386</span>
<span class="normal">10387</span>
<span class="normal">10388</span>
<span class="normal">10389</span>
<span class="normal">10390</span>
<span class="normal">10391</span>
<span class="normal">10392</span>
<span class="normal">10393</span>
<span class="normal">10394</span>
<span class="normal">10395</span>
<span class="normal">10396</span>
<span class="normal">10397</span>
<span class="normal">10398</span>
<span class="normal">10399</span>
<span class="normal">10400</span>
<span class="normal">10401</span>
<span class="normal">10402</span>
<span class="normal">10403</span>
<span class="normal">10404</span>
<span class="normal">10405</span>
<span class="normal">10406</span>
<span class="normal">10407</span>
<span class="normal">10408</span>
<span class="normal">10409</span>
<span class="normal">10410</span>
<span class="normal">10411</span>
<span class="normal">10412</span>
<span class="normal">10413</span>
<span class="normal">10414</span>
<span class="normal">10415</span>
<span class="normal">10416</span>
<span class="normal">10417</span>
<span class="normal">10418</span>
<span class="normal">10419</span>
<span class="normal">10420</span>
<span class="normal">10421</span>
<span class="normal">10422</span>
<span class="normal">10423</span>
<span class="normal">10424</span>
<span class="normal">10425</span>
<span class="normal">10426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SelectDataWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A widget for selecting and uploading data to be added to a map.</span>

<span class="sd">    This widget allows users to select a folder or upload files to be added to a map.</span>
<span class="sd">    It includes a folder chooser, a file uploader, and buttons to apply or reset the selection.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">default_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
        <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;360px&quot;</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reset_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">map_widget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Map</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the SelectDataWidget.</span>

<span class="sd">        Args:</span>
<span class="sd">            default_path (str, optional): The default path for the folder chooser. Defaults to &quot;.&quot;.</span>
<span class="sd">            widget_width (str, optional): The width of the widget. Defaults to &quot;360px&quot;.</span>
<span class="sd">            callback (Optional[Callable[[str], None]], optional): A callback function</span>
<span class="sd">                to be called when data is applied. Defaults to None.</span>
<span class="sd">            reset_callback (Optional[Callable[[], None]], optional): A callback function</span>
<span class="sd">                to be called when the selection is reset. Defaults to None.</span>
<span class="sd">            map_widget (Optional[Map], optional): The map widget to which the data will be added. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tempfile</span>

        <span class="kn">import</span> <span class="nn">ipyfilechooser</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">max_width</span><span class="o">=</span><span class="n">widget_width</span><span class="p">))</span>

        <span class="n">temp_dirs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">source_names</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_names</span> <span class="o">=</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">layer_names</span>
            <span class="n">source_names</span> <span class="o">=</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">source_names</span>

        <span class="n">folder_chooser</span> <span class="o">=</span> <span class="n">ipyfilechooser</span><span class="o">.</span><span class="n">FileChooser</span><span class="p">(</span>
            <span class="n">default_path</span><span class="o">=</span><span class="n">default_path</span><span class="p">,</span>
            <span class="n">select_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">show_only_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">select_desc</span><span class="o">=</span><span class="s2">&quot;Select Folder&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">_select</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s2">&quot;100px&quot;</span>
        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">_select</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;100px&quot;</span>

        <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
            <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson,.json,.parquet,.csv,.shp,dbf,shx,prj,.gpkg&quot;</span><span class="p">,</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Upload&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Uploading ...&quot;</span><span class="p">)</span>
            <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">)</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Click Apply to add files to map&quot;</span><span class="p">)</span>

        <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_folder_chooser_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">folder_chooser</span><span class="o">.</span><span class="n">selected</span><span class="p">)</span>

        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">register_callback</span><span class="p">(</span><span class="n">on_folder_chooser_change</span><span class="p">)</span>

        <span class="n">apply_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Apply&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Apply selection&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;80px&quot;</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">default_callback</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The default callback function to add data to the map.</span>

<span class="sd">            This function is called when the Apply button is clicked. It finds</span>
<span class="sd">                all .geojson files in the selected directory,</span>
<span class="sd">            adds them to the map, and fits the bounds to the first file.</span>

<span class="sd">            Args:</span>
<span class="sd">                temp_dir (str): The temporary directory containing the uploaded files.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">files</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                        <span class="n">source_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">map_widget</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                            <span class="n">file</span><span class="p">,</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span>
                            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
                            <span class="n">fit_bounds_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
                            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

        <span class="k">def</span> <span class="nf">on_apply</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Handles the Apply button click event.</span>

<span class="sd">            This function checks if there are any temporary directories containing</span>
<span class="sd">                uploaded files. If there are, it calls the callback function</span>
<span class="sd">            (either the default or a custom one) to add the data to the map. If not,</span>
<span class="sd">                it prompts the user to select a folder or upload files.</span>

<span class="sd">            Args:</span>
<span class="sd">                change (Any): The change event triggered by the Apply button click.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                        <span class="n">default_callback</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Select a folder or upload files&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                            <span class="n">callback</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Select a folder or upload files&quot;</span><span class="p">)</span>

            <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="n">apply_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_apply</span><span class="p">)</span>

        <span class="n">reset_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Clear selection&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;80px&quot;</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">on_reset</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Handles the Reset button click event.</span>

<span class="sd">            This function resets the folder chooser and uploader, clears the temporary</span>
<span class="sd">            directories, and removes any layers or sources not in the original list.</span>
<span class="sd">            If a reset callback function is provided, it calls that function.</span>

<span class="sd">            Args:</span>
<span class="sd">                change (Any): The change event triggered by the Reset button click.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
                        <span class="n">map_widget</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">source_name</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">source_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">source_names</span><span class="p">:</span>
                        <span class="n">map_widget</span><span class="o">.</span><span class="n">remove_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">reset_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">reset_callback</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

        <span class="n">reset_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset</span><span class="p">)</span>
        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">widget_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">-</span> <span class="mi">60</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">folder_chooser</span><span class="p">,</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">uploader</span><span class="p">,</span> <span class="n">apply_btn</span><span class="p">,</span> <span class="n">reset_btn</span><span class="p">]),</span>
            <span class="n">output</span><span class="p">,</span>
        <span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="leafmap.maplibregl.SelectDataWidget.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">default_path</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">widget_width</span><span class="o">=</span><span class="s1">&#39;360px&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reset_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">map_widget</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.SelectDataWidget.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes the SelectDataWidget.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>default_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default path for the folder chooser. Defaults to ".".</p>
              </div>
            </td>
            <td>
                  <code>&#39;.&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the widget. Defaults to "360px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;360px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[<span title="str">str</span>], None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function
to be called when data is applied. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reset_callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>[[], None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function
to be called when the selection is reset. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_widget</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map widget to which the data will be added. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10216</span>
<span class="normal">10217</span>
<span class="normal">10218</span>
<span class="normal">10219</span>
<span class="normal">10220</span>
<span class="normal">10221</span>
<span class="normal">10222</span>
<span class="normal">10223</span>
<span class="normal">10224</span>
<span class="normal">10225</span>
<span class="normal">10226</span>
<span class="normal">10227</span>
<span class="normal">10228</span>
<span class="normal">10229</span>
<span class="normal">10230</span>
<span class="normal">10231</span>
<span class="normal">10232</span>
<span class="normal">10233</span>
<span class="normal">10234</span>
<span class="normal">10235</span>
<span class="normal">10236</span>
<span class="normal">10237</span>
<span class="normal">10238</span>
<span class="normal">10239</span>
<span class="normal">10240</span>
<span class="normal">10241</span>
<span class="normal">10242</span>
<span class="normal">10243</span>
<span class="normal">10244</span>
<span class="normal">10245</span>
<span class="normal">10246</span>
<span class="normal">10247</span>
<span class="normal">10248</span>
<span class="normal">10249</span>
<span class="normal">10250</span>
<span class="normal">10251</span>
<span class="normal">10252</span>
<span class="normal">10253</span>
<span class="normal">10254</span>
<span class="normal">10255</span>
<span class="normal">10256</span>
<span class="normal">10257</span>
<span class="normal">10258</span>
<span class="normal">10259</span>
<span class="normal">10260</span>
<span class="normal">10261</span>
<span class="normal">10262</span>
<span class="normal">10263</span>
<span class="normal">10264</span>
<span class="normal">10265</span>
<span class="normal">10266</span>
<span class="normal">10267</span>
<span class="normal">10268</span>
<span class="normal">10269</span>
<span class="normal">10270</span>
<span class="normal">10271</span>
<span class="normal">10272</span>
<span class="normal">10273</span>
<span class="normal">10274</span>
<span class="normal">10275</span>
<span class="normal">10276</span>
<span class="normal">10277</span>
<span class="normal">10278</span>
<span class="normal">10279</span>
<span class="normal">10280</span>
<span class="normal">10281</span>
<span class="normal">10282</span>
<span class="normal">10283</span>
<span class="normal">10284</span>
<span class="normal">10285</span>
<span class="normal">10286</span>
<span class="normal">10287</span>
<span class="normal">10288</span>
<span class="normal">10289</span>
<span class="normal">10290</span>
<span class="normal">10291</span>
<span class="normal">10292</span>
<span class="normal">10293</span>
<span class="normal">10294</span>
<span class="normal">10295</span>
<span class="normal">10296</span>
<span class="normal">10297</span>
<span class="normal">10298</span>
<span class="normal">10299</span>
<span class="normal">10300</span>
<span class="normal">10301</span>
<span class="normal">10302</span>
<span class="normal">10303</span>
<span class="normal">10304</span>
<span class="normal">10305</span>
<span class="normal">10306</span>
<span class="normal">10307</span>
<span class="normal">10308</span>
<span class="normal">10309</span>
<span class="normal">10310</span>
<span class="normal">10311</span>
<span class="normal">10312</span>
<span class="normal">10313</span>
<span class="normal">10314</span>
<span class="normal">10315</span>
<span class="normal">10316</span>
<span class="normal">10317</span>
<span class="normal">10318</span>
<span class="normal">10319</span>
<span class="normal">10320</span>
<span class="normal">10321</span>
<span class="normal">10322</span>
<span class="normal">10323</span>
<span class="normal">10324</span>
<span class="normal">10325</span>
<span class="normal">10326</span>
<span class="normal">10327</span>
<span class="normal">10328</span>
<span class="normal">10329</span>
<span class="normal">10330</span>
<span class="normal">10331</span>
<span class="normal">10332</span>
<span class="normal">10333</span>
<span class="normal">10334</span>
<span class="normal">10335</span>
<span class="normal">10336</span>
<span class="normal">10337</span>
<span class="normal">10338</span>
<span class="normal">10339</span>
<span class="normal">10340</span>
<span class="normal">10341</span>
<span class="normal">10342</span>
<span class="normal">10343</span>
<span class="normal">10344</span>
<span class="normal">10345</span>
<span class="normal">10346</span>
<span class="normal">10347</span>
<span class="normal">10348</span>
<span class="normal">10349</span>
<span class="normal">10350</span>
<span class="normal">10351</span>
<span class="normal">10352</span>
<span class="normal">10353</span>
<span class="normal">10354</span>
<span class="normal">10355</span>
<span class="normal">10356</span>
<span class="normal">10357</span>
<span class="normal">10358</span>
<span class="normal">10359</span>
<span class="normal">10360</span>
<span class="normal">10361</span>
<span class="normal">10362</span>
<span class="normal">10363</span>
<span class="normal">10364</span>
<span class="normal">10365</span>
<span class="normal">10366</span>
<span class="normal">10367</span>
<span class="normal">10368</span>
<span class="normal">10369</span>
<span class="normal">10370</span>
<span class="normal">10371</span>
<span class="normal">10372</span>
<span class="normal">10373</span>
<span class="normal">10374</span>
<span class="normal">10375</span>
<span class="normal">10376</span>
<span class="normal">10377</span>
<span class="normal">10378</span>
<span class="normal">10379</span>
<span class="normal">10380</span>
<span class="normal">10381</span>
<span class="normal">10382</span>
<span class="normal">10383</span>
<span class="normal">10384</span>
<span class="normal">10385</span>
<span class="normal">10386</span>
<span class="normal">10387</span>
<span class="normal">10388</span>
<span class="normal">10389</span>
<span class="normal">10390</span>
<span class="normal">10391</span>
<span class="normal">10392</span>
<span class="normal">10393</span>
<span class="normal">10394</span>
<span class="normal">10395</span>
<span class="normal">10396</span>
<span class="normal">10397</span>
<span class="normal">10398</span>
<span class="normal">10399</span>
<span class="normal">10400</span>
<span class="normal">10401</span>
<span class="normal">10402</span>
<span class="normal">10403</span>
<span class="normal">10404</span>
<span class="normal">10405</span>
<span class="normal">10406</span>
<span class="normal">10407</span>
<span class="normal">10408</span>
<span class="normal">10409</span>
<span class="normal">10410</span>
<span class="normal">10411</span>
<span class="normal">10412</span>
<span class="normal">10413</span>
<span class="normal">10414</span>
<span class="normal">10415</span>
<span class="normal">10416</span>
<span class="normal">10417</span>
<span class="normal">10418</span>
<span class="normal">10419</span>
<span class="normal">10420</span>
<span class="normal">10421</span>
<span class="normal">10422</span>
<span class="normal">10423</span>
<span class="normal">10424</span>
<span class="normal">10425</span>
<span class="normal">10426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">default_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
    <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;360px&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">reset_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">map_widget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Map</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the SelectDataWidget.</span>

<span class="sd">    Args:</span>
<span class="sd">        default_path (str, optional): The default path for the folder chooser. Defaults to &quot;.&quot;.</span>
<span class="sd">        widget_width (str, optional): The width of the widget. Defaults to &quot;360px&quot;.</span>
<span class="sd">        callback (Optional[Callable[[str], None]], optional): A callback function</span>
<span class="sd">            to be called when data is applied. Defaults to None.</span>
<span class="sd">        reset_callback (Optional[Callable[[], None]], optional): A callback function</span>
<span class="sd">            to be called when the selection is reset. Defaults to None.</span>
<span class="sd">        map_widget (Optional[Map], optional): The map widget to which the data will be added. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">tempfile</span>

    <span class="kn">import</span> <span class="nn">ipyfilechooser</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">max_width</span><span class="o">=</span><span class="n">widget_width</span><span class="p">))</span>

    <span class="n">temp_dirs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">source_names</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">layer_names</span>
        <span class="n">source_names</span> <span class="o">=</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">source_names</span>

    <span class="n">folder_chooser</span> <span class="o">=</span> <span class="n">ipyfilechooser</span><span class="o">.</span><span class="n">FileChooser</span><span class="p">(</span>
        <span class="n">default_path</span><span class="o">=</span><span class="n">default_path</span><span class="p">,</span>
        <span class="n">select_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">show_only_dirs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">select_desc</span><span class="o">=</span><span class="s2">&quot;Select Folder&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">folder_chooser</span><span class="o">.</span><span class="n">_select</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s2">&quot;100px&quot;</span>
    <span class="n">folder_chooser</span><span class="o">.</span><span class="n">_select</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;100px&quot;</span>

    <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
        <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.geojson,.json,.parquet,.csv,.shp,dbf,shx,prj,.gpkg&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Upload&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Uploading ...&quot;</span><span class="p">)</span>
        <span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Click Apply to add files to map&quot;</span><span class="p">)</span>

    <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_folder_chooser_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">folder_chooser</span><span class="o">.</span><span class="n">selected</span><span class="p">)</span>

    <span class="n">folder_chooser</span><span class="o">.</span><span class="n">register_callback</span><span class="p">(</span><span class="n">on_folder_chooser_change</span><span class="p">)</span>

    <span class="n">apply_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Apply&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Apply selection&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;80px&quot;</span><span class="p">),</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">default_callback</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The default callback function to add data to the map.</span>

<span class="sd">        This function is called when the Apply button is clicked. It finds</span>
<span class="sd">            all .geojson files in the selected directory,</span>
<span class="sd">        adds them to the map, and fits the bounds to the first file.</span>

<span class="sd">        Args:</span>
<span class="sd">            temp_dir (str): The temporary directory containing the uploaded files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fit_bounds</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                    <span class="n">source_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">map_widget</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                        <span class="n">file</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">source_name</span><span class="p">,</span>
                        <span class="n">fit_bounds</span><span class="o">=</span><span class="n">fit_bounds</span><span class="p">,</span>
                        <span class="n">fit_bounds_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;animate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
                        <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_apply</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the Apply button click event.</span>

<span class="sd">        This function checks if there are any temporary directories containing</span>
<span class="sd">            uploaded files. If there are, it calls the callback function</span>
<span class="sd">        (either the default or a custom one) to add the data to the map. If not,</span>
<span class="sd">            it prompts the user to select a folder or upload files.</span>

<span class="sd">        Args:</span>
<span class="sd">            change (Any): The change event triggered by the Apply button click.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                    <span class="n">default_callback</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Select a folder or upload files&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Adding data to the map ...&quot;</span><span class="p">)</span>
                        <span class="n">callback</span><span class="p">(</span><span class="n">temp_dirs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Select a folder or upload files&quot;</span><span class="p">)</span>

        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="n">apply_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_apply</span><span class="p">)</span>

    <span class="n">reset_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Clear selection&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;80px&quot;</span><span class="p">),</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the Reset button click event.</span>

<span class="sd">        This function resets the folder chooser and uploader, clears the temporary</span>
<span class="sd">        directories, and removes any layers or sources not in the original list.</span>
<span class="sd">        If a reset callback function is provided, it calls that function.</span>

<span class="sd">        Args:</span>
<span class="sd">            change (Any): The change event triggered by the Reset button click.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">folder_chooser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">temp_dirs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">map_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">layer_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
                    <span class="n">map_widget</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">source_name</span> <span class="ow">in</span> <span class="n">map_widget</span><span class="o">.</span><span class="n">source_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">source_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">source_names</span><span class="p">:</span>
                    <span class="n">map_widget</span><span class="o">.</span><span class="n">remove_source</span><span class="p">(</span><span class="n">source_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">reset_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">reset_callback</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">reset_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset</span><span class="p">)</span>
    <span class="n">folder_chooser</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">widget_width</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="o">-</span> <span class="mi">60</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">folder_chooser</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">uploader</span><span class="p">,</span> <span class="n">apply_btn</span><span class="p">,</span> <span class="n">reset_btn</span><span class="p">]),</span>
        <span class="n">output</span><span class="p">,</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.TimeSliderWidget" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TimeSliderWidget</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">images</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="s1">&#39;150px&#39;</span><span class="p">,</span> <span class="n">slider_width</span><span class="o">=</span><span class="s1">&#39;150px&#39;</span><span class="p">,</span> <span class="n">button_width</span><span class="o">=</span><span class="s1">&#39;45px&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.TimeSliderWidget" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Adds a time slider to the map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>images</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary containing a set of images.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of labels to be used for the time series. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_interval</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time interval in seconds. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the layer. Defaults to "Image".</p>
              </div>
            </td>
            <td>
                  <code>&#39;Image&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>zoom_to_layer</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to zoom to the extent of the layer. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the label. Defaults to "150px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;150px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slider_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the slider. Defaults to "150px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;150px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>button_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the buttons. Defaults to "45px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;45px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to be passed to the add_raster or add_cog_layer function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10429</span>
<span class="normal">10430</span>
<span class="normal">10431</span>
<span class="normal">10432</span>
<span class="normal">10433</span>
<span class="normal">10434</span>
<span class="normal">10435</span>
<span class="normal">10436</span>
<span class="normal">10437</span>
<span class="normal">10438</span>
<span class="normal">10439</span>
<span class="normal">10440</span>
<span class="normal">10441</span>
<span class="normal">10442</span>
<span class="normal">10443</span>
<span class="normal">10444</span>
<span class="normal">10445</span>
<span class="normal">10446</span>
<span class="normal">10447</span>
<span class="normal">10448</span>
<span class="normal">10449</span>
<span class="normal">10450</span>
<span class="normal">10451</span>
<span class="normal">10452</span>
<span class="normal">10453</span>
<span class="normal">10454</span>
<span class="normal">10455</span>
<span class="normal">10456</span>
<span class="normal">10457</span>
<span class="normal">10458</span>
<span class="normal">10459</span>
<span class="normal">10460</span>
<span class="normal">10461</span>
<span class="normal">10462</span>
<span class="normal">10463</span>
<span class="normal">10464</span>
<span class="normal">10465</span>
<span class="normal">10466</span>
<span class="normal">10467</span>
<span class="normal">10468</span>
<span class="normal">10469</span>
<span class="normal">10470</span>
<span class="normal">10471</span>
<span class="normal">10472</span>
<span class="normal">10473</span>
<span class="normal">10474</span>
<span class="normal">10475</span>
<span class="normal">10476</span>
<span class="normal">10477</span>
<span class="normal">10478</span>
<span class="normal">10479</span>
<span class="normal">10480</span>
<span class="normal">10481</span>
<span class="normal">10482</span>
<span class="normal">10483</span>
<span class="normal">10484</span>
<span class="normal">10485</span>
<span class="normal">10486</span>
<span class="normal">10487</span>
<span class="normal">10488</span>
<span class="normal">10489</span>
<span class="normal">10490</span>
<span class="normal">10491</span>
<span class="normal">10492</span>
<span class="normal">10493</span>
<span class="normal">10494</span>
<span class="normal">10495</span>
<span class="normal">10496</span>
<span class="normal">10497</span>
<span class="normal">10498</span>
<span class="normal">10499</span>
<span class="normal">10500</span>
<span class="normal">10501</span>
<span class="normal">10502</span>
<span class="normal">10503</span>
<span class="normal">10504</span>
<span class="normal">10505</span>
<span class="normal">10506</span>
<span class="normal">10507</span>
<span class="normal">10508</span>
<span class="normal">10509</span>
<span class="normal">10510</span>
<span class="normal">10511</span>
<span class="normal">10512</span>
<span class="normal">10513</span>
<span class="normal">10514</span>
<span class="normal">10515</span>
<span class="normal">10516</span>
<span class="normal">10517</span>
<span class="normal">10518</span>
<span class="normal">10519</span>
<span class="normal">10520</span>
<span class="normal">10521</span>
<span class="normal">10522</span>
<span class="normal">10523</span>
<span class="normal">10524</span>
<span class="normal">10525</span>
<span class="normal">10526</span>
<span class="normal">10527</span>
<span class="normal">10528</span>
<span class="normal">10529</span>
<span class="normal">10530</span>
<span class="normal">10531</span>
<span class="normal">10532</span>
<span class="normal">10533</span>
<span class="normal">10534</span>
<span class="normal">10535</span>
<span class="normal">10536</span>
<span class="normal">10537</span>
<span class="normal">10538</span>
<span class="normal">10539</span>
<span class="normal">10540</span>
<span class="normal">10541</span>
<span class="normal">10542</span>
<span class="normal">10543</span>
<span class="normal">10544</span>
<span class="normal">10545</span>
<span class="normal">10546</span>
<span class="normal">10547</span>
<span class="normal">10548</span>
<span class="normal">10549</span>
<span class="normal">10550</span>
<span class="normal">10551</span>
<span class="normal">10552</span>
<span class="normal">10553</span>
<span class="normal">10554</span>
<span class="normal">10555</span>
<span class="normal">10556</span>
<span class="normal">10557</span>
<span class="normal">10558</span>
<span class="normal">10559</span>
<span class="normal">10560</span>
<span class="normal">10561</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">TimeSliderWidget</span><span class="p">(</span>
    <span class="n">m</span><span class="p">,</span>
    <span class="n">images</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Image&quot;</span><span class="p">,</span>
    <span class="n">zoom_to_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">label_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
    <span class="n">slider_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span><span class="p">,</span>
    <span class="n">button_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;45px&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a time slider to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        images (dict, optional): The dictionary containing a set of images.</span>
<span class="sd">        labels (list, optional): The list of labels to be used for the time series. Defaults to None.</span>
<span class="sd">        time_interval (int, optional): Time interval in seconds. Defaults to 1.</span>
<span class="sd">        layer_name (str, optional): The name of the layer. Defaults to &quot;Image&quot;.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the extent of the layer. Defaults to False.</span>
<span class="sd">        label_width (str, optional): Width of the label. Defaults to &quot;150px&quot;.</span>
<span class="sd">        slider_width (str, optional): Width of the slider. Defaults to &quot;150px&quot;.</span>
<span class="sd">        button_width (str, optional): Width of the buttons. Defaults to &quot;45px&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments to be passed to the add_raster or add_cog_layer function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">threading</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">images</span> <span class="o">=</span> <span class="n">find_files</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s2">&quot;*.tif&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The length of labels is not equal to that of layers.&quot;</span><span class="p">)</span>

    <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">slider_width</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 5px 0px 5px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">label_width</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">play_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;play&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Play the time slider&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">button_width</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">pause_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Pause the time slider&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">button_width</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">play_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">slider_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">label</span><span class="p">,</span> <span class="n">slider</span><span class="p">,</span> <span class="n">play_btn</span><span class="p">,</span> <span class="n">pause_btn</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">play_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">work</span><span class="p">(</span><span class="n">slider</span><span class="p">):</span>
            <span class="k">while</span> <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">time_interval</span><span class="p">)</span>

        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">slider</span><span class="p">,))</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pause_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">play_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">play_click</span><span class="p">)</span>
    <span class="n">pause_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">pause_click</span><span class="p">)</span>

    <span class="n">first_image</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_image</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">first_image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span>
            <span class="n">first_image</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">zoom_to_layer</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
            <span class="n">first_image</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">fit_bounds</span><span class="o">=</span><span class="n">zoom_to_layer</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">slider_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">images</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">m</span><span class="o">.</span><span class="n">add_cog_layer</span><span class="p">(</span>
                    <span class="n">images</span><span class="p">[</span><span class="n">index</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
                    <span class="n">images</span><span class="p">[</span><span class="n">index</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">slider_changed</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">slider_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.construct_amazon_style" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_amazon_style</span><span class="p">(</span><span class="n">map_style</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s1">&#39;AWS_MAPS_API_KEY&#39;</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.construct_amazon_style" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Constructs a URL for an Amazon Map style.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>map_style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MapTiler style to be accessed. It can be one of the following:
standard, monochrome, satellite, hybrid.</p>
              </div>
            </td>
            <td>
                  <code>&#39;standard&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>region</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The region of the Amazon Map. It can be one of the following:
us-east-1, us-west-2, eu-central-1, eu-west-1, ap-northeast-1, ap-northeast-2, ap-southeast-1, etc.</p>
              </div>
            </td>
            <td>
                  <code>&#39;us-east-1&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key for the Amazon Map. If None, the function attempts to retrieve the API key using a predefined method.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The token for the Amazon Map. If None, the function attempts to retrieve the API key using a predefined method.</p>
              </div>
            </td>
            <td>
                  <code>&#39;AWS_MAPS_API_KEY&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL for the requested Amazon Map style.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7407</span>
<span class="normal">7408</span>
<span class="normal">7409</span>
<span class="normal">7410</span>
<span class="normal">7411</span>
<span class="normal">7412</span>
<span class="normal">7413</span>
<span class="normal">7414</span>
<span class="normal">7415</span>
<span class="normal">7416</span>
<span class="normal">7417</span>
<span class="normal">7418</span>
<span class="normal">7419</span>
<span class="normal">7420</span>
<span class="normal">7421</span>
<span class="normal">7422</span>
<span class="normal">7423</span>
<span class="normal">7424</span>
<span class="normal">7425</span>
<span class="normal">7426</span>
<span class="normal">7427</span>
<span class="normal">7428</span>
<span class="normal">7429</span>
<span class="normal">7430</span>
<span class="normal">7431</span>
<span class="normal">7432</span>
<span class="normal">7433</span>
<span class="normal">7434</span>
<span class="normal">7435</span>
<span class="normal">7436</span>
<span class="normal">7437</span>
<span class="normal">7438</span>
<span class="normal">7439</span>
<span class="normal">7440</span>
<span class="normal">7441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">construct_amazon_style</span><span class="p">(</span>
    <span class="n">map_style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;us-east-1&quot;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;AWS_MAPS_API_KEY&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a URL for an Amazon Map style.</span>

<span class="sd">    Args:</span>
<span class="sd">        map_style (str): The name of the MapTiler style to be accessed. It can be one of the following:</span>
<span class="sd">            standard, monochrome, satellite, hybrid.</span>
<span class="sd">        region (str): The region of the Amazon Map. It can be one of the following:</span>
<span class="sd">            us-east-1, us-west-2, eu-central-1, eu-west-1, ap-northeast-1, ap-northeast-2, ap-southeast-1, etc.</span>
<span class="sd">        api_key (str): The API key for the Amazon Map. If None, the function attempts to retrieve the API key using a predefined method.</span>
<span class="sd">        token (str): The token for the Amazon Map. If None, the function attempts to retrieve the API key using a predefined method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The URL for the requested Amazon Map style.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">map_style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;monochrome&quot;</span><span class="p">,</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span> <span class="s2">&quot;hybrid&quot;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Invalid map style. Please choose from amazon-standard, amazon-monochrome, amazon-satellite, or amazon-hybrid.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An API key is required to use the Amazon Map style.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://maps.geo.</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">.amazonaws.com/v2/styles/</span><span class="si">{</span><span class="n">map_style</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">/descriptor?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.construct_maptiler_style" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.construct_maptiler_style" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Constructs a URL for a MapTiler style with an optional API key.</p>
<p>This function generates a URL for accessing a specific MapTiler map style. If an API key is not provided,
it attempts to retrieve one using a predefined method. If the request to MapTiler fails, it defaults to
a "liberty" style.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MapTiler style to be accessed. It can be one of the following:
aquarelle, backdrop, basic, bright, dataviz, landscape, ocean, openstreetmap, outdoor,
satellite, streets, toner, topo, winter, etc.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional API key for accessing MapTiler services. If None, the function
attempts to retrieve the API key using a predefined method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL for the requested MapTiler style. If the request fails, returns a URL for the "liberty" style.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="requests.exceptions.RequestException">RequestException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request to the MapTiler API fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7444</span>
<span class="normal">7445</span>
<span class="normal">7446</span>
<span class="normal">7447</span>
<span class="normal">7448</span>
<span class="normal">7449</span>
<span class="normal">7450</span>
<span class="normal">7451</span>
<span class="normal">7452</span>
<span class="normal">7453</span>
<span class="normal">7454</span>
<span class="normal">7455</span>
<span class="normal">7456</span>
<span class="normal">7457</span>
<span class="normal">7458</span>
<span class="normal">7459</span>
<span class="normal">7460</span>
<span class="normal">7461</span>
<span class="normal">7462</span>
<span class="normal">7463</span>
<span class="normal">7464</span>
<span class="normal">7465</span>
<span class="normal">7466</span>
<span class="normal">7467</span>
<span class="normal">7468</span>
<span class="normal">7469</span>
<span class="normal">7470</span>
<span class="normal">7471</span>
<span class="normal">7472</span>
<span class="normal">7473</span>
<span class="normal">7474</span>
<span class="normal">7475</span>
<span class="normal">7476</span>
<span class="normal">7477</span>
<span class="normal">7478</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">construct_maptiler_style</span><span class="p">(</span><span class="n">style</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs a URL for a MapTiler style with an optional API key.</span>

<span class="sd">    This function generates a URL for accessing a specific MapTiler map style. If an API key is not provided,</span>
<span class="sd">    it attempts to retrieve one using a predefined method. If the request to MapTiler fails, it defaults to</span>
<span class="sd">    a &quot;liberty&quot; style.</span>

<span class="sd">    Args:</span>
<span class="sd">        style (str): The name of the MapTiler style to be accessed. It can be one of the following:</span>
<span class="sd">            aquarelle, backdrop, basic, bright, dataviz, landscape, ocean, openstreetmap, outdoor,</span>
<span class="sd">            satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">        api_key (Optional[str]): An optional API key for accessing MapTiler services. If None, the function</span>
<span class="sd">            attempts to retrieve the API key using a predefined method. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The URL for the requested MapTiler style. If the request fails, returns a URL for the &quot;liberty&quot; style.</span>

<span class="sd">    Raises:</span>
<span class="sd">        requests.exceptions.RequestException: If the request to the MapTiler API fails.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/maps/</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">/style.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="c1"># print(</span>
        <span class="c1">#     &quot;Failed to retrieve the MapTiler style. Defaulting to OpenFreeMap &#39;liberty&#39; style.&quot;</span>
        <span class="c1"># )</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://tiles.openfreemap.org/styles/liberty&quot;</span>

    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.create_arc_layer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_arc_layer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">src_lon</span><span class="p">,</span> <span class="n">src_lat</span><span class="p">,</span> <span class="n">dst_lon</span><span class="p">,</span> <span class="n">dst_lat</span><span class="p">,</span> <span class="n">src_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dst_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">layer_id</span><span class="o">=</span><span class="s1">&#39;arc_layer&#39;</span><span class="p">,</span> <span class="n">pickable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.create_arc_layer" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create a DeckGL ArcLayer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pandas.DataFrame">DataFrame</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path or DataFrame containing the data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_lon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source longitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_lat</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source latitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_lon</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination longitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_lat</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination latitude column name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_color</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source color as an RGB list.</p>
              </div>
            </td>
            <td>
                  <code>[255, 0, 0]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dst_color</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The destination color as an RGB list.</p>
              </div>
            </td>
            <td>
                  <code>[255, 255, 0]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>line_width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the lines.</p>
              </div>
            </td>
            <td>
                  <code>2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;arc_layer&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pickable</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the layer is pickable.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tooltip</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tooltip content or list of columns. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments for the layer.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10564</span>
<span class="normal">10565</span>
<span class="normal">10566</span>
<span class="normal">10567</span>
<span class="normal">10568</span>
<span class="normal">10569</span>
<span class="normal">10570</span>
<span class="normal">10571</span>
<span class="normal">10572</span>
<span class="normal">10573</span>
<span class="normal">10574</span>
<span class="normal">10575</span>
<span class="normal">10576</span>
<span class="normal">10577</span>
<span class="normal">10578</span>
<span class="normal">10579</span>
<span class="normal">10580</span>
<span class="normal">10581</span>
<span class="normal">10582</span>
<span class="normal">10583</span>
<span class="normal">10584</span>
<span class="normal">10585</span>
<span class="normal">10586</span>
<span class="normal">10587</span>
<span class="normal">10588</span>
<span class="normal">10589</span>
<span class="normal">10590</span>
<span class="normal">10591</span>
<span class="normal">10592</span>
<span class="normal">10593</span>
<span class="normal">10594</span>
<span class="normal">10595</span>
<span class="normal">10596</span>
<span class="normal">10597</span>
<span class="normal">10598</span>
<span class="normal">10599</span>
<span class="normal">10600</span>
<span class="normal">10601</span>
<span class="normal">10602</span>
<span class="normal">10603</span>
<span class="normal">10604</span>
<span class="normal">10605</span>
<span class="normal">10606</span>
<span class="normal">10607</span>
<span class="normal">10608</span>
<span class="normal">10609</span>
<span class="normal">10610</span>
<span class="normal">10611</span>
<span class="normal">10612</span>
<span class="normal">10613</span>
<span class="normal">10614</span>
<span class="normal">10615</span>
<span class="normal">10616</span>
<span class="normal">10617</span>
<span class="normal">10618</span>
<span class="normal">10619</span>
<span class="normal">10620</span>
<span class="normal">10621</span>
<span class="normal">10622</span>
<span class="normal">10623</span>
<span class="normal">10624</span>
<span class="normal">10625</span>
<span class="normal">10626</span>
<span class="normal">10627</span>
<span class="normal">10628</span>
<span class="normal">10629</span>
<span class="normal">10630</span>
<span class="normal">10631</span>
<span class="normal">10632</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_arc_layer</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
    <span class="n">src_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lon</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dst_lat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">src_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">dst_color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">layer_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;arc_layer&quot;</span><span class="p">,</span>
    <span class="n">pickable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a DeckGL ArcLayer.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Union[str, pd.DataFrame]): The file path or DataFrame containing the data.</span>
<span class="sd">        src_lon (str): The source longitude column name.</span>
<span class="sd">        src_lat (str): The source latitude column name.</span>
<span class="sd">        dst_lon (str): The destination longitude column name.</span>
<span class="sd">        dst_lat (str): The destination latitude column name.</span>
<span class="sd">        src_color (List[int]): The source color as an RGB list.</span>
<span class="sd">        dst_color (List[int]): The destination color as an RGB list.</span>
<span class="sd">        line_width (int): The width of the lines.</span>
<span class="sd">        layer_id (str): The ID of the layer.</span>
<span class="sd">        pickable (bool): Whether the layer is pickable.</span>
<span class="sd">        tooltip (Optional[Union[str, List[str]]], optional): The tooltip content or list of columns. Defaults to None.</span>
<span class="sd">        **kwargs (Any): Additional arguments for the layer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">])</span>

    <span class="n">arc_data</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;source_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">src_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">src_lat</span><span class="p">]],</span>
            <span class="s2">&quot;target_position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">dst_lon</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="n">dst_lat</span><span class="p">]],</span>
            <span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>  <span class="c1"># Include other columns</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="c1"># Generate tooltip template dynamically based on the columns</span>
    <span class="k">if</span> <span class="n">tooltip</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tooltip</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">tooltip</span>

    <span class="n">deck_arc_layer</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;@@type&quot;</span><span class="p">:</span> <span class="s2">&quot;ArcLayer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">layer_id</span><span class="p">,</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">arc_data</span><span class="p">,</span>
        <span class="s2">&quot;getSourcePosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=source_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getTargetPosition&quot;</span><span class="p">:</span> <span class="s2">&quot;@@=target_position&quot;</span><span class="p">,</span>
        <span class="s2">&quot;getSourceColor&quot;</span><span class="p">:</span> <span class="n">src_color</span><span class="p">,</span>
        <span class="s2">&quot;getTargetColor&quot;</span><span class="p">:</span> <span class="n">dst_color</span><span class="p">,</span>
        <span class="s2">&quot;getWidth&quot;</span><span class="p">:</span> <span class="n">line_width</span><span class="p">,</span>
        <span class="s2">&quot;pickable&quot;</span><span class="p">:</span> <span class="n">pickable</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">deck_arc_layer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">deck_arc_layer</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.create_vector_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_vector_data</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">map_height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">file_ext</span><span class="o">=</span><span class="s1">&#39;geojson&#39;</span><span class="p">,</span> <span class="n">add_mapillary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_sidebar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.create_vector_data" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Generates a widget-based interface for creating and managing vector data on a map.</p>
<p>This function creates an interactive widget interface that allows users to draw features
(points, lines, polygons) on a map, assign properties to these features, and export them
as GeoJSON files. The interface includes a map, a sidebar for property management, and
buttons for saving, exporting, and resetting the data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>m</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An existing Map object. If not provided, a default map with
basemaps and drawing controls will be created. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where keys are property names
and values are lists of possible values for each property. These properties can be
assigned to the drawn features. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format string for the timestamp used in the exported
filename. Defaults to "%Y%m%dT%H%M%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of two integers specifying the
relative widths of the map and sidebar columns. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                  <code>(9, 3)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map widget. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;600px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>out_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory where the exported GeoJSON files will be saved.
If not provided, the current working directory is used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename_prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A prefix to be added to the exported filename.
Defaults to "".</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_ext</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file extension for the exported file. Defaults to "geojson".</p>
              </div>
            </td>
            <td>
                  <code>&#39;geojson&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_mapillary</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a Mapillary image widget that displays the
nearest image to the clicked point on the map. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the Mapillary image widget. Can be "classic", "photo",
or "split". Defaults to "photo".</p>
              </div>
            </td>
            <td>
                  <code>&#39;photo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius (in degrees) used to search for the nearest Mapillary
image. Defaults to 0.00005 degrees.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the Mapillary image widget. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>300</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the Mapillary image widget. Defaults to 420.</p>
              </div>
            </td>
            <td>
                  <code>420</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the frame border for the Mapillary image widget.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to generate a download link for the exported file.
Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the drawn feature layer to be added to the map.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>paint</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary specifying the paint properties for the
drawn features. This can include properties like "circle-radius", "circle-color",
"circle-opacity", "circle-stroke-color", and "circle-stroke-width". Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>callback</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback function to be called when the export button is clicked.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>return_sidebar</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to return the sidebar widget. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that may be passed to the add_geojson method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>properties = {
...     "Type": ["Residential", "Commercial", "Industrial"],
...     "Area": [100, 200, 300],
... }
widget = create_vector_data(properties=properties)
display(widget)  # Display the widget in a Jupyter notebook</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">8491</span>
<span class="normal">8492</span>
<span class="normal">8493</span>
<span class="normal">8494</span>
<span class="normal">8495</span>
<span class="normal">8496</span>
<span class="normal">8497</span>
<span class="normal">8498</span>
<span class="normal">8499</span>
<span class="normal">8500</span>
<span class="normal">8501</span>
<span class="normal">8502</span>
<span class="normal">8503</span>
<span class="normal">8504</span>
<span class="normal">8505</span>
<span class="normal">8506</span>
<span class="normal">8507</span>
<span class="normal">8508</span>
<span class="normal">8509</span>
<span class="normal">8510</span>
<span class="normal">8511</span>
<span class="normal">8512</span>
<span class="normal">8513</span>
<span class="normal">8514</span>
<span class="normal">8515</span>
<span class="normal">8516</span>
<span class="normal">8517</span>
<span class="normal">8518</span>
<span class="normal">8519</span>
<span class="normal">8520</span>
<span class="normal">8521</span>
<span class="normal">8522</span>
<span class="normal">8523</span>
<span class="normal">8524</span>
<span class="normal">8525</span>
<span class="normal">8526</span>
<span class="normal">8527</span>
<span class="normal">8528</span>
<span class="normal">8529</span>
<span class="normal">8530</span>
<span class="normal">8531</span>
<span class="normal">8532</span>
<span class="normal">8533</span>
<span class="normal">8534</span>
<span class="normal">8535</span>
<span class="normal">8536</span>
<span class="normal">8537</span>
<span class="normal">8538</span>
<span class="normal">8539</span>
<span class="normal">8540</span>
<span class="normal">8541</span>
<span class="normal">8542</span>
<span class="normal">8543</span>
<span class="normal">8544</span>
<span class="normal">8545</span>
<span class="normal">8546</span>
<span class="normal">8547</span>
<span class="normal">8548</span>
<span class="normal">8549</span>
<span class="normal">8550</span>
<span class="normal">8551</span>
<span class="normal">8552</span>
<span class="normal">8553</span>
<span class="normal">8554</span>
<span class="normal">8555</span>
<span class="normal">8556</span>
<span class="normal">8557</span>
<span class="normal">8558</span>
<span class="normal">8559</span>
<span class="normal">8560</span>
<span class="normal">8561</span>
<span class="normal">8562</span>
<span class="normal">8563</span>
<span class="normal">8564</span>
<span class="normal">8565</span>
<span class="normal">8566</span>
<span class="normal">8567</span>
<span class="normal">8568</span>
<span class="normal">8569</span>
<span class="normal">8570</span>
<span class="normal">8571</span>
<span class="normal">8572</span>
<span class="normal">8573</span>
<span class="normal">8574</span>
<span class="normal">8575</span>
<span class="normal">8576</span>
<span class="normal">8577</span>
<span class="normal">8578</span>
<span class="normal">8579</span>
<span class="normal">8580</span>
<span class="normal">8581</span>
<span class="normal">8582</span>
<span class="normal">8583</span>
<span class="normal">8584</span>
<span class="normal">8585</span>
<span class="normal">8586</span>
<span class="normal">8587</span>
<span class="normal">8588</span>
<span class="normal">8589</span>
<span class="normal">8590</span>
<span class="normal">8591</span>
<span class="normal">8592</span>
<span class="normal">8593</span>
<span class="normal">8594</span>
<span class="normal">8595</span>
<span class="normal">8596</span>
<span class="normal">8597</span>
<span class="normal">8598</span>
<span class="normal">8599</span>
<span class="normal">8600</span>
<span class="normal">8601</span>
<span class="normal">8602</span>
<span class="normal">8603</span>
<span class="normal">8604</span>
<span class="normal">8605</span>
<span class="normal">8606</span>
<span class="normal">8607</span>
<span class="normal">8608</span>
<span class="normal">8609</span>
<span class="normal">8610</span>
<span class="normal">8611</span>
<span class="normal">8612</span>
<span class="normal">8613</span>
<span class="normal">8614</span>
<span class="normal">8615</span>
<span class="normal">8616</span>
<span class="normal">8617</span>
<span class="normal">8618</span>
<span class="normal">8619</span>
<span class="normal">8620</span>
<span class="normal">8621</span>
<span class="normal">8622</span>
<span class="normal">8623</span>
<span class="normal">8624</span>
<span class="normal">8625</span>
<span class="normal">8626</span>
<span class="normal">8627</span>
<span class="normal">8628</span>
<span class="normal">8629</span>
<span class="normal">8630</span>
<span class="normal">8631</span>
<span class="normal">8632</span>
<span class="normal">8633</span>
<span class="normal">8634</span>
<span class="normal">8635</span>
<span class="normal">8636</span>
<span class="normal">8637</span>
<span class="normal">8638</span>
<span class="normal">8639</span>
<span class="normal">8640</span>
<span class="normal">8641</span>
<span class="normal">8642</span>
<span class="normal">8643</span>
<span class="normal">8644</span>
<span class="normal">8645</span>
<span class="normal">8646</span>
<span class="normal">8647</span>
<span class="normal">8648</span>
<span class="normal">8649</span>
<span class="normal">8650</span>
<span class="normal">8651</span>
<span class="normal">8652</span>
<span class="normal">8653</span>
<span class="normal">8654</span>
<span class="normal">8655</span>
<span class="normal">8656</span>
<span class="normal">8657</span>
<span class="normal">8658</span>
<span class="normal">8659</span>
<span class="normal">8660</span>
<span class="normal">8661</span>
<span class="normal">8662</span>
<span class="normal">8663</span>
<span class="normal">8664</span>
<span class="normal">8665</span>
<span class="normal">8666</span>
<span class="normal">8667</span>
<span class="normal">8668</span>
<span class="normal">8669</span>
<span class="normal">8670</span>
<span class="normal">8671</span>
<span class="normal">8672</span>
<span class="normal">8673</span>
<span class="normal">8674</span>
<span class="normal">8675</span>
<span class="normal">8676</span>
<span class="normal">8677</span>
<span class="normal">8678</span>
<span class="normal">8679</span>
<span class="normal">8680</span>
<span class="normal">8681</span>
<span class="normal">8682</span>
<span class="normal">8683</span>
<span class="normal">8684</span>
<span class="normal">8685</span>
<span class="normal">8686</span>
<span class="normal">8687</span>
<span class="normal">8688</span>
<span class="normal">8689</span>
<span class="normal">8690</span>
<span class="normal">8691</span>
<span class="normal">8692</span>
<span class="normal">8693</span>
<span class="normal">8694</span>
<span class="normal">8695</span>
<span class="normal">8696</span>
<span class="normal">8697</span>
<span class="normal">8698</span>
<span class="normal">8699</span>
<span class="normal">8700</span>
<span class="normal">8701</span>
<span class="normal">8702</span>
<span class="normal">8703</span>
<span class="normal">8704</span>
<span class="normal">8705</span>
<span class="normal">8706</span>
<span class="normal">8707</span>
<span class="normal">8708</span>
<span class="normal">8709</span>
<span class="normal">8710</span>
<span class="normal">8711</span>
<span class="normal">8712</span>
<span class="normal">8713</span>
<span class="normal">8714</span>
<span class="normal">8715</span>
<span class="normal">8716</span>
<span class="normal">8717</span>
<span class="normal">8718</span>
<span class="normal">8719</span>
<span class="normal">8720</span>
<span class="normal">8721</span>
<span class="normal">8722</span>
<span class="normal">8723</span>
<span class="normal">8724</span>
<span class="normal">8725</span>
<span class="normal">8726</span>
<span class="normal">8727</span>
<span class="normal">8728</span>
<span class="normal">8729</span>
<span class="normal">8730</span>
<span class="normal">8731</span>
<span class="normal">8732</span>
<span class="normal">8733</span>
<span class="normal">8734</span>
<span class="normal">8735</span>
<span class="normal">8736</span>
<span class="normal">8737</span>
<span class="normal">8738</span>
<span class="normal">8739</span>
<span class="normal">8740</span>
<span class="normal">8741</span>
<span class="normal">8742</span>
<span class="normal">8743</span>
<span class="normal">8744</span>
<span class="normal">8745</span>
<span class="normal">8746</span>
<span class="normal">8747</span>
<span class="normal">8748</span>
<span class="normal">8749</span>
<span class="normal">8750</span>
<span class="normal">8751</span>
<span class="normal">8752</span>
<span class="normal">8753</span>
<span class="normal">8754</span>
<span class="normal">8755</span>
<span class="normal">8756</span>
<span class="normal">8757</span>
<span class="normal">8758</span>
<span class="normal">8759</span>
<span class="normal">8760</span>
<span class="normal">8761</span>
<span class="normal">8762</span>
<span class="normal">8763</span>
<span class="normal">8764</span>
<span class="normal">8765</span>
<span class="normal">8766</span>
<span class="normal">8767</span>
<span class="normal">8768</span>
<span class="normal">8769</span>
<span class="normal">8770</span>
<span class="normal">8771</span>
<span class="normal">8772</span>
<span class="normal">8773</span>
<span class="normal">8774</span>
<span class="normal">8775</span>
<span class="normal">8776</span>
<span class="normal">8777</span>
<span class="normal">8778</span>
<span class="normal">8779</span>
<span class="normal">8780</span>
<span class="normal">8781</span>
<span class="normal">8782</span>
<span class="normal">8783</span>
<span class="normal">8784</span>
<span class="normal">8785</span>
<span class="normal">8786</span>
<span class="normal">8787</span>
<span class="normal">8788</span>
<span class="normal">8789</span>
<span class="normal">8790</span>
<span class="normal">8791</span>
<span class="normal">8792</span>
<span class="normal">8793</span>
<span class="normal">8794</span>
<span class="normal">8795</span>
<span class="normal">8796</span>
<span class="normal">8797</span>
<span class="normal">8798</span>
<span class="normal">8799</span>
<span class="normal">8800</span>
<span class="normal">8801</span>
<span class="normal">8802</span>
<span class="normal">8803</span>
<span class="normal">8804</span>
<span class="normal">8805</span>
<span class="normal">8806</span>
<span class="normal">8807</span>
<span class="normal">8808</span>
<span class="normal">8809</span>
<span class="normal">8810</span>
<span class="normal">8811</span>
<span class="normal">8812</span>
<span class="normal">8813</span>
<span class="normal">8814</span>
<span class="normal">8815</span>
<span class="normal">8816</span>
<span class="normal">8817</span>
<span class="normal">8818</span>
<span class="normal">8819</span>
<span class="normal">8820</span>
<span class="normal">8821</span>
<span class="normal">8822</span>
<span class="normal">8823</span>
<span class="normal">8824</span>
<span class="normal">8825</span>
<span class="normal">8826</span>
<span class="normal">8827</span>
<span class="normal">8828</span>
<span class="normal">8829</span>
<span class="normal">8830</span>
<span class="normal">8831</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_vector_data</span><span class="p">(</span>
    <span class="n">m</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Map</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">geojson</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">map_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
    <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">paint</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">return_sidebar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a widget-based interface for creating and managing vector data on a map.</span>

<span class="sd">    This function creates an interactive widget interface that allows users to draw features</span>
<span class="sd">    (points, lines, polygons) on a map, assign properties to these features, and export them</span>
<span class="sd">    as GeoJSON files. The interface includes a map, a sidebar for property management, and</span>
<span class="sd">    buttons for saving, exporting, and resetting the data.</span>

<span class="sd">    Args:</span>
<span class="sd">        m (Map, optional): An existing Map object. If not provided, a default map with</span>
<span class="sd">            basemaps and drawing controls will be created. Defaults to None.</span>
<span class="sd">        properties (Dict[str, List[Any]], optional): A dictionary where keys are property names</span>
<span class="sd">            and values are lists of possible values for each property. These properties can be</span>
<span class="sd">            assigned to the drawn features. Defaults to None.</span>
<span class="sd">        time_format (str, optional): The format string for the timestamp used in the exported</span>
<span class="sd">            filename. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): A list of two integers specifying the</span>
<span class="sd">            relative widths of the map and sidebar columns. Defaults to (9, 3).</span>
<span class="sd">        map_height (str, optional): The height of the map widget. Defaults to &quot;600px&quot;.</span>
<span class="sd">        out_dir (str, optional): The directory where the exported GeoJSON files will be saved.</span>
<span class="sd">            If not provided, the current working directory is used. Defaults to None.</span>
<span class="sd">        filename_prefix (str, optional): A prefix to be added to the exported filename.</span>
<span class="sd">            Defaults to &quot;&quot;.</span>
<span class="sd">        file_ext (str, optional): The file extension for the exported file. Defaults to &quot;geojson&quot;.</span>
<span class="sd">        add_mapillary (bool, optional): Whether to add a Mapillary image widget that displays the</span>
<span class="sd">            nearest image to the clicked point on the map. Defaults to False.</span>
<span class="sd">        style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">            or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">        radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">            image. Defaults to 0.00005 degrees.</span>
<span class="sd">        width (int, optional): The width of the Mapillary image widget. Defaults to 300.</span>
<span class="sd">        height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">        frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">        download (bool, optional): Whether to generate a download link for the exported file.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        name (str, optional): The name of the drawn feature layer to be added to the map.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        paint (Dict[str, Any], optional): A dictionary specifying the paint properties for the</span>
<span class="sd">            drawn features. This can include properties like &quot;circle-radius&quot;, &quot;circle-color&quot;,</span>
<span class="sd">            &quot;circle-opacity&quot;, &quot;circle-stroke-color&quot;, and &quot;circle-stroke-width&quot;. Defaults to None.</span>
<span class="sd">        callback (Callable, optional): A callback function to be called when the export button is clicked.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        return_sidebar (bool, optional): Whether to return the sidebar widget. Defaults to False.</span>

<span class="sd">        **kwargs (Any): Additional keyword arguments that may be passed to the add_geojson method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; properties = {</span>
<span class="sd">        ...     &quot;Type&quot;: [&quot;Residential&quot;, &quot;Commercial&quot;, &quot;Industrial&quot;],</span>
<span class="sd">        ...     &quot;Area&quot;: [100, 200, 300],</span>
<span class="sd">        ... }</span>
<span class="sd">        &gt;&gt;&gt; widget = create_vector_data(properties=properties)</span>
<span class="sd">        &gt;&gt;&gt; display(widget)  # Display the widget in a Jupyter notebook</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">paint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;circle-radius&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;circle-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFFF00&quot;</span><span class="p">,</span>
            <span class="s2">&quot;circle-opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;circle-stroke-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span><span class="o">.</span><span class="n">__geo_interface__</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span> <span class="n">geojson</span><span class="p">)</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;draw_feature_collection_initial&quot;</span><span class="p">,</span> <span class="n">geojson</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_default_map</span><span class="p">():</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;liberty&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">map_height</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;Satellite&quot;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_buildings</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_data</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="s2">&quot;transportation&quot;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">()</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span>
            <span class="n">controls</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;line_string&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;top-right&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">create_default_map</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span>
    <span class="p">)</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;draw_features&quot;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">prop_widgets</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">image_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                    <span class="n">options</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>

    <span class="k">if</span> <span class="n">geojson</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">geojson</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]:</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">feature_id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                        <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                        <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]):</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">layer_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

                <span class="n">m</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span>
                    <span class="n">layer_type</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">paint</span><span class="o">=</span><span class="n">paint</span><span class="p">,</span>
                    <span class="n">fit_bounds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
        <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            &lt;iframe</span>
<span class="s2">                src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">            &lt;/iframe&gt;</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">add_mapillary</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="n">filename_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Filename:&quot;</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;filename.geojson&quot;</span>
    <span class="p">)</span>

    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Please select a feature to save.&quot;</span><span class="p">)</span>

    <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename_widget</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename_widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">out_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename_prefix</span><span class="si">}{</span><span class="n">current_time</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]):</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">gdf</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
            <span class="p">)</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
                <span class="n">download_link</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">create_download_link</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;⬇️&quot;</span><span class="p">)</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_display_data</span><span class="p">(</span><span class="n">download_link</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
            <span class="k">if</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">tuple</span>
                <span class="p">):</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">]</span>

    <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_click</span><span class="p">)</span>

    <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">prop_widgets</span><span class="p">,</span>
        <span class="n">filename_widget</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
        <span class="n">output</span><span class="p">,</span>
        <span class="n">image_widget</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="n">return_sidebar</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sidebar_widget</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">m</span><span class="p">],</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
        <span class="p">)</span>
        <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">sidebar_widget</span><span class="p">],</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
        <span class="p">)</span>
        <span class="n">row1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
            <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">main_widget</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">row1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.edit_gps_trace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit_gps_trace</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">ann_column</span><span class="p">,</span> <span class="n">colormap</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="n">default_features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">fig_width</span><span class="o">=</span><span class="s1">&#39;1550px&#39;</span><span class="p">,</span> <span class="n">fig_height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">circle_size</span><span class="o">=</span><span class="mi">48</span><span class="p">,</span> <span class="n">webGL</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sync_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.edit_gps_trace" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Edits a GPS trace on the map and allows for annotation and export.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the GPS trace CSV file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>m</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The map object containing the GPS trace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation column in the GPS trace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colormap</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The colormap for the GPS trace annotations.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the GPS trace layer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_features</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default features to display.
The first numerical column will be used if None. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation options for the dropdown. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rows</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of rows to display in the table. Defaults to 11.</p>
              </div>
            </td>
            <td>
                  <code>11</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the figure. Defaults to "1550px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;1550px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the figure. Defaults to "300px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;300px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time format for the timestamp. Defaults to "%Y-%m-%d %H:%M:%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stroke_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stroke color of the GPS trace points. Defaults to "lightgray".</p>
              </div>
            </td>
            <td>
                  <code>&#39;lightgray&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>circle_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the GPS trace points. Defaults to 48.</p>
              </div>
            </td>
            <td>
                  <code>48</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>webGL</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to generate links for downloading the edited GPS traces. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync_plots</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to synchronize the zoom and pan of the plots. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column widths for the output widget. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                  <code>(9, 3)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The main widget containing the map and the editing interface.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7627</span>
<span class="normal">7628</span>
<span class="normal">7629</span>
<span class="normal">7630</span>
<span class="normal">7631</span>
<span class="normal">7632</span>
<span class="normal">7633</span>
<span class="normal">7634</span>
<span class="normal">7635</span>
<span class="normal">7636</span>
<span class="normal">7637</span>
<span class="normal">7638</span>
<span class="normal">7639</span>
<span class="normal">7640</span>
<span class="normal">7641</span>
<span class="normal">7642</span>
<span class="normal">7643</span>
<span class="normal">7644</span>
<span class="normal">7645</span>
<span class="normal">7646</span>
<span class="normal">7647</span>
<span class="normal">7648</span>
<span class="normal">7649</span>
<span class="normal">7650</span>
<span class="normal">7651</span>
<span class="normal">7652</span>
<span class="normal">7653</span>
<span class="normal">7654</span>
<span class="normal">7655</span>
<span class="normal">7656</span>
<span class="normal">7657</span>
<span class="normal">7658</span>
<span class="normal">7659</span>
<span class="normal">7660</span>
<span class="normal">7661</span>
<span class="normal">7662</span>
<span class="normal">7663</span>
<span class="normal">7664</span>
<span class="normal">7665</span>
<span class="normal">7666</span>
<span class="normal">7667</span>
<span class="normal">7668</span>
<span class="normal">7669</span>
<span class="normal">7670</span>
<span class="normal">7671</span>
<span class="normal">7672</span>
<span class="normal">7673</span>
<span class="normal">7674</span>
<span class="normal">7675</span>
<span class="normal">7676</span>
<span class="normal">7677</span>
<span class="normal">7678</span>
<span class="normal">7679</span>
<span class="normal">7680</span>
<span class="normal">7681</span>
<span class="normal">7682</span>
<span class="normal">7683</span>
<span class="normal">7684</span>
<span class="normal">7685</span>
<span class="normal">7686</span>
<span class="normal">7687</span>
<span class="normal">7688</span>
<span class="normal">7689</span>
<span class="normal">7690</span>
<span class="normal">7691</span>
<span class="normal">7692</span>
<span class="normal">7693</span>
<span class="normal">7694</span>
<span class="normal">7695</span>
<span class="normal">7696</span>
<span class="normal">7697</span>
<span class="normal">7698</span>
<span class="normal">7699</span>
<span class="normal">7700</span>
<span class="normal">7701</span>
<span class="normal">7702</span>
<span class="normal">7703</span>
<span class="normal">7704</span>
<span class="normal">7705</span>
<span class="normal">7706</span>
<span class="normal">7707</span>
<span class="normal">7708</span>
<span class="normal">7709</span>
<span class="normal">7710</span>
<span class="normal">7711</span>
<span class="normal">7712</span>
<span class="normal">7713</span>
<span class="normal">7714</span>
<span class="normal">7715</span>
<span class="normal">7716</span>
<span class="normal">7717</span>
<span class="normal">7718</span>
<span class="normal">7719</span>
<span class="normal">7720</span>
<span class="normal">7721</span>
<span class="normal">7722</span>
<span class="normal">7723</span>
<span class="normal">7724</span>
<span class="normal">7725</span>
<span class="normal">7726</span>
<span class="normal">7727</span>
<span class="normal">7728</span>
<span class="normal">7729</span>
<span class="normal">7730</span>
<span class="normal">7731</span>
<span class="normal">7732</span>
<span class="normal">7733</span>
<span class="normal">7734</span>
<span class="normal">7735</span>
<span class="normal">7736</span>
<span class="normal">7737</span>
<span class="normal">7738</span>
<span class="normal">7739</span>
<span class="normal">7740</span>
<span class="normal">7741</span>
<span class="normal">7742</span>
<span class="normal">7743</span>
<span class="normal">7744</span>
<span class="normal">7745</span>
<span class="normal">7746</span>
<span class="normal">7747</span>
<span class="normal">7748</span>
<span class="normal">7749</span>
<span class="normal">7750</span>
<span class="normal">7751</span>
<span class="normal">7752</span>
<span class="normal">7753</span>
<span class="normal">7754</span>
<span class="normal">7755</span>
<span class="normal">7756</span>
<span class="normal">7757</span>
<span class="normal">7758</span>
<span class="normal">7759</span>
<span class="normal">7760</span>
<span class="normal">7761</span>
<span class="normal">7762</span>
<span class="normal">7763</span>
<span class="normal">7764</span>
<span class="normal">7765</span>
<span class="normal">7766</span>
<span class="normal">7767</span>
<span class="normal">7768</span>
<span class="normal">7769</span>
<span class="normal">7770</span>
<span class="normal">7771</span>
<span class="normal">7772</span>
<span class="normal">7773</span>
<span class="normal">7774</span>
<span class="normal">7775</span>
<span class="normal">7776</span>
<span class="normal">7777</span>
<span class="normal">7778</span>
<span class="normal">7779</span>
<span class="normal">7780</span>
<span class="normal">7781</span>
<span class="normal">7782</span>
<span class="normal">7783</span>
<span class="normal">7784</span>
<span class="normal">7785</span>
<span class="normal">7786</span>
<span class="normal">7787</span>
<span class="normal">7788</span>
<span class="normal">7789</span>
<span class="normal">7790</span>
<span class="normal">7791</span>
<span class="normal">7792</span>
<span class="normal">7793</span>
<span class="normal">7794</span>
<span class="normal">7795</span>
<span class="normal">7796</span>
<span class="normal">7797</span>
<span class="normal">7798</span>
<span class="normal">7799</span>
<span class="normal">7800</span>
<span class="normal">7801</span>
<span class="normal">7802</span>
<span class="normal">7803</span>
<span class="normal">7804</span>
<span class="normal">7805</span>
<span class="normal">7806</span>
<span class="normal">7807</span>
<span class="normal">7808</span>
<span class="normal">7809</span>
<span class="normal">7810</span>
<span class="normal">7811</span>
<span class="normal">7812</span>
<span class="normal">7813</span>
<span class="normal">7814</span>
<span class="normal">7815</span>
<span class="normal">7816</span>
<span class="normal">7817</span>
<span class="normal">7818</span>
<span class="normal">7819</span>
<span class="normal">7820</span>
<span class="normal">7821</span>
<span class="normal">7822</span>
<span class="normal">7823</span>
<span class="normal">7824</span>
<span class="normal">7825</span>
<span class="normal">7826</span>
<span class="normal">7827</span>
<span class="normal">7828</span>
<span class="normal">7829</span>
<span class="normal">7830</span>
<span class="normal">7831</span>
<span class="normal">7832</span>
<span class="normal">7833</span>
<span class="normal">7834</span>
<span class="normal">7835</span>
<span class="normal">7836</span>
<span class="normal">7837</span>
<span class="normal">7838</span>
<span class="normal">7839</span>
<span class="normal">7840</span>
<span class="normal">7841</span>
<span class="normal">7842</span>
<span class="normal">7843</span>
<span class="normal">7844</span>
<span class="normal">7845</span>
<span class="normal">7846</span>
<span class="normal">7847</span>
<span class="normal">7848</span>
<span class="normal">7849</span>
<span class="normal">7850</span>
<span class="normal">7851</span>
<span class="normal">7852</span>
<span class="normal">7853</span>
<span class="normal">7854</span>
<span class="normal">7855</span>
<span class="normal">7856</span>
<span class="normal">7857</span>
<span class="normal">7858</span>
<span class="normal">7859</span>
<span class="normal">7860</span>
<span class="normal">7861</span>
<span class="normal">7862</span>
<span class="normal">7863</span>
<span class="normal">7864</span>
<span class="normal">7865</span>
<span class="normal">7866</span>
<span class="normal">7867</span>
<span class="normal">7868</span>
<span class="normal">7869</span>
<span class="normal">7870</span>
<span class="normal">7871</span>
<span class="normal">7872</span>
<span class="normal">7873</span>
<span class="normal">7874</span>
<span class="normal">7875</span>
<span class="normal">7876</span>
<span class="normal">7877</span>
<span class="normal">7878</span>
<span class="normal">7879</span>
<span class="normal">7880</span>
<span class="normal">7881</span>
<span class="normal">7882</span>
<span class="normal">7883</span>
<span class="normal">7884</span>
<span class="normal">7885</span>
<span class="normal">7886</span>
<span class="normal">7887</span>
<span class="normal">7888</span>
<span class="normal">7889</span>
<span class="normal">7890</span>
<span class="normal">7891</span>
<span class="normal">7892</span>
<span class="normal">7893</span>
<span class="normal">7894</span>
<span class="normal">7895</span>
<span class="normal">7896</span>
<span class="normal">7897</span>
<span class="normal">7898</span>
<span class="normal">7899</span>
<span class="normal">7900</span>
<span class="normal">7901</span>
<span class="normal">7902</span>
<span class="normal">7903</span>
<span class="normal">7904</span>
<span class="normal">7905</span>
<span class="normal">7906</span>
<span class="normal">7907</span>
<span class="normal">7908</span>
<span class="normal">7909</span>
<span class="normal">7910</span>
<span class="normal">7911</span>
<span class="normal">7912</span>
<span class="normal">7913</span>
<span class="normal">7914</span>
<span class="normal">7915</span>
<span class="normal">7916</span>
<span class="normal">7917</span>
<span class="normal">7918</span>
<span class="normal">7919</span>
<span class="normal">7920</span>
<span class="normal">7921</span>
<span class="normal">7922</span>
<span class="normal">7923</span>
<span class="normal">7924</span>
<span class="normal">7925</span>
<span class="normal">7926</span>
<span class="normal">7927</span>
<span class="normal">7928</span>
<span class="normal">7929</span>
<span class="normal">7930</span>
<span class="normal">7931</span>
<span class="normal">7932</span>
<span class="normal">7933</span>
<span class="normal">7934</span>
<span class="normal">7935</span>
<span class="normal">7936</span>
<span class="normal">7937</span>
<span class="normal">7938</span>
<span class="normal">7939</span>
<span class="normal">7940</span>
<span class="normal">7941</span>
<span class="normal">7942</span>
<span class="normal">7943</span>
<span class="normal">7944</span>
<span class="normal">7945</span>
<span class="normal">7946</span>
<span class="normal">7947</span>
<span class="normal">7948</span>
<span class="normal">7949</span>
<span class="normal">7950</span>
<span class="normal">7951</span>
<span class="normal">7952</span>
<span class="normal">7953</span>
<span class="normal">7954</span>
<span class="normal">7955</span>
<span class="normal">7956</span>
<span class="normal">7957</span>
<span class="normal">7958</span>
<span class="normal">7959</span>
<span class="normal">7960</span>
<span class="normal">7961</span>
<span class="normal">7962</span>
<span class="normal">7963</span>
<span class="normal">7964</span>
<span class="normal">7965</span>
<span class="normal">7966</span>
<span class="normal">7967</span>
<span class="normal">7968</span>
<span class="normal">7969</span>
<span class="normal">7970</span>
<span class="normal">7971</span>
<span class="normal">7972</span>
<span class="normal">7973</span>
<span class="normal">7974</span>
<span class="normal">7975</span>
<span class="normal">7976</span>
<span class="normal">7977</span>
<span class="normal">7978</span>
<span class="normal">7979</span>
<span class="normal">7980</span>
<span class="normal">7981</span>
<span class="normal">7982</span>
<span class="normal">7983</span>
<span class="normal">7984</span>
<span class="normal">7985</span>
<span class="normal">7986</span>
<span class="normal">7987</span>
<span class="normal">7988</span>
<span class="normal">7989</span>
<span class="normal">7990</span>
<span class="normal">7991</span>
<span class="normal">7992</span>
<span class="normal">7993</span>
<span class="normal">7994</span>
<span class="normal">7995</span>
<span class="normal">7996</span>
<span class="normal">7997</span>
<span class="normal">7998</span>
<span class="normal">7999</span>
<span class="normal">8000</span>
<span class="normal">8001</span>
<span class="normal">8002</span>
<span class="normal">8003</span>
<span class="normal">8004</span>
<span class="normal">8005</span>
<span class="normal">8006</span>
<span class="normal">8007</span>
<span class="normal">8008</span>
<span class="normal">8009</span>
<span class="normal">8010</span>
<span class="normal">8011</span>
<span class="normal">8012</span>
<span class="normal">8013</span>
<span class="normal">8014</span>
<span class="normal">8015</span>
<span class="normal">8016</span>
<span class="normal">8017</span>
<span class="normal">8018</span>
<span class="normal">8019</span>
<span class="normal">8020</span>
<span class="normal">8021</span>
<span class="normal">8022</span>
<span class="normal">8023</span>
<span class="normal">8024</span>
<span class="normal">8025</span>
<span class="normal">8026</span>
<span class="normal">8027</span>
<span class="normal">8028</span>
<span class="normal">8029</span>
<span class="normal">8030</span>
<span class="normal">8031</span>
<span class="normal">8032</span>
<span class="normal">8033</span>
<span class="normal">8034</span>
<span class="normal">8035</span>
<span class="normal">8036</span>
<span class="normal">8037</span>
<span class="normal">8038</span>
<span class="normal">8039</span>
<span class="normal">8040</span>
<span class="normal">8041</span>
<span class="normal">8042</span>
<span class="normal">8043</span>
<span class="normal">8044</span>
<span class="normal">8045</span>
<span class="normal">8046</span>
<span class="normal">8047</span>
<span class="normal">8048</span>
<span class="normal">8049</span>
<span class="normal">8050</span>
<span class="normal">8051</span>
<span class="normal">8052</span>
<span class="normal">8053</span>
<span class="normal">8054</span>
<span class="normal">8055</span>
<span class="normal">8056</span>
<span class="normal">8057</span>
<span class="normal">8058</span>
<span class="normal">8059</span>
<span class="normal">8060</span>
<span class="normal">8061</span>
<span class="normal">8062</span>
<span class="normal">8063</span>
<span class="normal">8064</span>
<span class="normal">8065</span>
<span class="normal">8066</span>
<span class="normal">8067</span>
<span class="normal">8068</span>
<span class="normal">8069</span>
<span class="normal">8070</span>
<span class="normal">8071</span>
<span class="normal">8072</span>
<span class="normal">8073</span>
<span class="normal">8074</span>
<span class="normal">8075</span>
<span class="normal">8076</span>
<span class="normal">8077</span>
<span class="normal">8078</span>
<span class="normal">8079</span>
<span class="normal">8080</span>
<span class="normal">8081</span>
<span class="normal">8082</span>
<span class="normal">8083</span>
<span class="normal">8084</span>
<span class="normal">8085</span>
<span class="normal">8086</span>
<span class="normal">8087</span>
<span class="normal">8088</span>
<span class="normal">8089</span>
<span class="normal">8090</span>
<span class="normal">8091</span>
<span class="normal">8092</span>
<span class="normal">8093</span>
<span class="normal">8094</span>
<span class="normal">8095</span>
<span class="normal">8096</span>
<span class="normal">8097</span>
<span class="normal">8098</span>
<span class="normal">8099</span>
<span class="normal">8100</span>
<span class="normal">8101</span>
<span class="normal">8102</span>
<span class="normal">8103</span>
<span class="normal">8104</span>
<span class="normal">8105</span>
<span class="normal">8106</span>
<span class="normal">8107</span>
<span class="normal">8108</span>
<span class="normal">8109</span>
<span class="normal">8110</span>
<span class="normal">8111</span>
<span class="normal">8112</span>
<span class="normal">8113</span>
<span class="normal">8114</span>
<span class="normal">8115</span>
<span class="normal">8116</span>
<span class="normal">8117</span>
<span class="normal">8118</span>
<span class="normal">8119</span>
<span class="normal">8120</span>
<span class="normal">8121</span>
<span class="normal">8122</span>
<span class="normal">8123</span>
<span class="normal">8124</span>
<span class="normal">8125</span>
<span class="normal">8126</span>
<span class="normal">8127</span>
<span class="normal">8128</span>
<span class="normal">8129</span>
<span class="normal">8130</span>
<span class="normal">8131</span>
<span class="normal">8132</span>
<span class="normal">8133</span>
<span class="normal">8134</span>
<span class="normal">8135</span>
<span class="normal">8136</span>
<span class="normal">8137</span>
<span class="normal">8138</span>
<span class="normal">8139</span>
<span class="normal">8140</span>
<span class="normal">8141</span>
<span class="normal">8142</span>
<span class="normal">8143</span>
<span class="normal">8144</span>
<span class="normal">8145</span>
<span class="normal">8146</span>
<span class="normal">8147</span>
<span class="normal">8148</span>
<span class="normal">8149</span>
<span class="normal">8150</span>
<span class="normal">8151</span>
<span class="normal">8152</span>
<span class="normal">8153</span>
<span class="normal">8154</span>
<span class="normal">8155</span>
<span class="normal">8156</span>
<span class="normal">8157</span>
<span class="normal">8158</span>
<span class="normal">8159</span>
<span class="normal">8160</span>
<span class="normal">8161</span>
<span class="normal">8162</span>
<span class="normal">8163</span>
<span class="normal">8164</span>
<span class="normal">8165</span>
<span class="normal">8166</span>
<span class="normal">8167</span>
<span class="normal">8168</span>
<span class="normal">8169</span>
<span class="normal">8170</span>
<span class="normal">8171</span>
<span class="normal">8172</span>
<span class="normal">8173</span>
<span class="normal">8174</span>
<span class="normal">8175</span>
<span class="normal">8176</span>
<span class="normal">8177</span>
<span class="normal">8178</span>
<span class="normal">8179</span>
<span class="normal">8180</span>
<span class="normal">8181</span>
<span class="normal">8182</span>
<span class="normal">8183</span>
<span class="normal">8184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit_gps_trace</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">m</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">ann_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">default_features</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
    <span class="n">fig_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1550px&quot;</span><span class="p">,</span>
    <span class="n">fig_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;300px&quot;</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
    <span class="n">circle_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">48</span><span class="p">,</span>
    <span class="n">webGL</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sync_plots</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Edits a GPS trace on the map and allows for annotation and export.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The path to the GPS trace CSV file.</span>
<span class="sd">        m (Any): The map object containing the GPS trace.</span>
<span class="sd">        ann_column (str): The annotation column in the GPS trace.</span>
<span class="sd">        colormap (Dict[str, str]): The colormap for the GPS trace annotations.</span>
<span class="sd">        layer_name (str): The name of the GPS trace layer.</span>
<span class="sd">        default_features (Optional[str], optional): The default features to display.</span>
<span class="sd">            The first numerical column will be used if None. Defaults to None.</span>
<span class="sd">        ann_options (Optional[List[str]], optional): The annotation options for the dropdown. Defaults to None.</span>
<span class="sd">        rows (int, optional): The number of rows to display in the table. Defaults to 11.</span>
<span class="sd">        fig_width (str, optional): The width of the figure. Defaults to &quot;1550px&quot;.</span>
<span class="sd">        fig_height (str, optional): The height of the figure. Defaults to &quot;300px&quot;.</span>
<span class="sd">        time_format (str, optional): The time format for the timestamp. Defaults to &quot;%Y-%m-%d %H:%M:%S&quot;.</span>
<span class="sd">        stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;lightgray&quot;.</span>
<span class="sd">        circle_size (int, optional): The size of the GPS trace points. Defaults to 48.</span>
<span class="sd">        webGL (bool, optional): Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</span>
<span class="sd">        download (bool, optional): Whether to generate links for downloading the edited GPS traces. Defaults to False.</span>
<span class="sd">        sync_plots (bool, optional): Whether to synchronize the zoom and pan of the plots. Defaults to False.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): The column widths for the output widget. Defaults to (9, 3).</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The main widget containing the map and the editing interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

    <span class="kn">import</span> <span class="nn">bqplot</span> <span class="k">as</span> <span class="nn">bq</span>
    <span class="kn">from</span> <span class="nn">bqplot</span> <span class="kn">import</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">LinearScale</span><span class="p">,</span> <span class="n">PanZoom</span>

    <span class="k">if</span> <span class="n">webGL</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">bqplot_gl</span> <span class="kn">import</span> <span class="n">ScatterGL</span> <span class="k">as</span> <span class="n">Scatter</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s2">&quot;Please install bqplot_gl using &#39;pip install --pre bqplot-gl&#39;&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">bqplot</span> <span class="kn">import</span> <span class="n">Scatter</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">download_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="n">fig_margin</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;bottom&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
    <span class="n">x_sc</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>
    <span class="n">y_sc</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;_x_sc&quot;</span><span class="p">,</span> <span class="n">x_sc</span><span class="p">)</span>

    <span class="n">features</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
        <span class="n">features</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>

    <span class="c1"># Use the first numerical column as the default feature</span>
    <span class="k">if</span> <span class="n">default_features</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtypes</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">dtypes</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dtypes</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;float64&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
                <span class="n">default_features</span> <span class="o">=</span> <span class="p">[</span><span class="n">features</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                <span class="k">break</span>

    <span class="n">default_index</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">default_features</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">features</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">default_index</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Primary&quot;</span>
    <span class="p">)</span>

    <span class="n">column</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">value</span>
    <span class="n">ann_column_edited</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ann_column</span><span class="si">}</span><span class="s2">_edited&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>

    <span class="c1"># Create scatter plots for each annotation category with the appropriate colors and labels</span>
    <span class="n">scatters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">additonal_scatters</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">cat</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">cat</span> <span class="o">!=</span> <span class="s2">&quot;selected&quot;</span>
        <span class="p">):</span>  <span class="c1"># Exclude &#39;selected&#39; from data points (only for highlighting selection)</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
            <span class="n">scatter</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                <span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_sc</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_sc</span><span class="p">},</span>
                <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">color</span><span class="p">],</span>
                <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                <span class="n">stroke</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                <span class="n">unselected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
                <span class="n">selected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span>
                <span class="n">default_size</span><span class="o">=</span><span class="n">circle_size</span><span class="p">,</span>  <span class="c1"># Set a smaller default marker size</span>
                <span class="n">display_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cat</span><span class="p">)],</span>  <span class="c1"># Add the category label for the legend</span>
            <span class="p">)</span>
            <span class="n">scatters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scatter</span><span class="p">)</span>

    <span class="c1"># Create the figure and add the scatter plots</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span>
        <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span><span class="p">,</span>
        <span class="n">fig_margin</span><span class="o">=</span><span class="n">fig_margin</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">fig_width</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">fig_height</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">),</span>
        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">column</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">legend_location</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span>

    <span class="c1"># Add LassoSelector interaction</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">bq</span><span class="o">.</span><span class="n">interacts</span><span class="o">.</span><span class="n">LassoSelector</span><span class="p">(</span><span class="n">x_scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">y_scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>

    <span class="c1"># Add PanZoom interaction for zooming and panning</span>
    <span class="n">panzoom</span> <span class="o">=</span> <span class="n">PanZoom</span><span class="p">(</span><span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">x_sc</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y_sc</span><span class="p">]})</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">panzoom</span>  <span class="c1"># Set PanZoom as the interaction to enable zooming initially</span>
    <span class="p">)</span>

    <span class="c1"># Callback function to handle selected points with bounds check</span>
    <span class="k">def</span> <span class="nf">on_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">selected_idx</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scatters</span><span class="p">):</span>
                <span class="n">selected_indices</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span>
                <span class="k">if</span> <span class="n">selected_indices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selected_indices</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                    <span class="p">]</span>  <span class="c1"># Ensure integer indices</span>
                    <span class="n">selected_x</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">selected_indices</span><span class="p">]</span>
                    <span class="c1"># selected_y = scatter.y[selected_indices]</span>
                    <span class="n">selected_idx</span> <span class="o">+=</span> <span class="n">selected_x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">scas</span> <span class="ow">in</span> <span class="n">additonal_scatters</span><span class="p">:</span>
                    <span class="n">scas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="n">selected_indices</span>

            <span class="n">selected_idx</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">selected_idx</span><span class="p">)))</span>
            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">selected_idx</span><span class="p">,</span> <span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
            <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="c1"># Register the callback for each scatter plot</span>
    <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
        <span class="n">scatter</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_select</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">])</span>

    <span class="c1"># Programmatic selection function based on common x values</span>
    <span class="k">def</span> <span class="nf">select_points_by_common_x</span><span class="p">(</span><span class="n">x_values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select points based on a common list of x values across all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="c1"># Find indices of points in the scatter that match the given x values</span>
            <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="n">x_values</span>
            <span class="p">]</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">selected_indices</span>  <span class="c1"># Highlight points at the specified indices</span>
            <span class="p">)</span>

    <span class="c1"># Programmatic selection function based on common x values</span>
    <span class="k">def</span> <span class="nf">select_additional_points_by_common_x</span><span class="p">(</span><span class="n">x_values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select points based on a common list of x values across all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">scas</span> <span class="ow">in</span> <span class="n">additonal_scatters</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scas</span><span class="p">:</span>
                <span class="c1"># Find indices of points in the scatter that match the given x values</span>
                <span class="n">selected_indices</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">x_val</span> <span class="ow">in</span> <span class="n">x_values</span>
                <span class="p">]</span>
                <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">selected_indices</span>  <span class="c1"># Highlight points at the specified indices</span>
                <span class="p">)</span>

    <span class="c1"># Function to clear the lasso selection</span>
    <span class="k">def</span> <span class="nf">clear_selection</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">panzoom</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="c1"># Button to clear selection and switch between interactions</span>
    <span class="n">clear_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Clear Selection&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>
    <span class="n">clear_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">clear_selection</span><span class="p">)</span>

    <span class="c1"># Toggle between LassoSelector and PanZoom interactions</span>
    <span class="k">def</span> <span class="nf">toggle_interaction</span><span class="p">(</span><span class="n">button</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">==</span> <span class="n">selector</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">panzoom</span>  <span class="c1"># Switch to PanZoom for zooming and panning</span>
            <span class="n">button</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Enable Lasso&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Switch back to LassoSelector</span>
            <span class="n">button</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Enable Zoom/Pan&quot;</span>

    <span class="n">toggle_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Enable Zoom/Pan&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span>
    <span class="p">)</span>
    <span class="n">toggle_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">toggle_interaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feature_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>

                <span class="n">fig</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">),</span>
                    <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                <span class="p">]</span>

                <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">cat</span><span class="p">]]</span> <span class="o">*</span> <span class="n">categories</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
                <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">feature</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">feature_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">features</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
                <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">geom_type</span> <span class="o">=</span> <span class="n">features</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
            <span class="n">gdf_draw</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
            <span class="c1"># Select points within the drawn polygon</span>
            <span class="k">if</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">:</span>
                <span class="n">points_within_polygons</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">,</span> <span class="n">gdf_draw</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="s2">&quot;within&quot;</span>
                <span class="p">)</span>
                <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                    <span class="n">points_within_polygons</span><span class="p">[</span><span class="s2">&quot;index_right&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">(),</span> <span class="n">ann_column_edited</span>
                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
                <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                    <span class="n">selected</span> <span class="o">=</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                        <span class="n">points_within_polygons</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span>
                    <span class="p">]</span>
                    <span class="n">sel_idx</span> <span class="o">=</span> <span class="n">selected</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="n">select_points_by_common_x</span><span class="p">(</span><span class="n">sel_idx</span><span class="p">)</span>
                <span class="n">select_additional_points_by_common_x</span><span class="p">(</span><span class="n">sel_idx</span><span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;index_right&quot;</span> <span class="ow">in</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="n">points_within_polygons</span> <span class="o">=</span> <span class="n">points_within_polygons</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;index_right&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">gdf</span> <span class="o">=</span> <span class="n">points_within_polygons</span>
            <span class="c1"># Select the nearest point to the drawn point</span>
            <span class="k">elif</span> <span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
                <span class="n">single_point</span> <span class="o">=</span> <span class="n">gdf_draw</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">single_point</span><span class="p">)</span>
                <span class="n">nearest_index</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
                <span class="n">sel_idx</span> <span class="o">=</span> <span class="p">[</span><span class="n">nearest_index</span><span class="p">]</span>
                <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sel_idx</span><span class="p">,</span> <span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
                <span class="n">select_points_by_common_x</span><span class="p">(</span><span class="n">sel_idx</span><span class="p">)</span>
                <span class="n">select_additional_points_by_common_x</span><span class="p">(</span><span class="n">sel_idx</span><span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">gdf</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
                <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
            <span class="k">for</span> <span class="n">scas</span> <span class="ow">in</span> <span class="n">additonal_scatters</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scas</span><span class="p">:</span>
                    <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

            <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
            <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
        <span class="p">[],</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">ann_options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ann_options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="n">multi_select</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">SelectMultiple</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">features</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Secondary&quot;</span><span class="p">,</span>
        <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">ann_options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;annotation&quot;</span>
    <span class="p">)</span>
    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">feature</span><span class="p">,</span>
        <span class="n">multi_select</span><span class="p">,</span>
        <span class="n">dropdown</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
        <span class="n">output</span><span class="p">,</span>
        <span class="n">download_widget</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">features_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([])</span>

    <span class="k">def</span> <span class="nf">features_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>

            <span class="n">selected_features</span> <span class="o">=</span> <span class="n">multi_select</span><span class="o">.</span><span class="n">value</span>
            <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">additonal_scatters</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">selected_features</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">selected_feature</span> <span class="ow">in</span> <span class="n">selected_features</span><span class="p">:</span>

                    <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">selected_feature</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">sync_plots</span><span class="p">:</span>
                        <span class="n">x_sc</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">_x_sc</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">x_sc</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>
                    <span class="n">y_sc2</span> <span class="o">=</span> <span class="n">LinearScale</span><span class="p">()</span>

                    <span class="c1"># Create scatter plots for each annotation category with the appropriate colors and labels</span>
                    <span class="n">scatters</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">cat</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                        <span class="k">if</span> <span class="p">(</span>
                            <span class="n">cat</span> <span class="o">!=</span> <span class="s2">&quot;selected&quot;</span>
                        <span class="p">):</span>  <span class="c1"># Exclude &#39;selected&#39; from data points (only for highlighting selection)</span>
                            <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
                            <span class="n">scatter</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span>
                                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span>
                                <span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_sc</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_sc2</span><span class="p">},</span>
                                <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">color</span><span class="p">],</span>
                                <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
                                <span class="n">stroke</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                                <span class="n">unselected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
                                <span class="n">selected_style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">},</span>
                                <span class="n">default_size</span><span class="o">=</span><span class="n">circle_size</span><span class="p">,</span>  <span class="c1"># Set a smaller default marker size</span>
                                <span class="n">display_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">labels</span><span class="o">=</span><span class="p">[</span>
                                    <span class="nb">str</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
                                <span class="p">],</span>  <span class="c1"># Add the category label for the legend</span>
                            <span class="p">)</span>
                            <span class="n">scatters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scatter</span><span class="p">)</span>
                    <span class="n">additonal_scatters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scatters</span><span class="p">)</span>

                    <span class="c1"># Create the figure and add the scatter plots</span>
                    <span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span>
                        <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span><span class="p">,</span>
                        <span class="n">fig_margin</span><span class="o">=</span><span class="n">fig_margin</span><span class="p">,</span>
                        <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">fig_width</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">fig_height</span><span class="p">},</span>
                    <span class="p">)</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">),</span>
                        <span class="n">bq</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span>
                            <span class="n">scale</span><span class="o">=</span><span class="n">y_sc2</span><span class="p">,</span>
                            <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
                            <span class="n">label</span><span class="o">=</span><span class="n">selected_feature</span><span class="p">,</span>
                        <span class="p">),</span>
                    <span class="p">]</span>

                    <span class="n">fig</span><span class="o">.</span><span class="n">legend_location</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span>

                    <span class="c1"># Add LassoSelector interaction</span>
                    <span class="n">selector</span> <span class="o">=</span> <span class="n">bq</span><span class="o">.</span><span class="n">interacts</span><span class="o">.</span><span class="n">LassoSelector</span><span class="p">(</span>
                        <span class="n">x_scale</span><span class="o">=</span><span class="n">x_sc</span><span class="p">,</span> <span class="n">y_scale</span><span class="o">=</span><span class="n">y_sc</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">scatters</span>
                    <span class="p">)</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>

                    <span class="c1"># Add PanZoom interaction for zooming and panning</span>
                    <span class="n">panzoom</span> <span class="o">=</span> <span class="n">PanZoom</span><span class="p">(</span><span class="n">scales</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">x_sc</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y_sc2</span><span class="p">]})</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">panzoom</span>  <span class="c1"># Set PanZoom as the interaction to enable zooming initially</span>
                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
                <span class="n">features_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">children</span>

    <span class="n">multi_select</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">features_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">multi_select</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default_features</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="n">ann_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>
        <span class="n">categories</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">value</span><span class="p">][</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">scatters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">cat</span><span class="p">]]</span> <span class="o">*</span> <span class="n">categories</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">scas</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">additonal_scatters</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">cat</span>
                <span class="n">scas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">multi_select</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="n">idx</span><span class="p">]][</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">scas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">cat</span><span class="p">]]</span> <span class="o">*</span> <span class="n">categories</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">scatter</span> <span class="ow">in</span> <span class="n">scatters</span><span class="p">:</span>
            <span class="n">scatter</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Clear selected points</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">interaction</span> <span class="o">=</span> <span class="n">selector</span>  <span class="c1"># Re-enable the LassoSelector</span>

        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
        <span class="n">m</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">layer_name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span><span class="p">)</span>

        <span class="c1"># Save the annotation to a temporary file</span>
        <span class="n">temp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_tmp.csv&quot;</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[[</span><span class="n">ann_column</span><span class="p">]]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Exporting annotated GPS trace...&quot;</span><span class="p">)</span>
        <span class="n">changed_inx</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">!=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">changed_inx</span><span class="p">,</span> <span class="s2">&quot;changed_timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
            <span class="n">time_format</span>
        <span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gdf</span><span class="p">[</span><span class="n">ann_column</span><span class="p">]</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gps_trace</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">ann_column_edited</span><span class="p">])</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>

        <span class="n">output_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">out_dir</span><span class="p">,</span> <span class="n">basename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_edited_</span><span class="si">{</span><span class="n">current_time</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">output_geojson</span> <span class="o">=</span> <span class="n">output_csv</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">)</span>

        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output_geojson</span><span class="p">)</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
            <span class="n">csv_link</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">create_download_link</span><span class="p">(</span>
                <span class="n">output_csv</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Download &quot;</span><span class="p">,</span> <span class="n">basename</span><span class="o">=</span><span class="n">output_csv</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">geojson_link</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">create_download_link</span><span class="p">(</span>
                <span class="n">output_geojson</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Download &quot;</span><span class="p">,</span>
                <span class="n">basename</span><span class="o">=</span><span class="n">output_geojson</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>

            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_display_data</span><span class="p">(</span><span class="n">csv_link</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">download_widget</span><span class="p">:</span>
                <span class="n">download_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">download_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">download_widget</span><span class="o">.</span><span class="n">append_display_data</span><span class="p">(</span><span class="n">geojson_link</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saved CSV: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">output_csv</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Saved GeoJSON: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">output_geojson</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Remove the temporary file if it exists</span>
        <span class="n">tmp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;_tmp.csv&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmp_file</span><span class="p">)</span>

    <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">multi_select</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">features_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">download_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_click</span><span class="p">)</span>

    <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">fig</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">clear_button</span><span class="p">,</span> <span class="n">toggle_button</span><span class="p">])])</span>

    <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">m</span><span class="p">],</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">widget</span><span class="p">],</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">row1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">row2</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">plot_widget</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">row3</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">features_widget</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">,</span> <span class="n">row3</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.edit_vector_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit_vector_data</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">map_height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">file_ext</span><span class="o">=</span><span class="s1">&#39;geojson&#39;</span><span class="p">,</span> <span class="n">add_mapillary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;photo&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">5e-05</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">420</span><span class="p">,</span> <span class="n">frame_border</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">controls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;top-right&#39;</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.edit_vector_data" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Generates a widget-based interface for creating and managing vector data on a map.</p>
<p>This function creates an interactive widget interface that allows users to draw features
(points, lines, polygons) on a map, assign properties to these features, and export them
as GeoJSON files. The interface includes a map, a sidebar for property management, and
buttons for saving, exporting, and resetting the data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>m</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Map (leafmap.maplibregl.Map)" href="#leafmap.maplibregl.Map">Map</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An existing Map object. If not provided, a default map with
basemaps and drawing controls will be created. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span> or <span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to a GeoJSON file or a GeoDataFrame
containing the vector data to be edited. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>properties</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where keys are property names
and values are lists of possible values for each property. These properties can be
assigned to the drawn features. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format string for the timestamp used in the exported
filename. Defaults to "%Y%m%dT%H%M%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of two integers specifying the
relative widths of the map and sidebar columns. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                  <code>(9, 3)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map widget. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;600px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>out_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory where the exported GeoJSON files will be saved.
If not provided, the current working directory is used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename_prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A prefix to be added to the exported filename.
Defaults to "".</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_ext</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file extension for the exported file. Defaults to "geojson".</p>
              </div>
            </td>
            <td>
                  <code>&#39;geojson&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_mapillary</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to add a Mapillary image widget that displays the
nearest image to the clicked point on the map. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The style of the Mapillary image widget. Can be "classic", "photo",
or "split". Defaults to "photo".</p>
              </div>
            </td>
            <td>
                  <code>&#39;photo&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius (in degrees) used to search for the nearest Mapillary
image. Defaults to 0.00005 degrees.</p>
              </div>
            </td>
            <td>
                  <code>5e-05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>width</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the Mapillary image widget. Defaults to 300.</p>
              </div>
            </td>
            <td>
                  <code>300</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>height</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the Mapillary image widget. Defaults to 420.</p>
              </div>
            </td>
            <td>
                  <code>420</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_border</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the frame border for the Mapillary image widget.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>controls</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The drawing controls to be added to the map.
Defaults to ["point", "polygon", "line_string", "trash"].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the drawing controls on the map. Defaults to "top-right".</p>
              </div>
            </td>
            <td>
                  <code>&#39;top-right&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments that may be passed to the function.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">8834</span>
<span class="normal">8835</span>
<span class="normal">8836</span>
<span class="normal">8837</span>
<span class="normal">8838</span>
<span class="normal">8839</span>
<span class="normal">8840</span>
<span class="normal">8841</span>
<span class="normal">8842</span>
<span class="normal">8843</span>
<span class="normal">8844</span>
<span class="normal">8845</span>
<span class="normal">8846</span>
<span class="normal">8847</span>
<span class="normal">8848</span>
<span class="normal">8849</span>
<span class="normal">8850</span>
<span class="normal">8851</span>
<span class="normal">8852</span>
<span class="normal">8853</span>
<span class="normal">8854</span>
<span class="normal">8855</span>
<span class="normal">8856</span>
<span class="normal">8857</span>
<span class="normal">8858</span>
<span class="normal">8859</span>
<span class="normal">8860</span>
<span class="normal">8861</span>
<span class="normal">8862</span>
<span class="normal">8863</span>
<span class="normal">8864</span>
<span class="normal">8865</span>
<span class="normal">8866</span>
<span class="normal">8867</span>
<span class="normal">8868</span>
<span class="normal">8869</span>
<span class="normal">8870</span>
<span class="normal">8871</span>
<span class="normal">8872</span>
<span class="normal">8873</span>
<span class="normal">8874</span>
<span class="normal">8875</span>
<span class="normal">8876</span>
<span class="normal">8877</span>
<span class="normal">8878</span>
<span class="normal">8879</span>
<span class="normal">8880</span>
<span class="normal">8881</span>
<span class="normal">8882</span>
<span class="normal">8883</span>
<span class="normal">8884</span>
<span class="normal">8885</span>
<span class="normal">8886</span>
<span class="normal">8887</span>
<span class="normal">8888</span>
<span class="normal">8889</span>
<span class="normal">8890</span>
<span class="normal">8891</span>
<span class="normal">8892</span>
<span class="normal">8893</span>
<span class="normal">8894</span>
<span class="normal">8895</span>
<span class="normal">8896</span>
<span class="normal">8897</span>
<span class="normal">8898</span>
<span class="normal">8899</span>
<span class="normal">8900</span>
<span class="normal">8901</span>
<span class="normal">8902</span>
<span class="normal">8903</span>
<span class="normal">8904</span>
<span class="normal">8905</span>
<span class="normal">8906</span>
<span class="normal">8907</span>
<span class="normal">8908</span>
<span class="normal">8909</span>
<span class="normal">8910</span>
<span class="normal">8911</span>
<span class="normal">8912</span>
<span class="normal">8913</span>
<span class="normal">8914</span>
<span class="normal">8915</span>
<span class="normal">8916</span>
<span class="normal">8917</span>
<span class="normal">8918</span>
<span class="normal">8919</span>
<span class="normal">8920</span>
<span class="normal">8921</span>
<span class="normal">8922</span>
<span class="normal">8923</span>
<span class="normal">8924</span>
<span class="normal">8925</span>
<span class="normal">8926</span>
<span class="normal">8927</span>
<span class="normal">8928</span>
<span class="normal">8929</span>
<span class="normal">8930</span>
<span class="normal">8931</span>
<span class="normal">8932</span>
<span class="normal">8933</span>
<span class="normal">8934</span>
<span class="normal">8935</span>
<span class="normal">8936</span>
<span class="normal">8937</span>
<span class="normal">8938</span>
<span class="normal">8939</span>
<span class="normal">8940</span>
<span class="normal">8941</span>
<span class="normal">8942</span>
<span class="normal">8943</span>
<span class="normal">8944</span>
<span class="normal">8945</span>
<span class="normal">8946</span>
<span class="normal">8947</span>
<span class="normal">8948</span>
<span class="normal">8949</span>
<span class="normal">8950</span>
<span class="normal">8951</span>
<span class="normal">8952</span>
<span class="normal">8953</span>
<span class="normal">8954</span>
<span class="normal">8955</span>
<span class="normal">8956</span>
<span class="normal">8957</span>
<span class="normal">8958</span>
<span class="normal">8959</span>
<span class="normal">8960</span>
<span class="normal">8961</span>
<span class="normal">8962</span>
<span class="normal">8963</span>
<span class="normal">8964</span>
<span class="normal">8965</span>
<span class="normal">8966</span>
<span class="normal">8967</span>
<span class="normal">8968</span>
<span class="normal">8969</span>
<span class="normal">8970</span>
<span class="normal">8971</span>
<span class="normal">8972</span>
<span class="normal">8973</span>
<span class="normal">8974</span>
<span class="normal">8975</span>
<span class="normal">8976</span>
<span class="normal">8977</span>
<span class="normal">8978</span>
<span class="normal">8979</span>
<span class="normal">8980</span>
<span class="normal">8981</span>
<span class="normal">8982</span>
<span class="normal">8983</span>
<span class="normal">8984</span>
<span class="normal">8985</span>
<span class="normal">8986</span>
<span class="normal">8987</span>
<span class="normal">8988</span>
<span class="normal">8989</span>
<span class="normal">8990</span>
<span class="normal">8991</span>
<span class="normal">8992</span>
<span class="normal">8993</span>
<span class="normal">8994</span>
<span class="normal">8995</span>
<span class="normal">8996</span>
<span class="normal">8997</span>
<span class="normal">8998</span>
<span class="normal">8999</span>
<span class="normal">9000</span>
<span class="normal">9001</span>
<span class="normal">9002</span>
<span class="normal">9003</span>
<span class="normal">9004</span>
<span class="normal">9005</span>
<span class="normal">9006</span>
<span class="normal">9007</span>
<span class="normal">9008</span>
<span class="normal">9009</span>
<span class="normal">9010</span>
<span class="normal">9011</span>
<span class="normal">9012</span>
<span class="normal">9013</span>
<span class="normal">9014</span>
<span class="normal">9015</span>
<span class="normal">9016</span>
<span class="normal">9017</span>
<span class="normal">9018</span>
<span class="normal">9019</span>
<span class="normal">9020</span>
<span class="normal">9021</span>
<span class="normal">9022</span>
<span class="normal">9023</span>
<span class="normal">9024</span>
<span class="normal">9025</span>
<span class="normal">9026</span>
<span class="normal">9027</span>
<span class="normal">9028</span>
<span class="normal">9029</span>
<span class="normal">9030</span>
<span class="normal">9031</span>
<span class="normal">9032</span>
<span class="normal">9033</span>
<span class="normal">9034</span>
<span class="normal">9035</span>
<span class="normal">9036</span>
<span class="normal">9037</span>
<span class="normal">9038</span>
<span class="normal">9039</span>
<span class="normal">9040</span>
<span class="normal">9041</span>
<span class="normal">9042</span>
<span class="normal">9043</span>
<span class="normal">9044</span>
<span class="normal">9045</span>
<span class="normal">9046</span>
<span class="normal">9047</span>
<span class="normal">9048</span>
<span class="normal">9049</span>
<span class="normal">9050</span>
<span class="normal">9051</span>
<span class="normal">9052</span>
<span class="normal">9053</span>
<span class="normal">9054</span>
<span class="normal">9055</span>
<span class="normal">9056</span>
<span class="normal">9057</span>
<span class="normal">9058</span>
<span class="normal">9059</span>
<span class="normal">9060</span>
<span class="normal">9061</span>
<span class="normal">9062</span>
<span class="normal">9063</span>
<span class="normal">9064</span>
<span class="normal">9065</span>
<span class="normal">9066</span>
<span class="normal">9067</span>
<span class="normal">9068</span>
<span class="normal">9069</span>
<span class="normal">9070</span>
<span class="normal">9071</span>
<span class="normal">9072</span>
<span class="normal">9073</span>
<span class="normal">9074</span>
<span class="normal">9075</span>
<span class="normal">9076</span>
<span class="normal">9077</span>
<span class="normal">9078</span>
<span class="normal">9079</span>
<span class="normal">9080</span>
<span class="normal">9081</span>
<span class="normal">9082</span>
<span class="normal">9083</span>
<span class="normal">9084</span>
<span class="normal">9085</span>
<span class="normal">9086</span>
<span class="normal">9087</span>
<span class="normal">9088</span>
<span class="normal">9089</span>
<span class="normal">9090</span>
<span class="normal">9091</span>
<span class="normal">9092</span>
<span class="normal">9093</span>
<span class="normal">9094</span>
<span class="normal">9095</span>
<span class="normal">9096</span>
<span class="normal">9097</span>
<span class="normal">9098</span>
<span class="normal">9099</span>
<span class="normal">9100</span>
<span class="normal">9101</span>
<span class="normal">9102</span>
<span class="normal">9103</span>
<span class="normal">9104</span>
<span class="normal">9105</span>
<span class="normal">9106</span>
<span class="normal">9107</span>
<span class="normal">9108</span>
<span class="normal">9109</span>
<span class="normal">9110</span>
<span class="normal">9111</span>
<span class="normal">9112</span>
<span class="normal">9113</span>
<span class="normal">9114</span>
<span class="normal">9115</span>
<span class="normal">9116</span>
<span class="normal">9117</span>
<span class="normal">9118</span>
<span class="normal">9119</span>
<span class="normal">9120</span>
<span class="normal">9121</span>
<span class="normal">9122</span>
<span class="normal">9123</span>
<span class="normal">9124</span>
<span class="normal">9125</span>
<span class="normal">9126</span>
<span class="normal">9127</span>
<span class="normal">9128</span>
<span class="normal">9129</span>
<span class="normal">9130</span>
<span class="normal">9131</span>
<span class="normal">9132</span>
<span class="normal">9133</span>
<span class="normal">9134</span>
<span class="normal">9135</span>
<span class="normal">9136</span>
<span class="normal">9137</span>
<span class="normal">9138</span>
<span class="normal">9139</span>
<span class="normal">9140</span>
<span class="normal">9141</span>
<span class="normal">9142</span>
<span class="normal">9143</span>
<span class="normal">9144</span>
<span class="normal">9145</span>
<span class="normal">9146</span>
<span class="normal">9147</span>
<span class="normal">9148</span>
<span class="normal">9149</span>
<span class="normal">9150</span>
<span class="normal">9151</span>
<span class="normal">9152</span>
<span class="normal">9153</span>
<span class="normal">9154</span>
<span class="normal">9155</span>
<span class="normal">9156</span>
<span class="normal">9157</span>
<span class="normal">9158</span>
<span class="normal">9159</span>
<span class="normal">9160</span>
<span class="normal">9161</span>
<span class="normal">9162</span>
<span class="normal">9163</span>
<span class="normal">9164</span>
<span class="normal">9165</span>
<span class="normal">9166</span>
<span class="normal">9167</span>
<span class="normal">9168</span>
<span class="normal">9169</span>
<span class="normal">9170</span>
<span class="normal">9171</span>
<span class="normal">9172</span>
<span class="normal">9173</span>
<span class="normal">9174</span>
<span class="normal">9175</span>
<span class="normal">9176</span>
<span class="normal">9177</span>
<span class="normal">9178</span>
<span class="normal">9179</span>
<span class="normal">9180</span>
<span class="normal">9181</span>
<span class="normal">9182</span>
<span class="normal">9183</span>
<span class="normal">9184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit_vector_data</span><span class="p">(</span>
    <span class="n">m</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Map</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">properties</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">map_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="n">out_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">file_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;geojson&quot;</span><span class="p">,</span>
    <span class="n">add_mapillary</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.00005</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">420</span><span class="p">,</span>
    <span class="n">frame_border</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top-right&quot;</span><span class="p">,</span>
    <span class="n">fit_bounds_options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a widget-based interface for creating and managing vector data on a map.</span>

<span class="sd">    This function creates an interactive widget interface that allows users to draw features</span>
<span class="sd">    (points, lines, polygons) on a map, assign properties to these features, and export them</span>
<span class="sd">    as GeoJSON files. The interface includes a map, a sidebar for property management, and</span>
<span class="sd">    buttons for saving, exporting, and resetting the data.</span>

<span class="sd">    Args:</span>
<span class="sd">        m (Map, optional): An existing Map object. If not provided, a default map with</span>
<span class="sd">            basemaps and drawing controls will be created. Defaults to None.</span>
<span class="sd">        filename (str or gpd.GeoDataFrame): The path to a GeoJSON file or a GeoDataFrame</span>
<span class="sd">            containing the vector data to be edited. Defaults to None.</span>
<span class="sd">        properties (Dict[str, List[Any]], optional): A dictionary where keys are property names</span>
<span class="sd">            and values are lists of possible values for each property. These properties can be</span>
<span class="sd">            assigned to the drawn features. Defaults to None.</span>
<span class="sd">        time_format (str, optional): The format string for the timestamp used in the exported</span>
<span class="sd">            filename. Defaults to &quot;%Y%m%dT%H%M%S&quot;.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): A list of two integers specifying the</span>
<span class="sd">            relative widths of the map and sidebar columns. Defaults to (9, 3).</span>
<span class="sd">        map_height (str, optional): The height of the map widget. Defaults to &quot;600px&quot;.</span>
<span class="sd">        out_dir (str, optional): The directory where the exported GeoJSON files will be saved.</span>
<span class="sd">            If not provided, the current working directory is used. Defaults to None.</span>
<span class="sd">        filename_prefix (str, optional): A prefix to be added to the exported filename.</span>
<span class="sd">            Defaults to &quot;&quot;.</span>
<span class="sd">        file_ext (str, optional): The file extension for the exported file. Defaults to &quot;geojson&quot;.</span>
<span class="sd">        add_mapillary (bool, optional): Whether to add a Mapillary image widget that displays the</span>
<span class="sd">            nearest image to the clicked point on the map. Defaults to False.</span>
<span class="sd">        style (str, optional): The style of the Mapillary image widget. Can be &quot;classic&quot;, &quot;photo&quot;,</span>
<span class="sd">            or &quot;split&quot;. Defaults to &quot;photo&quot;.</span>
<span class="sd">        radius (float, optional): The radius (in degrees) used to search for the nearest Mapillary</span>
<span class="sd">            image. Defaults to 0.00005 degrees.</span>
<span class="sd">        width (int, optional): The width of the Mapillary image widget. Defaults to 300.</span>
<span class="sd">        height (int, optional): The height of the Mapillary image widget. Defaults to 420.</span>
<span class="sd">        frame_border (int, optional): The width of the frame border for the Mapillary image widget.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">        controls (Optional[List[str]], optional): The drawing controls to be added to the map.</span>
<span class="sd">            Defaults to [&quot;point&quot;, &quot;polygon&quot;, &quot;line_string&quot;, &quot;trash&quot;].</span>
<span class="sd">        position (str, optional): The position of the drawing controls on the map. Defaults to &quot;top-right&quot;.</span>
<span class="sd">        **kwargs (Any): Additional keyword arguments that may be passed to the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.VBox: A vertical box widget containing the map, sidebar, and control buttons.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">controls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;line_string&quot;</span><span class="p">,</span> <span class="s2">&quot;trash&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.parquet&quot;</span><span class="p">,</span> <span class="s2">&quot;.pq&quot;</span><span class="p">,</span> <span class="s2">&quot;.geoparquet&quot;</span><span class="p">]:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">):</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;filename must be a string or a GeoDataFrame.&quot;</span><span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_default_map</span><span class="p">():</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;liberty&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">map_height</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;Satellite&quot;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap.Mapnik&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_buildings</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_data</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="s2">&quot;transportation&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">create_default_map</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dtypes</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;int32&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;bool&quot;</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">columns</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]]</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">add_draw_control</span><span class="p">(</span>
        <span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">geojson</span><span class="o">=</span><span class="n">geojson</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit_bounds_options</span><span class="p">)</span>

    <span class="n">draw_features</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">draw_feature</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">prop</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">draw_feature</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">prop</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">draw_features</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">draw_feature</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;draw_features&quot;</span><span class="p">,</span> <span class="n">draw_features</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span> <span class="o">=</span> <span class="n">geojson</span>

    <span class="c1"># Expand dropdown options to include values from the GeoJSON</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="c1"># Collect unique values from the loaded features</span>
            <span class="n">existing_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">feature_data</span> <span class="ow">in</span> <span class="n">draw_features</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">feature_data</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">feature_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">existing_values</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

            <span class="c1"># Merge existing values with provided options</span>
            <span class="n">options_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">merged_options</span> <span class="o">=</span> <span class="n">options_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">existing_values</span><span class="p">)</span>
            <span class="c1"># Convert back to list, maintaining order (original options first)</span>
            <span class="n">merged_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">merged_options</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">existing_values</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options_set</span><span class="p">:</span>
                    <span class="n">merged_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">merged_list</span>

    <span class="n">sidebar_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">prop_widgets</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">image_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                    <span class="n">options</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="c1"># value=None,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FloatText</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prop_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prop_widget</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">draw_change</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">feature_id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                            <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
                        <span class="c1"># For dropdown widgets, only set value if it&#39;s in options</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">prop_widget</span><span class="p">,</span> <span class="s2">&quot;options&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                                <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
                            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1"># Fall back to first option if value not found</span>
                                <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">tuple</span>
                <span class="p">):</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">draw_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;draw_features_selected&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">log_lng_lat</span><span class="p">(</span><span class="n">lng_lat</span><span class="p">):</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lng&quot;</span><span class="p">]</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">lng_lat</span><span class="o">.</span><span class="n">new</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span>
        <span class="n">image_id</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">search_mapillary_images</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            &lt;iframe</span>
<span class="s2">                src=&quot;https://www.mapillary.com/embed?image_key=</span><span class="si">{</span><span class="n">image_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;style=</span><span class="si">{</span><span class="n">style</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                frameborder=&quot;</span><span class="si">{</span><span class="n">frame_border</span><span class="si">}</span><span class="s2">&quot;&gt;</span>
<span class="s2">            &lt;/iframe&gt;</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">image_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;No Mapillary image found.&quot;</span>

    <span class="k">if</span> <span class="n">add_mapillary</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">log_lng_lat</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;clicked&quot;</span><span class="p">)</span>

    <span class="n">button_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;97px&quot;</span><span class="p">)</span>
    <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">export</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Export&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>
    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">button_layout</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_save_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features_selected</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Faeature saved.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="s2">&quot;Please select a feature to save.&quot;</span><span class="p">)</span>

    <span class="n">save</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_save_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_export_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">time_format</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename_prefix</span><span class="si">}{</span><span class="n">current_time</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]):</span>
            <span class="n">feature_id</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">feature_id</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">draw_features</span><span class="p">[</span><span class="n">feature_id</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">draw_feature_collection_all</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
        <span class="p">)</span>
        <span class="n">gdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exported: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">export</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_export_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">for</span> <span class="n">prop_widget</span> <span class="ow">in</span> <span class="n">prop_widgets</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">prop_widget</span><span class="o">.</span><span class="n">description</span>
            <span class="k">if</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">],</span> <span class="nb">tuple</span>
                <span class="p">):</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prop_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">properties</span><span class="p">[</span><span class="n">description</span><span class="p">]</span>

    <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_click</span><span class="p">)</span>

    <span class="n">sidebar_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">prop_widgets</span><span class="p">,</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">save</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
        <span class="n">output</span><span class="p">,</span>
        <span class="n">image_widget</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">left_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">m</span><span class="p">],</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">right_col_layout</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span>
        <span class="n">cols</span><span class="o">=</span><span class="n">column_widths</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">sidebar_widget</span><span class="p">],</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;pa-1&quot;</span><span class="p">,</span>  <span class="c1"># padding for consistent spacing</span>
    <span class="p">)</span>
    <span class="n">row1</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span>
        <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;d-flex flex-wrap&quot;</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">left_col_layout</span><span class="p">,</span> <span class="n">right_col_layout</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">row1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.maptiler_3d_style" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">maptiler_3d_style</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;satellite&#39;</span><span class="p">,</span> <span class="n">exaggeration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">tile_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">hillshade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s1">&#39;MAPTILER_KEY&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.maptiler_3d_style" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Get the 3D terrain style for the map.</p>
<p>This function generates a style dictionary for the map that includes 3D terrain features.
The terrain exaggeration and API key can be specified. If the API key is not provided,
it will be retrieved using the specified token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>style</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MapTiler style to be accessed. It can be one of the following:
aquarelle, backdrop, basic, bright, dataviz, hillshade, landscape, ocean, openstreetmap, outdoor,
satellite, streets, toner, topo, winter, etc.</p>
              </div>
            </td>
            <td>
                  <code>&#39;satellite&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exaggeration</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The terrain exaggeration. Defaults to 1.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the tiles. Defaults to 512.</p>
              </div>
            </td>
            <td>
                  <code>512</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the tiles. It can be one of the following:
webp, png, jpg. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_zoom</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum zoom level. Defaults to 24.</p>
              </div>
            </td>
            <td>
                  <code>24</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hillshade</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include hillshade. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The token to use to retrieve the API key. Defaults to "MAPTILER_KEY".</p>
              </div>
            </td>
            <td>
                  <code>&#39;MAPTILER_KEY&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API key. If not provided, it will be retrieved using the token.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: The style dictionary for the map.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the API key is not provided and cannot be retrieved using the token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">7481</span>
<span class="normal">7482</span>
<span class="normal">7483</span>
<span class="normal">7484</span>
<span class="normal">7485</span>
<span class="normal">7486</span>
<span class="normal">7487</span>
<span class="normal">7488</span>
<span class="normal">7489</span>
<span class="normal">7490</span>
<span class="normal">7491</span>
<span class="normal">7492</span>
<span class="normal">7493</span>
<span class="normal">7494</span>
<span class="normal">7495</span>
<span class="normal">7496</span>
<span class="normal">7497</span>
<span class="normal">7498</span>
<span class="normal">7499</span>
<span class="normal">7500</span>
<span class="normal">7501</span>
<span class="normal">7502</span>
<span class="normal">7503</span>
<span class="normal">7504</span>
<span class="normal">7505</span>
<span class="normal">7506</span>
<span class="normal">7507</span>
<span class="normal">7508</span>
<span class="normal">7509</span>
<span class="normal">7510</span>
<span class="normal">7511</span>
<span class="normal">7512</span>
<span class="normal">7513</span>
<span class="normal">7514</span>
<span class="normal">7515</span>
<span class="normal">7516</span>
<span class="normal">7517</span>
<span class="normal">7518</span>
<span class="normal">7519</span>
<span class="normal">7520</span>
<span class="normal">7521</span>
<span class="normal">7522</span>
<span class="normal">7523</span>
<span class="normal">7524</span>
<span class="normal">7525</span>
<span class="normal">7526</span>
<span class="normal">7527</span>
<span class="normal">7528</span>
<span class="normal">7529</span>
<span class="normal">7530</span>
<span class="normal">7531</span>
<span class="normal">7532</span>
<span class="normal">7533</span>
<span class="normal">7534</span>
<span class="normal">7535</span>
<span class="normal">7536</span>
<span class="normal">7537</span>
<span class="normal">7538</span>
<span class="normal">7539</span>
<span class="normal">7540</span>
<span class="normal">7541</span>
<span class="normal">7542</span>
<span class="normal">7543</span>
<span class="normal">7544</span>
<span class="normal">7545</span>
<span class="normal">7546</span>
<span class="normal">7547</span>
<span class="normal">7548</span>
<span class="normal">7549</span>
<span class="normal">7550</span>
<span class="normal">7551</span>
<span class="normal">7552</span>
<span class="normal">7553</span>
<span class="normal">7554</span>
<span class="normal">7555</span>
<span class="normal">7556</span>
<span class="normal">7557</span>
<span class="normal">7558</span>
<span class="normal">7559</span>
<span class="normal">7560</span>
<span class="normal">7561</span>
<span class="normal">7562</span>
<span class="normal">7563</span>
<span class="normal">7564</span>
<span class="normal">7565</span>
<span class="normal">7566</span>
<span class="normal">7567</span>
<span class="normal">7568</span>
<span class="normal">7569</span>
<span class="normal">7570</span>
<span class="normal">7571</span>
<span class="normal">7572</span>
<span class="normal">7573</span>
<span class="normal">7574</span>
<span class="normal">7575</span>
<span class="normal">7576</span>
<span class="normal">7577</span>
<span class="normal">7578</span>
<span class="normal">7579</span>
<span class="normal">7580</span>
<span class="normal">7581</span>
<span class="normal">7582</span>
<span class="normal">7583</span>
<span class="normal">7584</span>
<span class="normal">7585</span>
<span class="normal">7586</span>
<span class="normal">7587</span>
<span class="normal">7588</span>
<span class="normal">7589</span>
<span class="normal">7590</span>
<span class="normal">7591</span>
<span class="normal">7592</span>
<span class="normal">7593</span>
<span class="normal">7594</span>
<span class="normal">7595</span>
<span class="normal">7596</span>
<span class="normal">7597</span>
<span class="normal">7598</span>
<span class="normal">7599</span>
<span class="normal">7600</span>
<span class="normal">7601</span>
<span class="normal">7602</span>
<span class="normal">7603</span>
<span class="normal">7604</span>
<span class="normal">7605</span>
<span class="normal">7606</span>
<span class="normal">7607</span>
<span class="normal">7608</span>
<span class="normal">7609</span>
<span class="normal">7610</span>
<span class="normal">7611</span>
<span class="normal">7612</span>
<span class="normal">7613</span>
<span class="normal">7614</span>
<span class="normal">7615</span>
<span class="normal">7616</span>
<span class="normal">7617</span>
<span class="normal">7618</span>
<span class="normal">7619</span>
<span class="normal">7620</span>
<span class="normal">7621</span>
<span class="normal">7622</span>
<span class="normal">7623</span>
<span class="normal">7624</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">maptiler_3d_style</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
    <span class="n">exaggeration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
    <span class="n">tile_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_zoom</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
    <span class="n">hillshade</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MAPTILER_KEY&quot;</span><span class="p">,</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the 3D terrain style for the map.</span>

<span class="sd">    This function generates a style dictionary for the map that includes 3D terrain features.</span>
<span class="sd">    The terrain exaggeration and API key can be specified. If the API key is not provided,</span>
<span class="sd">    it will be retrieved using the specified token.</span>

<span class="sd">    Args:</span>
<span class="sd">        style (str): The name of the MapTiler style to be accessed. It can be one of the following:</span>
<span class="sd">            aquarelle, backdrop, basic, bright, dataviz, hillshade, landscape, ocean, openstreetmap, outdoor,</span>
<span class="sd">            satellite, streets, toner, topo, winter, etc.</span>
<span class="sd">        exaggeration (float, optional): The terrain exaggeration. Defaults to 1.</span>
<span class="sd">        tile_size (int, optional): The size of the tiles. Defaults to 512.</span>
<span class="sd">        tile_type (str, optional): The type of the tiles. It can be one of the following:</span>
<span class="sd">            webp, png, jpg. Defaults to None.</span>
<span class="sd">        max_zoom (int, optional): The maximum zoom level. Defaults to 24.</span>
<span class="sd">        hillshade (bool, optional): Whether to include hillshade. Defaults to True.</span>
<span class="sd">        token (str, optional): The token to use to retrieve the API key. Defaults to &quot;MAPTILER_KEY&quot;.</span>
<span class="sd">        api_key (Optional[str], optional): The API key. If not provided, it will be retrieved using the token.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: The style dictionary for the map.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the API key is not provided and cannot be retrieved using the token.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">api_key</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_api_key</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;An API key is required to use the 3D terrain feature.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;dark-matter&quot;</span>

    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;terrain&quot;</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;satellite&quot;</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">tile_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">image_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;aquarelle&quot;</span><span class="p">:</span> <span class="s2">&quot;webp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;backdrop&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;basic&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;basic-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bright-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dataviz&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hybrid&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;landscape&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ocean&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;openstreetmap&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;outdoor&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;outdoor-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;satellite&quot;</span><span class="p">:</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
            <span class="s2">&quot;toner&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;toner-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;topo&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;topo-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;winter&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
            <span class="s2">&quot;winter-v2&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="n">image_types</span><span class="p">:</span>
            <span class="n">tile_type</span> <span class="o">=</span> <span class="n">image_types</span><span class="p">[</span><span class="n">style</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tile_type</span> <span class="o">=</span> <span class="s2">&quot;png&quot;</span>

    <span class="n">layers</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">hillshade</span><span class="p">:</span>
        <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">,</span>
                <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;visibility&quot;</span><span class="p">:</span> <span class="s2">&quot;visible&quot;</span><span class="p">},</span>
                <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hillshade-shadow-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#473B24&quot;</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;ocean&quot;</span><span class="p">:</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/ocean-rgb/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/ocean-rgb/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;terrainSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;hillshadeSource&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster-dem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=</span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">sources</span><span class="p">[</span><span class="n">style</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;tiles&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;https://api.maptiler.com/maps/&quot;</span>
                <span class="o">+</span> <span class="n">style</span>
                <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.&quot;</span>
                <span class="o">+</span> <span class="n">tile_type</span>
                <span class="o">+</span> <span class="s2">&quot;?key=&quot;</span>
                <span class="o">+</span> <span class="n">api_key</span>
            <span class="p">],</span>
            <span class="s2">&quot;tileSize&quot;</span><span class="p">:</span> <span class="n">tile_size</span><span class="p">,</span>
            <span class="s2">&quot;attribution&quot;</span><span class="p">:</span> <span class="s2">&quot;&amp;copy; MapTiler&quot;</span><span class="p">,</span>
            <span class="s2">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="n">max_zoom</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="n">sources</span><span class="p">,</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="n">layers</span><span class="p">,</span>
        <span class="s2">&quot;terrain&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;terrainSource&quot;</span><span class="p">,</span> <span class="s2">&quot;exaggeration&quot;</span><span class="p">:</span> <span class="n">exaggeration</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">style</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.open_gps_trace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">open_gps_trace</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;GPS Trace&#39;</span><span class="p">,</span> <span class="n">default_features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">fig_width</span><span class="o">=</span><span class="s1">&#39;1550px&#39;</span><span class="p">,</span> <span class="n">fig_height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">circle_size</span><span class="o">=</span><span class="mi">48</span><span class="p">,</span> <span class="n">webGL</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sync_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">add_layer_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arrow_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">map_height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.open_gps_trace" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Creates a widget for uploading and displaying a GPS trace on a map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The columns to display in the GPS trace popup. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation column in the GPS trace.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colormap</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The colormap for the GPS trace annotations.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the GPS trace layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;GPS Trace&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_features</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default features to display.
The first numerical column will be used if None. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation options for the dropdown. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rows</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of rows to display in the table. Defaults to 11.</p>
              </div>
            </td>
            <td>
                  <code>11</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the figure. Defaults to "1550px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;1550px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the figure. Defaults to "300px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;300px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time format for the timestamp. Defaults to "%Y-%m-%d %H:%M:%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stroke_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stroke color of the GPS trace points. Defaults to "lightgray".</p>
              </div>
            </td>
            <td>
                  <code>&#39;lightgray&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>circle_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the GPS trace points. Defaults to 48.</p>
              </div>
            </td>
            <td>
                  <code>48</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>webGL</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to generate links for downloading the edited GPS traces. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync_plots</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to synchronize the zoom and pan of the plots. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column widths for the output widget. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                  <code>(9, 3)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_layer_args</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_gps_trace method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>arrow_args</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_arrow method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;600px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the edit_gps_trace method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.VBox: The widget containing the GPS trace upload and display interface.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">8187</span>
<span class="normal">8188</span>
<span class="normal">8189</span>
<span class="normal">8190</span>
<span class="normal">8191</span>
<span class="normal">8192</span>
<span class="normal">8193</span>
<span class="normal">8194</span>
<span class="normal">8195</span>
<span class="normal">8196</span>
<span class="normal">8197</span>
<span class="normal">8198</span>
<span class="normal">8199</span>
<span class="normal">8200</span>
<span class="normal">8201</span>
<span class="normal">8202</span>
<span class="normal">8203</span>
<span class="normal">8204</span>
<span class="normal">8205</span>
<span class="normal">8206</span>
<span class="normal">8207</span>
<span class="normal">8208</span>
<span class="normal">8209</span>
<span class="normal">8210</span>
<span class="normal">8211</span>
<span class="normal">8212</span>
<span class="normal">8213</span>
<span class="normal">8214</span>
<span class="normal">8215</span>
<span class="normal">8216</span>
<span class="normal">8217</span>
<span class="normal">8218</span>
<span class="normal">8219</span>
<span class="normal">8220</span>
<span class="normal">8221</span>
<span class="normal">8222</span>
<span class="normal">8223</span>
<span class="normal">8224</span>
<span class="normal">8225</span>
<span class="normal">8226</span>
<span class="normal">8227</span>
<span class="normal">8228</span>
<span class="normal">8229</span>
<span class="normal">8230</span>
<span class="normal">8231</span>
<span class="normal">8232</span>
<span class="normal">8233</span>
<span class="normal">8234</span>
<span class="normal">8235</span>
<span class="normal">8236</span>
<span class="normal">8237</span>
<span class="normal">8238</span>
<span class="normal">8239</span>
<span class="normal">8240</span>
<span class="normal">8241</span>
<span class="normal">8242</span>
<span class="normal">8243</span>
<span class="normal">8244</span>
<span class="normal">8245</span>
<span class="normal">8246</span>
<span class="normal">8247</span>
<span class="normal">8248</span>
<span class="normal">8249</span>
<span class="normal">8250</span>
<span class="normal">8251</span>
<span class="normal">8252</span>
<span class="normal">8253</span>
<span class="normal">8254</span>
<span class="normal">8255</span>
<span class="normal">8256</span>
<span class="normal">8257</span>
<span class="normal">8258</span>
<span class="normal">8259</span>
<span class="normal">8260</span>
<span class="normal">8261</span>
<span class="normal">8262</span>
<span class="normal">8263</span>
<span class="normal">8264</span>
<span class="normal">8265</span>
<span class="normal">8266</span>
<span class="normal">8267</span>
<span class="normal">8268</span>
<span class="normal">8269</span>
<span class="normal">8270</span>
<span class="normal">8271</span>
<span class="normal">8272</span>
<span class="normal">8273</span>
<span class="normal">8274</span>
<span class="normal">8275</span>
<span class="normal">8276</span>
<span class="normal">8277</span>
<span class="normal">8278</span>
<span class="normal">8279</span>
<span class="normal">8280</span>
<span class="normal">8281</span>
<span class="normal">8282</span>
<span class="normal">8283</span>
<span class="normal">8284</span>
<span class="normal">8285</span>
<span class="normal">8286</span>
<span class="normal">8287</span>
<span class="normal">8288</span>
<span class="normal">8289</span>
<span class="normal">8290</span>
<span class="normal">8291</span>
<span class="normal">8292</span>
<span class="normal">8293</span>
<span class="normal">8294</span>
<span class="normal">8295</span>
<span class="normal">8296</span>
<span class="normal">8297</span>
<span class="normal">8298</span>
<span class="normal">8299</span>
<span class="normal">8300</span>
<span class="normal">8301</span>
<span class="normal">8302</span>
<span class="normal">8303</span>
<span class="normal">8304</span>
<span class="normal">8305</span>
<span class="normal">8306</span>
<span class="normal">8307</span>
<span class="normal">8308</span>
<span class="normal">8309</span>
<span class="normal">8310</span>
<span class="normal">8311</span>
<span class="normal">8312</span>
<span class="normal">8313</span>
<span class="normal">8314</span>
<span class="normal">8315</span>
<span class="normal">8316</span>
<span class="normal">8317</span>
<span class="normal">8318</span>
<span class="normal">8319</span>
<span class="normal">8320</span>
<span class="normal">8321</span>
<span class="normal">8322</span>
<span class="normal">8323</span>
<span class="normal">8324</span>
<span class="normal">8325</span>
<span class="normal">8326</span>
<span class="normal">8327</span>
<span class="normal">8328</span>
<span class="normal">8329</span>
<span class="normal">8330</span>
<span class="normal">8331</span>
<span class="normal">8332</span>
<span class="normal">8333</span>
<span class="normal">8334</span>
<span class="normal">8335</span>
<span class="normal">8336</span>
<span class="normal">8337</span>
<span class="normal">8338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_gps_trace</span><span class="p">(</span>
    <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
    <span class="n">default_features</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
    <span class="n">fig_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1550px&quot;</span><span class="p">,</span>
    <span class="n">fig_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;300px&quot;</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
    <span class="n">circle_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">48</span><span class="p">,</span>
    <span class="n">webGL</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sync_plots</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">add_layer_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">arrow_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">map_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a widget for uploading and displaying a GPS trace on a map.</span>

<span class="sd">    Args:</span>
<span class="sd">        columns (List[str], optional): The columns to display in the GPS trace popup. Defaults to None.</span>
<span class="sd">        ann_column (str): The annotation column in the GPS trace.</span>
<span class="sd">        colormap (Dict[str, str]): The colormap for the GPS trace annotations.</span>
<span class="sd">        layer_name (str): The name of the GPS trace layer.</span>
<span class="sd">        default_features (Optional[str], optional): The default features to display.</span>
<span class="sd">            The first numerical column will be used if None. Defaults to None.</span>
<span class="sd">        ann_options (Optional[List[str]], optional): The annotation options for the dropdown. Defaults to None.</span>
<span class="sd">        rows (int, optional): The number of rows to display in the table. Defaults to 11.</span>
<span class="sd">        fig_width (str, optional): The width of the figure. Defaults to &quot;1550px&quot;.</span>
<span class="sd">        fig_height (str, optional): The height of the figure. Defaults to &quot;300px&quot;.</span>
<span class="sd">        time_format (str, optional): The time format for the timestamp. Defaults to &quot;%Y-%m-%d %H:%M:%S&quot;.</span>
<span class="sd">        stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;lightgray&quot;.</span>
<span class="sd">        circle_size (int, optional): The size of the GPS trace points. Defaults to 48.</span>
<span class="sd">        webGL (bool, optional): Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</span>
<span class="sd">        download (bool, optional): Whether to generate links for downloading the edited GPS traces. Defaults to False.</span>
<span class="sd">        sync_plots (bool, optional): Whether to synchronize the zoom and pan of the plots. Defaults to False.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): The column widths for the output widget. Defaults to (9, 3).</span>
<span class="sd">        add_layer_args (Dict[str, Any], optional): Additional keyword arguments to pass to the add_gps_trace method. Defaults to None.</span>
<span class="sd">        arrow_args (Dict[str, Any], optional): Additional keyword arguments to pass to the add_arrow method. Defaults to None.</span>
<span class="sd">        map_height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the edit_gps_trace method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.VBox: The widget containing the GPS trace upload and display interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">add_layer_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">add_layer_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">arrow_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">arrow_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">uploader</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">FileUpload</span><span class="p">(</span>
        <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;.csv&quot;</span><span class="p">,</span>  <span class="c1"># Accept GeoJSON files</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Only single file upload</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Open GPS Trace&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;180px&quot;</span><span class="p">),</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">reset</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_reset_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">main_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">uploader</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span> <span class="n">output</span><span class="p">]</span>

    <span class="n">reset</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_reset_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_default_map</span><span class="p">():</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;liberty&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">map_height</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;Satellite&quot;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap.Mapnik&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_buildings</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">def</span> <span class="nf">on_upload</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">uploader</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="n">filepath</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">temp_file_path</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s2">&quot;.csv&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>

                <span class="k">if</span> <span class="s2">&quot;m&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">create_default_map</span><span class="p">()</span>

                <span class="k">if</span> <span class="s2">&quot;add_line&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">add_layer_args</span><span class="p">:</span>
                    <span class="n">add_layer_args</span><span class="p">[</span><span class="s2">&quot;add_line&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">add_gps_trace</span><span class="p">(</span>
                        <span class="n">filepath</span><span class="p">,</span>
                        <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
                        <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
                        <span class="n">ann_column</span><span class="o">=</span><span class="n">ann_column</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
                        <span class="n">stroke_color</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">add_layer_args</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">()</span>

                    <span class="n">m</span><span class="o">.</span><span class="n">add_arrow</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">arrow_args</span><span class="p">)</span>
                    <span class="n">edit_widget</span> <span class="o">=</span> <span class="n">edit_gps_trace</span><span class="p">(</span>
                        <span class="n">filepath</span><span class="p">,</span>
                        <span class="n">m</span><span class="p">,</span>
                        <span class="n">ann_column</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">,</span>
                        <span class="n">layer_name</span><span class="p">,</span>
                        <span class="n">default_features</span><span class="p">,</span>
                        <span class="n">ann_options</span><span class="p">,</span>
                        <span class="n">rows</span><span class="p">,</span>
                        <span class="n">fig_width</span><span class="p">,</span>
                        <span class="n">fig_height</span><span class="p">,</span>
                        <span class="n">time_format</span><span class="p">,</span>
                        <span class="n">stroke_color</span><span class="p">,</span>
                        <span class="n">circle_size</span><span class="p">,</span>
                        <span class="n">webGL</span><span class="p">,</span>
                        <span class="n">download</span><span class="p">,</span>
                        <span class="n">sync_plots</span><span class="p">,</span>
                        <span class="n">column_widths</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">edit_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
                <span class="n">main_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">uploader</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span>
                    <span class="n">output</span><span class="p">,</span>
                    <span class="n">edit_widget</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">uploader</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">()</span>
                <span class="n">uploader</span><span class="o">.</span><span class="n">_counter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">uploader</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_upload</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">main_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">uploader</span><span class="p">,</span> <span class="n">reset</span><span class="p">]),</span> <span class="n">output</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="leafmap.maplibregl.open_gps_traces" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">open_gps_traces</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="n">dirname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">widget_width</span><span class="o">=</span><span class="s1">&#39;500px&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;GPS Trace&#39;</span><span class="p">,</span> <span class="n">default_features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ann_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">fig_width</span><span class="o">=</span><span class="s1">&#39;1550px&#39;</span><span class="p">,</span> <span class="n">fig_height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%M%S&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">circle_size</span><span class="o">=</span><span class="mi">48</span><span class="p">,</span> <span class="n">webGL</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sync_plots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">column_widths</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">add_layer_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">arrow_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">map_height</span><span class="o">=</span><span class="s1">&#39;600px&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#leafmap.maplibregl.open_gps_traces" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Creates a widget for uploading and displaying multiple GPS traces on a map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filepaths</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of file paths to the GPS traces.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dirname</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory name for the GPS traces. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>widget_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the dropdown file path widget. Defaults to "500px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;500px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The columns to display in the GPS trace popup. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation column in the GPS trace.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colormap</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The colormap for the GPS trace annotations.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>layer_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the GPS trace layer.</p>
              </div>
            </td>
            <td>
                  <code>&#39;GPS Trace&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_features</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default features to display.
The first numerical column will be used if None. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ann_options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The annotation options for the dropdown. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rows</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of rows to display in the table. Defaults to 11.</p>
              </div>
            </td>
            <td>
                  <code>11</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_width</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the figure. Defaults to "1550px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;1550px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fig_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the figure. Defaults to "300px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;300px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time format for the timestamp. Defaults to "%Y-%m-%d %H:%M:%S".</p>
              </div>
            </td>
            <td>
                  <code>&#39;%Y%m%dT%H%M%S&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stroke_color</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stroke color of the GPS trace points. Defaults to "lightgray".</p>
              </div>
            </td>
            <td>
                  <code>&#39;lightgray&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>circle_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the GPS trace points. Defaults to 48.</p>
              </div>
            </td>
            <td>
                  <code>48</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>webGL</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to generate links for downloading the edited GPS traces. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sync_plots</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to synchronize the zoom and pan of the plots. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_widths</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column widths for the output widget. Defaults to (9, 3).</p>
              </div>
            </td>
            <td>
                  <code>(9, 3)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_layer_args</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_gps_trace method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>arrow_args</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the add_arrow method. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>map_height</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the map. Defaults to "600px".</p>
              </div>
            </td>
            <td>
                  <code>&#39;600px&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments to pass to the edit_gps_trace method.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ipywidgets.VBox">VBox</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>widgets.VBox: The widget containing the GPS traces upload and display interface.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>leafmap/maplibregl.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">8341</span>
<span class="normal">8342</span>
<span class="normal">8343</span>
<span class="normal">8344</span>
<span class="normal">8345</span>
<span class="normal">8346</span>
<span class="normal">8347</span>
<span class="normal">8348</span>
<span class="normal">8349</span>
<span class="normal">8350</span>
<span class="normal">8351</span>
<span class="normal">8352</span>
<span class="normal">8353</span>
<span class="normal">8354</span>
<span class="normal">8355</span>
<span class="normal">8356</span>
<span class="normal">8357</span>
<span class="normal">8358</span>
<span class="normal">8359</span>
<span class="normal">8360</span>
<span class="normal">8361</span>
<span class="normal">8362</span>
<span class="normal">8363</span>
<span class="normal">8364</span>
<span class="normal">8365</span>
<span class="normal">8366</span>
<span class="normal">8367</span>
<span class="normal">8368</span>
<span class="normal">8369</span>
<span class="normal">8370</span>
<span class="normal">8371</span>
<span class="normal">8372</span>
<span class="normal">8373</span>
<span class="normal">8374</span>
<span class="normal">8375</span>
<span class="normal">8376</span>
<span class="normal">8377</span>
<span class="normal">8378</span>
<span class="normal">8379</span>
<span class="normal">8380</span>
<span class="normal">8381</span>
<span class="normal">8382</span>
<span class="normal">8383</span>
<span class="normal">8384</span>
<span class="normal">8385</span>
<span class="normal">8386</span>
<span class="normal">8387</span>
<span class="normal">8388</span>
<span class="normal">8389</span>
<span class="normal">8390</span>
<span class="normal">8391</span>
<span class="normal">8392</span>
<span class="normal">8393</span>
<span class="normal">8394</span>
<span class="normal">8395</span>
<span class="normal">8396</span>
<span class="normal">8397</span>
<span class="normal">8398</span>
<span class="normal">8399</span>
<span class="normal">8400</span>
<span class="normal">8401</span>
<span class="normal">8402</span>
<span class="normal">8403</span>
<span class="normal">8404</span>
<span class="normal">8405</span>
<span class="normal">8406</span>
<span class="normal">8407</span>
<span class="normal">8408</span>
<span class="normal">8409</span>
<span class="normal">8410</span>
<span class="normal">8411</span>
<span class="normal">8412</span>
<span class="normal">8413</span>
<span class="normal">8414</span>
<span class="normal">8415</span>
<span class="normal">8416</span>
<span class="normal">8417</span>
<span class="normal">8418</span>
<span class="normal">8419</span>
<span class="normal">8420</span>
<span class="normal">8421</span>
<span class="normal">8422</span>
<span class="normal">8423</span>
<span class="normal">8424</span>
<span class="normal">8425</span>
<span class="normal">8426</span>
<span class="normal">8427</span>
<span class="normal">8428</span>
<span class="normal">8429</span>
<span class="normal">8430</span>
<span class="normal">8431</span>
<span class="normal">8432</span>
<span class="normal">8433</span>
<span class="normal">8434</span>
<span class="normal">8435</span>
<span class="normal">8436</span>
<span class="normal">8437</span>
<span class="normal">8438</span>
<span class="normal">8439</span>
<span class="normal">8440</span>
<span class="normal">8441</span>
<span class="normal">8442</span>
<span class="normal">8443</span>
<span class="normal">8444</span>
<span class="normal">8445</span>
<span class="normal">8446</span>
<span class="normal">8447</span>
<span class="normal">8448</span>
<span class="normal">8449</span>
<span class="normal">8450</span>
<span class="normal">8451</span>
<span class="normal">8452</span>
<span class="normal">8453</span>
<span class="normal">8454</span>
<span class="normal">8455</span>
<span class="normal">8456</span>
<span class="normal">8457</span>
<span class="normal">8458</span>
<span class="normal">8459</span>
<span class="normal">8460</span>
<span class="normal">8461</span>
<span class="normal">8462</span>
<span class="normal">8463</span>
<span class="normal">8464</span>
<span class="normal">8465</span>
<span class="normal">8466</span>
<span class="normal">8467</span>
<span class="normal">8468</span>
<span class="normal">8469</span>
<span class="normal">8470</span>
<span class="normal">8471</span>
<span class="normal">8472</span>
<span class="normal">8473</span>
<span class="normal">8474</span>
<span class="normal">8475</span>
<span class="normal">8476</span>
<span class="normal">8477</span>
<span class="normal">8478</span>
<span class="normal">8479</span>
<span class="normal">8480</span>
<span class="normal">8481</span>
<span class="normal">8482</span>
<span class="normal">8483</span>
<span class="normal">8484</span>
<span class="normal">8485</span>
<span class="normal">8486</span>
<span class="normal">8487</span>
<span class="normal">8488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_gps_traces</span><span class="p">(</span>
    <span class="n">filepaths</span><span class="p">,</span>
    <span class="n">dirname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">widget_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;500px&quot;</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GPS Trace&quot;</span><span class="p">,</span>
    <span class="n">default_features</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ann_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
    <span class="n">fig_width</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1550px&quot;</span><span class="p">,</span>
    <span class="n">fig_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;300px&quot;</span><span class="p">,</span>
    <span class="n">time_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
    <span class="n">circle_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">48</span><span class="p">,</span>
    <span class="n">webGL</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sync_plots</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">column_widths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">add_layer_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">arrow_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">map_height</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;600px&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a widget for uploading and displaying multiple GPS traces on a map.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepaths (List[str]): A list of file paths to the GPS traces.</span>
<span class="sd">        dirname (str, optional): The directory name for the GPS traces. Defaults to None.</span>
<span class="sd">        widget_width (str, optional): The width of the dropdown file path widget. Defaults to &quot;500px&quot;.</span>
<span class="sd">        columns (List[str], optional): The columns to display in the GPS trace popup. Defaults to None.</span>
<span class="sd">        ann_column (str): The annotation column in the GPS trace.</span>
<span class="sd">        colormap (Dict[str, str]): The colormap for the GPS trace annotations.</span>
<span class="sd">        layer_name (str): The name of the GPS trace layer.</span>
<span class="sd">        default_features (Optional[str], optional): The default features to display.</span>
<span class="sd">            The first numerical column will be used if None. Defaults to None.</span>
<span class="sd">        ann_options (Optional[List[str]], optional): The annotation options for the dropdown. Defaults to None.</span>
<span class="sd">        rows (int, optional): The number of rows to display in the table. Defaults to 11.</span>
<span class="sd">        fig_width (str, optional): The width of the figure. Defaults to &quot;1550px&quot;.</span>
<span class="sd">        fig_height (str, optional): The height of the figure. Defaults to &quot;300px&quot;.</span>
<span class="sd">        time_format (str, optional): The time format for the timestamp. Defaults to &quot;%Y-%m-%d %H:%M:%S&quot;.</span>
<span class="sd">        stroke_color (str, optional): The stroke color of the GPS trace points. Defaults to &quot;lightgray&quot;.</span>
<span class="sd">        circle_size (int, optional): The size of the GPS trace points. Defaults to 48.</span>
<span class="sd">        webGL (bool, optional): Whether to use WebGL (bqplot-gl) for rendering. Defaults to False.</span>
<span class="sd">        download (bool, optional): Whether to generate links for downloading the edited GPS traces. Defaults to False.</span>
<span class="sd">        sync_plots (bool, optional): Whether to synchronize the zoom and pan of the plots. Defaults to False.</span>
<span class="sd">        column_widths (Optional[List[int]], optional): The column widths for the output widget. Defaults to (9, 3).</span>
<span class="sd">        add_layer_args (Dict[str, Any], optional): Additional keyword arguments to pass to the add_gps_trace method. Defaults to None.</span>
<span class="sd">        arrow_args (Dict[str, Any], optional): Additional keyword arguments to pass to the add_arrow method. Defaults to None.</span>
<span class="sd">        map_height (str, optional): The height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the edit_gps_trace method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        widgets.VBox: The widget containing the GPS traces upload and display interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">main_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">add_layer_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">add_layer_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">arrow_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">arrow_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">filepaths</span>
    <span class="p">]</span>  <span class="c1"># Support pathlib.Path objects</span>
    <span class="n">filepath_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="n">filepaths</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Select file path:&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;description_width&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">},</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">widget_width</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_default_map</span><span class="p">():</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;liberty&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">map_height</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;Satellite&quot;</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap.Mapnik&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add_overture_buildings</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>

    <span class="k">def</span> <span class="nf">on_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">filepath</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">dirname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">filepath</span><span class="p">)</span>

                <span class="k">if</span> <span class="s2">&quot;m&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">create_default_map</span><span class="p">()</span>

                <span class="k">if</span> <span class="s2">&quot;add_line&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">add_layer_args</span><span class="p">:</span>
                    <span class="n">add_layer_args</span><span class="p">[</span><span class="s2">&quot;add_line&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">add_gps_trace</span><span class="p">(</span>
                        <span class="n">filepath</span><span class="p">,</span>
                        <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
                        <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
                        <span class="n">ann_column</span><span class="o">=</span><span class="n">ann_column</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
                        <span class="n">stroke_color</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">add_layer_args</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">add_layer_control</span><span class="p">()</span>

                    <span class="n">m</span><span class="o">.</span><span class="n">add_arrow</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> Line&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">arrow_args</span><span class="p">)</span>
                    <span class="n">edit_widget</span> <span class="o">=</span> <span class="n">edit_gps_trace</span><span class="p">(</span>
                        <span class="n">filepath</span><span class="p">,</span>
                        <span class="n">m</span><span class="p">,</span>
                        <span class="n">ann_column</span><span class="p">,</span>
                        <span class="n">colormap</span><span class="p">,</span>
                        <span class="n">layer_name</span><span class="p">,</span>
                        <span class="n">default_features</span><span class="p">,</span>
                        <span class="n">ann_options</span><span class="p">,</span>
                        <span class="n">rows</span><span class="p">,</span>
                        <span class="n">fig_width</span><span class="p">,</span>
                        <span class="n">fig_height</span><span class="p">,</span>
                        <span class="n">time_format</span><span class="p">,</span>
                        <span class="n">stroke_color</span><span class="p">,</span>
                        <span class="n">circle_size</span><span class="p">,</span>
                        <span class="n">webGL</span><span class="p">,</span>
                        <span class="n">download</span><span class="p">,</span>
                        <span class="n">sync_plots</span><span class="p">,</span>
                        <span class="n">column_widths</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">append_stdout</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">edit_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

            <span class="n">main_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepath_widget</span><span class="p">,</span> <span class="n">edit_widget</span><span class="p">,</span> <span class="n">output</span><span class="p">]</span>

    <span class="n">filepath_widget</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="n">main_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepath_widget</span><span class="p">,</span> <span class="n">output</span><span class="p">]</span>
    <span class="n">filepath_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">filepaths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">main_widget</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="May 7, 2024 00:45:56 UTC"><span class="timeago" datetime="2024-05-07T00:45:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="May 7, 2024 00:45:56 UTC">2024-05-07</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="May 7, 2024 00:45:56 UTC"><span class="timeago" datetime="2024-05-07T00:45:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="May 7, 2024 00:45:56 UTC">2024-05-07</span>
  </span>

    
    
    
  </aside>


  




                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 - 2024 Qiusheng Wu
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>